const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C465iOcq.js","assets/vendor-w47DzTbS.js","assets/ui-BDyfbi8X.js","assets/index-uNOOuqIB.js","assets/index-WORcn4Au.js","assets/index-CvZTcCPI.js","assets/web-Dq-99Wyb.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);import{r as n,a as r,R as s,b as i}from"./vendor-w47DzTbS.js";import{A as o,P as a,E as l,C as c,a as d,b as u,T as h,D as m,R as p,U as f,S as g,X as x,c as y,M as v,d as b,B as w,e as k,L as E,f as S,I as _,g as j,h as C,i as N,j as T,k as A,l as R,m as P}from"./ui-BDyfbi8X.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var M={exports:{}},$={},D=n,I=Symbol.for("react.element"),L=Symbol.for("react.fragment"),B=Object.prototype.hasOwnProperty,O=D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F={key:!0,ref:!0,__self:!0,__source:!0};function U(e,t,n){var r,s={},i=null,o=null;for(r in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(o=t.ref),t)B.call(t,r)&&!F.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:I,type:e,key:i,ref:o,props:s,_owner:O.current}}$.Fragment=L,$.jsx=U,$.jsxs=U,M.exports=$;var V=M.exports,H={},W=r;H.createRoot=W.createRoot,H.hydrateRoot=W.hydrateRoot;var z={};const G={ERROR:0,WARN:1,DB:2,PERF:3,INFO:4,DEBUG:5},q={level:"debug"},Y=e=>{const t=(()=>{const e=localStorage.getItem("LOG_LEVEL");if(e&&void 0!==G[e])return e;if("undefined"!=typeof process&&(null==z?void 0:z.LOG_LEVEL)){const e=String(z.LOG_LEVEL).toUpperCase();if(void 0!==G[e])return e}return q.level})();return G[e]<=G[t]};Math.max(...Object.values({ERROR:"error",WARN:"warn",INFO:"info",DEBUG:"debug",DB:"db",PERF:"perf",LOG:"log"}).map(e=>e.length));const J=[],X=e=>{const t=[];return t.push((()=>{const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`})()),t.join(" ")},K=(e,t,n,r)=>{if("DEBUG"===e)return;if(!Y("LOG"===e?"DEBUG":e))return;t(`${X()} ${n}`,...r),((e,t,n)=>{const r={level:e,ts:new Date,message:t,args:n};for(const s of J)try{s(r)}catch{}})(e,n,r)},Z=(e,...t)=>K("ERROR",console.error,e,t),Q=(e,...t)=>K("WARN",console.warn,e,t),ee=(e,...t)=>K("INFO",console.info,e,t),te=(e,...t)=>K("DEBUG",console.debug,e,t),ne=(e,...t)=>K("DB",console.info,e,t),re=(e,...t)=>K("PERF",console.info,e,t);const se=new class{constructor(e="appcache",t=!1){this.prefix=e,this.debug=t}setDebug(e){this.debug=e}prefixedKey(e){return`${this.prefix}:${e}`}get(e,t){try{const n=this.prefixedKey(e),r=localStorage.getItem(n);if(!r)return ne("ğŸ” [CACHE GET] [miss]",n),null;const s=JSON.parse(r),i=Date.now()-s.storedAtMs;return i>t?(ne("ğŸ” [CACHE GET] [stale]",n,{ageMs:i,maxAgeMs:t}),null):(ne("ğŸ” [CACHE GET] [hit]",n,{ageMs:i,maxAgeMs:t}),s.value)}catch{return ne("ğŸ” [CACHE GET] [error parsing]",e),null}}set(e,t,n){try{const r=this.prefixedKey(e),s={storedAtMs:Date.now(),value:t,hintTtlMs:n},i=JSON.stringify(s);localStorage.setItem(r,i),ne("ğŸ” [CACHE SET]",r,{bytes:i.length,hasTTL:!!n})}catch{ne("ğŸ” [CACHE SET] [failed]",e)}}remove(e){const t=this.prefixedKey(e);try{localStorage.removeItem(t),ne("ğŸ” [CACHE REMOVE]",t)}catch{ne("ğŸ” [CACHE REMOVE] [failed]",t)}}snapshot(e=!1){const t={},n=`${this.prefix}:`;try{for(let r=0;r<localStorage.length;r++){const s=localStorage.key(r)??"";if(!s.startsWith(n))continue;const i=localStorage.getItem(s)??"";try{const{storedAtMs:n,hintTtlMs:r,value:o}=JSON.parse(i);t[s]={storedAtMs:n,hintTtlMs:r,ageMs:"number"==typeof n?Date.now()-n:void 0,bytes:i.length,...e?{value:o}:{}}}catch{t[s]={parseError:!0,bytes:i.length}}}}catch{}return t}peek(e,t=400){const n=this.prefixedKey(e),r=localStorage.getItem(n);if(!r)return ne("ğŸ” [CACHE PEEK] [miss]",n),null;try{const{value:e}=JSON.parse(r),s=JSON.stringify(e),i=s.length>t?s.slice(0,t)+"â€¦(truncated)":s;return ne("ğŸ” [CACHE PEEK]",n,i),e}catch{const e=r.length>t?r.slice(0,t)+"â€¦(truncated)":r;return ne("ğŸ” [CACHE PEEK RAW]",n,e),r}}logChunks(e,t,n=8e3){let r;try{r="string"==typeof t?t:JSON.stringify(t)}catch{r=String(t)}for(let s=0;s<r.length;s+=n){const t=Math.min(s+n,r.length);ne(`    [${e}] [${s}-${t}/${r.length}]`,r.slice(s,t))}}debugDumpValuesChunked(e=8e3){const t=this.snapshot(!0);for(const[n,r]of Object.entries(t)){const t=r.value;ne("ğŸ” [CACHE ENTRY]",n,{storedAtMs:r.storedAtMs,ageMs:r.ageMs,bytes:r.bytes}),this.logChunks("ğŸ“¦ value",t,e)}}debugDump(e=!1){const t=this.snapshot(e),n=Object.keys(t);ne("ğŸ” [CACHE SNAPSHOT]",{prefix:this.prefix,count:n.length,entries:t})}clearPrefix(e){try{const t=e?`${this.prefix}:${e}`:`${this.prefix}:`;let n=0;for(let e=localStorage.length-1;e>=0;e--){const r=localStorage.key(e)??"";r.startsWith(t)&&(localStorage.removeItem(r),n++)}ne("ğŸ” [CACHE CLEAR_PREFIX]",t,{removed:n})}catch{ne("ğŸ” [CACHE CLEAR_PREFIX] [failed]",e??"")}}}("workit",!0),ie=e=>`supabase:${e}:routines`,oe=(e,t)=>`supabase:${e}:routine:${t}:exercises`,ae=(e,t)=>`supabase:${e}:routine:${t}:exercises+details`,le=(e,t)=>`supabase:${e}:rtex:${t}:sets`,ce=e=>`supabase:${e}:profile`,de=e=>`supabase:${e}:steps`,ue=e=>`supabase:${e}:bodyMeasurements`,he="https://lledulwstlcejiholstu.supabase.co",me=864e5,pe=864e5,fe=864e5,ge=36e5,xe=36e5,ye=36e5,ve=36e5,be=36e5,we=36e5,ke=36e5;var Ee=(e=>(e.CACHE_HIT="CACHE_HIT",e.FRESH_FETCH="FRESH_FETCH",e))(Ee||{});class Se{constructor(){t(this,"userToken",null),t(this,"cachedUser",null),t(this,"keyExercisesPage",(e,t)=>((e,t)=>`supabase:exercises:${e}:${t}`)(e,t)),t(this,"keyExercisesMuscleGroup",(e,t,n)=>((e,t,n)=>`supabase:exercises:muscle_group:${e}:${t}:${n}`)(e,t,n)),t(this,"keyExerciseMuscleGroups",()=>"supabase:exercises:muscle_groups"),t(this,"keyExercise",e=>`supabase:exercise:${e}`),t(this,"keyUserRoutines",e=>ie(e)),t(this,"keyRoutineExercises",(e,t)=>oe(e,t)),t(this,"keyRoutineExercisesWithDetails",(e,t)=>ae(e,t)),t(this,"keyRoutineSets",(e,t)=>le(e,t)),t(this,"keyProfile",e=>ce(e)),t(this,"keySteps",e=>de(e)),t(this,"keyBodyMeasurements",e=>ue(e))}setToken(e){const t=this.userToken,n=null!==t,r=null!==e;e!==t&&(this.cachedUser=null),this.userToken=e,r!==n&&(ne(r?"ğŸ” [DBG] Token set - Clearing cache for fresh user session":"ğŸ” [DBG] Token cleared - Clearing cache on sign out"),se.clearPrefix())}getHeaders(e=!1,t=!1,n="return=representation"){const r={apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxsZWR1bHdzdGxjZWppaG9sc3R1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NzYyNjQsImV4cCI6MjA3MDQ1MjI2NH0.c8-ZOMk76dUOhWiekUks04KFAn52F3_OOvNM28ZmjdU","Content-Type":"application/json"};return e&&this.userToken&&(r.Authorization=`Bearer ${this.userToken}`),t&&(r.Prefer=n),r}async fetchJson(e,t=!0,n="GET",r,s){const i=await fetch(e,{method:n,headers:this.getHeaders(t,!!s,s??"return=representation"),body:r?JSON.stringify(r):void 0}),o=204===i.status?"":await i.text();if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}${o?` â€” ${o}`:""}`);if(o)try{return JSON.parse(o)}catch{return o}}async getOrFetchAndCache(e,t,n,r=!0,s){const i=se.get(t,n);if(null!=i){if(ne("ğŸ” [CACHE ACCESS] Cache hit",t," TTL:",n,"ms"),s){const e=s(i);return ne("ğŸ” [CACHE ACCESS] Post-filter applied to cache hit - Original:",i.length,"Filtered:",e.length),{data:e,status:"CACHE_HIT"}}return{data:i,status:"CACHE_HIT"}}ne("ğŸ” [CACHE ACCESS] Cache miss - fetching from:",e);const o=await this.fetchJson(e,r);if(s){const e=s(o);return ne("ğŸ” [CACHE ACCESS] Post-filter applied to fresh data - Original:",o.length,"Filtered:",e.length),se.set(t,e,n),{data:e,status:"FRESH_FETCH"}}return se.set(t,o,n),{data:o,status:"FRESH_FETCH"}}async getCurrentUser(){var e;if(this.cachedUser)return this.cachedUser;const t=await fetch(`${he}/auth/v1/user`,{headers:this.getHeaders(!0)});if(!t.ok)throw new Error(`Failed to get current user: ${t.statusText}`);const n=await t.json(),r=(n&&"object"==typeof n&&"object"==typeof n.user_metadata&&null!==n.user_metadata?n.user_metadata:void 0)??(Array.isArray(null==n?void 0:n.identities)?null==(e=n.identities.find(e=>e&&"object"==typeof e.identity_data))?void 0:e.identity_data:void 0),s=r&&"object"==typeof r?r:void 0;return this.cachedUser={id:n.id,email:"string"==typeof n.email?n.email:null,user_metadata:s},this.cachedUser}async getUserId(){return(await this.getCurrentUser()).id}async refreshRoutines(e){try{const t=(new Error).stack;ne("ğŸ” [CACHE REFRESH TRIGGER] refreshRoutines called by:",t),ne("ğŸ” [CACHE REFRESH TRIGGER] User ID:",e);const n=`${he}/rest/v1/user_routines?user_id=eq.${encodeURIComponent(e)}&is_active=is.true&select=*`,r=ie(e);ne("ğŸ” [CACHE REFRESH TRIGGER] Cache key:",r),ne("ğŸ” [CACHE REFRESH TRIGGER] URL:",n);const s=await this.fetchJson(n,!0);se.set(r,s),ne("ğŸ” [CACHE REFRESH] routines",r),ne("ğŸ” [CACHE REFRESH COMPLETE] Routines refreshed, count:",s.length)}catch(t){ne("ğŸ” [CACHE REFRESH routines] skipped due to error:",t),ne("ğŸ” [CACHE REFRESH ERROR] Stack trace:",(new Error).stack)}}async refreshRoutineExercises(e,t){const n=(new Error).stack;ne("ğŸ” [CACHE REFRESH TRIGGER] refreshRoutineExercises called by:",n),ne("ğŸ” [CACHE REFRESH TRIGGER] User ID:",e,"Routine ID:",t);const r=`${he}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${t}&is_active=is.true&select=*`,s=oe(e,t);ne("ğŸ” [CACHE REFRESH TRIGGER] Cache key:",s),ne("ğŸ” [CACHE REFRESH TRIGGER] URL:",r);const i=await this.fetchJson(r,!0);se.set(s,i),ne("ğŸ” [CACHE REFRESH] routine exercises",s),ne("ğŸ” [CACHE REFRESH COMPLETE] Routine exercises refreshed, count:",i.length)}async refreshRoutineExercisesWithDetails(e,t){const n=(new Error).stack;ne("ğŸ” [CACHE REFRESH TRIGGER] refreshRoutineExercisesWithDetails called by:",n),ne("ğŸ” [CACHE REFRESH TRIGGER] User ID:",e,"Routine ID:",t);const r=`${he}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${t}&is_active=is.true&select=*,exercises(name,category)`,s=ae(e,t);ne("ğŸ” [CACHE REFRESH TRIGGER] Cache key:",s),ne("ğŸ” [CACHE REFRESH TRIGGER] URL:",r);const i=(await this.fetchJson(r,!0)).map(e=>{var t,n;return{...e,exercise_name:(null==(t=e.exercises)?void 0:t.name)||"Unknown Exercise",category:(null==(n=e.exercises)?void 0:n.category)||"Unknown"}});se.set(s,i),ne("ğŸ” [CACHE REFRESH] routine exercises+details",s),ne("ğŸ” [CACHE REFRESH COMPLETE] Routine exercises+details refreshed, count:",i.length)}async refreshRoutineSets(e,t){const n=(new Error).stack;ne("ğŸ” [CACHE REFRESH TRIGGER] refreshRoutineSets called by:",n),ne("ğŸ” [CACHE REFRESH TRIGGER] User ID:",e,"Routine Exercise ID:",t);const r=`${he}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_id=eq.${t}&is_active=eq.true&order=set_order`,s=le(e,t);ne("ğŸ” [CACHE REFRESH TRIGGER] Cache key:",s),ne("ğŸ” [CACHE REFRESH TRIGGER] URL:",r);const i=await this.fetchJson(r,!0);se.set(s,i),ne("ğŸ” [CACHE REFRESH] routine sets",s),ne("ğŸ” [CACHE REFRESH COMPLETE] Routine sets refreshed, count:",i.length)}async refreshProfile(e){const t=(new Error).stack;ne("ğŸ” [CACHE REFRESH TRIGGER] refreshProfile called by:",t),ne("ğŸ” [CACHE REFRESH TRIGGER] User ID:",e);const n=`${he}/rest/v1/profiles?user_id=eq.${e}&select=*`,r=ce(e);ne("ğŸ” [CACHE REFRESH TRIGGER] Cache key:",r),ne("ğŸ” [CACHE REFRESH TRIGGER] URL:",n);const s=await this.fetchJson(n,!0);se.set(r,s),ne("ğŸ” [CACHE REFRESH] profile",r),ne("ğŸ” [CACHE REFRESH COMPLETE] Profile refreshed, count:",s.length)}async refreshSteps(e){const t=(new Error).stack;ne("ğŸ” [CACHE REFRESH TRIGGER] refreshSteps called by:",t),ne("ğŸ” [CACHE REFRESH TRIGGER] User ID:",e);const n=`${he}/rest/v1/user_steps?user_id=eq.${e}&select=goal`,r=de(e);ne("ğŸ” [CACHE REFRESH TRIGGER] Cache key:",r),ne("ğŸ” [CACHE REFRESH TRIGGER] URL:",n);const s=await this.fetchJson(n,!0);se.set(r,s),ne("ğŸ” [CACHE REFRESH] steps",r),ne("ğŸ” [CACHE REFRESH COMPLETE] Steps refreshed, count:",s.length)}async refreshBodyMeasurements(e){const t=(new Error).stack;ne("ğŸ” [CACHE REFRESH TRIGGER] refreshBodyMeasurements called by:",t),ne("ğŸ” [CACHE REFRESH TRIGGER] User ID:",e);const n=`${he}/rest/v1/user_body_measurements?user_id=eq.${e}&select=*&order=measured_on.desc`,r=ue(e);ne("ğŸ” [CACHE REFRESH TRIGGER] Cache key:",r),ne("ğŸ” [CACHE REFRESH TRIGGER] URL:",n);const s=await this.fetchJson(n,!0);se.set(r,s),ne("ğŸ” [CACHE REFRESH] body measurements",r),ne("ğŸ” [CACHE REFRESH COMPLETE] Body measurements refreshed, count:",s.length)}}const _e="58b39a78-0284-445f-8c88-4fed2944c8be";const je={},Ce=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in je)return;je[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,n&&s.setAttribute("nonce",n),document.head.appendChild(s),t?new Promise((t,n)=>{s.addEventListener("load",t),s.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})};class Ne{constructor(e){t(this,"startTime"),t(this,"label"),this.label=e,this.startTime=performance.now()}end(){const e=performance.now(),t=e-this.startTime;return{label:this.label,duration:t,startTime:this.startTime,endTime:e}}endWithLog(){const e=this.end();return re(`â±ï¸ [TIMER] ${this.label}: ${e.duration.toFixed(0)}ms`),e}getElapsed(){return performance.now()-this.startTime}}const Te={start:e=>new Ne(e),timeSync:(e,t)=>{const n=Te.start(e);try{const e=t();return n.endWithLog(),e}catch(r){throw n.endWithLog(),r}},timeAsync:async(e,t)=>{const n=Te.start(e);try{const e=await t();return n.endWithLog(),e}catch(r){throw n.endWithLog(),r}},timeBatch:async(e,t)=>{const n=Te.start(e),r=[],s=[];for(const{name:c,operation:d}of t){const t=Te.start(`${e} - ${c}`);try{const e=await d(),n=t.end();r.push(e),s.push({name:c,duration:n.duration})}catch(l){throw t.endWithLog(),l}}const i=n.end().duration,o=i/t.length,a=`â±ï¸ [TIMER] ${e} - Total: ${i.toFixed(0)}ms, Avg: ${o.toFixed(0)}ms, Count: ${t.length}`;return re(a),r}};Te.timeSync,Te.timeAsync,Te.timeBatch;const Ae={};var Re={};const Pe=new Set(["apple","google"]),Me={google:{queryParams:{access_type:"offline",prompt:"consent"}},apple:{queryParams:{scope:"name email",scopes:"name email"}}},$e=new Set(["capacitor:","ionic:","ms-appx:","ms-appx-web:"]),De=new Set(["javascript:","vbscript:","data:"]),Ie=/^[a-z][a-z0-9+\-.]*:$/i,Le=e=>{if("string"!=typeof e)return null;const t=e.trim();return t.length>0?t:null},Be=(e,t)=>{var n;try{const t=new URL(e),r=null==(n=t.protocol)?void 0:n.toLowerCase();if(!r||!Ie.test(r))throw new Error;if(De.has(r))throw new Error;return t.hash="",t.toString()}catch{throw new Error(`${t} must be an absolute URL that uses http(s) or a custom app scheme like myapp://auth. Update it before retrying.`)}},Oe=e=>{const t=Le(e);if(t)return t;const n=(()=>{if(void 0!==import.meta){const e=Le(null==Ae?void 0:Ae.VITE_SUPABASE_OAUTH_REDIRECT);if(e)return e}if("undefined"!=typeof process){const e=Le(Re.VITE_SUPABASE_OAUTH_REDIRECT);if(e)return e}if("undefined"!=typeof globalThis){const e=Le(globalThis.VITE_SUPABASE_OAUTH_REDIRECT);if(e)return e}return null})();if(n)return Be(n,"VITE_SUPABASE_OAUTH_REDIRECT");if("undefined"==typeof window)throw new Error("Supabase OAuth needs a browser context to determine redirect_to. Set VITE_SUPABASE_OAUTH_REDIRECT to a web URL that you've whitelisted under Authentication â†’ URL Configuration in Supabase.");const{protocol:r,origin:s,pathname:i,search:o}=window.location,a=(null==r?void 0:r.toLowerCase())??"",l=`${s}${i}${o}`;try{return Be(l,"window.location")}catch(c){if($e.has(a))throw new Error("Set VITE_SUPABASE_OAUTH_REDIRECT to your app's deep link (for example capacitor://localhost/auth/callback) and whitelist it under Supabase Authentication â†’ URL Configuration so native builds can complete the OAuth hand-off.");throw c instanceof Error?c:new Error(String(c))}};class Fe extends Se{async signInWithOAuth(e,t){if("undefined"==typeof window)throw new Error("Social sign-in can only be initiated in a browser environment.");const n=e.toLowerCase();if(!Pe.has(n))throw new Error(`Unsupported OAuth provider: ${e}`);const r=window.Capacitor,s=!!r&&"function"==typeof r.isNativePlatform&&r.isNativePlatform(),i="undefined"!=typeof navigator?navigator.userAgent:"",o=/iphone/i.test(i)&&/safari/i.test(i)&&!s,a=s||o,l=a?"workouttracker://auth/callback":Oe(t),c=new URLSearchParams({provider:n,redirect_to:l}),d=Me[n];if(null==d?void 0:d.queryParams)for(const[m,p]of Object.entries(d.queryParams))"string"==typeof p&&p.length>0&&c.set(m,p);const u=`${he}/auth/v1/authorize?${c.toString()}`;if(console.log("Platform check:",{hasCapacitor:!!window.Capacitor,isNativePlatform:s,isIOSSimulator:o,shouldUseMobileFlow:a,redirectUrl:l,queryParams:(null==d?void 0:d.queryParams)??null}),a)try{const{Browser:e}=await Ce(async()=>{const{Browser:e}=await import("./index-C465iOcq.js");return{Browser:e}},__vite__mapDeps([0,1,2])),{App:t}=await Ce(async()=>{const{App:e}=await Promise.resolve().then(()=>th);return{App:e}},void 0),n=await t.addListener("appUrlOpen",async t=>{if(console.log("Deep link received:",t.url),t.url.startsWith("workouttracker://auth/callback"))try{const s=new URL(t.url).hash.substring(1),i=new URLSearchParams(s),o=i.get("access_token"),a=i.get("refresh_token"),l=i.get("error");if(l)return void console.error("OAuth error:",l);if(o){console.log("OAuth success! Access token received"),this.setToken(o);try{await e.close()}catch(r){console.warn("Failed to close browser:",r)}window.dispatchEvent(new CustomEvent("auth-success",{detail:{token:o,refreshToken:a}})),n.remove()}}catch(r){console.error("Error parsing OAuth response:",r)}});await e.open({url:u})}catch(h){console.warn("Capacitor plugins not available, falling back to window.location:",h),window.location.assign(u)}else window.location.assign(u)}async exchangeCodeForSession(e){try{const t=await fetch(`${he}/auth/v1/token?grant_type=pkce`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({code:e,code_verifier:"your-code-verifier"})});if(!t.ok)throw new Error("Failed to exchange code for session");const n=await t.json();n.access_token&&(this.setToken(n.access_token),window.dispatchEvent(new CustomEvent("auth-success",{detail:{provider:"Google",providerSlug:"google",token:n.access_token,refreshToken:n.refresh_token}})))}catch(t){throw console.error("Error exchanging code for session:",t),t}}async signUp(e,t){return Te.timeAsync(`[SUPABASE] signUp(${e})`,async()=>{var n,r;const s=await this.fetchJson(`${he}/auth/v1/signup`,!1,"POST",{email:e,password:t});if(s.error)throw new Error(s.error.message);return s.access_token||(null==(n=s.session)?void 0:n.access_token)?{token:s.access_token||s.session.access_token,refresh_token:s.refresh_token||(null==(r=s.session)?void 0:r.refresh_token)}:{needsSignIn:!0}})}async signIn(e,t){return Te.timeAsync(`[SUPABASE] signIn(${e})`,async()=>{const n=await this.fetchJson(`${he}/auth/v1/token?grant_type=password`,!1,"POST",{email:e,password:t});if(n.error)throw new Error(n.error.message);if(!n.access_token)throw new Error("No access token received");if(!n.refresh_token)throw new Error("No refresh token received");return{access_token:n.access_token,refresh_token:n.refresh_token}})}async refreshToken(e){return Te.timeAsync("[SUPABASE] refreshToken",async()=>{const t=await this.fetchJson(`${he}/auth/v1/token?grant_type=refresh_token`,!1,"POST",{refresh_token:e});if(t.error)throw new Error(t.error.message);if(!t.access_token)throw new Error("No access token received");return t.access_token})}async signOut(){return Te.timeAsync("[SUPABASE] signOut",async()=>{try{this.userToken&&await this.fetchJson(`${he}/auth/v1/logout`,!0,"POST")}catch(e){Q("Supabase logout failed, but continuing with local sign out:",e)}finally{this.setToken(null)}})}async createUserRoutine(e){return Te.timeAsync(`[SUPABASE] createUserRoutine(${e})`,async()=>{const t=await this.getUserId(),n=await this.fetchJson(`${he}/rest/v1/user_routines`,!0,"POST",{user_id:t,name:e.trim(),version:1,is_active:!0},"return=representation");return await this.refreshRoutines(t),n[0]??null})}async renameRoutine(e,t){return Te.timeAsync(`[SUPABASE] renameRoutine(${e}, ${t})`,async()=>{const n=await this.getUserId();await this.fetchJson(`${he}/rest/v1/user_routines?routine_template_id=eq.${e}`,!0,"PATCH",{name:t.trim()},"return=representation"),await this.refreshRoutines(n)})}async deleteRoutine(e){return Te.timeAsync(`[SUPABASE] deleteRoutine(${e})`,async()=>{const t=await this.getUserId();await this.fetchJson(`${he}/rest/v1/user_routines?routine_template_id=eq.${e}`,!0,"PATCH",{is_active:!1},"return=representation"),await this.refreshRoutines(t)})}async hardDeleteRoutine(e){return Te.timeAsync(`[SUPABASE] hardDeleteRoutine(${e})`,async()=>{const t=await this.getUserId(),n=`${he}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${e}&is_active=is.true&select=routine_template_exercise_id`,r=this.keyRoutineExercises(t,e);ne("ğŸ” [DELETE ROUTINE] Cache key:",r);const{data:s}=await this.getOrFetchAndCache(n,r,xe,!0);for(const{routine_template_exercise_id:e}of s)await this.hardDeleteRoutineExercise(e);await this.fetchJson(`${he}/rest/v1/user_routines?routine_template_id=eq.${e}`,!0,"DELETE"),await Promise.all([this.refreshRoutines(t),this.refreshRoutineExercises(t,e),this.refreshRoutineExercisesWithDetails(t,e)])})}async addExerciseToRoutine(e,t,n){return Te.timeAsync(`[SUPABASE] addExerciseToRoutine(${e}, ${t}, ${n})`,async()=>{const r=await this.getUserId(),s=await this.fetchJson(`${he}/rest/v1/user_routine_exercises_data`,!0,"POST",{routine_template_id:e,exercise_id:t,exercise_order:n,is_active:!0},"return=representation");return await Promise.all([this.refreshRoutineExercises(r,e),this.refreshRoutineExercisesWithDetails(r,e)]),s[0]??null})}async addExerciseSetsToRoutine(e,t,n){return Te.timeAsync(`[SUPABASE] addExerciseSetsToRoutine(${e}, ${t}, ${n.length} sets)`,async()=>{const r=await this.getUserId(),s=n.map((n,r)=>({routine_template_exercise_id:e,exercise_id:t,set_order:n.set_order??r+1,is_active:!0,planned_reps:n.reps>0?n.reps:null,planned_weight_kg:n.weight>0?n.weight:null})),i=await this.fetchJson(`${he}/rest/v1/user_routine_exercises_set_data`,!0,"POST",s,"return=representation");return await this.refreshRoutineSets(r,e),i})}async findRoutineIdForExercise(e){var t;const n=`${he}/rest/v1/user_routine_exercises_data?routine_template_exercise_id=eq.${e}&select=routine_template_id`,r=`rtex:${e}:routine`,{data:s}=await this.getOrFetchAndCache(n,r,xe,!0),i=null==(t=s[0])?void 0:t.routine_template_id;if(!i)throw new Error(`Could not find routine ID for exercise ${e}`);return i}async deleteRoutineExercise(e){return Te.timeAsync(`[SUPABASE] deleteRoutineExercise(${e})`,async()=>{const t=await this.getUserId();await this.fetchJson(`${he}/rest/v1/user_routine_exercises_data?routine_template_exercise_id=eq.${e}`,!0,"PATCH",{is_active:!1},"return=minimal"),await this.fetchJson(`${he}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_id=eq.${e}`,!0,"PATCH",{is_active:!1},"return=minimal");const n=await this.findRoutineIdForExercise(e);await Promise.all([this.refreshRoutineExercises(t,n),this.refreshRoutineExercisesWithDetails(t,n)])})}async hardDeleteRoutineExercise(e){return Te.timeAsync(`[SUPABASE] hardDeleteRoutineExercise(${e})`,async()=>{const t=await this.getUserId(),n=await this.findRoutineIdForExercise(e),r=`${he}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_id=eq.${e}&is_active=is.true&select=routine_template_exercise_set_id`,s=this.keyRoutineSets(t,e),{data:i}=await this.getOrFetchAndCache(r,s,ve,!0);for(const{routine_template_exercise_set_id:o}of i)await this.hardDeleteExerciseSet(o,e);await this.fetchJson(`${he}/rest/v1/user_routine_exercises_data?routine_template_exercise_id=eq.${e}`,!0,"DELETE"),await Promise.all([this.refreshRoutineExercises(t,n),this.refreshRoutineExercisesWithDetails(t,n)])})}async startWorkout(e){return Te.timeAsync(`[SUPABASE] startWorkout(${e})`,async()=>{const t=await this.getUserId();return(await this.fetchJson(`${he}/rest/v1/workouts`,!0,"POST",{template_id:e,started_at:(new Date).toISOString(),user_id:t},"return=representation"))[0]})}async endWorkout(e){return Te.timeAsync(`[SUPABASE] endWorkout(${e})`,async()=>{await this.fetchJson(`${he}/rest/v1/workouts?id=eq.${e}`,!0,"PATCH",{ended_at:(new Date).toISOString()},"return=minimal")})}async addWorkoutExercise(e,t,n){return Te.timeAsync(`[SUPABASE] addWorkoutExercise(${e}, ${t}, ${n})`,async()=>(await this.fetchJson(`${he}/rest/v1/workout_exercises`,!0,"POST",{workout_id:e,exercise_id:t,order_index:n},"return=representation"))[0])}async addWorkoutSet(e,t,n,r,s){return Te.timeAsync(`[SUPABASE] addWorkoutSet(${e}, ${t}, ${n}, ${r})`,async()=>(await this.fetchJson(`${he}/rest/v1/sets`,!0,"POST",{workout_exercise_id:e,set_index:t,reps:n,weight:r,completed_at:s},"return=representation"))[0])}async updateWorkoutSet(e,t){return Te.timeAsync(`[SUPABASE] updateWorkoutSet(${e})`,async()=>(await this.fetchJson(`${he}/rest/v1/sets?id=eq.${e}`,!0,"PATCH",t,"return=representation"))[0])}async updateExerciseSet(e,t,n){return Te.timeAsync(`[SUPABASE] updateExerciseSet(${e})`,async()=>{var r;const s=await this.getUserId(),i=null==(r=(await this.fetchJson(`${he}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}&select=routine_template_exercise_id`,!0))[0])?void 0:r.routine_template_exercise_id,o=await this.fetchJson(`${he}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}`,!0,"PATCH",{planned_reps:t&&t>0?t:null,planned_weight_kg:n&&n>0?n:null},"return=representation");return i&&await this.refreshRoutineSets(s,i),o[0]??null})}async updateExerciseSetOrder(e,t){return Te.timeAsync(`[SUPABASE] updateExerciseSetOrder(${e}, ${t})`,async()=>{var n;const r=await this.getUserId(),s=null==(n=(await this.fetchJson(`${he}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}&select=routine_template_exercise_id`,!0))[0])?void 0:n.routine_template_exercise_id;await this.fetchJson(`${he}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}`,!0,"PATCH",{set_order:t},"return=minimal"),s&&await this.refreshRoutineSets(r,s)})}async deleteExerciseSet(e){return Te.timeAsync(`[SUPABASE] deleteExerciseSet(${e})`,async()=>{var t;const n=await this.getUserId(),r=null==(t=(await this.fetchJson(`${he}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}&select=routine_template_exercise_id`,!0))[0])?void 0:t.routine_template_exercise_id;await this.fetchJson(`${he}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}`,!0,"PATCH",{is_active:!1},"return=minimal"),r&&await this.refreshRoutineSets(n,r)})}async hardDeleteExerciseSet(e,t){return Te.timeAsync(`[SUPABASE] hardDeleteExerciseSet(${e})`,async()=>{var n;const r=await this.getUserId();let s=t;if(!s){const t=`${he}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}&select=routine_template_exercise_id`,r=`rtexset:${e}:parent`,{data:i}=await this.getOrFetchAndCache(t,r,ve,!0);s=null==(n=i[0])?void 0:n.routine_template_exercise_id}await this.fetchJson(`${he}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}`,!0,"DELETE"),s&&await this.refreshRoutineSets(r,s)})}async upsertProfile({firstName:e,lastName:t,displayName:n,heightCm:r,weightKg:s,lengthUnit:i="cm",weightUnit:o="kg",gender:a="prefer_not_to_say",userId:l}){return Te.timeAsync(`[SUPABASE] upsertProfile(${n})`,async()=>{const c=l??await this.getUserId(),d=await this.fetchJson(`${he}/rest/v1/profiles`,!0,"POST",{user_id:c,first_name:e,last_name:t,display_name:n,height_cm:r,weight_kg:s,length_unit:i,weight_unit:o,gender:a},"resolution=merge-duplicates, return=representation");return await this.refreshProfile(c),d.length>0?d[0]:null})}async createUserStepGoal(e=1e4){return Te.timeAsync(`[SUPABASE] createUserStepGoal(${e})`,async()=>{var t;const n=await this.getUserId(),r=await this.fetchJson(`${he}/rest/v1/user_steps`,!0,"POST",{user_id:n,goal:e},"return=representation");return await this.refreshSteps(n),(null==(t=r[0])?void 0:t.goal)??e})}async upsertBodyMeasurement(e){return Te.timeAsync(`[SUPABASE] upsertBodyMeasurement(${e.measured_on})`,async()=>{const t=await this.getUserId(),n=[{...e,user_id:t}],r=await this.fetchJson(`${he}/rest/v1/user_body_measurements?on_conflict=user_id,measured_on`,!0,"POST",n,"resolution=merge-duplicates, return=representation");return await this.refreshBodyMeasurements(t),r[0]??null})}async deleteBodyMeasurement(e){return Te.timeAsync(`[SUPABASE] deleteBodyMeasurement(${e})`,async()=>{const t=await this.getUserId();await this.fetchJson(`${he}/rest/v1/user_body_measurements?user_id=eq.${t}&measured_on=eq.${e}`,!0,"DELETE"),await this.refreshBodyMeasurements(t)})}async recomputeAndSaveRoutineMuscleSummary(e){return Te.timeAsync(`[SUPABASE] recomputeAndSaveRoutineMuscleSummary(${e})`,async()=>{ne("ğŸ” DGB [MUSCLE SUMMARY] Starting recompute for routine:",e);const t=`${he}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${e}&is_active=eq.true&select=exercises(muscle_group)`;ne("ğŸ” DGB [MUSCLE SUMMARY] Fetching exercises from URL:",t);const n=await this.fetchJson(t,!0);if(ne("ğŸ” DGB [MUSCLE SUMMARY] Found exercises:",n.length),0===n.length)return ne("ğŸ” DGB [MUSCLE SUMMARY] No active exercises found, skipping recomputation"),void ne("ğŸ” DGB [MUSCLE SUMMARY] No database update or cache refresh needed");const r=new Map;n.forEach(e=>{var t;const n=((null==(t=e.exercises)?void 0:t.muscle_group)??"").trim();n&&r.set(n,(r.get(n)||0)+1)}),ne("ğŸ” DGB [MUSCLE SUMMARY] Muscle group counts:",Object.fromEntries(r));const s=Array.from(r.entries()).sort(([,e],[,t])=>t-e).slice(0,3).map(([e])=>e);ne("ğŸ” DGB [MUSCLE SUMMARY] Top 3 muscle groups:",s);const i=s.length?s.join(" â€¢ "):null;ne("ğŸ” DGB [MUSCLE SUMMARY] Final summary:",i);const o=`${he}/rest/v1/user_routines?routine_template_id=eq.${e}`;ne("ğŸ” DGB [MUSCLE SUMMARY] Patching routine with URL:",o),await this.fetchJson(o,!0,"PATCH",[{muscle_group_summary:i}],"return=representation"),ne("ğŸ” DGB [MUSCLE SUMMARY] Refreshing routines cache...");const a=await this.getUserId();ne("ğŸ” DGB [MUSCLE SUMMARY] User ID for cache refresh:",a),await this.refreshRoutines(a),ne("ğŸ” DGB [MUSCLE SUMMARY] Cache refresh completed")})}async deleteProfile(e){const t=e??await this.getUserId();await this.fetchJson(`${he}/rest/v1/profiles?user_id=eq.${t}`,!0,"DELETE"),await this.refreshProfile(t)}async logToDatabase(e,t,n=[]){return Te.timeAsync(`[SUPABASE] logToDatabase(${e})`,async()=>{try{const r=await this.getUserId(),s={level:e,message:t,args:n.length>0?JSON.stringify(n):null,timestamp:(new Date).toISOString(),user_id:r},i=`${he}/rest/v1/logger`;await this.fetchJson(i,!0,"POST",[s],"return=minimal")}catch(r){Z("Failed to log to database:",r)}})}}var Ue={};const Ve=()=>{if("undefined"!=typeof localStorage){const e=localStorage.getItem("USE_HARD_DELETE");if(null!==e)return"true"===e}if("undefined"!=typeof process&&(null==Ue?void 0:Ue.USE_HARD_DELETE)){const e=String(Ue.USE_HARD_DELETE).toLowerCase();return"true"===e||"1"===e}return!1};class He extends Fe{async deleteRoutine(e){return Ve()?this.hardDeleteRoutine(e):super.deleteRoutine(e)}async deleteRoutineExercise(e){return Ve()?this.hardDeleteRoutineExercise(e):super.deleteRoutineExercise(e)}async deleteExerciseSet(e){return Ve()?this.hardDeleteExerciseSet(e):super.deleteExerciseSet(e)}}var We;We=He,[class extends Se{async getExercises(e={}){const{limit:t,offset:n,muscleGroup:r,search:s,other:i}=e;let o=`${he}/rest/v1/exercises?select=exercise_id,name,muscle_group`;r?o+=`&muscle_group=eq.${encodeURIComponent(r)}`:i&&(o+="&or=(muscle_group.is.null,muscle_group.eq.)"),s&&(o+=`&name=ilike.*${encodeURIComponent(s)}*`),null!=t&&(o+=`&limit=${t}`),null!=n&&(o+=`&offset=${n}`);const a=t??0,l=n??0,c=r?this.keyExercisesMuscleGroup(r,a,l):i?this.keyExercisesMuscleGroup("other",a,l):this.keyExercisesPage(a,l),{data:d,status:u}=await this.getOrFetchAndCache(o,c,pe,!0);return u===Ee.FRESH_FETCH&&d.forEach(e=>{const t=this.keyExercise(e.exercise_id);se.set(t,e,me)}),d}async getMuscleGroups(){const e=`${he}/rest/v1/exercises?select=muscle_group&order=muscle_group`,{data:t}=await this.getOrFetchAndCache(e,this.keyExerciseMuscleGroups(),fe,!0),n=new Set;let r=!1;for(const i of t){const e=(i.muscle_group||"").trim();e?n.add(e):r=!0}const s=Array.from(n).sort((e,t)=>e.localeCompare(t));return r&&s.push("Other"),s}async getExercise(e){const t=`${he}/rest/v1/exercises?exercise_id=eq.${e}&select=exercise_id,name,muscle_group&limit=1`,n=this.keyExercise(e),{data:r}=await this.getOrFetchAndCache(t,n,me,!0);return(Array.isArray(r)?r[0]:r)??null}async getUserRoutines(){const e=await this.getUserId(),t=`${he}/rest/v1/user_routines?user_id=eq.${e}&is_active=eq.true&select=*&order=created_at.asc`,n=this.keyUserRoutines(e),{data:r}=await this.getOrFetchAndCache(t,n,ge,!0,e=>e.filter(e=>!0===e.is_active));return r}async getSampleRoutines(){const e=`${he}/rest/v1/user_routines?user_id=eq.${_e}&is_active=eq.true&select=*&order=created_at.asc`,t=this.keyUserRoutines(_e),{data:n}=await this.getOrFetchAndCache(e,t,ge,!0);return n}async getUserRoutineExercises(e,t){const n=t??await this.getUserId(),r=`${he}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${e}&is_active=is.true&select=*`,s=this.keyRoutineExercises(n,e),{data:i}=await this.getOrFetchAndCache(r,s,xe,!0,e=>e.filter(e=>!0===e.is_active));return i}async getUserRoutineExercisesWithDetails(e,t){const n=t??await this.getUserId(),r=`${he}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${e}&select=*,exercises(name,category)`,s=this.keyRoutineExercisesWithDetails(n,e),{data:i}=await this.getOrFetchAndCache(r,s,ye,!0,e=>e.filter(e=>!0===e.is_active));return i.map(e=>{var t,n,r;return{...e,exercise_name:(null==(t=e.exercises)?void 0:t.name)||"Unknown Exercise",category:(null==(n=e.exercises)?void 0:n.category)||"Unknown",muscle_group:(null==(r=e.exercises)?void 0:r.muscle_group)||"Unknown"}})}async getExerciseSetsForRoutine(e,t){const n=t??await this.getUserId(),r=`${he}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_id=eq.${e}&is_active=eq.true&order=set_order`,s=this.keyRoutineSets(n,e),{data:i}=await this.getOrFetchAndCache(r,s,ve,!0);return i}async getMyProfile(){const e=await this.getUserId(),t=`${he}/rest/v1/profiles?user_id=eq.${e}&select=*`,n=this.keyProfile(e),{data:r}=await this.getOrFetchAndCache(t,n,be,!0);return r[0]??null}async getBodyMeasurements(e=4){const t=await this.getUserId(),n=`${he}/rest/v1/user_body_measurements?user_id=eq.${t}&select=*&order=measured_on.desc&limit=${e}`,r=this.keyBodyMeasurements(t),{data:s}=await this.getOrFetchAndCache(n,r,ke,!0);return s}async getUserStepGoal(){var e;const t=await this.getUserId(),n=`${he}/rest/v1/user_steps?user_id=eq.${t}&select=goal`,r=this.keySteps(t),{data:s}=await this.getOrFetchAndCache(n,r,we,!0);if(s.length>0)return s[0].goal;const i=await this.fetchJson(`${he}/rest/v1/user_steps`,!0,"POST",{user_id:t,goal:1e4},"return=representation");return await this.refreshSteps(t),(null==(e=i[0])?void 0:e.goal)??1e4}}].forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(t=>{"constructor"!==t&&Object.defineProperty(We.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t)||Object.create(null))})});const ze=new He;const Ge=Array(12).fill(0),qe=({visible:e,className:t})=>s.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},s.createElement("div",{className:"sonner-spinner"},Ge.map((e,t)=>s.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),Ye=s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},s.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Je=s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},s.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Xe=s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},s.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ke=s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},s.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ze=s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},s.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let Qe=1;const et=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...r}=e,s="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:Qe++,i=this.toasts.find(e=>e.id===s),o=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(t=>t.id===s?(this.publish({...t,...e,id:s,title:n}),{...t,...e,id:s,dismissible:o,title:n}):t):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;void 0!==t.loading&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let i,o=void 0!==n;const a=r.then(async e=>{i=["resolve",e];if(s.isValidElement(e))o=!1,this.create({id:n,type:"default",message:e});else if(tt(e)&&!e.ok){o=!1;const r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,i="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,a="object"==typeof r&&!s.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:i,...a})}else if(e instanceof Error){o=!1;const r="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description,a="object"==typeof r&&!s.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:i,...a})}else if(void 0!==t.success){o=!1;const r="function"==typeof t.success?await t.success(e):t.success,i="function"==typeof t.description?await t.description(e):t.description,a="object"==typeof r&&!s.isValidElement(r)?r:{message:r};this.create({id:n,type:"success",description:i,...a})}}).catch(async e=>{if(i=["reject",e],void 0!==t.error){o=!1;const r="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description,a="object"==typeof r&&!s.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:i,...a})}}).finally(()=>{o&&(this.dismiss(n),n=void 0),null==t.finally||t.finally.call(t)}),l=()=>new Promise((e,t)=>a.then(()=>"reject"===i[0]?t(i[1]):e(i[1])).catch(t));return"string"!=typeof n&&"number"!=typeof n?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{const n=(null==t?void 0:t.id)||Qe++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},tt=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,nt=(e,t)=>{const n=(null==t?void 0:t.id)||Qe++;return et.addToast({title:e,...t,id:n}),n},rt=Object.assign(nt,{success:et.success,info:et.info,warning:et.warning,error:et.error,custom:et.custom,message:et.message,promise:et.promise,dismiss:et.dismiss,loading:et.loading},{getHistory:()=>et.toasts,getToasts:()=>et.getActiveToasts()});function st(e){return void 0!==e.label}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const it=3,ot=14;function at(...e){return e.filter(Boolean).join(" ")}const lt=e=>{var t,n,r,i,o,a,l,c,d;const{invert:u,toast:h,unstyled:m,interacting:p,setHeights:f,visibleToasts:g,heights:x,index:y,toasts:v,expanded:b,removeToast:w,defaultRichColors:k,closeButton:E,style:S,cancelButtonStyle:_,actionButtonStyle:j,className:C="",descriptionClassName:N="",duration:T,position:A,gap:R,expandByDefault:P,classNames:M,icons:$,closeButtonAriaLabel:D="Close toast"}=e,[I,L]=s.useState(null),[B,O]=s.useState(null),[F,U]=s.useState(!1),[V,H]=s.useState(!1),[W,z]=s.useState(!1),[G,q]=s.useState(!1),[Y,J]=s.useState(!1),[X,K]=s.useState(0),[Z,Q]=s.useState(0),ee=s.useRef(h.duration||T||4e3),te=s.useRef(null),ne=s.useRef(null),re=0===y,se=y+1<=g,ie=h.type,oe=!1!==h.dismissible,ae=h.className||"",le=h.descriptionClassName||"",ce=s.useMemo(()=>x.findIndex(e=>e.toastId===h.id)||0,[x,h.id]),de=s.useMemo(()=>{var e;return null!=(e=h.closeButton)?e:E},[h.closeButton,E]),ue=s.useMemo(()=>h.duration||T||4e3,[h.duration,T]),he=s.useRef(0),me=s.useRef(0),pe=s.useRef(0),fe=s.useRef(null),[ge,xe]=A.split("-"),ye=s.useMemo(()=>x.reduce((e,t,n)=>n>=ce?e:e+t.height,0),[x,ce]),ve=(()=>{const[e,t]=s.useState(document.hidden);return s.useEffect(()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),be=h.invert||u,we="loading"===ie;me.current=s.useMemo(()=>ce*R+ye,[ce,ye]),s.useEffect(()=>{ee.current=ue},[ue]),s.useEffect(()=>{U(!0)},[]),s.useEffect(()=>{const e=ne.current;if(e){const t=e.getBoundingClientRect().height;return Q(t),f(e=>[{toastId:h.id,height:t,position:h.position},...e]),()=>f(e=>e.filter(e=>e.toastId!==h.id))}},[f,h.id]),s.useLayoutEffect(()=>{if(!F)return;const e=ne.current,t=e.style.height;e.style.height="auto";const n=e.getBoundingClientRect().height;e.style.height=t,Q(n),f(e=>e.find(e=>e.toastId===h.id)?e.map(e=>e.toastId===h.id?{...e,height:n}:e):[{toastId:h.id,height:n,position:h.position},...e])},[F,h.title,h.description,f,h.id,h.jsx,h.action,h.cancel]);const ke=s.useCallback(()=>{H(!0),K(me.current),f(e=>e.filter(e=>e.toastId!==h.id)),setTimeout(()=>{w(h)},200)},[h,w,f,me]);s.useEffect(()=>{if(h.promise&&"loading"===ie||h.duration===1/0||"loading"===h.type)return;let e;return b||p||ve?(()=>{if(pe.current<he.current){const e=(new Date).getTime()-he.current;ee.current=ee.current-e}pe.current=(new Date).getTime()})():ee.current!==1/0&&(he.current=(new Date).getTime(),e=setTimeout(()=>{null==h.onAutoClose||h.onAutoClose.call(h,h),ke()},ee.current)),()=>clearTimeout(e)},[b,p,h,ie,ve,ke]),s.useEffect(()=>{h.delete&&(ke(),null==h.onDismiss||h.onDismiss.call(h,h))},[ke,h.delete]);const Ee=h.icon||(null==$?void 0:$[ie])||(e=>{switch(e){case"success":return Ye;case"info":return Xe;case"warning":return Je;case"error":return Ke;default:return null}})(ie);var Se,_e,je,Ce;return s.createElement("li",{tabIndex:0,ref:ne,className:at(C,ae,null==M?void 0:M.toast,null==h||null==(t=h.classNames)?void 0:t.toast,null==M?void 0:M.default,null==M?void 0:M[ie],null==h||null==(n=h.classNames)?void 0:n[ie]),"data-sonner-toast":"","data-rich-colors":null!=(Se=h.richColors)?Se:k,"data-styled":!Boolean(h.jsx||h.unstyled||m),"data-mounted":F,"data-promise":Boolean(h.promise),"data-swiped":Y,"data-removed":V,"data-visible":se,"data-y-position":ge,"data-x-position":xe,"data-index":y,"data-front":re,"data-swiping":W,"data-dismissible":oe,"data-type":ie,"data-invert":be,"data-swipe-out":G,"data-swipe-direction":B,"data-expanded":Boolean(b||P&&F),"data-testid":h.testId,style:{"--index":y,"--toasts-before":y,"--z-index":v.length-y,"--offset":`${V?X:me.current}px`,"--initial-height":P?"auto":`${Z}px`,...S,...h.style},onDragEnd:()=>{z(!1),L(null),fe.current=null},onPointerDown:e=>{2!==e.button&&!we&&oe&&(te.current=new Date,K(me.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(z(!0),fe.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,n;if(G||!oe)return;fe.current=null;const r=Number((null==(e=ne.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),s=Number((null==(t=ne.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),i=(new Date).getTime()-(null==(n=te.current)?void 0:n.getTime()),o="x"===I?r:s,a=Math.abs(o)/i;if(Math.abs(o)>=45||a>.11)return K(me.current),null==h.onDismiss||h.onDismiss.call(h,h),O("x"===I?r>0?"right":"left":s>0?"down":"up"),ke(),void q(!0);var l,c;null==(l=ne.current)||l.style.setProperty("--swipe-amount-x","0px"),null==(c=ne.current)||c.style.setProperty("--swipe-amount-y","0px"),J(!1),z(!1),L(null)},onPointerMove:t=>{var n,r,s;if(!fe.current||!oe)return;if((null==(n=window.getSelection())?void 0:n.toString().length)>0)return;const i=t.clientY-fe.current.y,o=t.clientX-fe.current.x;var a;const l=null!=(a=e.swipeDirections)?a:function(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}(A);!I&&(Math.abs(o)>1||Math.abs(i)>1)&&L(Math.abs(o)>Math.abs(i)?"x":"y");let c={x:0,y:0};const d=e=>1/(1.5+Math.abs(e)/20);if("y"===I){if(l.includes("top")||l.includes("bottom"))if(l.includes("top")&&i<0||l.includes("bottom")&&i>0)c.y=i;else{const e=i*d(i);c.y=Math.abs(e)<Math.abs(i)?e:i}}else if("x"===I&&(l.includes("left")||l.includes("right")))if(l.includes("left")&&o<0||l.includes("right")&&o>0)c.x=o;else{const e=o*d(o);c.x=Math.abs(e)<Math.abs(o)?e:o}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&J(!0),null==(r=ne.current)||r.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(s=ne.current)||s.style.setProperty("--swipe-amount-y",`${c.y}px`)}},de&&!h.jsx&&"loading"!==ie?s.createElement("button",{"aria-label":D,"data-disabled":we,"data-close-button":!0,onClick:we||!oe?()=>{}:()=>{ke(),null==h.onDismiss||h.onDismiss.call(h,h)},className:at(null==M?void 0:M.closeButton,null==h||null==(r=h.classNames)?void 0:r.closeButton)},null!=(_e=null==$?void 0:$.close)?_e:Ze):null,(ie||h.icon||h.promise)&&null!==h.icon&&(null!==(null==$?void 0:$[ie])||h.icon)?s.createElement("div",{"data-icon":"",className:at(null==M?void 0:M.icon,null==h||null==(i=h.classNames)?void 0:i.icon)},h.promise||"loading"===h.type&&!h.icon?h.icon||((null==$?void 0:$.loading)?s.createElement("div",{className:at(null==M?void 0:M.loader,null==h||null==(Ce=h.classNames)?void 0:Ce.loader,"sonner-loader"),"data-visible":"loading"===ie},$.loading):s.createElement(qe,{className:at(null==M?void 0:M.loader,null==h||null==(je=h.classNames)?void 0:je.loader),visible:"loading"===ie})):null,"loading"!==h.type?Ee:null):null,s.createElement("div",{"data-content":"",className:at(null==M?void 0:M.content,null==h||null==(o=h.classNames)?void 0:o.content)},s.createElement("div",{"data-title":"",className:at(null==M?void 0:M.title,null==h||null==(a=h.classNames)?void 0:a.title)},h.jsx?h.jsx:"function"==typeof h.title?h.title():h.title),h.description?s.createElement("div",{"data-description":"",className:at(N,le,null==M?void 0:M.description,null==h||null==(l=h.classNames)?void 0:l.description)},"function"==typeof h.description?h.description():h.description):null),s.isValidElement(h.cancel)?h.cancel:h.cancel&&st(h.cancel)?s.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||_,onClick:e=>{st(h.cancel)&&oe&&(null==h.cancel.onClick||h.cancel.onClick.call(h.cancel,e),ke())},className:at(null==M?void 0:M.cancelButton,null==h||null==(c=h.classNames)?void 0:c.cancelButton)},h.cancel.label):null,s.isValidElement(h.action)?h.action:h.action&&st(h.action)?s.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||j,onClick:e=>{st(h.action)&&(null==h.action.onClick||h.action.onClick.call(h.action,e),e.defaultPrevented||ke())},className:at(null==M?void 0:M.actionButton,null==h||null==(d=h.classNames)?void 0:d.actionButton)},h.action.label):null)};function ct(){if("undefined"==typeof window)return"ltr";if("undefined"==typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function dt(e,t){const n={};return[e,t].forEach((e,t)=>{const r=1===t,s=r?"--mobile-offset":"--offset",i=r?"16px":"24px";function o(e){["top","right","bottom","left"].forEach(t=>{n[`${s}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?o(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?n[`${s}-${t}`]=i:n[`${s}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):o(i)}),n}const ut=s.forwardRef(function(e,t){const{id:n,invert:r,position:o="bottom-right",hotkey:a=["altKey","KeyT"],expand:l,closeButton:c,className:d,offset:u,mobileOffset:h,theme:m="light",richColors:p,duration:f,style:g,visibleToasts:x=it,toastOptions:y,dir:v=ct(),gap:b=ot,icons:w,containerAriaLabel:k="Notifications"}=e,[E,S]=s.useState([]),_=s.useMemo(()=>n?E.filter(e=>e.toasterId===n):E.filter(e=>!e.toasterId),[E,n]),j=s.useMemo(()=>Array.from(new Set([o].concat(_.filter(e=>e.position).map(e=>e.position)))),[_,o]),[C,N]=s.useState([]),[T,A]=s.useState(!1),[R,P]=s.useState(!1),[M,$]=s.useState("system"!==m?m:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=s.useRef(null),I=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=s.useRef(null),B=s.useRef(!1),O=s.useCallback(e=>{S(t=>{var n;return(null==(n=t.find(t=>t.id===e.id))?void 0:n.delete)||et.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return s.useEffect(()=>et.subscribe(e=>{e.dismiss?requestAnimationFrame(()=>{S(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t))}):setTimeout(()=>{i.flushSync(()=>{S(t=>{const n=t.findIndex(t=>t.id===e.id);return-1!==n?[...t.slice(0,n),{...t[n],...e},...t.slice(n+1)]:[e,...t]})})})}),[E]),s.useEffect(()=>{if("system"!==m)return void $(m);if("system"===m&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),"undefined"==typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{$(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{$(e?"dark":"light")}catch(t){console.error(t)}})}},[m]),s.useEffect(()=>{E.length<=1&&A(!1)},[E]),s.useEffect(()=>{const e=e=>{var t;var n;a.every(t=>e[t]||e.code===t)&&(A(!0),null==(n=D.current)||n.focus());"Escape"!==e.code||document.activeElement!==D.current&&!(null==(t=D.current)?void 0:t.contains(document.activeElement))||A(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),s.useEffect(()=>{if(D.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,B.current=!1)}},[D.current]),s.createElement("section",{ref:t,"aria-label":`${k} ${I}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},j.map((t,n)=>{var i;const[o,a]=t.split("-");return _.length?s.createElement("ol",{key:t,dir:"auto"===v?ct():v,tabIndex:-1,ref:D,className:d,"data-sonner-toaster":!0,"data-sonner-theme":M,"data-y-position":o,"data-x-position":a,style:{"--front-toast-height":`${(null==(i=C[0])?void 0:i.height)||0}px`,"--width":"356px","--gap":`${b}px`,...g,...dt(u,h)},onBlur:e=>{B.current&&!e.currentTarget.contains(e.relatedTarget)&&(B.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||B.current||(B.current=!0,L.current=e.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{R||A(!1)},onDragEnd:()=>A(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||P(!0)},onPointerUp:()=>P(!1)},_.filter(e=>!e.position&&0===n||e.position===t).map((n,i)=>{var o,a;return s.createElement(lt,{key:n.id,icons:w,index:i,toast:n,defaultRichColors:p,duration:null!=(o=null==y?void 0:y.duration)?o:f,className:null==y?void 0:y.className,descriptionClassName:null==y?void 0:y.descriptionClassName,invert:r,visibleToasts:x,closeButton:null!=(a=null==y?void 0:y.closeButton)?a:c,interacting:R,position:t,style:null==y?void 0:y.style,unstyled:null==y?void 0:y.unstyled,classNames:null==y?void 0:y.classNames,cancelButtonStyle:null==y?void 0:y.cancelButtonStyle,actionButtonStyle:null==y?void 0:y.actionButtonStyle,closeButtonAriaLabel:null==y?void 0:y.closeButtonAriaLabel,removeToast:O,toasts:_.filter(e=>e.position==n.position),heights:C.filter(e=>e.position==n.position),setHeights:N,expandByDefault:l,gap:b,expanded:T,swipeDirections:e.swipeDirections})})):null}))}),ht=n.createContext(void 0);function mt(){const e=n.useContext(ht);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}const pt=e=>e&&e.length?e.charAt(0).toUpperCase()+e.slice(1):null,ft=(...e)=>{for(const t of e){if("string"!=typeof t)continue;const e=t.trim();if(e.length>0)return e}return null};function gt({children:e}){const[t,r]=n.useState(null),[s,i]=n.useState(null),[o,a]=n.useState(!1),l=n.useCallback((e,t)=>{r(e),t&&i(t),e?(localStorage.setItem("USER_TOKEN",e),t&&localStorage.setItem("REFRESH_TOKEN",t),ze.setToken(e)):(localStorage.removeItem("USER_TOKEN"),localStorage.removeItem("REFRESH_TOKEN"),i(null),ze.setToken(null))},[]),c=n.useCallback(async e=>{try{const t=await ze.refreshToken(e);l(t,e)}catch(t){Z("Token refresh failed on app start:",t),l(null,null)}},[l]),d=n.useCallback(async()=>{let e=null;try{e=await ze.getMyProfile()}catch(t){Z("Failed to load profile after sign-in:",t)}if(e)return!0;try{const e=await ze.getCurrentUser(),{firstName:t,lastName:n,displayName:r}=((e,t)=>{const n=(()=>{if("string"!=typeof t)return null;const[e]=t.split("@");if(!e)return null;const n=e.trim();return n.length>0?n:null})()??"New member",r=ft(null==e?void 0:e.full_name,null==e?void 0:e.name,null==e?void 0:e.display_name),s=ft(null==e?void 0:e.preferred_username,null==e?void 0:e.nickname),i=ft(null==e?void 0:e.given_name,null==e?void 0:e.first_name,r?r.split(/\s+/)[0]:null)??n,o=ft(null==e?void 0:e.family_name,null==e?void 0:e.last_name,r?r.split(/\s+/).slice(1).join(" "):null)??"",a=ft(s,r,[i,o].filter(Boolean).join(" "),n)??n;return{firstName:i,lastName:o,displayName:a}})(e.user_metadata,e.email);return await ze.upsertProfile({firstName:t,lastName:n,displayName:r}),!0}catch(t){return Z("Failed to finish profile setup after OAuth sign-in:",t),rt.error("We couldn't finish setting up your profile. Please try signing in again."),!1}},[]),u=n.useCallback(()=>{if("undefined"==typeof window)return!1;const{hash:e}=window.location;if(!e||e.length<=1)return!1;const t=new URLSearchParams(e.slice(1)),n=t.get("access_token"),r=t.get("refresh_token"),s=t.get("error_description")||t.get("error"),i=t.get("provider"),o=pt(i);if(!n&&!s)return!1;if(s){const e=((e,t)=>{if(e.toLowerCase().includes("provider is not enabled")){const e=pt(t);return e?`${e} sign-in isn't configured yet. Enable it for your Supabase project and try again.`:"This sign-in provider isn't configured yet. Enable it for your Supabase project and try again."}return e})(s,i);rt.error(e),Z("OAuth sign-in failed:",s)}else n&&(l(n,r),rt.success(o?`Signed in with ${o}`:"Signed in successfully"),d());const a=`${window.location.origin}${window.location.pathname}${window.location.search}`;return window.history.replaceState({},document.title,a),!0},[d,l]);n.useEffect(()=>{(async()=>{if(u())return void a(!0);const e=localStorage.getItem("USER_TOKEN"),t=localStorage.getItem("REFRESH_TOKEN");if(e&&t){(e=>{try{const t=1e3*JSON.parse(atob(e.split(".")[1])).iat;return Date.now()-t}catch{return 1/0}})(e)>36e5?await c(t):l(e,t)}a(!0)})()},[u,c,l]),n.useEffect(()=>{t&&d()},[d,t]);n.useEffect(()=>{if(!t||!s)return;const e=setInterval(async()=>{if("visible"===document.visibilityState)try{const e=await ze.refreshToken(s);l(e,s)}catch(e){Z("Active token refresh failed:",e),l(null,null)}},27e5);return()=>clearInterval(e)},[t,s,l]),n.useEffect(()=>{if(!t||!s)return;const e=()=>{"visible"===document.visibilityState&&(async()=>{try{const e=await ze.refreshToken(s);l(e,s)}catch(e){Z("Token refresh failed on resume:",e),l(null,null)}})()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[t,s,l]);const h=!!t;return o?V.jsx(ht.Provider,{value:{userToken:t,setUserToken:l,isAuthenticated:h,signOut:async()=>{await ze.signOut(),l(null,null)}},children:e}):V.jsx("div",{className:"bg-gradient-to-br from-[var(--soft-gray)] via-[var(--background)] to-[var(--warm-cream)]/30 flex items-center justify-center",children:V.jsx("div",{className:"text-black",children:"Loading..."})})}const xt=n.createContext(void 0);function yt({children:e}){const[t,r]=n.useState(!1),[s,i]=n.useState(5);return V.jsx(xt.Provider,{value:{hasWorkedOutToday:t,todaysWorkout:{name:"Upper Push",exercises:["Bench Press","Overhead Press","Dips","Tricep Pushdown"],estimatedTime:"60-75 min"},workoutStreak:s,completeWorkout:()=>{r(!0),i(e=>e+1)}},children:e})}async function vt(){try{const{Capacitor:t}=await Ce(async()=>{const{Capacitor:e}=await Promise.resolve().then(()=>Qu);return{Capacitor:e}},void 0),n=t.getPlatform();if("ios"!==n&&"android"!==n)return 0;const{start:r,end:s}=function(){const e=new Date;return{start:new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),end:e}}();if("ios"===n)try{const{Health:e}=await Ce(async()=>{const{Health:e}=await import("./index-uNOOuqIB.js");return{Health:e}},__vite__mapDeps([3,1,2])),t=await e.isHealthAvailable();if(!(null==t?void 0:t.available))return 0;await e.requestHealthPermissions({permissions:["READ_STEPS"]}),te("[steps] Sending to HealthKit:",{startDate:r.toISOString(),endDate:s.toISOString(),startLocal:r.toLocaleString(),endLocal:s.toLocaleString()});const n=await e.queryAggregated({startDate:r.toISOString(),endDate:s.toISOString(),dataType:"steps",bucket:"day"});te("[steps] HealthKit response:",n);const i=Array.isArray(null==n?void 0:n.aggregatedData)?n.aggregatedData:[],o=Intl.DateTimeFormat().resolvedOptions().timeZone,a=e=>new Date(e).toLocaleString("en-GB",{timeZone:o,hour12:!1});i.forEach((e,t)=>{te(`[steps] Row ${t}:`,a(e.startDate),"â†’",a(e.endDate),"Steps:",e.value,"tz:",o)});const l=i.reduce((e,t)=>e+(Number(null==t?void 0:t.value)||0),0);return Math.round(l)}catch(e){return Q("[steps] iOS Health read failed:",e),0}if("android"===n)try{const{HealthConnect:e}=await Ce(async()=>{const{HealthConnect:e}=await import("./index-WORcn4Au.js");return{HealthConnect:e}},__vite__mapDeps([4,1,2])),t=await e.checkAvailability();if("Available"!==(null==t?void 0:t.availability))return 0;const n=await e.requestHealthPermissions({read:["Steps"],write:[]});if(!(null==n?void 0:n.hasAllPermissions))return 0;const i=await e.readRecords({type:"Steps",timeRangeFilter:{type:"between",startTime:r,endTime:s}});te("[steps] Health Connect response:",i);const o=Array.isArray(null==i?void 0:i.records)?i.records:[];o.forEach((e,t)=>{te(`[steps] Record ${t}:`,"Steps:",null==e?void 0:e.count,"Time:",null==e?void 0:e.startTime)});const a=o.reduce((e,t)=>e+(Number(null==t?void 0:t.count)||0),0);return Math.round(a)}catch(e){return Q("[steps] Android Health Connect read failed:",e),0}return 0}catch(t){return Q("[steps] readTodayStepsNative fallback to 0:",t),0}}function bt(){const e="undefined"!=typeof window&&"undefined"!=typeof document?getComputedStyle(document.documentElement):null,t=t=>{var n;return(null==(n=null==e?void 0:e.getPropertyValue(t))?void 0:n.trim())||""};return{warmBrown:t("--foreground"),warmCoral:t("--primary"),accentBlue:t("--accent-blue"),trackGray:t("--ring-track-gray"),recoveryYellow:t("--recovery-yellow")}}function wt({value:e,max:t=100,label:n,unit:r="%",size:s=112,strokeWidth:i=10,decimals:o=0,trackColor:a,progressColor:l,textColor:c,primaryTextOverride:d,secondaryTextOverride:u}){const{warmBrown:h,warmCoral:m,trackGray:p}=bt(),f=a??p,g=l??m,x=c??h,y="number"==typeof e&&isFinite(e)?Math.max(0,Math.min(e,t)):null,v=(s-i)/2,b=2*Math.PI*v,w=b*(1-(null==y?0:y/t)),k=`grad-${String(n).replace(/[^a-zA-Z0-9_-]/g,"")}`;return V.jsxs("div",{className:"flex flex-col items-center select-none",role:"group","aria-label":`${n} progress`,children:[V.jsxs("svg",{width:s,height:s,viewBox:`0 0 ${s} ${s}`,className:"block",children:[V.jsx("defs",{children:V.jsxs("linearGradient",{id:k,x1:"0",y1:"0",x2:"1",y2:"1",children:[V.jsx("stop",{offset:"0%",stopColor:g}),V.jsx("stop",{offset:"100%",stopColor:g})]})}),V.jsx("circle",{cx:s/2,cy:s/2,r:v,stroke:f,strokeWidth:i,fill:"none",strokeLinecap:"round",style:{opacity:.25}}),V.jsx("circle",{cx:s/2,cy:s/2,r:v,stroke:`url(#${k})`,strokeWidth:i,fill:"none",strokeDasharray:`${b} ${b}`,strokeDashoffset:w,strokeLinecap:"round",transform:`rotate(-90 ${s/2} ${s/2})`,role:"progressbar","aria-valuemin":0,"aria-valuemax":t,"aria-valuenow":y??void 0,"aria-valuetext":d&&u?`${d} of ${u} ${r||""}`.trim():void 0}),V.jsxs("g",{transform:`translate(${s/2}, ${s/2})`,children:[V.jsx("text",{textAnchor:"middle",dominantBaseline:"central",style:{fontSize:.24*s,fontWeight:700,fill:x},children:d??(null==y?"â€”":y.toFixed(o))}),V.jsx("text",{y:.18*s,textAnchor:"middle",dominantBaseline:"hanging",style:{fontSize:.14*s,fontWeight:600,fill:x,opacity:.5},children:u??r})]})]}),V.jsx("div",{className:"mt-2 text-xs",style:{color:x,opacity:.75},children:n})]})}const kt=(e,t,n)=>Math.min(n,Math.max(t,e)),Et=e=>null==e?"â€”":Math.round(e).toLocaleString();function St({steps:e,goal:t,recoveryPercent:r,strain:s,onStepsClick:i,onRecoveryClick:o,onStrainClick:a}){const{warmBrown:l,warmCoral:c,accentBlue:d,trackGray:u,recoveryYellow:h}=bt(),m=function(){const[e,t]=n.useState(()=>"undefined"!=typeof window?window.innerWidth:390);return n.useEffect(()=>{const e=()=>t(window.innerWidth);window.addEventListener("resize",e),window.addEventListener("orientationchange",e),window.addEventListener("pageshow",e);const n=setTimeout(e,100);return()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e),window.removeEventListener("pageshow",e),clearTimeout(n)}},[]),e}(),p=n.useMemo(()=>{const e=.28*m;return Math.round(kt(e,96,140))},[m]),f=n.useMemo(()=>{const e=Math.round(p*(10/108));return kt(e,8,14)},[p]),g=[{key:"steps",onClick:i,node:V.jsx(wt,{value:(x=e,y=t,null==x||null==y||!isFinite(x)||!isFinite(y)||y<=0?null:kt(Math.round(x/y*100),0,100)),max:100,label:"Steps",unit:"%",size:p,strokeWidth:f,textColor:l,progressColor:d,trackColor:u,primaryTextOverride:Et(e),secondaryTextOverride:Et(t)})},{key:"recovery",onClick:o,node:V.jsx(wt,{value:r??null,max:100,label:"Recovery",unit:"%",size:p,strokeWidth:f,textColor:l,progressColor:h,trackColor:u})},{key:"strain",onClick:a,node:V.jsx(wt,{value:s??null,max:10,label:"Strain",unit:"",size:p,strokeWidth:f,decimals:1,textColor:l,progressColor:c,trackColor:u})}];var x,y;return V.jsxs("div",{className:"w-full",children:[V.jsx("div",{className:"flex justify-center gap-4 sm:gap-6 px-2",children:g.map(({key:e,onClick:t,node:n})=>V.jsx("button",{className:"touch-manipulation inline-flex shrink-0",onClick:t,"aria-label":`${e} progress`,children:n},e))}),V.jsx("div",{className:"mt-3 h-px bg-foreground/5"})]})}const _t={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl"};let jt=0,Ct=null;function Nt(){n.useLayoutEffect(()=>{if(jt+=1,!Ct){const e=document.documentElement;let t=0;const n=()=>{t=0;const n=window.visualViewport;if(!n)return e.style.setProperty("--kb-inset","0px"),e.style.setProperty("--keyboard-inset","0px"),void e.style.setProperty("--app-kb-inset","0px");const r=Math.max(0,window.innerHeight-n.height-(n.offsetTop||0)),s=`${Math.round(r)}px`;e.style.setProperty("--kb-inset",s),e.style.setProperty("--keyboard-inset",s),e.style.setProperty("--app-kb-inset",s)},r=()=>{t&&cancelAnimationFrame(t),t=requestAnimationFrame(n)};let s=null;(async()=>{n();try{const{Capacitor:t}=await Ce(async()=>{const{Capacitor:e}=await Promise.resolve().then(()=>Qu);return{Capacitor:e}},void 0),{Keyboard:n}=await Ce(async()=>{const{Keyboard:e}=await import("./index-CvZTcCPI.js");return{Keyboard:e}},__vite__mapDeps([5,1,2]));if(t.isNativePlatform()){const t=await n.addListener("keyboardWillShow",t=>{const n=(null==t?void 0:t.keyboardHeight)||0,r=`${Math.round(n)}px`;e.style.setProperty("--kb-inset",r),e.style.setProperty("--keyboard-inset",r),e.style.setProperty("--app-kb-inset",r)}),r=await n.addListener("keyboardWillHide",()=>{e.style.setProperty("--kb-inset","0px"),e.style.setProperty("--keyboard-inset","0px"),e.style.setProperty("--app-kb-inset","0px")});return void(s=()=>{t.remove(),r.remove()})}}catch{}window.visualViewport?(window.visualViewport.addEventListener("resize",r),window.visualViewport.addEventListener("scroll",r)):window.addEventListener("resize",r),s=()=>{window.visualViewport?(window.visualViewport.removeEventListener("resize",r),window.visualViewport.removeEventListener("scroll",r)):window.removeEventListener("resize",r)}})(),Ct=()=>{t&&cancelAnimationFrame(t),null==s||s(),e.style.removeProperty("--kb-inset"),e.style.removeProperty("--keyboard-inset"),e.style.removeProperty("--app-kb-inset"),Ct=null}}return()=>{jt-=1,jt<=0&&Ct&&Ct()}},[])}function Tt(){const[e,t]=n.useState(!1);return Nt(),n.useEffect(()=>{const e=document.documentElement,n=()=>{const n=parseInt(getComputedStyle(e).getPropertyValue("--kb-inset")||"0",10);t(n>0)};n();const r=new MutationObserver(n);r.observe(e,{attributes:!0,attributeFilter:["style"]});const s=window.visualViewport;return s?(s.addEventListener("resize",n),s.addEventListener("scroll",n)):window.addEventListener("resize",n),()=>{r.disconnect(),s?(s.removeEventListener("resize",n),s.removeEventListener("scroll",n)):window.removeEventListener("resize",n)}},[]),e}const At=(...e)=>e.filter(Boolean).join(" ");function Rt({header:e,stickyHeader:t=!1,bottomBar:r,bottomBarSticky:s=!0,hideBottomBarOnKeyboard:i=!0,showHeaderBorder:o=!0,showBottomBarBorder:a=!0,maxContent:l="md",maxContentPx:c,maxContentClassName:d,padContent:u=!0,padHeader:h=!0,padBottomBar:m=!1,keyboardInsetVarName:p="--app-kb-inset",className:f="",contentClassName:g="",scrollAreaClassName:x="",headerShellClassName:y="",bottomBarShellClassName:v="",padHeaderSafeArea:b=!1,contentGuttersPreset:w="responsive",contentBottomPaddingClassName:k="",children:E,headerInScrollArea:S=!1,onScroll:_,backgroundImageSrc:j,backgroundOverlayClassName:C,disableSafeArea:N=!1}){Nt();const T=Tt(),A=function(){const[e,t]=n.useState(!1);return n.useEffect(()=>{const e=()=>{const e=document.activeElement,n=e instanceof HTMLInputElement&&("number"===e.type||"numeric"===e.inputMode);t(n)};return document.addEventListener("focusin",e),document.addEventListener("focusout",e),e(),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}},[]),e}(),R=n.useRef(null),P=n.useRef(null),M=n.useRef(null),$=T&&A,D=$?V.jsx("div",{className:"w-full flex justify-end",children:V.jsx("button",{className:"px-3 py-2 text-black text-lg bg-transparent border-0",onClick:()=>{var e;return null==(e=document.activeElement)?void 0:e.blur()},type:"button",children:"Done"})}):!r||i&&T?null:r;n.useLayoutEffect(()=>{if(!R.current)return;const t=()=>{var t,n;const r=(null==(t=P.current)?void 0:t.offsetHeight)??0,s=(null==(n=M.current)?void 0:n.offsetHeight)??0;R.current.style.setProperty("--app-header-h",`${e?r:0}px`),R.current.style.setProperty("--app-bottom-h",`${D?s:0}px`)},n=new ResizeObserver(t);return P.current&&n.observe(P.current),M.current&&n.observe(M.current),t(),()=>n.disconnect()},[e,D]);const I="number"==typeof c?"":"none"===(L=l)?"":"responsive"===L?"max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl xl:max-w-3xl 2xl:max-w-4xl":_t[L]??"";var L;const B=At("w-full",("none"!==l||"number"==typeof c)&&"mx-auto",I,d),O=n.useMemo(()=>"number"==typeof c?{maxWidth:c}:void 0,[c]),F=`var(${p}, var(--kb-inset, var(--keyboard-inset, 0px)))`,U="responsive"===w?"px-4 py-6 sm:px-6 md:px-8 md:py-8":"compact"===w?"px-4 py-4":u?"px-4":"",H=()=>V.jsx("div",{ref:P,className:At("shrink-0",t&&"sticky top-0 z-30","bg-background",o&&"border-b border-border",y),style:{paddingTop:b?"max(env(safe-area-inset-top), 0px)":void 0},children:V.jsx("div",{className:At(B,h&&"px-4"),style:O,children:e})});return V.jsxs("div",{ref:R,className:At("fixed inset-0 flex flex-col overflow-hidden overscroll-contain bg-background",f),style:{paddingLeft:"max(env(safe-area-inset-left), 0px)",paddingRight:"max(env(safe-area-inset-right), 0px)",paddingTop:N?0:void 0,paddingBottom:N?0:void 0},children:[j&&V.jsxs("div",{className:"absolute inset-0 -z-10",children:[V.jsx("img",{src:j,alt:"",className:"w-full h-full object-cover"}),C&&V.jsx("div",{className:At("absolute inset-0",C)})]}),e&&!S?H():null,V.jsxs("div",{className:At("flex-1 min-h-0 overflow-y-auto w-full",j?"bg-transparent":"bg-background",x),onScroll:_,children:[e&&S?H():null,V.jsx("div",{className:At(B,U,k,g),style:{...O,paddingBottom:D?"var(--app-bottom-h, 0px)":N?F:`calc(env(safe-area-inset-bottom) + ${F})`},children:E})]}),D?V.jsx("div",{ref:M,className:At("shrink-0",s&&"sticky bottom-0 z-50","bg-background",a&&"border-t border-border","pointer-events-auto",v),style:$?{marginBottom:`calc(${F} - env(safe-area-inset-bottom))`}:{paddingBottom:F},children:V.jsx("div",{className:At(B,m&&"px-4 py-2"),style:O,children:D})}):null]})}function Pt(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Pt(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Mt(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Pt(e))&&(r&&(r+=" "),r+=t);return r}const $t=e=>{const t=Bt(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),Dt(n,t)||Lt(e)},getConflictingClassGroupIds:(e,t)=>{const s=n[e]||[];return t&&r[e]?[...s,...r[e]]:s}}},Dt=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),i=s?Dt(e.slice(1),s):void 0;if(i)return i;if(0===t.validators.length)return;const o=e.join("-");return null==(n=t.validators.find(({validator:e})=>e(o)))?void 0:n.classGroupId},It=/^\[(.+)\]$/,Lt=e=>{if(It.test(e)){const t=It.exec(e)[1],n=null==t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Bt=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const s in n)Ot(n[s],r,s,t);return r},Ot=(e,t,n,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:Ft(t,e)).classGroupId=n)}if("function"==typeof e)return Ut(e)?void Ot(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(([e,s])=>{Ot(s,Ft(t,e),n,r)})})},Ft=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},Ut=e=>e.isThemeGetter,Vt=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(s,i)=>{n.set(s,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(s(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):s(e,t)}}},Ht=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=e=>{const t=[];let n,r=0,s=0,i=0;for(let l=0;l<e.length;l++){let o=e[l];if(0===r&&0===s){if(":"===o){t.push(e.slice(i,l)),i=l+1;continue}if("/"===o){n=l;continue}}"["===o?r++:"]"===o?r--:"("===o?s++:")"===o&&s--}const o=0===t.length?e:e.substring(i),a=Wt(o);return{modifiers:t,hasImportantModifier:a!==o,baseClassName:a,maybePostfixModifierPosition:n&&n>i?n-i:void 0}};if(t){const e=t+":",n=r;r=t=>t.startsWith(e)?n(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(n){const e=r;r=t=>n({className:t,parseClassName:e})}return r},Wt=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,zt=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;const n=[];let r=[];return e.forEach(e=>{"["===e[0]||t[e]?(n.push(...r.sort(),e),r=[]):r.push(e)}),n.push(...r.sort()),n}},Gt=/\s+/;function qt(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Yt(e))&&(r&&(r+=" "),r+=t);return r}const Yt=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Yt(e[r]))&&(n&&(n+=" "),n+=t);return n};function Jt(e,...t){let n,r,s,i=function(a){const l=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:Vt(e.cacheSize),parseClassName:Ht(e),sortModifiers:zt(e),...$t(e)}))(l),r=n.cache.get,s=n.cache.set,i=o,o(a)};function o(e){const t=r(e);if(t)return t;const i=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],a=e.trim().split(Gt);let l="";for(let c=a.length-1;c>=0;c-=1){const e=a[c],{isExternal:t,modifiers:d,hasImportantModifier:u,baseClassName:h,maybePostfixModifierPosition:m}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let p=!!m,f=r(p?h.substring(0,m):h);if(!f){if(!p){l=e+(l.length>0?" "+l:l);continue}if(f=r(h),!f){l=e+(l.length>0?" "+l:l);continue}p=!1}const g=i(d).join(":"),x=u?g+"!":g,y=x+f;if(o.includes(y))continue;o.push(y);const v=s(f,p);for(let n=0;n<v.length;++n){const e=v[n];o.push(x+e)}l=e+(l.length>0?" "+l:l)}return l})(e,n);return s(e,i),i}return function(){return i(qt.apply(null,arguments))}}const Xt=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Kt=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Zt=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Qt=/^\d+\/\d+$/,en=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,tn=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,nn=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,rn=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,sn=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,on=e=>Qt.test(e),an=e=>!!e&&!Number.isNaN(Number(e)),ln=e=>!!e&&Number.isInteger(Number(e)),cn=e=>e.endsWith("%")&&an(e.slice(0,-1)),dn=e=>en.test(e),un=()=>!0,hn=e=>tn.test(e)&&!nn.test(e),mn=()=>!1,pn=e=>rn.test(e),fn=e=>sn.test(e),gn=e=>!yn(e)&&!Sn(e),xn=e=>Rn(e,Dn,mn),yn=e=>Kt.test(e),vn=e=>Rn(e,In,hn),bn=e=>Rn(e,Ln,an),wn=e=>Rn(e,Mn,mn),kn=e=>Rn(e,$n,fn),En=e=>Rn(e,On,pn),Sn=e=>Zt.test(e),_n=e=>Pn(e,In),jn=e=>Pn(e,Bn),Cn=e=>Pn(e,Mn),Nn=e=>Pn(e,Dn),Tn=e=>Pn(e,$n),An=e=>Pn(e,On,!0),Rn=(e,t,n)=>{const r=Kt.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},Pn=(e,t,n=!1)=>{const r=Zt.exec(e);return!!r&&(r[1]?t(r[1]):n)},Mn=e=>"position"===e||"percentage"===e,$n=e=>"image"===e||"url"===e,Dn=e=>"length"===e||"size"===e||"bg-size"===e,In=e=>"length"===e,Ln=e=>"number"===e,Bn=e=>"family-name"===e,On=e=>"shadow"===e,Fn=Jt(()=>{const e=Xt("color"),t=Xt("font"),n=Xt("text"),r=Xt("font-weight"),s=Xt("tracking"),i=Xt("leading"),o=Xt("breakpoint"),a=Xt("container"),l=Xt("spacing"),c=Xt("radius"),d=Xt("shadow"),u=Xt("inset-shadow"),h=Xt("text-shadow"),m=Xt("drop-shadow"),p=Xt("blur"),f=Xt("perspective"),g=Xt("aspect"),x=Xt("ease"),y=Xt("animate"),v=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Sn,yn],b=()=>[Sn,yn,l],w=()=>[on,"full","auto",...b()],k=()=>[ln,"none","subgrid",Sn,yn],E=()=>["auto",{span:["full",ln,Sn,yn]},ln,Sn,yn],S=()=>[ln,"auto",Sn,yn],_=()=>["auto","min","max","fr",Sn,yn],j=()=>["auto",...b()],C=()=>[on,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...b()],N=()=>[e,Sn,yn],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Cn,wn,{position:[Sn,yn]}],A=()=>["auto","cover","contain",Nn,xn,{size:[Sn,yn]}],R=()=>[cn,_n,vn],P=()=>["","none","full",c,Sn,yn],M=()=>["",an,_n,vn],$=()=>[an,cn,Cn,wn],D=()=>["","none",p,Sn,yn],I=()=>["none",an,Sn,yn],L=()=>["none",an,Sn,yn],B=()=>[an,Sn,yn],O=()=>[on,"full",...b()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[dn],breakpoint:[dn],color:[un],container:[dn],"drop-shadow":[dn],ease:["in","out","in-out"],font:[gn],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[dn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[dn],shadow:[dn],spacing:["px",an],text:[dn],"text-shadow":[dn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",on,yn,Sn,g]}],container:["container"],columns:[{columns:[an,yn,Sn,a]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[ln,"auto",Sn,yn]}],basis:[{basis:[on,"full","auto",a,...b()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[an,on,"auto","initial","none",yn]}],grow:[{grow:["",an,Sn,yn]}],shrink:[{shrink:["",an,Sn,yn]}],order:[{order:[ln,"first","last","none",Sn,yn]}],"grid-cols":[{"grid-cols":k()}],"col-start-end":[{col:E()}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":k()}],"row-start-end":[{row:E()}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":_()}],"auto-rows":[{"auto-rows":_()}],gap:[{gap:b()}],"gap-x":[{"gap-x":b()}],"gap-y":[{"gap-y":b()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:b()}],px:[{px:b()}],py:[{py:b()}],ps:[{ps:b()}],pe:[{pe:b()}],pt:[{pt:b()}],pr:[{pr:b()}],pb:[{pb:b()}],pl:[{pl:b()}],m:[{m:j()}],mx:[{mx:j()}],my:[{my:j()}],ms:[{ms:j()}],me:[{me:j()}],mt:[{mt:j()}],mr:[{mr:j()}],mb:[{mb:j()}],ml:[{ml:j()}],"space-x":[{"space-x":b()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":b()}],"space-y-reverse":["space-y-reverse"],size:[{size:C()}],w:[{w:[a,"screen",...C()]}],"min-w":[{"min-w":[a,"screen","none",...C()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...C()]}],h:[{h:["screen","lh",...C()]}],"min-h":[{"min-h":["screen","lh","none",...C()]}],"max-h":[{"max-h":["screen","lh",...C()]}],"font-size":[{text:["base",n,_n,vn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Sn,bn]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",cn,yn]}],"font-family":[{font:[jn,yn,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Sn,yn]}],"line-clamp":[{"line-clamp":[an,"none",Sn,bn]}],leading:[{leading:[i,...b()]}],"list-image":[{"list-image":["none",Sn,yn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Sn,yn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:N()}],"text-color":[{text:N()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[an,"from-font","auto",Sn,vn]}],"text-decoration-color":[{decoration:N()}],"underline-offset":[{"underline-offset":[an,"auto",Sn,yn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:b()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Sn,yn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Sn,yn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:T()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ln,Sn,yn],radial:["",Sn,yn],conic:[ln,Sn,yn]},Tn,kn]}],"bg-color":[{bg:N()}],"gradient-from-pos":[{from:R()}],"gradient-via-pos":[{via:R()}],"gradient-to-pos":[{to:R()}],"gradient-from":[{from:N()}],"gradient-via":[{via:N()}],"gradient-to":[{to:N()}],rounded:[{rounded:P()}],"rounded-s":[{"rounded-s":P()}],"rounded-e":[{"rounded-e":P()}],"rounded-t":[{"rounded-t":P()}],"rounded-r":[{"rounded-r":P()}],"rounded-b":[{"rounded-b":P()}],"rounded-l":[{"rounded-l":P()}],"rounded-ss":[{"rounded-ss":P()}],"rounded-se":[{"rounded-se":P()}],"rounded-ee":[{"rounded-ee":P()}],"rounded-es":[{"rounded-es":P()}],"rounded-tl":[{"rounded-tl":P()}],"rounded-tr":[{"rounded-tr":P()}],"rounded-br":[{"rounded-br":P()}],"rounded-bl":[{"rounded-bl":P()}],"border-w":[{border:M()}],"border-w-x":[{"border-x":M()}],"border-w-y":[{"border-y":M()}],"border-w-s":[{"border-s":M()}],"border-w-e":[{"border-e":M()}],"border-w-t":[{"border-t":M()}],"border-w-r":[{"border-r":M()}],"border-w-b":[{"border-b":M()}],"border-w-l":[{"border-l":M()}],"divide-x":[{"divide-x":M()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":M()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:N()}],"border-color-x":[{"border-x":N()}],"border-color-y":[{"border-y":N()}],"border-color-s":[{"border-s":N()}],"border-color-e":[{"border-e":N()}],"border-color-t":[{"border-t":N()}],"border-color-r":[{"border-r":N()}],"border-color-b":[{"border-b":N()}],"border-color-l":[{"border-l":N()}],"divide-color":[{divide:N()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[an,Sn,yn]}],"outline-w":[{outline:["",an,_n,vn]}],"outline-color":[{outline:N()}],shadow:[{shadow:["","none",d,An,En]}],"shadow-color":[{shadow:N()}],"inset-shadow":[{"inset-shadow":["none",u,An,En]}],"inset-shadow-color":[{"inset-shadow":N()}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:N()}],"ring-offset-w":[{"ring-offset":[an,vn]}],"ring-offset-color":[{"ring-offset":N()}],"inset-ring-w":[{"inset-ring":M()}],"inset-ring-color":[{"inset-ring":N()}],"text-shadow":[{"text-shadow":["none",h,An,En]}],"text-shadow-color":[{"text-shadow":N()}],opacity:[{opacity:[an,Sn,yn]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[an]}],"mask-image-linear-from-pos":[{"mask-linear-from":$()}],"mask-image-linear-to-pos":[{"mask-linear-to":$()}],"mask-image-linear-from-color":[{"mask-linear-from":N()}],"mask-image-linear-to-color":[{"mask-linear-to":N()}],"mask-image-t-from-pos":[{"mask-t-from":$()}],"mask-image-t-to-pos":[{"mask-t-to":$()}],"mask-image-t-from-color":[{"mask-t-from":N()}],"mask-image-t-to-color":[{"mask-t-to":N()}],"mask-image-r-from-pos":[{"mask-r-from":$()}],"mask-image-r-to-pos":[{"mask-r-to":$()}],"mask-image-r-from-color":[{"mask-r-from":N()}],"mask-image-r-to-color":[{"mask-r-to":N()}],"mask-image-b-from-pos":[{"mask-b-from":$()}],"mask-image-b-to-pos":[{"mask-b-to":$()}],"mask-image-b-from-color":[{"mask-b-from":N()}],"mask-image-b-to-color":[{"mask-b-to":N()}],"mask-image-l-from-pos":[{"mask-l-from":$()}],"mask-image-l-to-pos":[{"mask-l-to":$()}],"mask-image-l-from-color":[{"mask-l-from":N()}],"mask-image-l-to-color":[{"mask-l-to":N()}],"mask-image-x-from-pos":[{"mask-x-from":$()}],"mask-image-x-to-pos":[{"mask-x-to":$()}],"mask-image-x-from-color":[{"mask-x-from":N()}],"mask-image-x-to-color":[{"mask-x-to":N()}],"mask-image-y-from-pos":[{"mask-y-from":$()}],"mask-image-y-to-pos":[{"mask-y-to":$()}],"mask-image-y-from-color":[{"mask-y-from":N()}],"mask-image-y-to-color":[{"mask-y-to":N()}],"mask-image-radial":[{"mask-radial":[Sn,yn]}],"mask-image-radial-from-pos":[{"mask-radial-from":$()}],"mask-image-radial-to-pos":[{"mask-radial-to":$()}],"mask-image-radial-from-color":[{"mask-radial-from":N()}],"mask-image-radial-to-color":[{"mask-radial-to":N()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[an]}],"mask-image-conic-from-pos":[{"mask-conic-from":$()}],"mask-image-conic-to-pos":[{"mask-conic-to":$()}],"mask-image-conic-from-color":[{"mask-conic-from":N()}],"mask-image-conic-to-color":[{"mask-conic-to":N()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:T()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Sn,yn]}],filter:[{filter:["","none",Sn,yn]}],blur:[{blur:D()}],brightness:[{brightness:[an,Sn,yn]}],contrast:[{contrast:[an,Sn,yn]}],"drop-shadow":[{"drop-shadow":["","none",m,An,En]}],"drop-shadow-color":[{"drop-shadow":N()}],grayscale:[{grayscale:["",an,Sn,yn]}],"hue-rotate":[{"hue-rotate":[an,Sn,yn]}],invert:[{invert:["",an,Sn,yn]}],saturate:[{saturate:[an,Sn,yn]}],sepia:[{sepia:["",an,Sn,yn]}],"backdrop-filter":[{"backdrop-filter":["","none",Sn,yn]}],"backdrop-blur":[{"backdrop-blur":D()}],"backdrop-brightness":[{"backdrop-brightness":[an,Sn,yn]}],"backdrop-contrast":[{"backdrop-contrast":[an,Sn,yn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",an,Sn,yn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[an,Sn,yn]}],"backdrop-invert":[{"backdrop-invert":["",an,Sn,yn]}],"backdrop-opacity":[{"backdrop-opacity":[an,Sn,yn]}],"backdrop-saturate":[{"backdrop-saturate":[an,Sn,yn]}],"backdrop-sepia":[{"backdrop-sepia":["",an,Sn,yn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":b()}],"border-spacing-x":[{"border-spacing-x":b()}],"border-spacing-y":[{"border-spacing-y":b()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Sn,yn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[an,"initial",Sn,yn]}],ease:[{ease:["linear","initial",x,Sn,yn]}],delay:[{delay:[an,Sn,yn]}],animate:[{animate:["none",y,Sn,yn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[f,Sn,yn]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:I()}],"rotate-x":[{"rotate-x":I()}],"rotate-y":[{"rotate-y":I()}],"rotate-z":[{"rotate-z":I()}],scale:[{scale:L()}],"scale-x":[{"scale-x":L()}],"scale-y":[{"scale-y":L()}],"scale-z":[{"scale-z":L()}],"scale-3d":["scale-3d"],skew:[{skew:B()}],"skew-x":[{"skew-x":B()}],"skew-y":[{"skew-y":B()}],transform:[{transform:[Sn,yn,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:O()}],"translate-x":[{"translate-x":O()}],"translate-y":[{"translate-y":O()}],"translate-z":[{"translate-z":O()}],"translate-none":["translate-none"],accent:[{accent:N()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:N()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Sn,yn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Sn,yn]}],fill:[{fill:["none",...N()]}],"stroke-w":[{stroke:[an,_n,vn,bn]}],stroke:[{stroke:["none",...N()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function Un(...e){return Fn(Mt(e))}function Vn({onClick:e,className:t,iconSize:n=24,ariaLabel:r="Go back"}){return V.jsx("button",{onClick:e,"aria-label":r,className:Un("p-0 m-0 bg-transparent border-0 text-black",t),children:V.jsx(o,{size:n})})}const Hn={className:"p-0 m-0 bg-transparent border-0 text-black"};function Wn({title:e,subtitle:t,onBack:n,right:r,onAdd:s,sticky:i=!1,dense:o=!1,denseSmall:l=!0,showBorder:c=!1,className:d="",reserveLeftPx:u=44,reserveRightPx:h=44,padSafeArea:m=!1,contentHeightPx:p=0,titleClassName:f="",subtitleClassName:g=""}){const x=l?"compactTiny":o?"compact":"comfortable",{py:y,minH:v}={compactTiny:{py:"py-1.5",minH:"min-h-[44px]"},compact:{py:"py-2",minH:"min-h-[52px]"},comfortable:{py:"py-3",minH:"min-h-[64px]"}}[x],b=0!==p,w=Mt(i&&"sticky top-0 z-30","relative w-full bg-background",m&&"pt-safe",c&&"border-b border-border",d),k=Mt("relative flex items-center w-full",!b&&v,!b&&y),E=`calc(100% - ${u+h}px)`;return V.jsx("header",{className:w,children:V.jsxs("div",{className:k,style:b?{height:p}:void 0,children:[V.jsx("div",{className:"shrink-0 flex items-center",style:{width:u},children:n?V.jsx(Vn,{onClick:n,...Hn,iconSize:28}):null}),V.jsxs("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center m-0 pt-2 pb-2",style:{maxWidth:E},children:[V.jsx("h1",{className:Mt("font-medium leading-1.5 text-black truncate text-[clamp(16px,4.2vw,28px)]",f),children:e}),t?V.jsx("p",{className:Mt("mt-1",g??"text-xs text-black"),children:t}):null]}),V.jsx("div",{className:"ml-auto shrink-0 flex items-center justify-end",style:{width:h},children:r??(s?V.jsx("button",{onClick:s,"aria-label":"Add",...Hn,children:V.jsx(a,{size:28})}):null)})]})})}const zn={none:"p-0",xs:"p-2",sm:"p-3",md:"p-4",lg:"p-6"},Gn={none:"rounded-none",sm:"rounded-md",md:"rounded-lg",lg:"rounded-xl",xl:"rounded-2xl","2xl":"rounded-2xl"},qn={none:"shadow-none",sm:"shadow-sm",md:"shadow-md"},Yn={transparent:"bg-transparent",card:"bg-card",muted:"bg-soft-gray/30",translucent:"bg-card/80 backdrop-blur-sm"},Jn={none:"",top:"border-t border-border",bottom:"border-b border-border",both:"border-y border-border"},Xn={plain:"bg-transparent shadow-none rounded-none",card:"bg-card shadow-sm rounded-2xl",panel:"bg-card shadow-md rounded-2xl border border-border",translucent:"bg-card/80 backdrop-blur-sm shadow-sm rounded-2xl",muted:"bg-soft-gray/30 rounded-2xl shadow-none"};function Kn({title:e,subtitle:t,actions:r,padding:s="md",radius:i="2xl",shadow:o="none",bg:a="transparent",divider:l="none",variant:c="plain",bleedX:d=!1,loading:u=!1,loadingBehavior:h="overlay",skeleton:m,className:p="",as:f,children:g,...x}){const y=f||"section",v=n.useId(),b=["w-full relative",c?Xn[c]:"",Yn[a],Gn[i],qn[o],zn[s],Jn[l],d?"-mx-4 sm:mx-0":"",p].filter(Boolean).join(" "),w=e||r||t,k=u&&"replace"===h?m??V.jsxs("div",{className:"animate-pulse",children:[w&&V.jsxs("div",{className:"mb-3",children:[V.jsx("div",{className:"h-4 w-1/3 bg-foreground/10 rounded"}),V.jsx("div",{className:"mt-2 h-3 w-1/2 bg-foreground/5 rounded"})]}),V.jsx("div",{className:"h-24 bg-foreground/5 rounded"})]}):g;return V.jsxs(y,{className:b,"aria-labelledby":e?v:void 0,"aria-busy":u||void 0,...x,children:[w&&V.jsxs("div",{className:"mb-3 flex items-start gap-3",children:[V.jsxs("div",{className:"min-w-0 flex-1",children:[e?V.jsx("h2",{id:v,className:"font-medium text-black truncate",children:e}):null,t?V.jsx("p",{className:"text-sm text-black mt-0.5 truncate",children:t}):null]}),r?V.jsx("div",{className:"shrink-0",children:r}):null]}),k,u&&"overlay"===h&&V.jsx("div",{className:"absolute inset-0 rounded-inherit bg-card/60 backdrop-blur-[2px] grid place-items-center pointer-events-none",children:V.jsxs("div",{className:"flex items-center gap-2 text-black",children:[V.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-warm-coral border-t-transparent rounded-full"}),V.jsx("span",{className:"text-sm",children:"Loadingâ€¦"})]})})]})}const Zn=e=>{switch(e){case"xss":return"var(--space-xss, 8px)";case"xs":return"var(--space-xs, 12px)";case"sm":return"var(--space-sm, 16px)";case"md":return"var(--space-md, 22px)";case"lg":return"var(--space-lg, 28px)";case"xl":return"var(--space-xl, 40px)";case"fluid":return"var(--space-fluid, 20px)"}};function Qn({y:e,x:t,as:n,className:r="",...s}){const i=n||"div",o={...e?{height:Zn(e)}:null,...t?{width:Zn(t)}:null},a=["shrink-0",r].filter(Boolean).join(" ");return V.jsx(i,{"aria-hidden":!0,className:a,style:o,...s})}const er=e=>{switch(e){case"xss":return"var(--space-xss, 8px)";case"xs":return"var(--space-xs, 12px)";case"sm":return"var(--space-sm, 16px)";case"md":return"var(--space-md, 22px)";case"lg":return"var(--space-lg, 28px)";case"xl":return"var(--space-xl, 40px)";case"fluid":return"var(--space-fluid, 20px)"}},tr={start:"items-start",center:"items-center",end:"items-end",stretch:"items-stretch",baseline:"items-baseline"},nr={start:"justify-start",center:"justify-center",end:"justify-end",between:"justify-between",around:"justify-around",evenly:"justify-evenly"};function rr({direction:e="y",gap:t="sm",gapMode:r="gap",wrap:s=!1,align:i="stretch",justify:o="start",as:a,className:l="",children:c,...d}){const u=a||"div",h=["flex","y"===e?"flex-col":"flex-row",s&&"flex-wrap",tr[i],nr[o],l].filter(Boolean).join(" ");if("gap"===r)return V.jsx(u,{className:h,style:{gap:er(t)},...d,children:c});const m=n.Children.toArray(c),p=m.length<=1?m:m.flatMap((n,r)=>0===r?[n]:["y"===e?V.jsx(Qn,{y:t},`s-${r}`):V.jsx(Qn,{x:t},`s-${r}`),n]);return V.jsx(u,{className:h,...d,children:p})}const sr={accent:{text:"text-black",border:"border-warm-coral",bgSoft:"bg-warm-coral/14",bgHover:"hover:bg-warm-coral/12"},sage:{text:"text-black",border:"border-[var(--warm-sage)]",bgSoft:"bg-[var(--warm-sage)]/14",bgHover:"hover:bg-[var(--warm-sage)]/12"},brown:{text:"text-black",border:"border-black",bgSoft:"bg-black/10",bgHover:"hover:bg-black/8"}};function ir({value:e,onChange:t,options:n,size:r="sm",variant:s="direct",tone:i="accent",className:o}){const a="sm"===r?{pad:"px-3 py-1.5",text:"text-[13px]"}:{pad:"px-4 py-2",text:"text-sm"},l=sr[i];return V.jsx("div",{role:"tablist","aria-label":"Segmented toggle",className:Mt("inline-flex items-center rounded-lg border border-border bg-card/70 backdrop-blur-sm p-0.5 gap-1",o),children:n.map(n=>{const r=n.value===e,i=Mt(a.pad,a.text,"font-medium border",l.bgSoft,l.border,l.text),o=Mt(a.pad,a.text,"border border-transparent","text-black","hover:text-black",l.bgHover),c=Mt(a.pad,a.text,"font-medium text-black",l.border,"bg-primary"),d=Mt(a.pad,a.text,"text-black","hover:text-black"),u="direct"===s?r?i:o:r?c:d;return V.jsx("button",{role:"tab","aria-selected":r,className:Mt("relative isolate rounded-md transition-colors select-none focus:outline-none focus-visible:ring-2 focus-visible:ring-black/20",u),onClick:()=>t(n.value),children:n.label},String(n.value))})})}const or=5,ar=e=>{const t=(e??"").toString().trim();return t?/^(unknown|undefined|null|n\/a)$/i.test(t)?"":t:""};async function lr(e,t={}){const{concurrency:n=or,timer:r=Te,userIdOverride:s}=t,i=r.start("routineLoader - load routine exercises");try{const t=r.start("routineLoader - fetch routine exercises"),i=await ze.getUserRoutineExercisesWithDetails(e,s);t.endWithLog();const o=r.start("routineLoader - fetch exercise meta"),a=new Map;await Promise.all(i.map(async e=>{const t=!!ar(e.exercise_name),n=!!ar(e.muscle_group);if(!t||!n)try{const t=await ze.getExercise(e.exercise_id);t&&a.set(e.exercise_id,t)}catch(r){Q("Failed to fetch exercise meta",e.exercise_id,r)}})),o.endWithLog();const l=[];for(let e=0;e<i.length;e+=n)l.push(i.slice(e,e+n));const c=[];for(const e of l){const t=await Promise.all(e.map(e=>ze.getExerciseSetsForRoutine(e.routine_template_exercise_id,s).then(e=>e.sort((e,t)=>(e.set_order||0)-(t.set_order||0)).map(e=>({id:e.routine_template_exercise_set_id,set_order:e.set_order??0,reps:String(e.planned_reps??"0"),weight:String(e.planned_weight_kg??"0")}))).catch(t=>(Q("Failed to fetch sets for",e.routine_template_exercise_id,t),[]))));e.forEach((e,n)=>{const r=ar(e.exercise_name),s=ar(e.muscle_group),i=r&&s?void 0:a.get(e.exercise_id),o=r||ar(null==i?void 0:i.name),l=s||ar(null==i?void 0:i.muscle_group);c.push({templateId:e.routine_template_exercise_id,exerciseId:e.exercise_id,name:o,muscle_group:l||void 0,sets:t[n]})})}return c}finally{i.endWithLog()}}const cr=e=>"number"==typeof e?`${e}px`:e,dr=(e,t)=>{if(void 0===e&&void 0===t)return;const n=void 0!==e?cr(e):void 0,r=void 0!==t?cr(t):void 0;if(!r||"0"===r||"0px"===r)return n;if(!n||"0"===n||"0px"===n)return r;return"string"==typeof n&&["auto","fit-content","max-content","min-content"].includes(n)?n:`calc(${n} + ${r})`};function ur({actions:e,onOpenChange:t,backdropWidth:r,backdropWidthOffset:s,backdropHeight:i,backdropHeightOffset:o,backdropFadeDuration:l=400}){const[c,d]=n.useState(!1),[u,h]=n.useState(!1),m=n.useRef(null),[p,f]=n.useState({width:0,height:0});n.useLayoutEffect(()=>{if(!c||!m.current)return;const e=()=>{const e=m.current;if(!e)return;const t=e.getBoundingClientRect();f({width:t.width,height:t.height})};let t=null;const n=()=>{null!==t&&cancelAnimationFrame(t),t=window.requestAnimationFrame(()=>{e(),t=null})};e();const r="undefined"!=typeof ResizeObserver?new ResizeObserver(()=>n()):null,s=m.current;r&&s&&r.observe(s);const i=()=>n();return window.addEventListener("resize",i),()=>{r&&s&&(r.unobserve(s),r.disconnect()),window.removeEventListener("resize",i),null!==t&&cancelAnimationFrame(t)}},[c]);const g=void 0===r?p.width>0?p.width:void 0:r,x=void 0===i?p.height>0?p.height:void 0:i,y=dr(g,s),v=dr(x,o);n.useEffect(()=>{let e;return c?h(!0):u&&(e=setTimeout(()=>h(!1),l)),()=>{e&&clearTimeout(e)}},[c,u,l]);return V.jsx("div",{className:"fixed right-4 bottom-20 z-40",children:V.jsxs("div",{className:"flex flex-col items-end "+(c?"gap-4":""),children:[V.jsxs("div",{ref:m,className:"relative",children:[u&&V.jsx("div",{className:"pointer-events-none absolute right-0 bottom-0 translate-x-6 rounded-[36px] bg-white/90 shadow-xl blur-lg transition-all ease-out -z-10 transform "+(c?"opacity-100 scale-100":"opacity-0 scale-95"),style:{width:y,height:v,transitionDuration:`${l}ms`}}),c&&V.jsx("div",{className:"flex flex-col items-end gap-4 z-10",children:e.map(e=>V.jsxs("button",{onClick:()=>{d(!1),null==t||t(!1),e.onPress()},className:"flex items-center gap-3",children:[V.jsx("span",{className:"uppercase whitespace-nowrap text-black text-xl font-bold tracking-wide",style:{textShadow:"0 2px 2px rgba(0,0,0,0.3)"},children:e.label}),e.icon&&V.jsx("span",{className:"w-12 h-12 rounded-full bg-primary text-black shadow flex items-center justify-center",children:e.icon})]},e.label))})]}),V.jsx("button",{onClick:()=>{d(e=>{const n=!e;return null==t||t(n),n})},"aria-label":"Speed dial","aria-expanded":c,className:"\n            relative z-20 w-16 h-16 rounded-full bg-primary text-black\n            shadow-lg flex items-center justify-center\n            transition-transform\n          ",children:V.jsx(a,{className:"w-6 h-6 transition-transform "+(c?"rotate-45":"")})})]})})}function hr({children:e,variant:t="primary",size:n="md",className:r,...s}){return V.jsx("button",{className:Un({primary:"btn-tactile bg-primary hover:bg-primary-hover text-black",secondary:"btn-tactile bg-warm-cream hover:bg-warm-cream/90 text-black",sage:"btn-tactile bg-warm-sage hover:bg-warm-sage/90 text-black btn-tactile-sage",peach:"btn-tactile bg-warm-peach hover:bg-warm-peach/90 text-black",mint:"btn-tactile bg-warm-mint hover:bg-warm-mint/90 text-black",ghost:"bg-transparent hover:bg-transparent text-black shadow-none hover:shadow-none active:shadow-none rounded-none transition-none hover:translate-y-0 active:translate-y-0"}[t],{sm:"px-3 py-2 text-sm",md:"px-4 py-3",lg:"px-6 py-4 text-lg"}[n],r),...s,children:e})}function mr({as:e="div",leading:t,leadingClassName:n="w-12 h-12 rounded-xl bg-black/10 flex items-center justify-center",primary:r,primaryClassName:s="text-base font-semibold text-black",secondary:i,secondaryClassName:o="text-sm text-black",tertiary:a,tertiaryClassName:d="text-sm text-black",trailing:u,rightIcon:h,rightIconRotated:m=!1,onRightIconClick:p,className:f="",...g}){const x=!!i||!!a?"py-4":"py-3",y="button"===e?"w-full text-left focus:outline-none":"",v="button"===e?"button":"div";return V.jsxs(v,{className:`flex items-center gap-3 ${x} ${y} ${f}`,...g,children:[t&&V.jsx("div",{className:`shrink-0 ${n}`,children:t}),V.jsxs("div",{className:"flex-1 min-w-0",children:[V.jsx("div",{className:`${s} truncate`,children:r}),i&&V.jsx("div",{className:`${o} truncate`,children:i}),a&&V.jsx("div",{className:`${d} truncate`,children:a})]}),u,h&&V.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),null==p||p(e)},className:"ml-2 text-black",children:"kebab"===h?V.jsx(l,{size:18}):V.jsx(c,{size:18,className:m?"transform rotate-180":""})})]})}var pr=(e=>(e.Editable="editable",e.ReadOnly="readonly",e))(pr||{});var fr=(e=>(e.My="my",e.Sample="sample",e))(fr||{});const gr=[{bg:"bg-soft-gray",iconBg:"bg-warm-coral",emoji:"ğŸ‹ï¸"},{bg:"bg-[var(--warm-cream)]",iconBg:"bg-black",emoji:"ğŸƒ"},{bg:"bg-soft-gray",iconBg:"bg-[var(--warm-sage)]",emoji:"ğŸ§˜"},{bg:"bg-[var(--warm-cream)]",iconBg:"bg-warm-coral",emoji:"ğŸ¤¸"},{bg:"bg-soft-gray",iconBg:"bg-black",emoji:"ğŸ”¥"}];function xr({routines:e,routinesError:t,isLoading:n,reloadRoutines:r,view:s,exerciseCounts:i,loadingCounts:o,canEdit:a,onSelectRoutine:l,openActions:c}){return V.jsx(Kn,{variant:"plain",padding:"none",className:"space-y-3",loading:n,loadingBehavior:"replace",children:!n&&V.jsx(V.Fragment,{children:t?V.jsx(Kn,{variant:"card",title:"Error Loading Routines",actions:V.jsx(hr,{onClick:r,variant:"secondary",className:"px-4 py-2 text-sm rounded-xl border-0 font-medium",children:"Try Again"}),children:V.jsxs("div",{className:"text-center py-4",children:[V.jsx("div",{className:"w-12 h-12 mx-auto mb-3 bg-destructive-light rounded-full flex items-center justify-center",children:V.jsx(d,{className:"w-5 h-5 text-black"})}),V.jsx("p",{className:"text-black text-sm",children:t})]})}):0===e.length?V.jsx(Kn,{variant:"card",className:"text-center",children:V.jsx("p",{className:"text-black text-sm",children:s===fr.My?"Start by adding a new routine":"No sample routines found"})}):V.jsx("div",{className:"space-y-3",children:e.map((e,t)=>{var n;const r=gr[t%gr.length],d=(null==(n=e.muscle_group_summary)?void 0:n.trim())||"â€”",m=i[e.routine_template_id]??0,p=m>0?10*m:null,f=s===fr.My?pr.Editable:pr.ReadOnly;return V.jsx("button",{onClick:()=>l(e.routine_template_id,e.name,f),className:"w-full rounded-2xl border border-border card-modern shadow-xl hover:shadow-xl transition-all text-left",style:{border:"2px solid var(--border)"},children:V.jsx(mr,{leading:V.jsx("div",{className:`w-8 h-8 ${r.iconBg} rounded-lg grid place-items-center text-black text-lg`,children:V.jsx("span",{children:r.emoji})}),leadingClassName:`w-12 h-12 rounded-xl flex items-center justify-center ${r.bg}`,primary:e.name,secondary:d,tertiary:V.jsxs("div",{className:"mt-2 flex items-center gap-4 text-black",children:[V.jsxs("span",{className:"inline-flex items-center gap-1",children:[V.jsx(u,{size:14}),o?"â€”":null!==p?`${p} min`:"â€”"]}),V.jsxs("span",{className:"inline-flex items-center gap-1",children:[V.jsx(h,{size:14}),o?"â€”":`${m} exercise${1===m?"":"s"}`]})]}),primaryClassName:"font-medium text-black text-[clamp(16px,4.5vw,19px)]",secondaryClassName:"text-[clamp(11px,3.2vw,12px)] text-black",tertiaryClassName:"text-[clamp(11px,3.2vw,12px)]",className:"p-4",rightIcon:a?"kebab":void 0,onRightIconClick:t=>c(e,t)})},e.routine_template_id)})})})})}const yr=(...e)=>e.filter(Boolean).join(" ");function vr({open:e,onClose:t,header:n,footer:r,children:s,maxWidthClassName:i="max-w-md",className:o="",innerClassName:a="",zIndex:l=60,closeOnBackdrop:c=!0,fullWidth:d=!1}){if(!e)return null;Nt();const u="var(--app-kb-inset, var(--kb-inset, var(--keyboard-inset, 0px)))";return V.jsxs("div",{className:yr("fixed inset-0",o),style:{zIndex:l},"aria-modal":"true",role:"dialog",onClick:c?t:void 0,children:[V.jsx("div",{className:"absolute inset-0 bg-overlay/30 backdrop-blur-[2px]"}),V.jsx("div",{className:"absolute inset-x-0 bottom-0",onClick:e=>e.stopPropagation(),children:V.jsx("div",{className:yr("w-full",d?"px-0 max-w-none":yr("mx-auto px-4",i)),children:V.jsxs("div",{className:yr("bg-card rounded-t-2xl shadow-2xl border-t border-x border-border overflow-hidden",a),children:[V.jsx("div",{className:"flex justify-center py-2",children:V.jsx("div",{className:"h-1.5 w-10 rounded-full bg-border"})}),n?V.jsx("div",{className:"px-4 pb-2",children:n}):null,V.jsx("div",{className:"overflow-y-auto",style:{maxHeight:`calc(85svh - ${u})`,paddingBottom:r?u:`calc(var(--app-bottom-h, 0px) + env(safe-area-inset-bottom) + ${u})`},children:s}),r?V.jsx("div",{className:"px-4 pt-2",style:{paddingBottom:`calc(var(--app-bottom-h, 0px) + env(safe-area-inset-bottom) + ${u})`},children:r}):null]})})})]})}function br({open:e,onClose:t,title:n,message:r,actions:s,cancelText:i="Cancel",zIndex:o=60,fullWidth:a=!0,children:l}){const c=n?V.jsx("div",{className:"text-center",children:"string"==typeof n?V.jsx("h3",{className:"font-medium text-black text-[clamp(14px,3.8vw,18px)]",children:n}):n}):void 0;return V.jsx(vr,{open:e,onClose:t,header:c,footer:null!==i?V.jsx(hr,{variant:"secondary",className:"w-full py-3 rounded-xl border-0 font-medium",onClick:t,children:i}):null,zIndex:o,fullWidth:a,children:V.jsxs("div",{className:"p-4 space-y-4",children:[r&&V.jsx("p",{className:"text-sm text-black",children:r}),l,V.jsx("div",{className:"space-y-3",children:s.map((e,t)=>"button"===e.type?V.jsx(hr,{onClick:e.onClick,disabled:e.disabled,variant:"secondary"===e.variant?"secondary":"primary",className:Un("w-full rounded-xl border-0 font-medium","destructive"===e.variant&&"bg-destructive hover:bg-destructive/90 text-black"),children:V.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.icon,V.jsx("span",{children:e.label})]})},t):V.jsxs("button",{className:Un("flex w-full items-center gap-3 px-4 py-3 text-left hover:bg-gray-50","destructive"===e.variant&&"text-black hover:bg-destructive-light"),onClick:e.onClick,disabled:e.disabled,children:[e.icon,V.jsx("span",{children:e.label})]},t))})]})})}function wr({routine:e,onClose:t,reloadRoutines:r}){const[s,i]=n.useState("main"),[o,a]=n.useState(""),[l,c]=n.useState(!1),[d,u]=n.useState(!1);if(n.useEffect(()=>{e&&(i("main"),a(e.name),c(!1),u(!1))},[e]),!e)return null;const h=async()=>{o.trim()&&(c(!0),await ze.renameRoutine(e.routine_template_id,o.trim()),await r(),rt.success("Routine renamed"),c(!1),t())};return V.jsxs(V.Fragment,{children:["main"===s&&V.jsx(br,{open:!!e,onClose:t,title:e.name,actions:[{label:"Rename Routine",onClick:()=>i("rename"),type:"button"},{label:"Delete Routine",onClick:()=>i("delete"),type:"button",variant:"destructive"}]}),"rename"===s&&V.jsx(br,{open:!!e,onClose:t,title:"Rename Routine",cancelText:null,actions:[{label:l?"Savingâ€¦":"Save",onClick:h,type:"button",disabled:!o.trim()||l},{label:"Cancel",onClick:()=>i("main"),type:"button",variant:"secondary",disabled:l}],children:V.jsxs("div",{className:"space-y-3",children:[V.jsx("label",{className:"text-sm text-black",children:"New name"}),V.jsx("input",{autoFocus:!0,value:o,onChange:e=>a(e.target.value),className:"w-full rounded-lg border border-border px-3 py-2 outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",placeholder:"Enter routine name",onKeyDown:async e=>{"Enter"!==e.key||l||await h()}})]})}),"delete"===s&&V.jsx(br,{open:!!e,onClose:t,title:`Delete ${e.name}?`,cancelText:null,message:"This will remove it from your list",actions:[{label:d?"Deletingâ€¦":"Delete",onClick:async()=>{u(!0),await ze.deleteRoutine(e.routine_template_id),await r(),rt.success("Routine deleted"),u(!1),t()},type:"button",variant:"destructive",disabled:d},{label:"Cancel",onClick:()=>i("main"),type:"button",variant:"secondary",disabled:d}]})]})}function kr({onCreateRoutine:e,onEditMeasurements:t,onSelectRoutine:r,onOverlayChange:s,bottomBar:i}){const{userToken:o}=mt(),[a,l]=n.useState(fr.My),[c,d]=n.useState([]),[u,h]=n.useState(!0),[f,g]=n.useState(null),[x,y]=n.useState({}),[v,b]=n.useState(!1),[w,k]=n.useState(null),[E,S]=n.useState(null),{steps:_,goal:j,isLoading:C}=function(){const[e,t]=n.useState({steps:0,lastUpdated:0,goal:1e4}),[r,s]=n.useState(!1),i=n.useRef(null),o=n.useRef(0),{userToken:a}=mt(),l=n.useCallback(()=>!document.hidden,[]),c=n.useCallback(()=>Date.now()-o.current>=6e5,[]),d=n.useCallback(async()=>{if(a)try{const e=await ze.getUserStepGoal();t(t=>({...t,goal:e}))}catch(e){Z("âŒ [steps] Error loading step goal:",e)}},[a]),u=n.useCallback(async(e=!1)=>{if(e||l()&&c()){s(!0),o.current=Date.now();try{const e=await vt();t(t=>({steps:e,lastUpdated:Date.now(),goal:t.goal}))}catch(n){Z("âŒ [steps] Error during read:",n),t(e=>({steps:0,lastUpdated:Date.now(),goal:e.goal}))}finally{s(!1)}}},[l,c]),h=n.useCallback(async()=>{await u(!0)},[u]);n.useEffect(()=>{a&&d()},[a,d]),n.useEffect(()=>(a&&(u(),i.current=setInterval(()=>u(),6e4)),()=>{i.current&&clearInterval(i.current)}),[a,u]);const m=e.goal>0?e.steps/e.goal*100:0,p=Math.min(Math.max(m,0),100);return{steps:e.steps,goal:e.goal,progressPercentage:p,isLoading:r,refreshStepGoal:d,forceRefreshStepData:h}}(),N=a===fr.My,T=async(e=a)=>{h(!0),g(null);try{const t=e===fr.My?await ze.getUserRoutines():await ze.getSampleRoutines();t.sort((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime()),d(Array.isArray(t)?t:[])}catch(t){Z(String(t)),g(t instanceof Error?t.message:"Failed to load routines")}finally{h(!1)}};n.useEffect(()=>{a!==fr.My||o?T(a):d([])},[a,o]),n.useEffect(()=>{(async()=>{if(o)try{const e=await ze.getMyProfile();S(e)}catch(e){Z("Failed to load profile for dashboard greeting",e)}})()},[o]);const A=()=>(null==E?void 0:E.first_name)&&""!==E.first_name.trim()?E.first_name.split(" ")[0]:(null==E?void 0:E.display_name)&&""!==E.display_name.trim()?E.display_name.split(" ")[0]:null;n.useEffect(()=>{let e=!1;return(async()=>{const t=Te.start("fetchExerciseCounts");if(0===c.length)return te("ğŸ” DGB [WORKOUT_SCREEN] No routines, skipping"),y({}),void t.endWithLog();b(!0);try{const t=await Promise.all(c.map(async e=>{const t=Te.start(`fetchExerciseCounts - routine ${e.routine_template_id}`);te("ğŸ” DGB [WORKOUT_SCREEN] Processing routine:",e.routine_template_id,"name:",e.name);const n=await lr(e.routine_template_id,{timer:Te});let r=!1;if(N){const t=e.muscle_group_summary;n.length>0&&(!t||""===t.trim())?(ee("ğŸ” DGB [WORKOUT_SCREEN] Routine needs recompute:",e.routine_template_id,"summary:",t,"active exercises:",n.length),r=!0):0===n.length&&te("ğŸ” DGB [WORKOUT_SCREEN] Routine has 0 active exercises, skipping recompute:",e.routine_template_id,"summary:",t)}return t.endWithLog(),{id:e.routine_template_id,count:n.length,needsRecompute:r}})),n=t.map(({id:e,count:t})=>[e,t]),r=t.filter(e=>e.needsRecompute).map(e=>e.id);if(e||y(Object.fromEntries(n)),N&&r.length>0){const t=Te.start("fetchExerciseCounts - muscle summary recompute");te("ğŸ” DGB [WORKOUT_SCREEN] Triggering muscle summary recompute for routines:",r),te("ğŸ” DGB [WORKOUT_SCREEN] canEdit:",N,"needsRecompute count:",r.length);const n=await Promise.allSettled(r.map(e=>(te("ğŸ” DGB [WORKOUT_SCREEN] Calling recomputeAndSaveRoutineMuscleSummary for routine ID:",e),ze.recomputeAndSaveRoutineMuscleSummary(e))));if(!e){te("ğŸ” DGB [WORKOUT_SCREEN] Muscle summary recompute completed, results:",n);const e=n.filter(e=>"fulfilled"===e.status).length;te("ğŸ” DGB [WORKOUT_SCREEN] Successful recomputes:",e,"out of",r.length),e>0&&(te("ğŸ” DGB [WORKOUT_SCREEN] Muscle summary recompute completed successfully"),te("ğŸ” DGB [WORKOUT_SCREEN] No need to trigger routine state update - let cache handle it"))}t.endWithLog()}}catch(n){Z("Failed to load exercise counts / recompute summaries",n)}finally{e||b(!1),t.endWithLog()}})(),()=>{e=!0}},[c,N]),n.useEffect(()=>()=>{w&&(null==s||s(!1))},[]);return V.jsxs(Rt,{header:V.jsx(Wn,{title:"My Routines",showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:i,bottomBarSticky:!0,contentClassName:"",headerInScrollArea:!0,children:[V.jsxs(rr,{gap:"fluid",children:[V.jsx(Kn,{variant:"plain",padding:"none",className:"text-center",children:V.jsx("p",{className:"text-4xl md:text-5xl font-extrabold tracking-tight leading-tight text-transparent bg-clip-text bg-gradient-to-r from-rose-500 via-orange-400 to-amber-500 drop-shadow-sm",children:A()?`Welcome back, ${A()}!`:"Welcome back!"})}),V.jsx(Qn,{y:"sm"}),V.jsx(Kn,{variant:"plain",padding:"none",className:"text-center",children:V.jsx("p",{className:"text-sm text-black mt-1",children:a===fr.My?"Select a routine to start your workout":"Explore prebuilt routines to get started"})}),V.jsx(Qn,{y:"sm"}),V.jsx(Kn,{variant:"plain",padding:"none",children:V.jsx(St,{steps:C?null:_,goal:C?null:j,recoveryPercent:null,strain:null,onStepsClick:()=>{},onRecoveryClick:()=>{},onStrainClick:()=>{}})}),V.jsx(Qn,{y:"xss"}),V.jsx(Kn,{variant:"plain",padding:"none",className:"flex items-center justify-start px-4",children:V.jsx(ir,{value:a,onChange:l,options:[{value:fr.My,label:"My routines"},{value:fr.Sample,label:"Sample routines"}],size:"sm",className:"data-[checked=true]:bg-warm-coral/20 data-[checked=true]:text-black",variant:"filled",tone:"accent"})}),V.jsx(xr,{routines:c,routinesError:f,isLoading:u,reloadRoutines:()=>T(),view:a,exerciseCounts:x,loadingCounts:v,canEdit:N,onSelectRoutine:r,openActions:(e,t)=>{N&&(t.stopPropagation(),k(e),null==s||s(!0))}}),V.jsx(Qn,{y:"lg"}),N&&w&&V.jsx(wr,{routine:w,onClose:()=>{k(null),null==s||s(!1)},reloadRoutines:()=>T(fr.My)})]}),V.jsx(ur,{actions:[{label:"Create Routine",onPress:e,icon:V.jsx(m,{className:"w-6 h-6"})},{label:"Edit Measurement",onPress:t,icon:V.jsx(p,{className:"w-6 h-6"})}],backdropWidthOffset:"100px",backdropHeightOffset:"40px"})]})}function Er({className:e,type:t,...n}){return V.jsx("input",{type:t,"data-slot":"input",className:Un("file:text-black placeholder:text-black selection:bg-primary selection:text-black border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function Sr({onBack:e,onRoutineCreated:t}){const[r,s]=n.useState(""),[i,o]=n.useState(!1),{userToken:l}=mt();return V.jsx(Rt,{header:V.jsx(Wn,{title:"Create Routine",onBack:e,showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",padContent:!1,showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:null,bottomBarSticky:!0,contentClassName:"",children:V.jsxs(rr,{gap:"fluid",children:[V.jsx(Qn,{y:"sm"}),V.jsx(Kn,{variant:"card",padding:"md",className:"space-y-3",children:V.jsx(Er,{value:r,onChange:e=>s(e.target.value),placeholder:"Routine Name",className:"bg-input-background border-border text-black placeholder:text-black h-12 md:h-12 text-base md:text-lg rounded-xl focus:border-warm-coral focus:ring-warm-coral/20",maxLength:50,autoFocus:!0,disabled:i})}),V.jsx(Qn,{y:"sm"}),V.jsx(Kn,{variant:"plain",padding:"none",children:V.jsx(hr,{onClick:async()=>{const e=r.trim();if(e)if(l)try{o(!0);const n=await ze.createUserRoutine(e);if(!n)throw new Error("Failed to create routine");t(e,n.routine_template_id)}catch(n){const e=n instanceof Error?n.message:"Failed to create routine";rt.error(e)}finally{o(!1)}else rt.error("Please sign in to create routines");else rt.error("Please enter a routine name")},disabled:!r.trim()||i,className:"w-full h-12 md:h-14 bg-primary hover:bg-primary-hover text-black font-medium text-sm md:text-base rounded-full disabled:opacity-50 disabled:cursor-not-allowed border-0",children:V.jsxs("div",{className:"flex items-center justify-center gap-2",children:[V.jsx(a,{size:20}),i?"CREATING...":"ADD ROUTINE"]})})})]})})}function _r({children:e,variant:t="primary",className:n,...r}){return V.jsx(hr,{variant:t,size:"sm",className:Un("px-6 md:px-8 py-3 font-medium border-0 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",n),...r,children:e})}function jr({activeTab:e,onTabChange:t,children:n,className:r=""}){const s=[{id:"workouts",label:"Workouts",icon:m},{id:"progress",label:"Progress",icon:h},{id:"profile",label:"Profile",icon:f}];return n?V.jsx("nav",{"aria-label":"Bottom navigation",className:`w-full h-14 flex items-center justify-center bg-background pointer-events-auto ${r}`,children:V.jsx("div",{className:"flex w-full items-center justify-center gap-3",children:n})}):V.jsx("nav",{"aria-label":"Bottom navigation",className:`w-full h-14 flex items-center justify-center bg-background pointer-events-auto ${r}`,children:V.jsx("ul",{className:"w-full flex justify-around",children:s.map(n=>{const r=e===n.id;return V.jsx("li",{className:"flex-1",children:V.jsxs("button",{onClick:()=>t&&t(n.id),className:"w-full flex flex-col items-center gap-1 py-2 text-xs","aria-current":r?"page":void 0,children:[V.jsx("span",{children:V.jsx(n.icon,{size:20,className:r?"text-black fill-black":"text-gray-500 fill-gray-500"})}),V.jsx("span",{className:r?"font-medium text-black fill-black":"text-gray-500 fill-gray-500",children:n.label})]})},n.id)})})})}const Cr="Other",Nr=n.memo(function({value:e,onChange:t,placeholder:n}){return V.jsxs("div",{className:"relative",children:[V.jsx(g,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-black",size:20}),V.jsx(Er,{value:e,onChange:e=>t(e.target.value),placeholder:n??"Search for an exercise...",className:"bg-input-background border-border text-black placeholder:text-black h-12 md:h-12 pl-10 pr-4 rounded-xl focus:border-warm-coral focus:ring-warm-coral/20"})]})}),Tr=n.memo(function({exercise:e,selected:t,onSelect:n}){const r=e.name.substring(0,2).toUpperCase(),s=(e.muscle_group||"").trim()||Cr;return V.jsx(mr,{as:"button",type:"button","aria-pressed":t,onClick:()=>n(e),leading:V.jsx("span",{className:"font-medium text-black",children:r}),leadingClassName:"w-8 h-8 rounded-xl bg-card/10 grid place-items-center",primary:e.name,secondary:s,primaryClassName:"font-medium text-black text-[clamp(16px,4.5vw,19px)]",secondaryClassName:"text-[clamp(11px,3.2vw,12px)] text-black",className:["w-full rounded-2xl border border-border card-modern shadow-xl hover:shadow-xl transition-all text-left px-4 py-0",t?"bg-warm-coral border-warm-coral":"hover:bg-warm-coral/10"].join(" "),style:{border:"2px solid var(--border)"}})});function Ar({groupedAZ:e,selectedExercises:t,onSelect:r,onLoadMore:s,hasMore:i,isLoadingMore:o}){const a=n.useMemo(()=>Object.keys(e).sort((e,t)=>e.localeCompare(t)),[e]),l=n.useMemo(()=>t.map(e=>e.exercise_id),[t]),c=n.useMemo(()=>a.reduce((t,n)=>t+e[n].length,0),[a,e]),d=n.useRef(null);if(n.useEffect(()=>{const e=d.current;if(!e)return;const t=new IntersectionObserver(e=>{e[0].isIntersecting&&i&&!o&&s()});return t.observe(e),()=>t.disconnect()},[s,i,o,c]),0===a.length)return null;let u=-1;return V.jsxs(V.Fragment,{children:[a.map(t=>V.jsxs("div",{children:[V.jsx("h2",{className:"text-xs md:text-sm text-black font-medium mb-3 px-2 tracking-wide",children:t}),V.jsx("div",{className:"space-y-2",children:e[t].map(e=>{u++;const t=u===c-5?d:void 0;return V.jsx("div",{ref:t,children:V.jsx(Tr,{exercise:e,selected:l.includes(e.exercise_id),onSelect:r})},e.exercise_id)})})]},t)),o&&V.jsx("div",{className:"text-center text-black py-4",children:"Loading..."})]})}function Rr({routineId:e,routineName:t,onBack:r,onExerciseSelected:s,isFromExerciseSetup:i=!0}){const{userToken:o}=mt(),a=Tt(),l=n.useCallback(()=>{var e;a&&(null==(e=document.activeElement)||e.blur())},[a]),[c,d]=n.useState(""),[u,h]=n.useState("all"),[m,p]=n.useState("all"),[f,g]=n.useState([]),[x,y]=n.useState([]),[v,b]=n.useState(!0),[w,k]=n.useState(!1),[E,S]=n.useState(!0),[_,j]=n.useState(!1),[C,N]=n.useState(!1),[T,A]=n.useState(!1),R=n.useRef(0),[P,M]=n.useState([]),[$,D]=n.useState(!1),I=n.useRef("all");n.useEffect(()=>{const e=Te.start("AddExercisesToRoutineScreen render");return()=>{const t=e.end();ee(`[ADD_EXERCISES] Component render: ${t.duration.toFixed(2)}ms`)}},[]);const L=n.useCallback(async(e,t,n)=>{const r=e?0:R.current;try{e?(b(!0),S(!1),R.current=0):j(!0),N(!1);const s=Te.start("AddExercisesToRoutineScreen fetch exercises"),i=await ze.getExercises({limit:30,offset:30*r,muscleGroup:"all"===t||t===Cr?void 0:t,other:t===Cr,search:n.trim()||void 0}),o=s.end();ee(`[ADD_EXERCISES] Fetch exercises: ${o.duration.toFixed(2)}ms`),g(t=>e?i:[...t,...i]),S(30===i.length),R.current=r+1,p(t),N(!1)}catch(s){Z("[AddExercises] fetch error:",s),rt.error("Failed to load exercises"),e&&g([]),N(!0)}finally{e?b(!1):j(!1)}},[]);n.useEffect(()=>{let e=!0;return ze.getMuscleGroups().then(t=>{e&&M(t)}).catch(e=>Z("[AddExercises] failed to load muscle groups",e)).finally(()=>{e&&D(!0)}),()=>{e=!1}},[]),n.useEffect(()=>{I.current=u},[u]),n.useEffect(()=>{if(!$)return;const e=setTimeout(()=>L(!0,I.current,c),300);return()=>clearTimeout(e)},[$,c,L]),n.useEffect(()=>{let e;return v?e=setTimeout(()=>A(!0),1e3):A(!1),()=>clearTimeout(e)},[v]);const B=n.useMemo(()=>{const e=new Map;for(const t of f){const n=(t.muscle_group||"").trim()||Cr;(e.get(n)??e.set(n,[]).get(n)).push(t)}return e},[f]),O=n.useMemo(()=>{var e;const t=Te.start("AddExercisesToRoutineScreen filter exercises"),n="all"===m?f:B.get(m)??[],r=c.trim().toLowerCase(),s=r?n.filter(e=>e.name.toLowerCase().includes(r)):n,i={};for(const a of s){const t=((null==(e=a.name)?void 0:e[0])||"#").toUpperCase();(i[t]||(i[t]=[])).push(a)}const o=t.end();return ee(`[ADD_EXERCISES] Filter exercises (${s.length} results): ${o.duration.toFixed(2)}ms`),i},[f,B,m,c]),F=n.useMemo(()=>[{value:"all",label:"ALL"},...P.map(e=>({value:e,label:e}))],[P]);return V.jsx(Rt,{header:V.jsx(Wn,{title:"Select exercises",onBack:r,showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",padContent:!1,showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:V.jsx(jr,{children:V.jsx(_r,{onClick:async()=>{if(0===x.length)return rt.error("Please select an exercise");if(!o)return rt.error("Please sign in to add exercises");k(!0);try{s(x)}catch(e){const t=e instanceof Error?e.message:"Please try again.";rt.error(`Failed to proceed: ${t}`)}finally{k(!1)}},disabled:0===x.length||w,className:"sm:w-auto",children:w?"ADDING...":x.length>0?`ADD (${x.length})`:"ADD"})}),bottomBarSticky:!0,contentClassName:"",onScroll:l,children:V.jsxs(rr,{gap:"fluid",children:[V.jsx(Qn,{y:"xss"}),V.jsx(Kn,{variant:"plain",padding:"none",children:$?V.jsx("div",{className:"overflow-x-auto no-scrollbar",children:V.jsx(ir,{value:u,onChange:e=>{h(e),L(!0,e,c)},options:F,size:"sm",variant:"filled",tone:"accent",className:"min-w-max"})}):V.jsx("div",{className:"py-2 flex justify-center",children:V.jsx("div",{className:"w-6 h-6 border-4 border-warm-coral border-t-transparent rounded-full animate-spin"})})}),V.jsx(Kn,{variant:"plain",padding:"none",children:V.jsx(Nr,{value:c,onChange:d})}),V.jsx(Qn,{y:"xss"}),V.jsx(Kn,{variant:"plain",padding:"none",className:"space-y-6",children:C?V.jsx(Kn,{variant:"card",className:"text-center",children:V.jsx("p",{className:"text-black",children:"Failed to load exercises"})}):V.jsxs(V.Fragment,{children:[V.jsx(Ar,{groupedAZ:O,selectedExercises:x,onSelect:e=>{y(t=>t.find(t=>t.exercise_id===e.exercise_id)?t.filter(t=>t.exercise_id!==e.exercise_id):[...t,e])},onLoadMore:()=>L(!1,m,c),hasMore:E,isLoadingMore:_}),v&&T&&V.jsx("div",{className:"py-6 flex justify-center",children:V.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-warm-coral border-t-transparent rounded-full"})})]})}),V.jsx(Qn,{y:"xl"})]})})}const Pr=n.createContext({});function Mr(e){const t=n.useRef(null);return null===t.current&&(t.current=e()),t.current}const $r="undefined"!=typeof window,Dr=$r?n.useLayoutEffect:n.useEffect,Ir=n.createContext(null);function Lr(e,t){-1===e.indexOf(t)&&e.push(t)}function Br(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Or=(e,t,n)=>n>t?t:n<e?e:n;const Fr={},Ur=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Vr(e){return"object"==typeof e&&null!==e}const Hr=e=>/^0[^.\s]+$/u.test(e);function Wr(e){let t;return()=>(void 0===t&&(t=e()),t)}const zr=e=>e,Gr=(e,t)=>n=>t(e(n)),qr=(...e)=>e.reduce(Gr),Yr=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};class Jr{constructor(){this.subscriptions=[]}add(e){return Lr(this.subscriptions,e),()=>Br(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const r=this.subscriptions[s];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Xr=e=>1e3*e,Kr=e=>e/1e3;function Zr(e,t){return t?e*(1e3/t):0}const Qr=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function es(e,t,n,r){if(e===t&&n===r)return zr;const s=t=>function(e,t,n,r,s){let i,o,a=0;do{o=t+(n-t)/2,i=Qr(o,r,s)-e,i>0?n=o:t=o}while(Math.abs(i)>1e-7&&++a<12);return o}(t,0,1,e,n);return e=>0===e||1===e?e:Qr(s(e),t,r)}const ts=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ns=e=>t=>1-e(1-t),rs=es(.33,1.53,.69,.99),ss=ns(rs),is=ts(ss),os=e=>(e*=2)<1?.5*ss(e):.5*(2-Math.pow(2,-10*(e-1))),as=e=>1-Math.sin(Math.acos(e)),ls=ns(as),cs=ts(as),ds=es(.42,0,1,1),us=es(0,0,.58,1),hs=es(.42,0,.58,1),ms=e=>Array.isArray(e)&&"number"==typeof e[0],ps={linear:zr,easeIn:ds,easeInOut:hs,easeOut:us,circIn:as,circInOut:cs,circOut:ls,backIn:ss,backInOut:is,backOut:rs,anticipate:os},fs=e=>{if(ms(e)){e.length;const[t,n,r,s]=e;return es(t,n,r,s)}return"string"==typeof e?ps[e]:e},gs=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function xs(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=gs.reduce((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(t){i.has(t)&&(l.schedule(t),e()),t(o)}const l={schedule:(e,s=!1,o=!1)=>{const a=o&&r?t:n;return s&&i.add(e),a.has(e)||a.add(e),e},cancel:e=>{n.delete(e),i.delete(e)},process:e=>{o=e,r?s=!0:(r=!0,[t,n]=[n,t],t.forEach(a),t.clear(),r=!1,s&&(s=!1,l.process(e)))}};return l}(i),e),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:m,postRender:p}=o,f=()=>{const i=Fr.useManualTiming?s.timestamp:performance.now();n=!1,Fr.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(i-s.timestamp,40),1)),s.timestamp=i,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),d.process(s),u.process(s),h.process(s),m.process(s),p.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(f))};return{schedule:gs.reduce((t,i)=>{const a=o[i];return t[i]=(t,i=!1,o=!1)=>(n||(n=!0,r=!0,s.isProcessing||e(f)),a.schedule(t,i,o)),t},{}),cancel:e=>{for(let t=0;t<gs.length;t++)o[gs[t]].cancel(e)},state:s,steps:o}}const{schedule:ys,cancel:vs,state:bs,steps:ws}=xs("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:zr,!0);let ks;function Es(){ks=void 0}const Ss={now:()=>(void 0===ks&&Ss.set(bs.isProcessing||Fr.useManualTiming?bs.timestamp:performance.now()),ks),set:e=>{ks=e,queueMicrotask(Es)}},_s=e=>t=>"string"==typeof t&&t.startsWith(e),js=_s("--"),Cs=_s("var(--"),Ns=e=>!!Cs(e)&&Ts.test(e.split("/*")[0].trim()),Ts=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,As={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},Rs={...As,transform:e=>Or(0,1,e)},Ps={...As,default:1},Ms=e=>Math.round(1e5*e)/1e5,$s=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const Ds=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Is=(e,t)=>n=>Boolean("string"==typeof n&&Ds.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),Ls=(e,t,n)=>r=>{if("string"!=typeof r)return r;const[s,i,o,a]=r.match($s);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},Bs={...As,transform:e=>Math.round((e=>Or(0,255,e))(e))},Os={test:Is("rgb","red"),parse:Ls("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Bs.transform(e)+", "+Bs.transform(t)+", "+Bs.transform(n)+", "+Ms(Rs.transform(r))+")"};const Fs={test:Is("#"),parse:function(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}},transform:Os.transform},Us=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Vs=Us("deg"),Hs=Us("%"),Ws=Us("px"),zs=Us("vh"),Gs=Us("vw"),qs=(()=>({...Hs,parse:e=>Hs.parse(e)/100,transform:e=>Hs.transform(100*e)}))(),Ys={test:Is("hsl","hue"),parse:Ls("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Hs.transform(Ms(t))+", "+Hs.transform(Ms(n))+", "+Ms(Rs.transform(r))+")"},Js={test:e=>Os.test(e)||Fs.test(e)||Ys.test(e),parse:e=>Os.test(e)?Os.parse(e):Ys.test(e)?Ys.parse(e):Fs.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?Os.transform(e):Ys.transform(e),getAnimatableNone:e=>{const t=Js.parse(e);return t.alpha=0,Js.transform(t)}},Xs=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const Ks="number",Zs="color",Qs=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ei(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const o=t.replace(Qs,e=>(Js.test(e)?(r.color.push(i),s.push(Zs),n.push(Js.parse(e))):e.startsWith("var(")?(r.var.push(i),s.push("var"),n.push(e)):(r.number.push(i),s.push(Ks),n.push(parseFloat(e))),++i,"${}")).split("${}");return{values:n,split:o,indexes:r,types:s}}function ti(e){return ei(e).values}function ni(e){const{split:t,types:n}=ei(e),r=t.length;return e=>{let s="";for(let i=0;i<r;i++)if(s+=t[i],void 0!==e[i]){const t=n[i];s+=t===Ks?Ms(e[i]):t===Zs?Js.transform(e[i]):e[i]}return s}}const ri=e=>"number"==typeof e?0:Js.test(e)?Js.getAnimatableNone(e):e;const si={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null==(t=e.match($s))?void 0:t.length)||0)+((null==(n=e.match(Xs))?void 0:n.length)||0)>0},parse:ti,createTransformer:ni,getAnimatableNone:function(e){const t=ti(e);return ni(e)(t.map(ri))}};function ii(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function oi(e,t){return n=>n>0?t:e}const ai=(e,t,n)=>e+(t-e)*n,li=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},ci=[Fs,Os,Ys];function di(e){const t=(n=e,ci.find(e=>e.test(n)));var n;if(!Boolean(t))return!1;let r=t.parse(e);return t===Ys&&(r=function({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let s=0,i=0,o=0;if(t/=100){const r=n<.5?n*(1+t):n+t-n*t,a=2*n-r;s=ii(a,r,e+1/3),i=ii(a,r,e),o=ii(a,r,e-1/3)}else s=i=o=n;return{red:Math.round(255*s),green:Math.round(255*i),blue:Math.round(255*o),alpha:r}}(r)),r}const ui=(e,t)=>{const n=di(e),r=di(t);if(!n||!r)return oi(e,t);const s={...n};return e=>(s.red=li(n.red,r.red,e),s.green=li(n.green,r.green,e),s.blue=li(n.blue,r.blue,e),s.alpha=ai(n.alpha,r.alpha,e),Os.transform(s))},hi=new Set(["none","hidden"]);function mi(e,t){return n=>ai(e,t,n)}function pi(e){return"number"==typeof e?mi:"string"==typeof e?Ns(e)?oi:Js.test(e)?ui:xi:Array.isArray(e)?fi:"object"==typeof e?Js.test(e)?ui:gi:oi}function fi(e,t){const n=[...e],r=n.length,s=e.map((e,n)=>pi(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=s[t](e);return n}}function gi(e,t){const n={...e,...t},r={};for(const s in n)void 0!==e[s]&&void 0!==t[s]&&(r[s]=pi(e[s])(e[s],t[s]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const xi=(e,t)=>{const n=si.createTransformer(t),r=ei(e),s=ei(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?hi.has(e)&&!s.values.length||hi.has(t)&&!r.values.length?function(e,t){return hi.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):qr(fi(function(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][r[i]],a=e.values[o]??0;n[s]=a,r[i]++}return n}(r,s),s.values),n):oi(e,t)};function yi(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return ai(e,t,n);return pi(e)(e,t)}const vi=e=>{const t=({timestamp:t})=>e(t);return{start:(e=!0)=>ys.update(t,e),stop:()=>vs(t),now:()=>bs.isProcessing?bs.timestamp:Ss.now()}},bi=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=Math.round(1e4*e(i/(s-1)))/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},wi=2e4;function ki(e){let t=0;let n=e.next(t);for(;!n.done&&t<wi;)t+=50,n=e.next(t);return t>=wi?1/0:t}function Ei(e,t,n){const r=Math.max(t-5,0);return Zr(n-e(r),t-r)}const Si=100,_i=10,ji=1,Ci=0,Ni=800,Ti=.3,Ai=.3,Ri={granular:.01,default:2},Pi={granular:.005,default:.5},Mi=.01,$i=10,Di=.05,Ii=1,Li=.001;function Bi({duration:e=Ni,bounce:t=Ti,velocity:n=Ci,mass:r=ji}){let s,i,o=1-t;o=Or(Di,Ii,o),e=Or(Mi,$i,Kr(e)),o<1?(s=t=>{const r=t*o,s=r*e,i=r-n,a=Fi(t,o),l=Math.exp(-s);return Li-i/a*l},i=t=>{const r=t*o*e,i=r*n+n,a=Math.pow(o,2)*Math.pow(t,2)*e,l=Math.exp(-r),c=Fi(Math.pow(t,2),o);return(-s(t)+Li>0?-1:1)*((i-a)*l)/c}):(s=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,i=t=>Math.exp(-t*e)*(e*e*(n-t)));const a=function(e,t,n){let r=n;for(let s=1;s<Oi;s++)r-=e(r)/t(r);return r}(s,i,5/e);if(e=Xr(e),isNaN(a))return{stiffness:Si,damping:_i,duration:e};{const t=Math.pow(a,2)*r;return{stiffness:t,damping:2*o*Math.sqrt(r*t),duration:e}}}const Oi=12;function Fi(e,t){return e*Math.sqrt(1-t*t)}const Ui=["duration","bounce"],Vi=["stiffness","damping","mass"];function Hi(e,t){return t.some(t=>void 0!==e[t])}function Wi(e=Ai,t=Ti){const n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:m}=function(e){let t={velocity:Ci,stiffness:Si,damping:_i,mass:ji,isResolvedFromDuration:!1,...e};if(!Hi(e,Vi)&&Hi(e,Ui))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),s=r*r,i=2*Or(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:ji,stiffness:s,damping:i}}else{const n=Bi(e);t={...t,...n,mass:ji},t.isResolvedFromDuration=!0}return t}({...n,velocity:-Kr(n.velocity||0)}),p=h||0,f=c/(2*Math.sqrt(l*d)),g=o-i,x=Kr(Math.sqrt(l/d)),y=Math.abs(g)<5;let v;if(r||(r=y?Ri.granular:Ri.default),s||(s=y?Pi.granular:Pi.default),f<1){const e=Fi(x,f);v=t=>{const n=Math.exp(-f*x*t);return o-n*((p+f*x*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===f)v=e=>o-Math.exp(-x*e)*(g+(p+x*g)*e);else{const e=x*Math.sqrt(f*f-1);v=t=>{const n=Math.exp(-f*x*t),r=Math.min(e*t,300);return o-n*((p+f*x*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const b={calculatedDuration:m&&u||null,next:e=>{const t=v(e);if(m)a.done=e>=u;else{let n=0===e?p:0;f<1&&(n=0===e?Xr(p):Ei(v,e,t));const i=Math.abs(n)<=r,l=Math.abs(o-t)<=s;a.done=i&&l}return a.value=a.done?o:t,a},toString:()=>{const e=Math.min(ki(b),wi),t=bi(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function zi({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const u=e[0],h={done:!1,value:u},m=e=>void 0===a?l:void 0===l||Math.abs(a-e)<Math.abs(l-e)?a:l;let p=n*t;const f=u+p,g=void 0===o?f:o(f);g!==f&&(p=g-u);const x=e=>-p*Math.exp(-e/r),y=e=>g+x(e),v=e=>{const t=x(e),n=y(e);h.done=Math.abs(t)<=c,h.value=h.done?g:n};let b,w;const k=e=>{var t;(t=h.value,void 0!==a&&t<a||void 0!==l&&t>l)&&(b=e,w=Wi({keyframes:[h.value,m(h.value)],velocity:Ei(y,e,h.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return k(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==b||(t=!0,v(e),k(e)),void 0!==b&&e>=b?w.next(e-b):(!t&&v(e),h)}}}function Gi(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(t.length,1===i)return()=>t[0];if(2===i&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=function(e,t,n){const r=[],s=n||Fr.mix||yi,i=e.length-1;for(let o=0;o<i;o++){let n=s(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||zr:t;n=qr(e,n)}r.push(n)}return r}(t,r,s),l=a.length,c=n=>{if(o&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const s=Yr(e[r],e[r+1],n);return a[r](s)};return n?t=>c(Or(e[0],e[i-1],t)):c}function qi(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Yr(0,t,r);e.push(ai(n,1,s))}}(t,e.length-1),t}function Yi({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=(e=>Array.isArray(e)&&"number"!=typeof e[0])(r)?r.map(fs):fs(r),i={done:!1,value:t[0]},o=function(e,t){return e.map(e=>e*t)}(n&&n.length===t.length?n:qi(t),e),a=Gi(o,t,{ease:Array.isArray(s)?s:(l=t,c=s,l.map(()=>c||hs).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(i.value=a(t),i.done=t>=e,i)}}Wi.applyToOptions=e=>{const t=function(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(ki(r),wi);return{type:"keyframes",ease:e=>r.next(s*e).value/t,duration:Kr(s)}}(e,100,Wi);return e.ease=t.ease,e.duration=Xr(t.duration),e.type="keyframes",e};const Ji=e=>null!==e;function Xi(e,{repeat:t,repeatType:n="loop"},r,s=1){const i=e.filter(Ji),o=s<0||t&&"loop"!==n&&t%2==1?0:i.length-1;return o&&void 0!==r?r:i[o]}const Ki={decay:zi,inertia:zi,tween:Yi,keyframes:Yi,spring:Wi};function Zi(e){"string"==typeof e.type&&(e.type=Ki[e.type])}class Qi{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const eo=e=>e/100;class to extends Qi{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==Ss.now()&&this.tick(Ss.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null==(t=(e=this.options).onStop)||t.call(e))},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;Zi(e);const{type:t=Yi,repeat:n=0,repeatDelay:r=0,repeatType:s,velocity:i=0}=e;let{keyframes:o}=e;const a=t||Yi;a!==Yi&&"number"!=typeof o[0]&&(this.mixKeyframes=qr(eo,yi(o[0],o[1])),o=[0,100]);const l=a({...e,keyframes:o});"mirror"===s&&(this.mirroredGenerator=a({...e,keyframes:[...o].reverse(),velocity:-i})),null===l.calculatedDuration&&(l.calculatedDuration=ki(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:r,mixKeyframes:s,mirroredGenerator:i,resolvedDuration:o,calculatedDuration:a}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:h,type:m,onUpdate:p,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let y=this.currentTime,v=n;if(d){const e=Math.min(this.currentTime,r)/o;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(n=1-n,h&&(n-=h/o)):"mirror"===u&&(v=i)),y=Or(0,1,n)*o}const b=x?{done:!1,value:c[0]}:v.next(y);s&&(b.value=s(b.value));let{done:w}=b;x||null===a||(w=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const k=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return k&&m!==zi&&(b.value=Xi(c,this.options,f,this.speed)),p&&p(b.value),k&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return Kr(this.calculatedDuration)}get time(){return Kr(this.currentTime)}set time(e){var t;e=Xr(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null==(t=this.driver)||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ss.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Kr(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=vi,startTime:r}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null==(t=(e=this.options).onPlay)||t.call(e);const s=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=s):null!==this.holdTime?this.startTime=s-this.holdTime:this.startTime||(this.startTime=r??s),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ss.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null==(t=(e=this.options).onComplete)||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null==(t=(e=this.options).onCancel)||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null==(t=this.driver)||t.stop(),e.observe(this)}}const no=e=>180*e/Math.PI,ro=e=>{const t=no(Math.atan2(e[1],e[0]));return io(t)},so={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:ro,rotateZ:ro,skewX:e=>no(Math.atan(e[1])),skewY:e=>no(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},io=e=>((e%=360)<0&&(e+=360),e),oo=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ao=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),lo={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:oo,scaleY:ao,scale:e=>(oo(e)+ao(e))/2,rotateX:e=>io(no(Math.atan2(e[6],e[5]))),rotateY:e=>io(no(Math.atan2(-e[2],e[0]))),rotateZ:ro,rotate:ro,skewX:e=>no(Math.atan(e[4])),skewY:e=>no(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function co(e){return e.includes("scale")?1:0}function uo(e,t){if(!e||"none"===e)return co(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=lo,s=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=so,s=t}if(!s)return co(t);const i=r[t],o=s[1].split(",").map(ho);return"function"==typeof i?i(o):o[i]}function ho(e){return parseFloat(e.trim())}const mo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],po=(()=>new Set(mo))(),fo=e=>e===As||e===Ws,go=new Set(["x","y","z"]),xo=mo.filter(e=>!go.has(e));const yo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>uo(t,"x"),y:(e,{transform:t})=>uo(t,"y")};yo.translateX=yo.x,yo.translateY=yo.y;const vo=new Set;let bo=!1,wo=!1,ko=!1;function Eo(){if(wo){const e=Array.from(vo).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return xo.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(([t,n])=>{var r;null==(r=e.getValue(t))||r.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}wo=!1,bo=!1,vo.forEach(e=>e.complete(ko)),vo.clear()}function So(){vo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(wo=!0)})}class _o{constructor(e,t,n,r,s,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=s,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(vo.add(this),bo||(bo=!0,ys.read(So),ys.resolveKeyframes(Eo))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const s=null==r?void 0:r.get(),i=e[e.length-1];if(void 0!==s)e[0]=s;else if(n&&t){const r=n.readValue(t,i);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=i),r&&void 0===s&&r.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),vo.delete(this)}cancel(){"scheduled"===this.state&&(vo.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const jo=Wr(()=>void 0!==window.ScrollTimeline),Co={};function No(e,t){const n=Wr(e);return()=>Co[t]??n()}const To=No(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),Ao=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Ro={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ao([0,.65,.55,1]),circOut:Ao([.55,0,1,.45]),backIn:Ao([.31,.01,.66,-.59]),backOut:Ao([.33,1.53,.69,.99])};function Po(e,t){return e?"function"==typeof e?To()?bi(e,t):"ease-out":ms(e)?Ao(e):Array.isArray(e)?e.map(e=>Po(e,t)||Ro.easeOut):Ro[e]:void 0}function Mo(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const d={[t]:n};l&&(d.offset=l);const u=Po(a,s);Array.isArray(u)&&(d.easing=u);const h={delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:"reverse"===o?"alternate":"normal"};c&&(h.pseudoElement=c);return e.animate(d,h)}function $o(e){return"function"==typeof e&&"applyToOptions"in e}class Do extends Qi{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:s,allowFlatten:i=!1,finalKeyframe:o,onComplete:a}=e;this.isPseudoElement=Boolean(s),this.allowFlatten=i,this.options=e,e.type;const l=function({type:e,...t}){return $o(e)&&To()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=Mo(t,n,r,l,s),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const e=Xi(r,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null==a||a(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null==(t=(e=this.animation).finish)||t.call(e)}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||null==(t=(e=this.animation).commitStyles)||t.call(e)}get duration(){var e,t;const n=(null==(t=null==(e=this.animation.effect)?void 0:e.getComputedTiming)?void 0:t.call(e).duration)||0;return Kr(Number(n))}get time(){return Kr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Xr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&(null==(n=this.animation.effect)||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&jo()?(this.animation.timeline=e,zr):t(this)}}const Io={anticipate:os,backInOut:is,circInOut:cs};function Lo(e){"string"==typeof e.ease&&e.ease in Io&&(e.ease=Io[e.ease])}class Bo extends Do{constructor(e){Lo(e),Zi(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:r,element:s,...i}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const o=new to({...i,autoplay:!1}),a=Xr(this.finishedTime??this.time);t.setWithVelocity(o.sample(a-10).value,o.sample(a).value,10),o.stop()}}const Oo=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!si.test(e)&&"0"!==e||e.startsWith("url(")));function Fo(e){e.duration=0,e.type}const Uo=new Set(["opacity","clipPath","filter","transform"]),Vo=Wr(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class Ho extends Qi{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i="loop",keyframes:o,name:a,motionValue:l,element:c,...d}){var u;super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null==(e=this.stopTimeline)||e.call(this)),null==(t=this.keyframeResolver)||t.cancel()},this.createdAt=Ss.now();const h={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:s,repeatType:i,name:a,motionValue:l,element:c,...d},m=(null==c?void 0:c.KeyframeResolver)||_o;this.keyframeResolver=new m(o,(e,t,n)=>this.onKeyframesResolved(e,t,h,!n),a,l,c),null==(u=this.keyframeResolver)||u.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:s,type:i,velocity:o,delay:a,isHandoff:l,onUpdate:c}=n;this.resolvedAt=Ss.now(),function(e,t,n,r){const s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;const i=e[e.length-1],o=Oo(s,t),a=Oo(i,t);return!(!o||!a)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||$o(n))&&r)}(e,s,i,o)||(!Fr.instantAnimations&&a||null==c||c(Xi(e,n,t)),e[0]=e[e.length-1],Fo(n),n.repeat=0);const d={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},u=!l&&function(e){var t;const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!((null==(t=null==n?void 0:n.owner)?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return Vo()&&r&&Uo.has(r)&&("transform"!==r||!c)&&!l&&!s&&"mirror"!==i&&0!==o&&"inertia"!==a}(d)?new Bo({...d,element:d.motionValue.owner.current}):new to(d);u.finished.then(()=>this.notifyFinished()).catch(zr),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||(null==(e=this.keyframeResolver)||e.resume(),ko=!0,So(),Eo(),ko=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null==(e=this.keyframeResolver)||e.cancel()}}const Wo=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zo(e,t,n=1){const[r,s]=function(e){const t=Wo.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const e=i.trim();return Ur(e)?parseFloat(e):e}return Ns(s)?zo(s,t,n+1):s}function Go(e,t){return(null==e?void 0:e[t])??(null==e?void 0:e.default)??e}const qo=new Set(["width","height","top","left","right","bottom",...mo]),Yo=e=>t=>t.test(e),Jo=[As,Ws,Hs,Vs,Gs,zs,{test:e=>"auto"===e,parse:e=>e}],Xo=e=>Jo.find(Yo(e));function Ko(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||Hr(e))}const Zo=new Set(["brightness","contrast","saturate","opacity"]);function Qo(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match($s)||[];if(!r)return e;const s=n.replace(r,"");let i=Zo.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const ea=/\b([a-z-]*)\(.*?\)/gu,ta={...si,getAnimatableNone:e=>{const t=e.match(ea);return t?t.map(Qo).join(" "):e}},na={...As,transform:Math.round},ra={borderWidth:Ws,borderTopWidth:Ws,borderRightWidth:Ws,borderBottomWidth:Ws,borderLeftWidth:Ws,borderRadius:Ws,radius:Ws,borderTopLeftRadius:Ws,borderTopRightRadius:Ws,borderBottomRightRadius:Ws,borderBottomLeftRadius:Ws,width:Ws,maxWidth:Ws,height:Ws,maxHeight:Ws,top:Ws,right:Ws,bottom:Ws,left:Ws,padding:Ws,paddingTop:Ws,paddingRight:Ws,paddingBottom:Ws,paddingLeft:Ws,margin:Ws,marginTop:Ws,marginRight:Ws,marginBottom:Ws,marginLeft:Ws,backgroundPositionX:Ws,backgroundPositionY:Ws,...{rotate:Vs,rotateX:Vs,rotateY:Vs,rotateZ:Vs,scale:Ps,scaleX:Ps,scaleY:Ps,scaleZ:Ps,skew:Vs,skewX:Vs,skewY:Vs,distance:Ws,translateX:Ws,translateY:Ws,translateZ:Ws,x:Ws,y:Ws,z:Ws,perspective:Ws,transformPerspective:Ws,opacity:Rs,originX:qs,originY:qs,originZ:Ws},zIndex:na,fillOpacity:Rs,strokeOpacity:Rs,numOctaves:na},sa={...ra,color:Js,backgroundColor:Js,outlineColor:Js,fill:Js,stroke:Js,borderColor:Js,borderTopColor:Js,borderRightColor:Js,borderBottomColor:Js,borderLeftColor:Js,filter:ta,WebkitFilter:ta},ia=e=>sa[e];function oa(e,t){let n=ia(e);return n!==ta&&(n=si),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const aa=new Set(["auto","none","0"]);class la extends _o{constructor(e,t,n,r,s){super(e,t,n,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let a=0;a<e.length;a++){let n=e[a];if("string"==typeof n&&(n=n.trim(),Ns(n))){const r=zo(n,t.current);void 0!==r&&(e[a]=r),a===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!qo.has(n)||2!==e.length)return;const[r,s]=e,i=Xo(r),o=Xo(s);if(i!==o)if(fo(i)&&fo(o))for(let a=0;a<e.length;a++){const t=e[a];"string"==typeof t&&(e[a]=parseFloat(t))}else yo[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||Ko(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,s=0;for(;s<e.length&&!r;){const t=e[s];"string"==typeof t&&!aa.has(t)&&ei(t).values.length&&(r=e[s]),s++}if(r&&n)for(const i of t)e[i]=oa(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=yo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==o&&void 0===this.finalKeyframe&&(this.finalKeyframe=o),(null==(e=this.removedTransforms)?void 0:e.length)&&this.removedTransforms.forEach(([e,n])=>{t.getValue(e).set(n)}),this.resolveNoneKeyframes()}}const ca=(e,t)=>t&&"number"==typeof e?t.transform(e):e;function da(e){return Vr(e)&&"offsetHeight"in e}class ua{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{var t;const n=Ss.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(null==(t=this.events.change)||t.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=Ss.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Jr);const n=this.events[e].add(t);return"change"===e?()=>{n(),ys.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null==(e=this.events.change)||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ss.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Zr(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null==(e=this.dependents)||e.clear(),null==(t=this.events.destroy)||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ha(e,t){return new ua(e,t)}const{schedule:ma}=xs(queueMicrotask,!1),pa={x:!1,y:!1};function fa(){return pa.x||pa.y}function ga(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document;const r=(null==n?void 0:n[e])??t.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function xa(e){return!("touch"===e.pointerType||fa())}const ya=(e,t)=>!!t&&(e===t||ya(e,t.parentElement)),va=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,ba=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const wa=new WeakSet;function ka(e){return t=>{"Enter"===t.key&&e(t)}}function Ea(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function Sa(e){return va(e)&&!fa()}function _a(e,t,n={}){const[r,s,i]=ga(e,n),o=e=>{const r=e.currentTarget;if(!Sa(e))return;wa.add(r);const i=t(r,e),o=(e,t)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),wa.has(r)&&wa.delete(r),Sa(e)&&"function"==typeof i&&i(e,{success:t})},a=e=>{o(e,r===window||r===document||n.useGlobalTarget||ya(r,e.target))},l=e=>{o(e,!1)};window.addEventListener("pointerup",a,s),window.addEventListener("pointercancel",l,s)};return r.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",o,s),da(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=ka(()=>{if(wa.has(n))return;Ea(n,"down");const e=ka(()=>{Ea(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>Ea(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,s)),t=e,ba.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),i}function ja(e){return Vr(e)&&"ownerSVGElement"in e}const Ca=e=>Boolean(e&&e.getVelocity),Na=[...Jo,Js,si],Ta=n.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Aa extends n.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=da(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ra({children:e,isPresent:t,anchorX:r,root:s}){const i=n.useId(),o=n.useRef(null),a=n.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=n.useContext(Ta);return n.useInsertionEffect(()=>{const{width:e,height:n,top:c,left:d,right:u}=a.current;if(t||!o.current||!e||!n)return;const h="left"===r?`left: ${d}`:`right: ${u}`;o.current.dataset.motionPopId=i;const m=document.createElement("style");l&&(m.nonce=l);const p=s??document.head;return p.appendChild(m),m.sheet&&m.sheet.insertRule(`\n          [data-motion-pop-id="${i}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${n}px !important;\n            ${h}px !important;\n            top: ${c}px !important;\n          }\n        `),()=>{p.contains(m)&&p.removeChild(m)}},[t]),V.jsx(Aa,{isPresent:t,childRef:o,sizeRef:a,children:n.cloneElement(e,{ref:o})})}const Pa=({children:e,initial:t,isPresent:r,onExitComplete:s,custom:i,presenceAffectsLayout:o,mode:a,anchorX:l,root:c})=>{const d=Mr(Ma),u=n.useId();let h=!0,m=n.useMemo(()=>(h=!1,{id:u,initial:t,isPresent:r,custom:i,onExitComplete:e=>{d.set(e,!0);for(const t of d.values())if(!t)return;s&&s()},register:e=>(d.set(e,!1),()=>d.delete(e))}),[r,d,s]);return o&&h&&(m={...m}),n.useMemo(()=>{d.forEach((e,t)=>d.set(t,!1))},[r]),n.useEffect(()=>{!r&&!d.size&&s&&s()},[r]),"popLayout"===a&&(e=V.jsx(Ra,{isPresent:r,anchorX:l,root:c,children:e})),V.jsx(Ir.Provider,{value:m,children:e})};function Ma(){return new Map}function $a(e=!0){const t=n.useContext(Ir);if(null===t)return[!0,null];const{isPresent:r,onExitComplete:s,register:i}=t,o=n.useId();n.useEffect(()=>{if(e)return i(o)},[e]);const a=n.useCallback(()=>e&&s&&s(o),[o,s,e]);return!r&&s?[!1,a]:[!0]}const Da=e=>e.key||"";function Ia(e){const t=[];return n.Children.forEach(e,e=>{n.isValidElement(e)&&t.push(e)}),t}const La=({children:e,custom:t,initial:r=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:o="sync",propagate:a=!1,anchorX:l="left",root:c})=>{const[d,u]=$a(a),h=n.useMemo(()=>Ia(e),[e]),m=a&&!d?[]:h.map(Da),p=n.useRef(!0),f=n.useRef(h),g=Mr(()=>new Map),[x,y]=n.useState(h),[v,b]=n.useState(h);Dr(()=>{p.current=!1,f.current=h;for(let e=0;e<v.length;e++){const t=Da(v[e]);m.includes(t)?g.delete(t):!0!==g.get(t)&&g.set(t,!1)}},[v,m.length,m.join("-")]);const w=[];if(h!==x){let e=[...h];for(let t=0;t<v.length;t++){const n=v[t],r=Da(n);m.includes(r)||(e.splice(t,0,n),w.push(n))}return"wait"===o&&w.length&&(e=w),b(Ia(e)),y(h),null}const{forceRender:k}=n.useContext(Pr);return V.jsx(V.Fragment,{children:v.map(e=>{const n=Da(e),x=!(a&&!d)&&(h===v||m.includes(n));return V.jsx(Pa,{isPresent:x,initial:!(p.current&&!r)&&void 0,custom:t,presenceAffectsLayout:i,mode:o,root:c,onExitComplete:x?void 0:()=>{if(!g.has(n))return;g.set(n,!0);let e=!0;g.forEach(t=>{t||(e=!1)}),e&&(null==k||k(),b(f.current),a&&(null==u||u()),s&&s())},anchorX:l,children:e},n)})})},Ba=n.createContext({strict:!1}),Oa={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Fa={};for(const Fg in Oa)Fa[Fg]={isEnabled:e=>Oa[Fg].some(t=>!!e[t])};const Ua=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Va(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ua.has(e)}let Ha=e=>!Va(e);try{"function"==typeof(Wa=require("@emotion/is-prop-valid").default)&&(Ha=e=>e.startsWith("on")?!Va(e):Wa(e))}catch{}var Wa;const za=n.createContext({});function Ga(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function qa(e){return"string"==typeof e||Array.isArray(e)}const Ya=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ja=["initial",...Ya];function Xa(e){return Ga(e.animate)||Ja.some(t=>qa(e[t]))}function Ka(e){return Boolean(Xa(e)||e.variants)}function Za(e){const{initial:t,animate:r}=function(e,t){if(Xa(e)){const{initial:t,animate:n}=e;return{initial:!1===t||qa(t)?t:void 0,animate:qa(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,n.useContext(za));return n.useMemo(()=>({initial:t,animate:r}),[Qa(t),Qa(r)])}function Qa(e){return Array.isArray(e)?e.join(" "):e}const el={};function tl(e,{layout:t,layoutId:n}){return po.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!el[e]||"opacity"===e)}const nl={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rl=mo.length;function sl(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const e=t[l];if(po.has(l))o=!0;else if(js(l))s[l]=e;else{const t=ca(e,ra[l]);l.startsWith("origin")?(a=!0,i[l]=t):r[l]=t}}if(t.transform||(o||n?r.transform=function(e,t,n){let r="",s=!0;for(let i=0;i<rl;i++){const o=mo[i],a=e[o];if(void 0===a)continue;let l=!0;if(l="number"==typeof a?a===(o.startsWith("scale")?1:0):0===parseFloat(a),!l||n){const e=ca(a,ra[o]);l||(s=!1,r+=`${nl[o]||o}(${e}) `),n&&(t[o]=e)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),a){const{originX:e="50%",originY:t="50%",originZ:n=0}=i;r.transformOrigin=`${e} ${t} ${n}`}}const il=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ol(e,t,n){for(const r in t)Ca(t[r])||tl(r,n)||(e[r]=t[r])}function al(e,t){const r={};return ol(r,e.style||{},e),Object.assign(r,function({transformTemplate:e},t){return n.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return sl(n,t,e),Object.assign({},n.vars,n.style)},[t])}(e,t)),r}function ll(e,t){const n={},r=al(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const cl={offset:"stroke-dashoffset",array:"stroke-dasharray"},dl={offset:"strokeDashoffset",array:"strokeDasharray"};function ul(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,c,d){if(sl(e,a,c),l)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:u,style:h}=e;u.transform&&(h.transform=u.transform,delete u.transform),(h.transform||u.transformOrigin)&&(h.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),h.transform&&(h.transformBox=(null==d?void 0:d.transformBox)??"fill-box",delete u.transformBox),void 0!==t&&(u.x=t),void 0!==n&&(u.y=n),void 0!==r&&(u.scale=r),void 0!==s&&function(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?cl:dl;e[i.offset]=Ws.transform(-r);const o=Ws.transform(t),a=Ws.transform(n);e[i.array]=`${o} ${a}`}(u,s,i,o,!1)}const hl=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),ml=e=>"string"==typeof e&&"svg"===e.toLowerCase();function pl(e,t,r,s){const i=n.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return ul(n,t,ml(s),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){const t={};ol(t,e.style,e),i.style={...t,...i.style}}return i}const fl=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function gl(e){return"string"==typeof e&&!e.includes("-")&&!!(fl.indexOf(e)>-1||/[A-Z]/u.test(e))}function xl(e,t,r,{latestValues:s},i,o=!1){const a=(gl(e)?pl:ll)(t,s,i,e),l=function(e,t,n){const r={};for(const s in e)"values"===s&&"object"==typeof e.values||(Ha(s)||!0===n&&Va(s)||!t&&!Va(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}(t,"string"==typeof e,o),c=e!==n.Fragment?{...l,...a,ref:r}:{},{children:d}=t,u=n.useMemo(()=>Ca(d)?d.get():d,[d]);return n.createElement(e,{...c,children:u})}function yl(e){const t=[{},{}];return null==e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function vl(e,t,n,r){if("function"==typeof t){const[s,i]=yl(r);t=t(void 0!==n?n:e.custom,s,i)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[s,i]=yl(r);t=t(void 0!==n?n:e.custom,s,i)}return t}function bl(e){return Ca(e)?e.get():e}function wl(e,t,n,r){const s={},i=r(e,{});for(const h in i)s[h]=bl(i[h]);let{initial:o,animate:a}=e;const l=Xa(e),c=Ka(e);t&&c&&!l&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===a&&(a=t.animate));let d=!!n&&!1===n.initial;d=d||!1===o;const u=d?a:o;if(u&&"boolean"!=typeof u&&!Ga(u)){const t=Array.isArray(u)?u:[u];for(let n=0;n<t.length;n++){const r=vl(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(s[r]=e)}for(const r in e)s[r]=e[r]}}}return s}const kl=e=>(t,r)=>{const s=n.useContext(za),i=n.useContext(Ir),o=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:wl(n,r,s,e),renderState:t()}}(e,t,s,i);return r?o():Mr(o)};function El(e,t,n){var r;const{style:s}=e,i={};for(const o in s)(Ca(s[o])||t.style&&Ca(t.style[o])||tl(o,e)||void 0!==(null==(r=null==n?void 0:n.getValue(o))?void 0:r.liveStyle))&&(i[o]=s[o]);return i}const Sl=kl({scrapeMotionValuesFromProps:El,createRenderState:il});function _l(e,t,n){const r=El(e,t,n);for(const s in e)if(Ca(e[s])||Ca(t[s])){r[-1!==mo.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=e[s]}return r}const jl=kl({scrapeMotionValuesFromProps:_l,createRenderState:hl}),Cl=Symbol.for("motionComponentSymbol");function Nl(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Tl(e,t,r){return n.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&("function"==typeof r?r(n):Nl(r)&&(r.current=n))},[t])}const Al=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Rl="data-"+Al("framerAppearId"),Pl=n.createContext({});function Ml(e,t,r,s,i){var o,a;const{visualElement:l}=n.useContext(za),c=n.useContext(Ba),d=n.useContext(Ir),u=n.useContext(Ta).reducedMotion,h=n.useRef(null);s=s||c.renderer,!h.current&&s&&(h.current=s(e,{visualState:t,parent:l,props:r,presenceContext:d,blockInitialAnimation:!!d&&!1===d.initial,reducedMotionConfig:u}));const m=h.current,p=n.useContext(Pl);!m||m.projection||!i||"html"!==m.type&&"svg"!==m.type||function(e,t,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:$l(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:Boolean(o)||a&&Nl(a),visualElement:e,animationType:"string"==typeof i?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}(h.current,r,i,p);const f=n.useRef(!1);n.useInsertionEffect(()=>{m&&f.current&&m.update(r,d)});const g=r[Rl],x=n.useRef(Boolean(g)&&!(null==(o=window.MotionHandoffIsComplete)?void 0:o.call(window,g))&&(null==(a=window.MotionHasOptimisedAnimation)?void 0:a.call(window,g)));return Dr(()=>{m&&(f.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),x.current&&m.animationState&&m.animationState.animateChanges())}),n.useEffect(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var e;null==(e=window.MotionHandoffMarkAsComplete)||e.call(window,g)}),x.current=!1),m.enteringChildren=void 0)}),m}function $l(e){if(e)return!1!==e.options.allowProjection?e.projection:$l(e.parent)}function Dl(e,{forwardMotionProps:t=!1}={},r,s){r&&function(e){for(const t in e)Fa[t]={...Fa[t],...e[t]}}(r);const i=gl(e)?jl:Sl;function o(r,o){let a;const l={...n.useContext(Ta),...r,layoutId:Il(r)},{isStatic:c}=l,d=Za(r),u=i(r,c);if(!c&&$r){n.useContext(Ba).strict;const t=function(e){const{drag:t,layout:n}=Fa;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(l);a=t.MeasureLayout,d.visualElement=Ml(e,u,l,s,t.ProjectionNode)}return V.jsxs(za.Provider,{value:d,children:[a&&d.visualElement?V.jsx(a,{visualElement:d.visualElement,...l}):null,xl(e,r,Tl(u,d.visualElement,o),u,c,t)]})}o.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;const a=n.forwardRef(o);return a[Cl]=e,a}function Il({layoutId:e}){const t=n.useContext(Pr).id;return t&&void 0!==e?t+"-"+e:e}function Ll(e,t){if("undefined"==typeof Proxy)return Dl;const n=new Map,r=(n,r)=>Dl(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(s,i)=>"create"===i?r:(n.has(i)||n.set(i,Dl(i,void 0,e,t)),n.get(i))})}function Bl({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Ol(e){return void 0===e||1===e}function Fl({scale:e,scaleX:t,scaleY:n}){return!Ol(e)||!Ol(t)||!Ol(n)}function Ul(e){return Fl(e)||Vl(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Vl(e){return Hl(e.x)||Hl(e.y)}function Hl(e){return e&&"0%"!==e}function Wl(e,t,n){return n+t*(e-n)}function zl(e,t,n,r,s){return void 0!==s&&(e=Wl(e,s,r)),Wl(e,n,r)+t}function Gl(e,t=0,n=1,r,s){e.min=zl(e.min,t,n,r,s),e.max=zl(e.max,t,n,r,s)}function ql(e,{x:t,y:n}){Gl(e.x,t.translate,t.scale,t.originPoint),Gl(e.y,n.translate,n.scale,n.originPoint)}const Yl=.999999999999,Jl=1.0000000000001;function Xl(e,t){e.min=e.min+t,e.max=e.max+t}function Kl(e,t,n,r,s=.5){Gl(e,t,n,ai(e.min,e.max,s),r)}function Zl(e,t){Kl(e.x,t.x,t.scaleX,t.scale,t.originX),Kl(e.y,t.y,t.scaleY,t.scale,t.originY)}function Ql(e,t){return Bl(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const ec=()=>({x:{min:0,max:0},y:{min:0,max:0}}),tc={current:null},nc={current:!1};const rc=new WeakMap;const sc=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ic{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_o,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Ss.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,ys.render(this.render,!1,!0))};const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=Xa(t),this.isVariantNode=Ka(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const u in d){const e=d[u];void 0!==a[u]&&Ca(e)&&e.set(a[u])}}mount(e){var t;this.current=e,rc.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),nc.current||function(){if(nc.current=!0,$r)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>tc.current=e.matches;e.addEventListener("change",t),t()}else tc.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||tc.current),null==(t=this.parent)||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),vs(this.notifyUpdate),vs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null==(e=this.parent)||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=po.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&ys.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in Fa){const t=Fa[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<sc.length;n++){const t=sc[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const s=t[r],i=n[r];if(Ca(s))e.addValue(r,s);else if(Ca(i))e.addValue(r,ha(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{const t=e.getStaticValue(r);e.addValue(r,ha(void 0!==t?t:s,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=ha(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var r;return null!=n&&("string"==typeof n&&(Ur(n)||Hr(n))?n=parseFloat(n):(r=n,!Na.find(Yo(r))&&si.test(t)&&(n=oa(e,t))),this.setBaseTarget(e,Ca(n)?n.get():n)),Ca(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let r;if("string"==typeof n||"object"==typeof n){const s=vl(this.props,n,null==(t=this.presenceContext)?void 0:t.custom);s&&(r=s[e])}if(n&&void 0!==r)return r;const s=this.getBaseTargetFromProps(this.props,e);return void 0===s||Ca(s)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:s}on(e,t){return this.events[e]||(this.events[e]=new Jr),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){ma.render(this.render)}}class oc extends ic{constructor(){super(...arguments),this.KeyframeResolver=la}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ca(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function ac(e,{style:t,vars:n},r,s){const i=e.style;let o;for(o in t)i[o]=t[o];for(o in null==s||s.applyProjectionStyles(i,r),n)i.setProperty(o,n[o])}class lc extends oc{constructor(){super(...arguments),this.type="html",this.renderInstance=ac}readValueFromInstance(e,t){var n,r;if(po.has(t))return(null==(n=this.projection)?void 0:n.isProjecting)?co(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return uo(n,t)})(e,t);{const n=(r=e,window.getComputedStyle(r)),s=(js(t)?n.getPropertyValue(t):n[t])||0;return"string"==typeof s?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Ql(e,t)}build(e,t,n){sl(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return El(e,t,n)}}const cc=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class dc extends oc{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ec}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(po.has(t)){const e=ia(t);return e&&e.default||0}return t=cc.has(t)?t:Al(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return _l(e,t,n)}build(e,t,n){ul(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){ac(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(cc.has(s)?s:Al(s),t.attrs[s])}(e,t,0,r)}mount(e){this.isSVGTag=ml(e.tagName),super.mount(e)}}const uc=(e,t)=>gl(e)?new dc(t):new lc(t,{allowProjection:e!==n.Fragment});function hc(e,t,n){const r=e.getProps();return vl(r,t,void 0!==n?n:r.custom,e)}const mc=e=>Array.isArray(e);function pc(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ha(n))}function fc(e){return mc(e)?e[e.length-1]||0:e}function gc(e,t){const n=e.getValue("willChange");if(r=n,Boolean(Ca(r)&&r.add))return n.add(t);if(!n&&Fr.WillChange){const n=new Fr.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function xc(e){return e.props[Rl]}const yc=e=>null!==e;const vc={type:"spring",stiffness:500,damping:25,restSpeed:10},bc={type:"keyframes",duration:.8},wc={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kc=(e,{keyframes:t})=>t.length>2?bc:po.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:vc:wc;const Ec=(e,t,n,r={},s,i)=>o=>{const a=Go(r,e)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c-=Xr(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:s};(function({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length})(a)||Object.assign(d,kc(e,d)),d.duration&&(d.duration=Xr(d.duration)),d.repeatDelay&&(d.repeatDelay=Xr(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(Fo(d),0===d.delay&&(u=!0)),(Fr.instantAnimations||Fr.skipAnimations)&&(u=!0,Fo(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,u&&!i&&void 0!==t.get()){const e=function(e,{repeat:t,repeatType:n="loop"}){const r=e.filter(yc);return r[t&&"loop"!==n&&t%2==1?0:r.length-1]}(d.keyframes,a);if(void 0!==e)return void ys.update(()=>{d.onUpdate(e),d.onComplete()})}return a.isSync?new to(d):new Ho(d)};function Sc({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,r}function _c(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;r&&(i=r);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const d in a){const t=e.getValue(d,e.latestValues[d]??null),r=a[d];if(void 0===r||c&&Sc(c,d))continue;const s={delay:n,...Go(i||{},d)},o=t.get();if(void 0!==o&&!t.isAnimating&&!Array.isArray(r)&&r===o&&!s.velocity)continue;let u=!1;if(window.MotionHandoffAnimation){const t=xc(e);if(t){const e=window.MotionHandoffAnimation(t,d,ys);null!==e&&(s.startTime=e,u=!0)}}gc(e,d),t.start(Ec(d,t,r,e.shouldReduceMotion&&qo.has(d)?{type:!1}:s,e,u));const h=t.animation;h&&l.push(h)}return o&&Promise.all(l).then(()=>{ys.update(()=>{o&&function(e,t){const n=hc(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i)pc(e,o,fc(i[o]))}(e,o)})}),l}function jc(e,t,n,r=0,s=1){const i=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),o=e.size,a=(o-1)*r;return"function"==typeof n?n(i,o):1===s?i*r:a-i*r}function Cc(e,t,n={}){var r;const s=hc(e,t,"exit"===n.type?null==(r=e.presenceContext)?void 0:r.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(_c(e,s,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(r=0)=>{const{delayChildren:s=0,staggerChildren:o,staggerDirection:a}=i;return function(e,t,n=0,r=0,s=0,i=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(Cc(l,t,{...o,delay:n+("function"==typeof r?0:r)+jc(e.variantChildren,l,r,s,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}(e,t,r,s,o,a,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[e,t]="beforeChildren"===l?[o,a]:[a,o];return e().then(()=>t())}return Promise.all([o(),a(n.delay)])}function Nc(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Tc=Ja.length;function Ac(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Ac(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Tc;n++){const r=Ja[n],s=e.props[r];(qa(s)||!1===s)&&(t[r]=s)}return t}const Rc=[...Ya].reverse(),Pc=Ya.length;function Mc(e){return t=>Promise.all(t.map(({animation:t,options:n})=>function(e,t,n={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map(t=>Cc(e,t,n));r=Promise.all(s)}else if("string"==typeof t)r=Cc(e,t,n);else{const s="function"==typeof t?hc(e,t,n.custom):t;r=Promise.all(_c(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}(e,t,n)))}function $c(e){let t=Mc(e),n=Lc(),r=!0;const s=t=>(n,r)=>{var s;const i=hc(e,r,"exit"===t?null==(s=e.presenceContext)?void 0:s.custom:void 0);if(i){const{transition:e,transitionEnd:t,...r}=i;n={...n,...r,...t}}return n};function i(i){const{props:o}=e,a=Ac(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<Pc;t++){const h=Rc[t],m=n[h],p=void 0!==o[h]?o[h]:a[h],f=qa(p),g=h===i?m.isActive:null;!1===g&&(u=t);let x=p===a[h]&&p!==o[h]&&f;if(x&&r&&e.manuallyAnimateOnMount&&(x=!1),m.protectedKeys={...d},!m.isActive&&null===g||!p&&!m.prevProp||Ga(p)||"boolean"==typeof p)continue;const y=Dc(m.prevProp,p);let v=y||h===i&&m.isActive&&!x&&f||t>u&&f,b=!1;const w=Array.isArray(p)?p:[p];let k=w.reduce(s(h),{});!1===g&&(k={});const{prevResolvedValues:E={}}=m,S={...E,...k},_=t=>{v=!0,c.has(t)&&(b=!0,c.delete(t)),m.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in S){const t=k[e],n=E[e];if(d.hasOwnProperty(e))continue;let r=!1;r=mc(t)&&mc(n)?!Nc(t,n):t!==n,r?null!=t?_(e):c.add(e):void 0!==t&&c.has(e)?_(e):m.protectedKeys[e]=!0}m.prevProp=p,m.prevResolvedValues=k,m.isActive&&(d={...d,...k}),r&&e.blockInitialAnimation&&(v=!1);const j=x&&y;v&&(!j||b)&&l.push(...w.map(t=>{const n={type:h};if("string"==typeof t&&r&&!j&&e.manuallyAnimateOnMount&&e.parent){const{parent:r}=e,s=hc(r,t);if(r.enteringChildren&&s){const{delayChildren:t}=s.transition||{};n.delay=jc(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(c.size){const t={};if("boolean"!=typeof o.initial){const n=hc(e,Array.isArray(o.initial)?o.initial[0]:o.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const r=e.getBaseTarget(n),s=e.getValue(n);s&&(s.liveStyle=!0),t[n]=r??null}),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:i,setActive:function(t,r){var s;if(n[t].isActive===r)return Promise.resolve();null==(s=e.variantChildren)||s.forEach(e=>{var n;return null==(n=e.animationState)?void 0:n.setActive(t,r)}),n[t].isActive=r;const o=i(t);for(const e in n)n[e].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=Lc(),r=!0}}}function Dc(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!Nc(t,e)}function Ic(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Lc(){return{animate:Ic(!0),whileInView:Ic(),whileHover:Ic(),whileTap:Ic(),whileDrag:Ic(),whileFocus:Ic(),exit:Ic()}}class Bc{constructor(e){this.isMounted=!1,this.node=e}update(){}}let Oc=0;const Fc={animation:{Feature:class extends Bc{constructor(e){super(e),e.animationState||(e.animationState=$c(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ga(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}}},exit:{Feature:class extends Bc{constructor(){super(...arguments),this.id=Oc++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function Uc(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Vc(e){return{point:{x:e.pageX,y:e.pageY}}}function Hc(e,t,n,r){return Uc(e,t,(e=>t=>va(t)&&e(t,Vc(t)))(n),r)}function Wc(e){return e.max-e.min}function zc(e,t,n,r=.5){e.origin=r,e.originPoint=ai(t.min,t.max,e.origin),e.scale=Wc(n)/Wc(t),e.translate=ai(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Gc(e,t,n,r){zc(e.x,t.x,n.x,r?r.originX:void 0),zc(e.y,t.y,n.y,r?r.originY:void 0)}function qc(e,t,n){e.min=n.min+t.min,e.max=e.min+Wc(t)}function Yc(e,t,n){e.min=t.min-n.min,e.max=e.min+Wc(t)}function Jc(e,t,n){Yc(e.x,t.x,n.x),Yc(e.y,t.y,n.y)}function Xc(e){return[e("x"),e("y")]}const Kc=({current:e})=>e?e.ownerDocument.defaultView:null,Zc=(e,t)=>Math.abs(e-t);class Qc{constructor(e,t,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=nd(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Zc(e.x,t.x),r=Zc(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:s}=bs;this.history.push({...r,timestamp:s});const{onStart:i,onMove:o}=this.handlers;t||(i&&i(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=ed(t,this.transformPagePoint),ys.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=nd("pointercancel"===e.type?this.lastMoveEventInfo:ed(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),r&&r(e,i)},!va(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=r||window;const o=ed(Vc(e),this.transformPagePoint),{point:a}=o,{timestamp:l}=bs;this.history=[{...a,timestamp:l}];const{onSessionStart:c}=t;c&&c(e,nd(o,this.history)),this.removeListeners=qr(Hc(this.contextWindow,"pointermove",this.handlePointerMove),Hc(this.contextWindow,"pointerup",this.handlePointerUp),Hc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),vs(this.updatePoint)}}function ed(e,t){return t?{point:t(e.point)}:e}function td(e,t){return{x:e.x-t.x,y:e.y-t.y}}function nd({point:e},t){return{point:e,delta:td(e,sd(t)),offset:td(e,rd(t)),velocity:id(t,.1)}}function rd(e){return e[0]}function sd(e){return e[e.length-1]}function id(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=sd(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Xr(t)));)n--;if(!r)return{x:0,y:0};const i=Kr(s.timestamp-r.timestamp);if(0===i)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function od(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function ad(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const ld=.35;function cd(e,t,n){return{min:dd(e,t),max:dd(e,n)}}function dd(e,t){return"number"==typeof e?e:e[t]||0}const ud=new WeakMap;class hd{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:s}=this.getProps();this.panSession=new Qc(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Vc(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:s}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(i=n)||"y"===i?pa[i]?null:(pa[i]=!0,()=>{pa[i]=!1}):pa.x||pa.y?null:(pa.x=pa.y=!0,()=>{pa.x=pa.y=!1}),!this.openDragLock))return;var i;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xc(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Hs.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=Wc(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),s&&ys.postRender(()=>s(e,t)),gc(this.visualElement,"transform");const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:s,onDrag:i}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:o}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(o),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",t.point,o),this.updateAxis("y",t.point,o),this.visualElement.render(),i&&i(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>Xc(e=>{var t;return"paused"===this.getAnimationState(e)&&(null==(t=this.getAxisMotionValue(e).animation)?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,distanceThreshold:n,contextWindow:Kc(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&ys.postRender(()=>o(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!md(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=function(e,{min:t,max:n},r){return void 0!==t&&e<t?e=r?ai(t,e,r.min):Math.max(e,t):void 0!==n&&e>n&&(e=r?ai(n,e,r.max):Math.min(e,n)),e}(i,this.constraints[e],this.elastic[e])),s.set(i)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(e=this.visualElement.projection)?void 0:e.layout,s=this.constraints;t&&Nl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,{top:t,left:n,bottom:r,right:s}){return{x:od(e.x,n,s),y:od(e.y,t,r)}}(r.layoutBox,t),this.elastic=function(e=ld){return!1===e?e=0:!0===e&&(e=ld),{x:cd(e,"left","right"),y:cd(e,"top","bottom")}}(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Xc(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Nl(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=function(e,t,n){const r=Ql(e,n),{scroll:s}=t;return s&&(Xl(r.x,s.offset.x),Xl(r.y,s.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let i=function(e,t){return{x:ad(e.x,t.x),y:ad(e.y,t.y)}}(r.layout.layoutBox,s);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(i));this.hasMutatedConstraints=!!e,e&&(i=Bl(e))}return i}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},l=Xc(o=>{if(!md(o,t,this.currentDirection))return;let l=a&&a[o]||{};i&&(l={min:0,max:0});const c=r?200:1e6,d=r?40:1e7,u={type:"inertia",velocity:n?e[o]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...s,...l};return this.startAxisValueAnimation(o,u)});return Promise.all(l).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return gc(this.visualElement,e),n.start(Ec(e,n,0,t,this.visualElement,!1))}stopAnimation(){Xc(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Xc(e=>{var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.pause()})}getAnimationState(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Xc(t=>{const{drag:n}=this.getProps();if(!md(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:i}=r.layout.layoutBox[t];s.set(e[t]-ai(n,i,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Nl(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Xc(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=Wc(e),s=Wc(t);return s>r?n=Yr(t.min,t.max-r,e.min):r>s&&(n=Yr(e.min,e.max-s,t.min)),Or(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Xc(t=>{if(!md(t,e,null))return;const n=this.getAxisMotionValue(t),{min:s,max:i}=this.constraints[t];n.set(ai(s,i,r[t]))})}addListeners(){if(!this.visualElement.current)return;ud.set(this.visualElement,this);const e=Hc(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Nl(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),ys.read(t);const s=Uc(window,"resize",()=>this.scalePositionWithinConstraints()),i=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(Xc(t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())});return()=>{s(),e(),r(),i&&i()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:i=ld,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:i,dragMomentum:o}}}function md(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const pd=e=>(t,n)=>{e&&ys.postRender(()=>e(t,n))};const fd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gd(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const xd={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!Ws.test(e))return e;e=parseFloat(e)}return`${gd(e,t.target.x)}% ${gd(e,t.target.y)}%`}},yd={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=si.parse(e);if(s.length>5)return r;const i=si.createTransformer(e),o="number"!=typeof s[0]?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const c=ai(a,l,.5);return"number"==typeof s[2+o]&&(s[2+o]/=c),"number"==typeof s[3+o]&&(s[3+o]/=c),i(s)}};let vd=!1;class bd extends n.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;!function(e){for(const t in e)el[t]=e[t],js(t)&&(el[t].isCSSVariable=!0)}(kd),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),vd&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),fd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,{projection:i}=n;return i?(i.isPresent=s,vd=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==s?i.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?i.promote():i.relegate()||ys.postRender(()=>{const e=i.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ma.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;vd=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function wd(e){const[t,r]=$a(),s=n.useContext(Pr);return V.jsx(bd,{...e,layoutGroup:s,switchLayoutGroup:n.useContext(Pl),isPresent:t,safeToRemove:r})}const kd={borderRadius:{...xd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xd,borderTopRightRadius:xd,borderBottomLeftRadius:xd,borderBottomRightRadius:xd,boxShadow:yd};const Ed=(e,t)=>e.depth-t.depth;class Sd{constructor(){this.children=[],this.isDirty=!1}add(e){Lr(this.children,e),this.isDirty=!0}remove(e){Br(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Ed),this.isDirty=!1,this.children.forEach(e)}}const _d=["TopLeft","TopRight","BottomLeft","BottomRight"],jd=_d.length,Cd=e=>"string"==typeof e?parseFloat(e):e,Nd=e=>"number"==typeof e||Ws.test(e);function Td(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Ad=Pd(0,.5,ls),Rd=Pd(.5,.95,zr);function Pd(e,t,n){return r=>r<e?0:r>t?1:n(Yr(e,t,r))}function Md(e,t){e.min=t.min,e.max=t.max}function $d(e,t){Md(e.x,t.x),Md(e.y,t.y)}function Dd(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Id(e,t,n,r,s){return e=Wl(e-=t,1/n,r),void 0!==s&&(e=Wl(e,1/s,r)),e}function Ld(e,t,[n,r,s],i,o){!function(e,t=0,n=1,r=.5,s,i=e,o=e){Hs.test(t)&&(t=parseFloat(t),t=ai(o.min,o.max,t/100)-o.min);if("number"!=typeof t)return;let a=ai(i.min,i.max,r);e===i&&(a-=t),e.min=Id(e.min,t,n,a,s),e.max=Id(e.max,t,n,a,s)}(e,t[n],t[r],t[s],t.scale,i,o)}const Bd=["x","scaleX","originX"],Od=["y","scaleY","originY"];function Fd(e,t,n,r){Ld(e.x,t,Bd,n?n.x:void 0,r?r.x:void 0),Ld(e.y,t,Od,n?n.y:void 0,r?r.y:void 0)}function Ud(e){return 0===e.translate&&1===e.scale}function Vd(e){return Ud(e.x)&&Ud(e.y)}function Hd(e,t){return e.min===t.min&&e.max===t.max}function Wd(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function zd(e,t){return Wd(e.x,t.x)&&Wd(e.y,t.y)}function Gd(e){return Wc(e.x)/Wc(e.y)}function qd(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Yd{constructor(){this.members=[]}add(e){Lr(this.members,e),e.scheduleRender()}remove(e){if(Br(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Jd=["","X","Y","Z"];let Xd=0;function Kd(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Zd(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=xc(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ys,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Zd(r)}function Qd({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(e={},n=(null==t?void 0:t())){this.id=Xd++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(nu),this.nodes.forEach(cu),this.nodes.forEach(du),this.nodes.forEach(ru)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new Sd)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Jr),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;var n;this.isSVG=ja(t)&&!(ja(n=t)&&"svg"===n.tagName),this.instance=t;const{layoutId:r,layout:s,visualElement:i}=this.options;if(i&&!i.current&&i.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(s||r)&&(this.isLayoutDirty=!0),e){let n,r=0;const s=()=>this.root.updateBlockedByResize=!1;ys.read(()=>{r=window.innerWidth}),e(t,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=Ss.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(vs(r),e(i-t))};return ys.setup(r,!0),()=>vs(r)}(s,250),fd.hasAnimatedSinceResize&&(fd.hasAnimatedSinceResize=!1,this.nodes.forEach(lu)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&i&&(r||s)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||i.getDefaultTransition()||gu,{onLayoutAnimationStart:o,onLayoutAnimationComplete:a}=i.getProps(),l=!this.targetLayout||!zd(this.targetLayout,r),c=!t&&n;if(this.options.layoutRoot||this.resumeFrom||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const t={...Go(s,"layout"),onPlay:o,onComplete:a};(i.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,c)}else t||lu(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(uu),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Zd(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(iu);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(ou);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(au),this.nodes.forEach(eu),this.nodes.forEach(tu)):this.nodes.forEach(ou),this.clearAllSnapshots();const e=Ss.now();bs.delta=Or(0,1e3/60,e-bs.timestamp),bs.timestamp=e,bs.isProcessing=!0,ws.update.process(bs),ws.preRender.process(bs),ws.render.process(bs),bs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ma.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(su),this.sharedNodes.forEach(hu)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ys.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ys.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||Wc(this.snapshot.measuredBox.x)||Wc(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Vd(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||Ul(this.latestValues)||i)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),vu((r=n).x),vu(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(wu))){const{scroll:e}=this.root;e&&(Xl(n.x,e.offset.x),Xl(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if($d(n,e),null==(t=this.scroll)?void 0:t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:s,options:i}=t;t!==this.root&&s&&i.layoutScroll&&(s.wasRoot&&$d(n,e),Xl(n.x,s.offset.x),Xl(n.y,s.offset.y))}return n}applyTransform(e,t=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};$d(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Zl(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Ul(e.latestValues)&&Zl(n,e.latestValues)}return Ul(this.latestValues)&&Zl(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};$d(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Ul(e.latestValues))continue;Fl(e.latestValues)&&e.updateSnapshot();const r=ec();$d(r,e.measurePageBox()),Fd(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return Ul(this.latestValues)&&Fd(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(t=this.parent)?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:s,layoutId:i}=this.options;if(this.layout&&(s||i)){if(this.resolvedRelativeTargetAt=bs.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Jc(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),$d(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var o,a,l;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,l=this.relativeParent.target,qc(o.x,a.x,l.x),qc(o.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):$d(this.target,this.layout.layoutBox),ql(this.target,this.targetDelta)):$d(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Jc(this.relativeTargetOrigin,this.target,e.target),$d(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!Fl(this.parent.latestValues)&&!Vl(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===bs.timestamp&&(r=!1),r)return;const{layout:s,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!s&&!i)return;$d(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;!function(e,t,n,r=!1){const s=n.length;if(!s)return;let i,o;t.x=t.y=1;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:s}=i.options;s&&s.props.style&&"contents"===s.props.style.display||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Zl(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,ql(e,o)),r&&Ul(i.latestValues)&&Zl(e,i.latestValues))}t.x<Jl&&t.x>Yl&&(t.x=1),t.y<Jl&&t.y>Yl&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(Dd(this.prevProjectionDelta.x,this.projectionDelta.x),Dd(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Gc(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===o&&this.treeScale.y===a&&qd(this.projectionDelta.x,this.prevProjectionDelta.x)&&qd(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null==(t=this.options.visualElement)||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const n=this.snapshot,r=n?n.latestValues:{},s={...this.latestValues},i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const o={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(fu));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,m,p,f,g;mu(i.x,e.x,n),mu(i.y,e.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jc(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),m=this.relativeTarget,p=this.relativeTargetOrigin,f=o,g=n,pu(m.x,p.x,f.x,g),pu(m.y,p.y,f.y,g),u&&(l=this.relativeTarget,h=u,Hd(l.x,h.x)&&Hd(l.y,h.y))&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),$d(u,this.relativeTarget)),a&&(this.animationValues=s,function(e,t,n,r,s,i){s?(e.opacity=ai(0,n.opacity??1,Ad(r)),e.opacityExit=ai(t.opacity??1,0,Rd(r))):i&&(e.opacity=ai(t.opacity??1,n.opacity??1,r));for(let o=0;o<jd;o++){const s=`border${_d[o]}Radius`;let i=Td(t,s),a=Td(n,s);void 0===i&&void 0===a||(i||(i=0),a||(a=0),0===i||0===a||Nd(i)===Nd(a)?(e[s]=Math.max(ai(Cd(i),Cd(a),r),0),(Hs.test(a)||Hs.test(i))&&(e[s]+="%")):e[s]=a)}(t.rotate||n.rotate)&&(e.rotate=ai(t.rotate||0,n.rotate||0,r))}(s,r,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n,r;this.notifyListeners("animationStart"),null==(t=this.currentAnimation)||t.stop(),null==(r=null==(n=this.resumingFrom)?void 0:n.currentAnimation)||r.stop(),this.pendingAnimation&&(vs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ys.update(()=>{fd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ha(0)),this.currentAnimation=function(e,t,n){const r=Ca(e)?e:ha(e);return r.start(Ec("",r,t,n)),r.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:s}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&bu(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Wc(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=Wc(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}$d(t,n),Zl(t,s),Gc(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Yd);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null==(e=this.getStack())?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null==(e=this.getStack())?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&Kd("z",e,r,this.animationValues);for(let s=0;s<Jd.length;s++)Kd(`rotate${Jd[s]}`,e,r,this.animationValues),Kd(`skew${Jd[s]}`,e,r,this.animationValues);e.render();for(const s in r)e.setStaticValue(s,r[s]),this.animationValues&&(this.animationValues[s]=r[s]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=bl(null==t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=bl(null==t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!Ul(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const s=r.animationValues||r.latestValues;this.applyTransformsToTarget();let i=function(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=(null==n?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:s,rotateY:i,skewX:o,skewY:a}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),s&&(r+=`rotateX(${s}deg) `),i&&(r+=`rotateY(${i}deg) `),o&&(r+=`skewX(${o}deg) `),a&&(r+=`skewY(${a}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return 1===a&&1===l||(r+=`scale(${a}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,s);n&&(i=n(s,i)),e.transform=i;const{x:o,y:a}=this.projectionDelta;e.transformOrigin=`${100*o.origin}% ${100*a.origin}% 0`,r.animationValues?e.opacity=r===this?s.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:e.opacity=r===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const l in el){if(void 0===s[l])continue;const{correct:t,applyTo:n,isCSSVariable:o}=el[l],a="none"===i?s[l]:t(s[l],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=a}else o?this.options.visualElement.renderState.vars[l]=a:e[l]=a}this.options.layoutId&&(e.pointerEvents=r===this?bl(null==t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach(iu),this.root.sharedNodes.clear()}}}function eu(e){e.updateLayout()}function tu(e){var t;const n=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:s}=e.options,i=n.source!==e.layout.source;"size"===s?Xc(e=>{const r=i?n.measuredBox[e]:n.layoutBox[e],s=Wc(r);r.min=t[e].min,r.max=r.min+s}):bu(s,n.layoutBox,t)&&Xc(r=>{const s=i?n.measuredBox[r]:n.layoutBox[r],o=Wc(t[r]);s.max=s.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+o)});const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Gc(o,t,n.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i?Gc(a,e.applyTransform(r,!0),n.measuredBox):Gc(a,t,n.layoutBox);const l=!Vd(o);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:s,layout:i}=r;if(s&&i){const o={x:{min:0,max:0},y:{min:0,max:0}};Jc(o,n.layoutBox,s.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};Jc(a,t,i.layoutBox),zd(o,a)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=o,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function nu(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function ru(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function su(e){e.clearSnapshot()}function iu(e){e.clearMeasurements()}function ou(e){e.isLayoutDirty=!1}function au(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function lu(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function cu(e){e.resolveTargetDelta()}function du(e){e.calcProjection()}function uu(e){e.resetSkewAndRotation()}function hu(e){e.removeLeadSnapshot()}function mu(e,t,n){e.translate=ai(t.translate,0,n),e.scale=ai(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function pu(e,t,n,r){e.min=ai(t.min,n.min,r),e.max=ai(t.max,n.max,r)}function fu(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const gu={duration:.45,ease:[.4,0,.1,1]},xu=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),yu=xu("applewebkit/")&&!xu("chrome/")?Math.round:zr;function vu(e){e.min=yu(e.min),e.max=yu(e.max)}function bu(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=Gd(t),s=Gd(n),i=.2,!(Math.abs(r-s)<=i));var r,s,i}function wu(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}const ku=Qd({attachResizeListener:(e,t)=>Uc(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Eu={current:void 0},Su=Qd({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Eu.current){const e=new ku({});e.mount(window),e.setOptions({layoutScroll:!0}),Eu.current=e}return Eu.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),_u={pan:{Feature:class extends Bc{constructor(){super(...arguments),this.removePointerDownListener=zr}onPointerDown(e){this.session=new Qc(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Kc(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:pd(e),onStart:pd(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&ys.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=Hc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Bc{constructor(e){super(e),this.removeGroupControls=zr,this.removeListeners=zr,this.controls=new hd(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zr}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Su,MeasureLayout:wd}};function ju(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const s=r["onHover"+n];s&&ys.postRender(()=>s(t,Vc(t)))}function Cu(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const s=r["onTap"+("End"===n?"":n)];s&&ys.postRender(()=>s(t,Vc(t)))}const Nu=new WeakMap,Tu=new WeakMap,Au=e=>{const t=Nu.get(e.target);t&&t(e)},Ru=e=>{e.forEach(Au)};function Pu(e,t,n){const r=function({root:e,...t}){const n=e||document;Tu.has(n)||Tu.set(n,{});const r=Tu.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(Ru,{root:e,...t})),r[s]}(t);return Nu.set(e,n),r.observe(e),()=>{Nu.delete(e),r.unobserve(e)}}const Mu={some:0,all:1};const $u=Ll({...Fc,...{inView:{Feature:class extends Bc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,i={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:Mu[r]};return Pu(this.node.current,i,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,s&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),i=t?n:r;i&&i(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Bc{mount(){const{current:e}=this.node;e&&(this.unmount=_a(e,(e,t)=>(Cu(this.node,t,"Start"),(e,{success:t})=>Cu(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Bc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qr(Uc(this.node.current,"focus",()=>this.onFocus()),Uc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Bc{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){const[r,s,i]=ga(e,n),o=e=>{if(!xa(e))return;const{target:n}=e,r=t(n,e);if("function"!=typeof r||!n)return;const i=e=>{xa(e)&&(r(e),n.removeEventListener("pointerleave",i))};n.addEventListener("pointerleave",i,s)};return r.forEach(e=>{e.addEventListener("pointerenter",o,s)}),i}(e,(e,t)=>(ju(this.node,t,"Start"),e=>ju(this.node,e,"End"))))}unmount(){}}}},..._u,...{layout:{ProjectionNode:Su,MeasureLayout:wd}}},uc),Du={glass:"rounded-2xl border overflow-hidden backdrop-blur-md bg-card/4 border-border shadow-xl shadow-black/40",solid:"rounded-2xl border overflow-hidden bg-card/80 border-border shadow-sm",plain:"rounded-2xl overflow-hidden"},Iu={sm:"px-3 py-2.5",md:"px-4 py-3",lg:"px-5 py-4"};function Lu({expanded:e,onToggle:t,title:r,subtitle:s,leading:i,trailing:o,children:a,variant:l="glass",className:d="",headerClassName:u="",bodyClassName:h="",size:m="md",disableChevron:p=!1,disabled:f=!1,transition:g={duration:.3},style:x}){const y=n.useId();return V.jsxs($u.div,{layout:!0,initial:!1,transition:g,style:x,className:[Du[l],e?"ring-1 ring-border":"",d].join(" "),children:[V.jsxs("button",{type:"button",onClick:f?void 0:t,"aria-expanded":e,"aria-controls":y,className:["w-full flex items-center gap-3 text-left select-none",Iu[m],u,f?"opacity-60 cursor-default":"hover:bg-card/3"].join(" "),children:[i&&V.jsx("div",{className:"w-12 h-12 rounded-xl overflow-hidden bg-card/10 flex items-center justify-center shrink-0",children:i}),V.jsxs("div",{className:"min-w-0 flex-1",children:[V.jsx("div",{className:["truncate font-semibold","glass"===l?"text-black opacity-95":"text-black"].join(" "),children:r}),s&&V.jsx("div",{className:["truncate text-sm","glass"===l?"text-black opacity-60":"text-black"].join(" "),children:s})]}),o,!p&&V.jsx($u.div,{animate:{rotate:e?180:0},transition:{type:"spring",stiffness:300,damping:24,...g},className:["ml-1","glass"===l?"text-black opacity-70":"text-black"].join(" "),children:V.jsx(c,{size:18})})]}),V.jsx(La,{initial:!1,children:e&&V.jsx($u.div,{id:y,layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:g,className:["pt-1 pb-4 px-4",h,"glass"===l?"text-black opacity-90":"text-black"].join(" "),children:a},"body")})]})}function Bu({className:e,step:t,min:n,mode:r,inputMode:s,pattern:i,onFocus:o,...a}){const l=r??"decimal",c=s??l,d=i??("numeric"===l?"[0-9]*":"[0-9]*[.,]?[0-9]*");return V.jsx(Er,{type:"number",inputMode:c,pattern:d,step:t,min:n,className:Un(e),onFocus:e=>{e.target.select(),null==o||o(e)},...a})}const Ou=({mode:e="edit",items:t,weightUnitLabel:r="kg",onChange:s,onRemove:i,onAdd:o,onToggleDone:l,onDeleteExercise:c,deleteTitle:d="Remove this exercise from the routine",deleteDisabled:u=!1,onFocusScroll:h,disabled:m=!1,className:p=""})=>{const f=m||"view"===e,g=f||u;return n.useEffect(()=>{},[e,m,f,t.length,i,s,o,c,h,p]),V.jsxs("div",{className:p,children:[V.jsxs("div",{className:"grid grid-cols-4 gap-3 md:gap-4 text-[10px] md:text-xs text-black uppercase tracking-wider mb-2",children:[V.jsx("span",{children:"Set"}),V.jsx("span",{className:"text-center",children:"Reps"}),V.jsxs("span",{className:"text-center",children:["Weight (",r,")"]}),V.jsx("span",{})]}),V.jsx("div",{className:"space-y-3",children:t.map((n,r)=>{const o="edit"===e&&!f&&!!i&&(n.removable??!0)&&t.length>1;return V.jsxs("div",{className:"grid grid-cols-4 gap-3 md:gap-4 items-center py-2 px-3 rounded-lg border border-border/20 "+(n.done?"bg-success-light":"bg-soft-gray/30"),children:[V.jsx("span",{className:"text-sm font-medium text-black",children:r+1}),V.jsx(Bu,{mode:"numeric",step:1,min:0,value:n.reps??"0",onFocus:h,onChange:e=>null==s?void 0:s(n.key,"reps",e.target.value),disabled:f,className:"bg-input-background border-border text-black text-center h-10 md:h-8 rounded-md focus:border-warm-sage/20 text-sm "+(f?"opacity-50 cursor-not-allowed":"")}),V.jsx(Bu,{mode:"decimal",step:.5,min:0,value:n.weight??"0",onFocus:h,onChange:e=>null==s?void 0:s(n.key,"weight",e.target.value),disabled:f,className:"bg-input-background border-border text-black text-center h-10 md:h-8 rounded-md focus:border-warm-sage/20 text-sm "+(f?"opacity-50 cursor-not-allowed":"")}),"workout"===e?V.jsx("div",{className:"flex justify-end",children:V.jsx("input",{type:"checkbox",checked:!!n.done,onChange:e=>null==l?void 0:l(n.key,e.target.checked),className:"w-5 h-5 ml-auto rounded-full border-2 border-border text-black accent-success checked:border-success"})}):o?V.jsx(hr,{type:"button",variant:"ghost",size:"sm",onClick:()=>null==i?void 0:i(n.key),className:"p-1 h-auto ml-auto",title:"Remove this set",children:V.jsx(x,{size:14})}):V.jsx("div",{className:"w-6 h-6 ml-auto"})]},n.key)})}),(o||c)&&V.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[o?V.jsxs(hr,{onClick:o,variant:"primary",className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium",disabled:g,title:g?f?"Editing disabled":"Adding sets is disabled":"Add a set",children:[V.jsx(a,{size:16}),V.jsx("span",{className:"text-xs md:text-sm font-medium uppercase tracking-wider",children:"Add Set"})]}):V.jsx("div",{}),c&&V.jsx(hr,{variant:"secondary",size:"sm",onClick:c,disabled:u||f,className:"p-2 h-auto rounded-lg font-medium "+(u||f?"opacity-50 cursor-not-allowed":"bg-destructive-light text-black hover:bg-destructive"),title:d,children:V.jsx(y,{size:16})})]})]})},Fu=({items:e,weightUnitLabel:t,onChange:n,onRemove:r,onAdd:s,onToggleDone:i,onDeleteExercise:o,deleteDisabled:a,disabled:l=!1,onFocusScroll:c,className:d="",note:u,onCancel:h,onPrimary:m,primaryLabel:p="Save",primaryDisabled:f=!1,mode:g="edit"})=>V.jsxs("div",{className:["rounded-2xl bg-card/70 border border-border p-3 md:p-4",d].join(" "),children:[u&&V.jsx("p",{className:"text-xs md:text-sm text-black mb-3 italic bg-[var(--warm-cream)]/60 p-3 rounded-lg",children:u}),V.jsx(Ou,{mode:g,items:e,weightUnitLabel:t,onDeleteExercise:"workout"===g?void 0:o,deleteDisabled:a,onChange:n,onRemove:"workout"===g?void 0:r,onAdd:s,onToggleDone:i,onFocusScroll:c,disabled:l}),"workout"!==g&&h&&V.jsx("div",{className:"mt-4 flex justify-end items-center gap-2",children:V.jsx(hr,{variant:"secondary",size:"sm",onClick:h,disabled:l,className:"p-3 h-auto bg-card/70 border-destructive-light text-black hover:bg-destructive-light btn-tactile rounded-xl font-medium "+(l?"opacity-50 cursor-not-allowed":""),title:"Cancel",children:V.jsx(y,{size:18})})}),"workout"!==g&&m&&V.jsx("div",{className:"mt-6",children:V.jsx(hr,{onClick:m,disabled:f||l,className:"w-full h-12 md:h-14 bg-primary text-black font-medium rounded-full hover:bg-primary-hover btn-tactile "+(f||l?"opacity-50 cursor-not-allowed":""),children:p})})]});
/*! Capacitor: https://capacitorjs.com/ - MIT License */
var Uu,Vu;(Vu=Uu||(Uu={})).Unimplemented="UNIMPLEMENTED",Vu.Unavailable="UNAVAILABLE";class Hu extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const Wu=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>null!==t?t.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e),i=e=>{var t;return null===(t=n.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},o=new Map;return n.convertFileSrc||(n.convertFileSrc=e=>e),n.getPlatform=s,n.handleError=t=>e.console.error(t),n.isNativePlatform=()=>"web"!==s(),n.isPluginAvailable=e=>{const t=o.get(e);return!!(null==t?void 0:t.platforms.has(s()))||!!i(e)},n.registerPlugin=(e,a={})=>{const l=o.get(e);if(l)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),l.proxy;const c=s(),d=i(e);let u;const h=r=>{let s;const i=(...i)=>{const o=(async()=>(!u&&c in a?u=u="function"==typeof a[c]?await a[c]():a[c]:null!==t&&!u&&"web"in a&&(u=u="function"==typeof a.web?await a.web():a.web),u))().then(t=>{const o=((t,r)=>{var s,i;if(!d){if(t)return null===(i=t[r])||void 0===i?void 0:i.bind(t);throw new Hu(`"${e}" plugin is not implemented on ${c}`,Uu.Unimplemented)}{const i=null==d?void 0:d.methods.find(e=>r===e.name);if(i)return"promise"===i.rtype?t=>n.nativePromise(e,r.toString(),t):(t,s)=>n.nativeCallback(e,r.toString(),t,s);if(t)return null===(s=t[r])||void 0===s?void 0:s.bind(t)}})(t,r);if(o){const e=o(...i);return s=null==e?void 0:e.remove,e}throw new Hu(`"${e}.${r}()" is not implemented on ${c}`,Uu.Unimplemented)});return"addListener"===r&&(o.remove=async()=>s()),o};return i.toString=()=>`${r.toString()}() { [capacitor code] }`,Object.defineProperty(i,"name",{value:r,writable:!1,configurable:!1}),i},m=h("addListener"),p=h("removeListener"),f=(e,t)=>{const n=m({eventName:e},t),r=async()=>{const r=await n;p({eventName:e,callbackId:r},t)},s=new Promise(e=>n.then(()=>e({remove:r})));return s.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},s},g=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return d?f:m;case"removeListener":return p;default:return h(t)}}});return r[e]=g,o.set(e,{name:e,proxy:g,platforms:new Set([...Object.keys(a),...d?[c]:[]])}),g},n.Exception=Hu,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},zu=(e=>e.Capacitor=Wu(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:{}),Gu=zu.registerPlugin;class qu{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),n&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const r=this.listeners[e];if(r)r.forEach(e=>e(t));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new zu.Exception(e,Uu.Unimplemented)}unavailable(e="not available"){return new zu.Exception(e,Uu.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const Yu=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ju=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Xu extends qu{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[n,r]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=Ju(n).trim(),r=Ju(r).trim(),t[n]=r}),t}async setCookie(e){try{const t=Yu(e.key),n=Yu(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),i=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${r}; path=${s}; ${i};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Gu("CapacitorCookies",{web:()=>new Xu});const Ku=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((n,r,s)=>(n[r]=e[t[s]],n),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)n.body=e.data;else if(r.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,r]of Object.entries(e.data||{}))t.set(n,r);n.body=t.toString()}else if(r.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,n)=>{t.append(n,e)});else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const r=new Headers(n.headers);r.delete("content-type"),n.headers=r}else(r.includes("application/json")||"object"==typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class Zu extends qu{async request(e){const t=Ku(e,e.webFetchExtra),n=((e,t=!0)=>e?Object.entries(e).reduce((e,n)=>{const[r,s]=n;let i,o;return Array.isArray(s)?(o="",s.forEach(e=>{i=t?encodeURIComponent(e):e,o+=`${r}=${i}&`}),o.slice(0,-1)):(i=t?encodeURIComponent(s):s,o=`${r}=${i}`),`${e}&${o}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),r=n?`${e.url}?${n}`:e.url,s=await fetch(r,t),i=s.headers.get("content-type")||"";let o,a,{responseType:l="text"}=s.ok?e:{};switch(i.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":a=await s.blob(),o=await(async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},r.onerror=e=>n(e),r.readAsDataURL(e)}))(a);break;case"json":o=await s.json();break;default:o=await s.text()}const c={};return s.headers.forEach((e,t)=>{c[t]=e}),{data:o,headers:c,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Gu("CapacitorHttp",{web:()=>new Zu});const Qu=Object.freeze(Object.defineProperty({__proto__:null,Capacitor:zu,CapacitorException:Hu,get ExceptionCode(){return Uu},WebPlugin:qu,buildRequestInit:Ku,registerPlugin:Gu},Symbol.toStringTag,{value:"Module"})),eh=Gu("App",{web:()=>Ce(()=>import("./web-Dq-99Wyb.js"),__vite__mapDeps([6,1,2])).then(e=>new e.AppWeb)}),th=Object.freeze(Object.defineProperty({__proto__:null,App:eh},Symbol.toStringTag,{value:"Module"})),nh=[];let rh=null;function sh(e){rh!==e&&(rh=e,ee(`[APP-STATE] App state changed - isActive: ${e}, total savers: ${nh.length}`),e?(ee(`[APP-STATE] App becoming active - restoring state for ${nh.length} savers`),nh.forEach(({key:e,restore:t})=>{const n=se.get(`appstate:${e}`,Number.MAX_SAFE_INTEGER);if(null!==n)try{ee(`[APP-STATE] Restoring state for key: ${e}`,n),t(n),ee(`[APP-STATE] Successfully restored state for key: ${e}`)}catch(r){ee(`[APP-STATE] Failed to restore state for key: ${e}`,r)}finally{se.remove(`appstate:${e}`),ee(`[APP-STATE] Removed cached state for key: ${e}`)}else ee(`[APP-STATE] No cached state found for key: ${e}`)}),ee("[APP-STATE] Completed restoring all states")):(ee(`[APP-STATE] App becoming inactive - saving state for ${nh.length} savers`),nh.forEach(({key:e,save:t})=>{try{ee(`[APP-STATE] Saving state for key: ${e}`);const n=t();se.set(`appstate:${e}`,n),ee(`[APP-STATE] Successfully saved state for key: ${e}`,n)}catch(n){ee(`[APP-STATE] Failed to save state for key: ${e}`,n)}}),ee("[APP-STATE] Completed saving all states")))}function ih(e,t,r){const s=n.useRef(t);n.useEffect(()=>{s.current=t},[t,e]),n.useEffect(()=>{ee(`[APP-STATE] useAppStateSaver - setting up state saver for key: ${e}`);const t=`appstate:${e}`,n=se.get(t,Number.MAX_SAFE_INTEGER);if(null!==n)try{ee(`[APP-STATE] Restoring cached state for key: ${e} on mount`,n),r(n),ee(`[APP-STATE] Successfully restored cached state for key: ${e} on mount`)}catch(i){ee(`[APP-STATE] Failed to restore cached state for key: ${e} on mount`,i)}finally{se.remove(t),ee(`[APP-STATE] Removed cached state for key: ${e} on mount`)}else ee(`[APP-STATE] No cached state found for key: ${e} on mount`);return function(e,t,n){return ee(`[APP-STATE] Registering state saver for key: ${e}`),nh.push({key:e,save:t,restore:n}),ee(`[APP-STATE] Total savers registered: ${nh.length}`),()=>{const r=nh.findIndex(r=>r.key===e&&r.save===t&&r.restore===n);r>=0?(nh.splice(r,1),ee(`[APP-STATE] Unregistered state saver for key: ${e}. Remaining savers: ${nh.length}`)):ee(`[APP-STATE] State saver not found for unregistration: ${e}`)}}(e,()=>s.current,r)},[e,r])}ee("[APP-STATE] Setting up app state change listeners"),eh.addListener("appStateChange",({isActive:e})=>{ee(`[APP-STATE] Capacitor app state change event - isActive: ${e}`),sh(e)}),"undefined"!=typeof document?(ee("[APP-STATE] Setting up document visibility change listener"),document.addEventListener("visibilitychange",()=>{const e="visible"===document.visibilityState;ee(`[APP-STATE] Document visibility change event - isVisible: ${e}`),sh(e)})):ee("[APP-STATE] Document not available - skipping visibility change listener");const oh="cm",ah="kg",lh=2.2046226218,ch=(e,t)=>{if(!Number.isFinite(e))return"";if(t<=0)return Math.round(e).toString();const n=((e,t)=>{const n=10**t;return Math.round(e*n)/n})(e,t);return Number(n.toFixed(t)).toString()},dh=(e,t)=>{if(!e)return!0;const n=e.trim();if(!n)return!0;if("."===n||"-."===n||"+."===n)return t>=0;return new RegExp(`^[-+]?\\d*(?:\\.\\d{0,${t}})?$`).test(n)},uh=e=>dh(e,2),hh=e=>dh(e,2),mh=e=>"m"===e||"cm"===e?e:oh,ph=e=>"lb"===e||"lbs"===e?"lb":ah,fh=(e,t)=>"m"===mh(t)?100*e:e,gh=(e,t)=>"lb"===ph(t)?e/lh:e,xh=(e,t,n=("m"===t?2:1))=>{if(null==e||!Number.isFinite(e))return"";const r=((e,t)=>"m"===mh(t)?e/100:e)(e,t);return ch(r,n)},yh=(e,t,n=2)=>{if(null==e||!Number.isFinite(e))return"";const r=((e,t)=>"lb"===ph(t)?e*lh:e)(e,t);return ch(r,n)},vh=(e,t)=>{const n=e.trim();if(!n)return;const r=Number(n);return Number.isFinite(r)?fh(r,t):void 0},bh=e=>mh(e),wh=e=>"lb"===ph(e)?"lbs":"kg",kh=(e,t)=>{const n=(new Date).toISOString();t?te(`ğŸ“ JNL [${n}] ${e}`,t):te(`ğŸ“ JNL [${n}] ${e}`)},Eh=(e,t)=>{kh(`=== JOURNAL STATE AFTER ${t} ===`),kh(`Exercise Actions (${e.ex.length}):`,e.ex),kh(`Set Actions (${e.sets.length}):`,e.sets),kh(`Total Actions: ${e.ex.length+e.sets.length}`),kh("=== END JOURNAL STATE ===")};function Sh(e,t,n,r,s,i){const o={t:"SET_ADD",exId:t,setId:n,set_order:r,reps:s,weight:i};kh("Recording SET_ADD action:",o),e.sets.push(o),Eh(e,"SET_ADD")}function _h(e,t,n,r,s){const i={t:"SET_UPDATE",exId:t,setId:n,reps:r,weight:s};kh("Recording SET_UPDATE action:",i),e.sets.push(i),Eh(e,"SET_UPDATE")}function jh(e,t,n,r){const s={t:"SET_REORDER",exId:t,setId:n,set_order:r};kh("Recording SET_REORDER action:",s),e.sets.push(s),Eh(e,"SET_REORDER")}const Ch=(e,t)=>{const n=(new Date).toISOString();t?te(`ğŸ“ JNL [${n}] ${e}`,t):te(`ğŸ“ JNL [${n}] ${e}`)};function Nh(e){var t,n,r,s,i,o,a,l;Ch("Starting collapseJournal with journal:",e),Ch(`Exercise actions: ${e.ex.length}, Set actions: ${e.sets.length}`);const c=new Map,d=new Map;Ch("=== FOLDING EXERCISE ACTIONS ===");for(const m of e.ex){Ch("Processing exercise action:",m);const e=c.get(m.exId)??{};"EX_ADD"===m.t&&(e.added={exerciseId:m.exerciseId,name:m.name,order:m.order},Ch("Added exercise to fold:",e.added)),"EX_DELETE"===m.t&&(e.deleted=!0,Ch("Marked exercise as deleted in fold:",e)),"EX_REORDER"===m.t&&(e.finalOrder=m.order,Ch("Updated final order in fold:",e)),"EX_UPDATE_META"===m.t&&(e.meta={...e.meta,...m},Ch("Updated meta in fold:",e.meta)),c.set(m.exId,e),Ch(`Updated exercise action map for exId ${m.exId}:`,e)}const u=(e,t)=>`${e}:${t}`;for(const m of e.sets){const e=u(m.exId,m.setId),t=d.get(e)??{};switch(m.t){case"SET_ADD":t.added={reps:m.reps,weight:m.weight,set_order:m.set_order},t.touched=!0;break;case"SET_UPDATE":t.final={...t.final,...void 0!==m.reps?{reps:m.reps}:{},...void 0!==m.weight?{weight:m.weight}:{}},t.touched=!0;break;case"SET_DELETE":t.deleted=!0,t.touched=!0;break;case"SET_REORDER":t.final={...t.final,set_order:m.set_order},t.touched=!0}d.set(e,t)}const h={deleteExercises:[],deleteSets:[],updateSets:[],orderSets:[],createExercises:[],createSetsByExercise:{}};for(const[m,p]of c.entries())p.added&&p.deleted||(p.deleted&&m>0?h.deleteExercises.push(m):p.added&&h.createExercises.push({tempExId:m,exerciseId:p.added.exerciseId,order:p.finalOrder??p.added.order??1,name:p.added.name}));for(const[m,p]of d.entries()){const[e,d]=m.split(":"),u=Number(e),f=Number(d),g=c.get(u);if(!(null==g?void 0:g.deleted)&&(!p.added||!p.deleted))if(p.deleted&&f>0)h.deleteSets.push(f);else{if(p.added&&f<0){h.createSetsByExercise[u]||(h.createSetsByExercise[u]=[]);const e=parseInt(((null==(t=p.final)?void 0:t.reps)??p.added.reps)||"0",10)||0,s=parseFloat(((null==(n=p.final)?void 0:n.weight)??p.added.weight)||"0")||0,i=((null==(r=p.final)?void 0:r.set_order)??p.added.set_order??0)||0;(e>0||s>0)&&h.createSetsByExercise[u].push({setId:f,reps:e,weight:s,set_order:i});continue}if(f>0&&p.touched&&!p.deleted){if(void 0!==(null==(s=p.final)?void 0:s.reps)||void 0!==(null==(i=p.final)?void 0:i.weight)){const e=parseInt(((null==(o=p.final)?void 0:o.reps)??"0")||"0",10)||0,t=parseFloat(((null==(a=p.final)?void 0:a.weight)??"0")||"0")||0;h.updateSets.push({id:f,reps:e,weight:t})}void 0!==(null==(l=p.final)?void 0:l.set_order)&&h.orderSets.push({id:f,set_order:p.final.set_order})}}}for(const[m,p]of Object.entries(h.createSetsByExercise))p.length||delete h.createSetsByExercise[m];return h.createExercises=h.createExercises.filter(e=>{const t=h.createSetsByExercise[e.tempExId];return!(!t||0===t.length)||(delete h.createSetsByExercise[e.tempExId],!1)}),h}function Th(e){return 0===e.ex.length&&0===e.sets.length}const Ah=(e,t)=>{const n=(new Date).toISOString();t?te(`ğŸ” DGB [${n}] ${e}`,t):te(`ğŸ” DGB [${n}] ${e}`)};async function Rh(e,t,n,r=ah){Ah("Starting runJournal with plan:",e),Ah(`Routine ID: ${t}, Exercise Map:`,n);const s=ph(r),i=e=>Number.isFinite(e)?gh(e,s):0;e.deleteExercises.length&&(Ah(`Deleting ${e.deleteExercises.length} exercises:`,e.deleteExercises),await Promise.all(e.deleteExercises.map(e=>ze.deleteRoutineExercise(e)))),e.deleteSets.length&&(Ah(`Deleting ${e.deleteSets.length} sets:`,e.deleteSets),await Promise.all(e.deleteSets.map(e=>ze.deleteExerciseSet(e)))),e.updateSets.length&&(Ah(`Updating ${e.updateSets.length} sets:`,e.updateSets),await Promise.all(e.updateSets.map(e=>ze.updateExerciseSet(e.id,e.reps,i(e.weight))))),e.orderSets.length&&(Ah(`Reordering ${e.orderSets.length} sets:`,e.orderSets),await Promise.all(e.orderSets.map(e=>ze.updateExerciseSetOrder(e.id,e.set_order)))),Ah(`Creating ${e.createExercises.length} new exercises:`,e.createExercises);const o=new Map;for(const a of e.createExercises){const n=e.createSetsByExercise[a.tempExId];if(!n||0===n.length){Ah(`Skipping exercise ${a.tempExId} - no set payloads`);continue}Ah("Creating exercise:",a);const r=await ze.addExerciseToRoutine(t,a.exerciseId,a.order);r&&(o.set(a.tempExId,r.routine_template_exercise_id),Ah(`Exercise created with template ID: ${r.routine_template_exercise_id}`))}Ah("Creating sets for exercises:",Object.keys(e.createSetsByExercise));for(const[a,l]of Object.entries(e.createSetsByExercise)){const e=Number(a);Ah(`Processing sets for exercise ID: ${e}, rows:`,l);const t=n[e],r=o.get(e)??(null==t?void 0:t.templateId),s=null==t?void 0:t.exerciseId;if(Ah(`Template ID: ${r}, Exercise ID: ${s}`),!r||!s){Ah(`Skipping exercise ${e} - missing templateId or exerciseId`);continue}const c=l.map(e=>({reps:e.reps,weight:i(e.weight),set_order:e.set_order||0})).filter(e=>e.reps>0||e.weight>0);Ah(`Filtered payload for exercise ${e}:`,c),c.length&&(Ah(`Adding ${c.length} sets to routine`),await ze.addExerciseSetsToRoutine(r,s,c))}Ah(`Recomputing muscle summary for routine ${t}`),await ze.recomputeAndSaveRoutineMuscleSummary(t),Ah("Journal execution completed successfully")}const Ph=()=>{const e=-Math.floor(1e9*Math.random())-1;return(e=>{const t=(new Date).toISOString();te(`ğŸ“ JNL [${t}] ${e}`)})(`Generated temp ID: ${e}`),e};function Mh({routineId:e,routineName:t,selectedExercisesForSetup:r,setSelectedExercisesForSetup:s,onBack:i,onSave:o,onAddMoreExercises:a,isEditingExistingRoutine:l=!1,onShowExerciseSelector:c,access:d=pr.Editable,initialMode:u="plan",onModeChange:h}){const{userToken:m}=mt(),[p,f]=n.useState(ah),[g,x]=n.useState(!1),y=n.useRef(ah),[v,b]=n.useState([]),[w,k]=n.useState(!0),[E,S]=n.useState(!1),[_,j]=n.useState(!1),[C,N]=n.useState(!1),[T,A]=n.useState({}),[R,P]=n.useState(u),M="workout"===R,$=n.useRef({ex:[],sets:[]}),D=n.useRef([]),I=n.useRef([]),L=n.useRef(null),B=n.useRef(null),[O,F]=n.useState(0);n.useEffect(()=>{let e=!1;return(async()=>{if(m)try{const t=await ze.getMyProfile();if(e)return;const n=ph(null==t?void 0:t.weight_unit);f(n),y.current=n}catch(t){e||Z("Failed to load weight unit preference",t)}finally{e||x(!0)}else e||(f(ah),y.current=ah,x(!0))})(),()=>{e=!0}},[m]);const U=n.useMemo(()=>wh(p).toUpperCase(),[p]),H=n.useCallback(e=>{const t="number"==typeof e?e:null!=e&&""!==e?Number(e):0;if(!Number.isFinite(t))return"0";const n=yh(t,p);return""!==n?n:"0"},[p]);n.useEffect(()=>{if(!g)return;const e=y.current;e!==p&&(b(t=>t.map(t=>({...t,sets:t.sets.map(t=>{const n=Number(t.weight);if(!Number.isFinite(n))return{...t,weight:"0"};const r=gh(n,e),s=yh(r,p);return{...t,weight:""!==s?s:"0"}})}))),y.current=p)},[p,g]);const W=n.useCallback(e=>{b(e.exercises??[]),P(e.screenMode??u),s(e.selectedExercisesForSetup??[]),F(e.elapsedSeconds??0),$.current=e.journal??{ex:[],sets:[]},D.current=e.savedSnapshot??[],I.current=e.preWorkoutExercises??[]},[u,s]);ih("exercise-setup",{exercises:v,screenMode:R,selectedExercisesForSetup:r,elapsedSeconds:O,journal:$.current,savedSnapshot:D.current,preWorkoutExercises:I.current},W);const z=e=>[Math.floor(e/3600),Math.floor(e%3600/60),e%60].map(e=>e.toString().padStart(2,"0")).join(":");n.useEffect(()=>(M?L.current=setInterval(()=>{null!=B.current&&F(Math.floor((Date.now()-B.current)/1e3))},1e3):(L.current&&(clearInterval(L.current),L.current=null),B.current=null,F(0)),()=>{L.current&&(clearInterval(L.current),L.current=null)}),[M]);const G=e=>{const t=(e??"").toString().trim();return t?/^(unknown|undefined|null|n\/a)$/i.test(t)?"":t:""},q=e=>e.map(e=>({id:e.id,exerciseId:e.exerciseId,sets:e.sets.slice().sort((e,t)=>e.set_order-t.set_order).map(e=>({id:e.id,set_order:e.set_order,reps:e.reps,weight:e.weight}))})).sort((e,t)=>e.id-t.id);n.useEffect(()=>{if(!m||!g)return;if(v.length>0)return void k(!1);let t=!1;return(async()=>{const n=Te.start("ExerciseSetup - load saved exercises");k(!0);try{const n=await lr(e,{concurrency:or,timer:Te});if(t)return;const r=n.map(e=>({id:e.templateId,templateId:e.templateId,exerciseId:e.exerciseId,name:e.name,muscle_group:e.muscle_group,loaded:!0,expanded:!1,completed:!1,sets:e.sets.map(e=>({...e,weight:H(e.weight)}))}));b(r),D.current=q(r)}catch(r){Z(String(r)),rt.error("Failed to load exercises")}finally{t||k(!1),n.endWithLog()}})(),()=>{t=!0}},[e,m,g,H]),n.useEffect(()=>{w||0!==r.length&&(async()=>{const e=Te.start("ExerciseSetup - add selected exercises");for(const t of r)await K(t);s([]),requestAnimationFrame(()=>window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})),e.endWithLog()})()},[r,w]);const Y=e=>{b(t=>{const n=t.map(e=>({...e,sets:e.sets.map(e=>({...e}))}));return e(n),n})},J=e=>{const t=e.sets.length>0&&e.sets.every(e=>e.done);e.completed=t,e.expanded=!t},X=async e=>{if(e.loaded||!e.templateId)return;const t=Te.start(`ExerciseSetup - ensureSetsLoaded for exercise ${e.id}`);A(t=>({...t,[String(e.id)]:!0}));try{const t=(await ze.getExerciseSetsForRoutine(e.templateId)).sort((e,t)=>(e.set_order||0)-(t.set_order||0)).map(e=>({id:e.routine_template_exercise_set_id,set_order:e.set_order??0,reps:String(e.planned_reps??"0"),weight:H(e.planned_weight_kg)}));Y(n=>{const r=n.findIndex(t=>t.id===e.id);r>=0&&(n[r].sets=t,n[r].loaded=!0)})}catch(n){Z(String(n)),rt.error("Failed to load sets")}finally{A(t=>{const n={...t};return delete n[String(e.id)],n}),t.endWithLog()}},K=async e=>{var t,n;const r=Te.start("ExerciseSetup - addNewExercise"),s=Ph(),i=Ph();let o=(null==(t=e.name)?void 0:t.trim())||"",a=(null==(n=e.muscle_group||"")?void 0:n.toString().trim())||"";if(!o||!a){const t=Te.start("ExerciseSetup - fetchExerciseMeta in addNewExercise"),n=await(async e=>{try{const t=await ze.getExercise(e);return(Array.isArray(t)?t[0]:t)??null}catch(t){return Z(" [EXERCISE_SETUP] fetchExerciseMeta error:",t),null}})(e.exercise_id);n&&(o||(o=G(n.name)||o),a||(a=G(n.muscle_group)||a)),t.endWithLog()}b(t=>[...t,{id:s,exerciseId:e.exercise_id,name:o,muscle_group:a||void 0,loaded:!0,expanded:!0,completed:!1,sets:[{id:i,set_order:1,reps:"0",weight:"0",...M?{done:!1}:{}}]}]),function(e,t,n,r,s){const i={t:"EX_ADD",exId:t,exerciseId:n,name:r,order:s};kh("Recording EX_ADD action:",i),e.ex.push(i),Eh(e,"EX_ADD")}($.current,s,e.exercise_id,o),Sh($.current,s,i,1,"0","0"),r.endWithLog()},Q=async e=>{if(d===pr.ReadOnly)return;const t=v.find(t=>t.id===e);t&&(!t.loaded&&t.templateId&&await X(t),Y(t=>{const n=t.findIndex(t=>t.id===e);if(n<0)return;const r=t[n],s=r.sets.reduce((e,t)=>Math.max(e,t.set_order||0),0)+1;const i=r.sets.length>0?r.sets.slice().sort((e,t)=>e.set_order-t.set_order)[r.sets.length-1]:void 0,o=Ph(),a=i?i.reps:"0",l=i?i.weight:"0";r.sets.push({id:o,set_order:s,reps:a,weight:l,...M?{done:!1}:{}}),Sh($.current,e,o,s,a,l),J(r)}))},te=(e,t)=>{if("number"==typeof t){const n=e.sets.find(e=>e.id===t);if(n)return n.id;const r=e.sets.find(e=>e.set_order===t);return r?r.id:null}if("string"==typeof t){const n=Number(t);if(!Number.isNaN(n)){const t=e.sets.find(e=>e.id===n);if(t)return t.id;const r=e.sets.find(e=>e.set_order===n);return r?r.id:null}}return null},ne=(e,t)=>{d!==pr.ReadOnly&&Y(n=>{const r=n.findIndex(t=>t.id===e);if(r<0)return;const s=n[r],i=te(s,t);if(null==i)return;const o=s.sets.slice();s.sets=s.sets.filter(e=>e.id!==i),function(e,t,n){const r={t:"SET_DELETE",exId:t,setId:n};kh("Recording SET_DELETE action:",r),e.sets.push(r),Eh(e,"SET_DELETE")}($.current,e,i);let a=1;for(const t of s.sets){const n=o.find(e=>e.id===t.id);t.set_order=a++,t.id>0&&n&&n.set_order!==t.set_order&&jh($.current,e,t.id,t.set_order)}J(s)})},re=e=>{d!==pr.ReadOnly&&(b(t=>t.filter(t=>t.id!==e)),function(e,t){const n={t:"EX_DELETE",exId:t};kh("Recording EX_DELETE action:",n),e.ex.push(n),Eh(e,"EX_DELETE")}($.current,e))},se=e=>{P(e),null==h||h(e)},ie=()=>{B.current=Date.now(),F(0),I.current=JSON.parse(JSON.stringify(v)),$.current={ex:[],sets:[]},b(e=>e.map(e=>({...e,sets:e.sets.map(e=>({...e,done:!1})),completed:!1,expanded:!1}))),se("workout"),ee(" [EXERCISE_SETUP] Workout started for id: "+e)},oe=async()=>{k(!0);try{const t=(await lr(e,{concurrency:or,timer:Te})).map(e=>({id:e.templateId,templateId:e.templateId,exerciseId:e.exerciseId,name:e.name,muscle_group:e.muscle_group,loaded:!0,expanded:!1,completed:!1,sets:e.sets.map(e=>({...e,weight:H(e.weight)}))}));b(t),D.current=q(t)}catch(t){Z(String(t)),rt.error("Failed to refresh")}finally{k(!1)}},ae=async()=>{if(!m)return void rt.error("Please sign in to save changes");const t=$.current;if(Th(t))return void rt.message("No changes to save");const n={};for(const e of v)n[e.id]={templateId:e.templateId,exerciseId:e.exerciseId};const r=Nh(t);S(!0);try{await Rh(r,e,n,p),$.current={ex:[],sets:[]},await oe(),rt.success("All changes saved!"),null==o||o()}catch(s){Z(String(s)),rt.error("Failed to save changes")}finally{S(!1)}},le=n.useMemo(()=>Te.timeSync("ExerciseSetup - check unsaved",()=>JSON.stringify(q(v))!==JSON.stringify(D.current)),[v]),ce=v,de=n.useMemo(()=>v.filter(e=>e.completed).length,[v]),ue=n.useMemo(()=>v.some(e=>e.sets.some(e=>!e.done)),[v]),he=()=>{const e=Te.start("ExerciseSetup - handleBack");if("plan"===R&&le){if(!window.confirm("You have unsaved changes. Leave without saving?"))return void e.endWithLog()}i(),e.endWithLog()},me=e=>{const t=!!T[String(e.id)],n=e.name.substring(0,2).toUpperCase(),r=e.loaded?e.sets.slice().sort((e,t)=>e.set_order-t.set_order).map(t=>({key:t.id,order:t.set_order,reps:t.reps,weight:t.weight,removable:e.sets.length>1,done:t.done})):[],s=(()=>{const t=G(e.muscle_group);if(e.loaded){const e=r.length,n=1===e?"1 Set":`${e} Sets`;return t?`${t} â€¢ ${n}`:n}return t||""})();return V.jsx("div",{className:"scroll-mt-24",children:V.jsx(Lu,{variant:"plain",size:"md",expanded:e.expanded,onToggle:()=>(async e=>{const t=v.find(t=>t.id===e);t&&(!t.loaded&&t.templateId&&await X(t),Y(t=>{const n=t.findIndex(t=>t.id===e);n>=0&&(t[n].expanded=!t[n].expanded)}))})(e.id),title:e.name,subtitle:s,leading:V.jsx("span",{className:"text-sm md:text-base font-medium text-black",children:n}),trailing:M?V.jsx("input",{type:"checkbox",checked:e.completed,onClick:e=>e.stopPropagation(),onChange:t=>{(async(e,t)=>{const n=v.find(t=>t.id===e);n&&(!n.loaded&&n.templateId&&await X(n),Y(n=>{const r=n.find(t=>t.id===e);r&&(r.sets.forEach(e=>e.done=t),J(r))}))})(e.id,t.target.checked)},className:"w-5 h-5 rounded-full border-2 border-border text-black accent-success checked:border-success"}):void 0,disableChevron:M,className:"w-full rounded-2xl border border-border card-modern shadow-xl hover:shadow-xl transition-all text-left "+(e.completed&&!e.expanded?"bg-success-light":"bg-card/80"),style:{border:"2px solid var(--border)"},bodyClassName:"pt-2",children:t||!e.loaded?V.jsxs("div",{className:"flex items-center justify-center py-4",children:[V.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-warm-coral border-t-transparent rounded-full"}),V.jsx("span",{className:"ml-2 text-sm text-black",children:"Loading sets..."})]}):V.jsx(Fu,{name:e.name,initials:n,items:r,weightUnitLabel:U,mode:M?"workout":"edit",onChange:(t,n,r)=>((e,t,n,r)=>{d!==pr.ReadOnly&&Y(s=>{const i=s.findIndex(t=>t.id===e);if(i<0)return;const o=s[i],a=te(o,t);if(null==a)return;const l=o.sets.findIndex(e=>e.id===a);if(l<0)return;const c=o.sets[l];if("weight"===n&&!uh(r))return;const d={...c,[n]:r};o.sets[l]=d,"reps"===n?_h($.current,e,a,r,void 0):_h($.current,e,a,void 0,r)})})(e.id,t,n,r),onRemove:M?void 0:t=>ne(e.id,t),onAdd:()=>Q(e.id),onDeleteExercise:M?void 0:()=>re(e.id),onToggleDone:M?(t,n)=>((e,t,n)=>{Y(r=>{const s=r.find(t=>t.id===e);if(!s)return;const i=te(s,t);if(null==i)return;const o=s.sets.find(e=>e.id===i);o&&(o.done=n),J(s)})})(e.id,t,n):void 0,deleteDisabled:d===pr.ReadOnly,disabled:d===pr.ReadOnly,onFocusScroll:e=>{const t=e.currentTarget;setTimeout(()=>{t&&t.scrollIntoView&&t.scrollIntoView({block:"center",behavior:"smooth"})},60)},className:"mb-2"})})},e.id)};return V.jsxs(V.Fragment,{children:[V.jsx(Rt,{header:V.jsx(Wn,{title:t||"Routine",subtitle:M?z(O):void 0,subtitleClassName:"text-base font-bold text-black",onBack:M?void 0:he,...d!==pr.Editable||M?{}:{onAdd:()=>{l&&c?c():a()}},showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",padContent:!1,contentBottomPaddingClassName:le||M?"pb-24":"",bottomBar:"plan"===R?le?V.jsx(jr,{children:V.jsx(_r,{onClick:ae,disabled:E||d===pr.ReadOnly,children:E?"SAVING...":"SAVE ALL"})}):0===ce.length?null:V.jsx(jr,{children:V.jsx(_r,{onClick:ie,children:"START WORKOUT"})}):V.jsx(jr,{children:V.jsx(_r,{onClick:()=>N(!0),disabled:_,children:_?"SAVING...":"END WORKOUT"})}),showHeaderBorder:!1,showBottomBarBorder:!1,contentClassName:"",children:V.jsxs(rr,{gap:"fluid",children:[V.jsx(Qn,{y:"sm"}),V.jsx(Kn,{variant:"plain",padding:"none",children:V.jsxs("div",{className:"mt-2 mb-6",children:[M?de>0&&V.jsxs("h3",{className:"text-xs md:text-sm text-black uppercase tracking-wider mb-3",children:[de," COMPLETED"]}):V.jsxs("h3",{className:"text-xs md:text-sm text-black uppercase tracking-wider mb-3",children:["EXERCISES IN ROUTINE (",ce.length,")"]}),w?V.jsx("div",{className:"space-y-3",children:[1,2].map(e=>V.jsx(mr,{leading:V.jsx("div",{}),leadingClassName:"w-10 h-10 md:w-12 md:h-12 bg-muted rounded-lg",primary:V.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),secondary:V.jsx("div",{className:"h-3 bg-muted rounded w-1/2"}),className:"px-3 md:px-4 bg-card/50 rounded-xl animate-pulse"},e))}):0===ce.length?V.jsx("div",{className:"text-center py-4",children:V.jsx("p",{className:"text-black",children:"Ready to add exercises to this routine"})}):V.jsx("div",{className:"space-y-3",children:ce.map(e=>me(e))})]})})]})}),V.jsx(br,{open:C,onClose:()=>N(!1),title:"Finish Workout?",message:ue?"There are valid sets in this workout that have not been marked as complete.":void 0,actions:[{label:_?"Savingâ€¦":"Finish Workout",onClick:async()=>{N(!1),await(async()=>{if(m){j(!0);try{ee(" [EXERCISE_SETUP] Workout ended for id: "+e);let t={id:"123",template_id:e,started_at:(new Date).toISOString(),ended_at:(new Date).toISOString()};for(let e=0;e<v.length;e++){const n=v[e];let r={id:"123",workout_id:t.id,exercise_id:n.exerciseId,order_index:e+1};ee(" [EXERCISE_SETUP] Workout exercise added for id: "+n.exerciseId);for(const e of n.sets)ee(" [EXERCISE_SETUP] Workout set added for id: "+r.id+" Set order: "+e.set_order+" Reps: "+(Number(e.reps)||0)+" Weight: "+(Number(e.weight)||0)+" Done: "+(e.done?"DONE":"NOT DONE"))}ee(" [EXERCISE_SETUP] Workout ended for id: "+t.id);const n=null!=B.current?Math.floor((Date.now()-B.current)/1e3):O;ee(" [EXERCISE_SETUP] Workout duration: "+z(n));const r=$.current,s={};for(const e of v)s[e.id]={templateId:e.templateId,exerciseId:e.exerciseId};const i=Nh(r);Th(r)||await Rh(i,e,s,p),$.current={ex:[],sets:[]},await oe(),rt.success("Workout saved!"),se("plan")}catch(t){Z(String(t)),rt.error("Failed to save workout")}finally{j(!1)}}else rt.error("Please sign in to save workout")})()},type:"button",disabled:_},{label:"Cancel Workout",onClick:async()=>{N(!1),await(async()=>{$.current={ex:[],sets:[]},b(JSON.parse(JSON.stringify(I.current))),se("plan")})()},type:"button",variant:"destructive",disabled:_}]})]})}function $h({label:e,icon:t,unit:r="cm",entries:s,onEntryChange:i}){var o,l;const[c,d]=n.useState(!1),u=n.useMemo(()=>"m"===r?.01:.5,[r]),h="m"===r?2:1,m=h,p=e=>{const t=parseFloat(e);return isNaN(t)?0:t},f=e=>{var t;const n=(null==(t=s[0])?void 0:t.value)??"0";i(0,(p(n)+e).toFixed(h))},g=null!=s[1]?p((null==(o=s[0])?void 0:o.value)??"0")-p(s[1].value):null,x=null!=g?`${g>=0?"+":""}${ch(g,m)}${r}`:void 0;return V.jsx(Lu,{variant:"plain",size:"md",expanded:c,onToggle:()=>d(e=>!e),className:"w-full rounded-2xl border border-border card-modern shadow-xl hover:shadow-xl transition-all text-left",style:{border:"2px solid var(--border)"},title:V.jsx("div",{className:"min-w-0 flex-[0_0_50%]",children:V.jsx("div",{className:"truncate",children:e})}),subtitle:x&&V.jsx("span",{className:"text-sm text-black",children:x}),leading:V.jsx("span",{className:"text-xl",children:t}),trailing:V.jsx("div",{className:"flex-[0_0_40%] shrink-0 mr-[10%]",onClick:e=>e.stopPropagation(),children:V.jsxs("div",{className:"grid grid-cols-[28px_minmax(3.5rem,1fr)_28px] items-center gap-2",children:[V.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),f(-u)},className:"w-7 h-7 rounded-full bg-soft-gray flex items-center justify-center text-black",children:V.jsx(v,{size:14})}),V.jsx(Bu,{step:u,min:0,mode:"decimal",value:(null==(l=s[0])?void 0:l.value)??"",onChange:e=>{e.stopPropagation();const{value:t}=e.target;hh(t)&&i(0,t)},placeholder:r,className:"h-7 text-center px-1 w-full"}),V.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),f(u)},className:"w-7 h-7 rounded-full bg-soft-gray flex items-center justify-center text-black",children:V.jsx(a,{size:14})})]})}),children:s.length>0&&V.jsx("div",{className:"space-y-3",onClick:e=>e.stopPropagation(),children:s.slice(0,4).map((e,t)=>V.jsxs("div",{className:"flex items-center justify-between gap-2",children:[V.jsx("span",{className:"text-sm text-black",children:e.date}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx(Bu,{step:u,min:0,mode:"decimal",value:e.value,onChange:e=>{const{value:n}=e.target;hh(n)&&i(t,n)},className:"h-7 text-center px-1 w-[6.5rem] sm:w-[7.5rem]"}),V.jsx("span",{className:"text-sm text-black",children:r})]})]},t))})})}const Dh=[{key:"chest_cm",label:"Chest",icon:"ğŸ«"},{key:"right_arm_cm",label:"Right Arm",icon:"ğŸ’ª"},{key:"left_arm_cm",label:"Left Arm",icon:"ğŸ’ª"},{key:"waist_cm",label:"Waist",icon:"ğŸ“"},{key:"hip_cm",label:"Hip",icon:"ğŸ©³"},{key:"glutes_cm",label:"Glutes",icon:"ğŸ‘"},{key:"left_quad_cm",label:"Left Quad",icon:"ğŸ¦µ"},{key:"right_quad_cm",label:"Right Quad",icon:"ğŸ¦µ"},{key:"left_calf_cm",label:"Left Calf",icon:"ğŸ¦µ"},{key:"right_calf_cm",label:"Right Calf",icon:"ğŸ¦µ"}],Ih=oh;function Lh({onBack:e}){const[t,r]=n.useState([]),[s,i]=n.useState(!0),o=n.useRef([]),a=n.useRef([]),l=n.useCallback(async()=>{const e=await ze.getBodyMeasurements(4),t=(new Date).toISOString().split("T")[0],n=e.some(e=>e.measured_on===t);let s=e;if(!n){const n=e[0],r={measured_on:t};Dh.forEach(e=>{r[e.key]=n&&null!=n[e.key]?xh(Number(n[e.key]),Ih):""}),s=[r,...e]}s=s.sort((e,t)=>new Date(t.measured_on).getTime()-new Date(e.measured_on).getTime()).slice(0,4);const l=s.map(e=>{const t={measured_on:e.measured_on};return Dh.forEach(n=>{t[n.key]=null!=e[n.key]?xh(Number(e[n.key]),Ih):""}),t});a.current=JSON.parse(JSON.stringify(l)),o.current=[],r(l),i(n)},[]);n.useEffect(()=>{let e=!1;return(async()=>{try{if(e)return;await l()}catch(t){Z("Failed to load measurements",t)}})(),()=>{e=!0}},[l]);const c=n.useMemo(()=>!s||JSON.stringify(t)!==JSON.stringify(a.current),[t,s]);return V.jsx(Rt,{header:V.jsx(Wn,{title:"Body Measurements",onBack:e,showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",padContent:!1,showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:V.jsx(jr,{children:V.jsx(_r,{onClick:async()=>{const n=function(e){const t={};for(const n of e)t[n.date]||(t[n.date]={}),t[n.date][n.key]=n.value;return t}(o.current);if(!s){const e=t[0],r={};Dh.forEach(t=>{e[t.key]&&(r[t.key]=e[t.key])}),n[e.measured_on]={...n[e.measured_on]??{},...r}}for(const[e,t]of Object.entries(n)){const n={measured_on:e};for(const[e,r]of Object.entries(t)){const t=vh(r,Ih);void 0===t||isNaN(t)||(n[e]=t)}Object.keys(n).length>1&&await ze.upsertBodyMeasurement(n)}o.current=[],await l(),rt.success("Measurements saved"),e()},disabled:!c,children:"SAVE CHANGES"})}),bottomBarSticky:!0,contentClassName:"",children:V.jsxs(rr,{gap:"fluid",children:[V.jsx(Kn,{variant:"card",className:"flex items-center gap-3",children:V.jsxs("div",{className:"min-w-0",children:[V.jsx("div",{className:"text-base font-semibold text-black truncate",children:"Track Your Progress"}),V.jsx("div",{className:"text-sm text-black truncate",children:"Record measurements to see changes over time"})]})}),V.jsx(Qn,{y:"sm"}),Dh.map(e=>V.jsx("div",{className:"space-y-2",children:V.jsx($h,{label:e.label,icon:e.icon,unit:bh(Ih),entries:t.map(t=>({date:t.measured_on,value:t[e.key]||""})),onEntryChange:(t,n)=>r(r=>{const s=[...r],i=s[t].measured_on,a=""===n?"":String(parseFloat(n));return s[t]={...s[t],[e.key]:a},function(e,t,n,r){e.push({t:"UPDATE",date:t,key:n,value:r})}(o.current,i,e.key,a),s})})},e.key)),V.jsx(Qn,{y:"sm"})]})})}function Bh(e){return function(){return e}}const Oh=Math.PI,Fh=2*Oh,Uh=1e-6,Vh=Fh-Uh;function Hh(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class Wh{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?Hh:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Hh;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,s,i){this._append`C${+e},${+t},${+n},${+r},${this._x1=+s},${this._y1=+i}`}arcTo(e,t,n,r,s){if(e=+e,t=+t,n=+n,r=+r,(s=+s)<0)throw new Error(`negative radius: ${s}`);let i=this._x1,o=this._y1,a=n-e,l=r-t,c=i-e,d=o-t,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>Uh)if(Math.abs(d*a-l*c)>Uh&&s){let h=n-i,m=r-o,p=a*a+l*l,f=h*h+m*m,g=Math.sqrt(p),x=Math.sqrt(u),y=s*Math.tan((Oh-Math.acos((p+u-f)/(2*g*x)))/2),v=y/x,b=y/g;Math.abs(v-1)>Uh&&this._append`L${e+v*c},${t+v*d}`,this._append`A${s},${s},0,0,${+(d*h>c*m)},${this._x1=e+b*a},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,r,s,i){if(e=+e,t=+t,i=!!i,(n=+n)<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(r),a=n*Math.sin(r),l=e+o,c=t+a,d=1^i,u=i?r-s:s-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Uh||Math.abs(this._y1-c)>Uh)&&this._append`L${l},${c}`,n&&(u<0&&(u=u%Fh+Fh),u>Vh?this._append`A${n},${n},0,1,${d},${e-o},${t-a}A${n},${n},0,1,${d},${this._x1=l},${this._y1=c}`:u>Uh&&this._append`A${n},${n},0,${+(u>=Oh)},${d},${this._x1=e+n*Math.cos(s)},${this._y1=t+n*Math.sin(s)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function zh(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new Wh(t)}function Gh(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function qh(e){this._context=e}function Yh(e){return new qh(e)}function Jh(e){return e[0]}function Xh(e){return e[1]}function Kh(e,t){var n=Bh(!0),r=null,s=Yh,i=null,o=zh(a);function a(a){var l,c,d,u=(a=Gh(a)).length,h=!1;for(null==r&&(i=s(d=o())),l=0;l<=u;++l)!(l<u&&n(c=a[l],l,a))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(c,l,a),+t(c,l,a));if(d)return i=null,d+""||null}return e="function"==typeof e?e:void 0===e?Jh:Bh(e),t="function"==typeof t?t:void 0===t?Xh:Bh(t),a.x=function(t){return arguments.length?(e="function"==typeof t?t:Bh(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:Bh(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:Bh(!!e),a):n},a.curve=function(e){return arguments.length?(s=e,null!=r&&(i=s(r)),a):s},a.context=function(e){return arguments.length?(null==e?r=i=null:i=s(r=e),a):r},a}function Zh(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Qh(e,t){this._context=e,this._k=(1-t)/6}function em(e,t){this._context=e,this._alpha=t}qh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},Qh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Zh(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Zh(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return new Qh(e,t)}return n.tension=function(t){return e(+t)},n}(0),em.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(e,t,n){var r=e._x1,s=e._y1,i=e._x2,o=e._y2;if(e._l01_a>1e-12){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,s=(s*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>1e-12){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*c+e._x1*e._l23_2a-t*e._l12_2a)/d,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(r,s,i,o,e._x2,e._y2)}(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tm=function e(t){function n(e){return t?new em(e,t):new Qh(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function nm(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function rm(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function sm(e){let t,n,r;function s(e,r,s=0,i=e.length){if(s<i){if(0!==t(r,r))return i;do{const t=s+i>>>1;n(e[t],r)<0?s=t+1:i=t}while(s<i)}return s}return 2!==e.length?(t=nm,n=(t,n)=>nm(e(t),n),r=(t,n)=>e(t)-n):(t=e===nm||e===rm?e:im,n=e,r=e),{left:s,center:function(e,t,n=0,i=e.length){const o=s(e,t,n,i-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r,s=0,i=e.length){if(s<i){if(0!==t(r,r))return i;do{const t=s+i>>>1;n(e[t],r)<=0?s=t+1:i=t}while(s<i)}return s}}}function im(){return 0}const om=sm(nm).right;sm(function(e){return null===e?NaN:+e}).center;class am extends Map{constructor(e,t=cm){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(lm(this,e))}has(e){return super.has(lm(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const r=t(n);e.has(r)&&(n=e.get(r),e.delete(r));return n}(this,e))}}function lm({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function cm(e){return null!==e&&"object"==typeof e?e.valueOf():e}const dm=Math.sqrt(50),um=Math.sqrt(10),hm=Math.sqrt(2);function mm(e,t,n){const r=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),o=i>=dm?10:i>=um?5:i>=hm?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?mm(e,t,2*n):[a,l,c]}function pm(e,t,n){return mm(e=+e,t=+t,n=+n)[2]}function fm(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}const gm=Symbol("implicit");function xm(){var e=new am,t=[],n=[],r=gm;function s(s){let i=e.get(s);if(void 0===i){if(r!==gm)return r;e.set(s,i=t.push(s)-1)}return n[i%n.length]}return s.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new am;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return s},s.range=function(e){return arguments.length?(n=Array.from(e),s):n.slice()},s.unknown=function(e){return arguments.length?(r=e,s):r},s.copy=function(){return xm(t,n).unknown(r)},fm.apply(s,arguments),s}function ym(){var e,t,n=xm().unknown(void 0),r=n.domain,s=n.range,i=0,o=1,a=!1,l=0,c=0,d=.5;function u(){var n=r().length,u=o<i,h=u?o:i,m=u?i:o;e=(m-h)/Math.max(1,n-l+2*c),a&&(e=Math.floor(e)),h+=(m-h-e*(n-l))*d,t=e*(1-l),a&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var r=-1,s=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(s);++r<s;)i[r]=e+r*n;return i}(n).map(function(t){return h+e*t});return s(u?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),u()):r()},n.range=function(e){return arguments.length?([i,o]=e,i=+i,o=+o,u()):[i,o]},n.rangeRound=function(e){return[i,o]=e,i=+i,o=+o,a=!0,u()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(a=!!e,u()):a},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},n.copy=function(){return ym(r(),[i,o]).round(a).paddingInner(l).paddingOuter(c).align(d)},fm.apply(u(),arguments)}function vm(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return vm(t())},e}function bm(){return vm(ym.apply(null,arguments).paddingInner(1))}function wm(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function km(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Em(){}var Sm=.7,_m=1/Sm,jm="\\s*([+-]?\\d+)\\s*",Cm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tm=/^#([0-9a-f]{3,8})$/,Am=new RegExp(`^rgb\\(${jm},${jm},${jm}\\)$`),Rm=new RegExp(`^rgb\\(${Nm},${Nm},${Nm}\\)$`),Pm=new RegExp(`^rgba\\(${jm},${jm},${jm},${Cm}\\)$`),Mm=new RegExp(`^rgba\\(${Nm},${Nm},${Nm},${Cm}\\)$`),$m=new RegExp(`^hsl\\(${Cm},${Nm},${Nm}\\)$`),Dm=new RegExp(`^hsla\\(${Cm},${Nm},${Nm},${Cm}\\)$`),Im={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Lm(){return this.rgb().formatHex()}function Bm(){return this.rgb().formatRgb()}function Om(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Tm.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Fm(t):3===n?new Hm(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Um(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Um(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Am.exec(e))?new Hm(t[1],t[2],t[3],1):(t=Rm.exec(e))?new Hm(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Pm.exec(e))?Um(t[1],t[2],t[3],t[4]):(t=Mm.exec(e))?Um(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=$m.exec(e))?Jm(t[1],t[2]/100,t[3]/100,1):(t=Dm.exec(e))?Jm(t[1],t[2]/100,t[3]/100,t[4]):Im.hasOwnProperty(e)?Fm(Im[e]):"transparent"===e?new Hm(NaN,NaN,NaN,0):null}function Fm(e){return new Hm(e>>16&255,e>>8&255,255&e,1)}function Um(e,t,n,r){return r<=0&&(e=t=n=NaN),new Hm(e,t,n,r)}function Vm(e,t,n,r){return 1===arguments.length?((s=e)instanceof Em||(s=Om(s)),s?new Hm((s=s.rgb()).r,s.g,s.b,s.opacity):new Hm):new Hm(e,t,n,null==r?1:r);var s}function Hm(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Wm(){return`#${Ym(this.r)}${Ym(this.g)}${Ym(this.b)}`}function zm(){const e=Gm(this.opacity);return`${1===e?"rgb(":"rgba("}${qm(this.r)}, ${qm(this.g)}, ${qm(this.b)}${1===e?")":`, ${e})`}`}function Gm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ym(e){return((e=qm(e))<16?"0":"")+e.toString(16)}function Jm(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Km(e,t,n,r)}function Xm(e){if(e instanceof Km)return new Km(e.h,e.s,e.l,e.opacity);if(e instanceof Em||(e=Om(e)),!e)return new Km;if(e instanceof Km)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,a=i-s,l=(i+s)/2;return a?(o=t===i?(n-r)/a+6*(n<r):n===i?(r-t)/a+2:(t-n)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new Km(o,a,l,e.opacity)}function Km(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Zm(e){return(e=(e||0)%360)<0?e+360:e}function Qm(e){return Math.max(0,Math.min(1,e||0))}function ep(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}wm(Em,Om,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Lm,formatHex:Lm,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Xm(this).formatHsl()},formatRgb:Bm,toString:Bm}),wm(Hm,Vm,km(Em,{brighter(e){return e=null==e?_m:Math.pow(_m,e),new Hm(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Sm:Math.pow(Sm,e),new Hm(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Hm(qm(this.r),qm(this.g),qm(this.b),Gm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wm,formatHex:Wm,formatHex8:function(){return`#${Ym(this.r)}${Ym(this.g)}${Ym(this.b)}${Ym(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:zm,toString:zm})),wm(Km,function(e,t,n,r){return 1===arguments.length?Xm(e):new Km(e,t,n,null==r?1:r)},km(Em,{brighter(e){return e=null==e?_m:Math.pow(_m,e),new Km(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Sm:Math.pow(Sm,e),new Km(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new Hm(ep(e>=240?e-240:e+120,s,r),ep(e,s,r),ep(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new Km(Zm(this.h),Qm(this.s),Qm(this.l),Gm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gm(this.opacity);return`${1===e?"hsl(":"hsla("}${Zm(this.h)}, ${100*Qm(this.s)}%, ${100*Qm(this.l)}%${1===e?")":`, ${e})`}`}}));const tp=e=>()=>e;function np(e){return 1===(e=+e)?rp:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):tp(isNaN(t)?n:t)}}function rp(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):tp(isNaN(e)?t:e)}const sp=function e(t){var n=np(t);function r(e,t){var r=n((e=Vm(e)).r,(t=Vm(t)).r),s=n(e.g,t.g),i=n(e.b,t.b),o=rp(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=s(t),e.b=i(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function ip(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,s=t.slice();return function(i){for(n=0;n<r;++n)s[n]=e[n]*(1-i)+t[n]*i;return s}}function op(e,t){var n,r=t?t.length:0,s=e?Math.min(r,e.length):0,i=new Array(s),o=new Array(r);for(n=0;n<s;++n)i[n]=mp(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<s;++n)o[n]=i[n](e);return o}}function ap(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function lp(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function cp(e,t){var n,r={},s={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=mp(e[n],t[n]):s[n]=t[n];return function(e){for(n in r)s[n]=r[n](e);return s}}var dp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,up=new RegExp(dp.source,"g");function hp(e,t){var n,r,s,i=dp.lastIndex=up.lastIndex=0,o=-1,a=[],l=[];for(e+="",t+="";(n=dp.exec(e))&&(r=up.exec(t));)(s=r.index)>i&&(s=t.slice(i,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:lp(n,r)})),i=up.lastIndex;return i<t.length&&(s=t.slice(i),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)a[(n=l[r]).i]=n.x(e);return a.join("")})}function mp(e,t){var n,r,s=typeof t;return null==t||"boolean"===s?tp(t):("number"===s?lp:"string"===s?(n=Om(t))?(t=n,sp):hp:t instanceof Om?sp:t instanceof Date?ap:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?op:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?cp:lp:ip))(e,t)}function pp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function fp(e){return+e}var gp=[0,1];function xp(e){return e}function yp(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function vp(e,t,n){var r=e[0],s=e[1],i=t[0],o=t[1];return s<r?(r=yp(s,r),i=n(o,i)):(r=yp(r,s),i=n(i,o)),function(e){return i(r(e))}}function bp(e,t,n){var r=Math.min(e.length,t.length)-1,s=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)s[o]=yp(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(t){var n=om(e,t,1,r)-1;return i[n](s[n](t))}}function wp(){var e,t,n,r,s,i,o=gp,a=gp,l=mp,c=xp;function d(){var e,t,n,l=Math.min(o.length,a.length);return c!==xp&&(e=o[0],t=o[l-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),r=l>2?bp:vp,s=i=null,u}function u(t){return null==t||isNaN(t=+t)?n:(s||(s=r(o.map(e),a,l)))(e(c(t)))}return u.invert=function(n){return c(t((i||(i=r(a,o.map(e),lp)))(n)))},u.domain=function(e){return arguments.length?(o=Array.from(e,fp),d()):o.slice()},u.range=function(e){return arguments.length?(a=Array.from(e),d()):a.slice()},u.rangeRound=function(e){return a=Array.from(e),l=pp,d()},u.clamp=function(e){return arguments.length?(c=!!e||xp,d()):c!==xp},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(n=e,u):n},function(n,r){return e=n,t=r,d()}}function kp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Ep(e){return(e=kp(Math.abs(e)))?e[1]:NaN}var Sp,_p=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jp(e){if(!(t=_p.exec(e)))throw new Error("invalid format: "+e);var t;return new Cp({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Cp(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Np(e,t){var n=kp(e,t);if(!n)return e+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}jp.prototype=Cp.prototype,Cp.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Tp={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Np(100*e,t),r:Np,s:function(e,t){var n=kp(e,t);if(!n)return e+"";var r=n[0],s=n[1],i=s-(Sp=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+kp(e,Math.max(0,t+i-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ap(e){return e}var Rp,Pp,Mp,$p=Array.prototype.map,Dp=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function Ip(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Ap:(t=$p.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var s=e.length,i=[],o=0,a=t[0],l=0;s>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),i.push(e.substring(s-=a,s+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return i.reverse().join(n)}),s=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",a=void 0===e.numerals?Ap:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}($p.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"âˆ’":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=jp(e)).fill,n=e.align,u=e.sign,h=e.symbol,m=e.zero,p=e.width,f=e.comma,g=e.precision,x=e.trim,y=e.type;"n"===y?(f=!0,y="g"):Tp[y]||(void 0===g&&(g=12),x=!0,y="g"),(m||"0"===t&&"="===n)&&(m=!0,t="0",n="=");var v="$"===h?s:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===h?i:/[%p]/.test(y)?l:"",w=Tp[y],k=/[defgprs%]/.test(y);function E(e){var s,i,l,h=v,E=b;if("c"===y)E=w(e)+E,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:w(Math.abs(e),g),x&&(e=function(e){e:for(var t,n=e.length,r=1,s=-1;r<n;++r)switch(e[r]){case".":s=t=r;break;case"0":0===s&&(s=r),t=r;break;default:if(!+e[r])break e;s>0&&(s=0)}return s>0?e.slice(0,s)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==u&&(S=!1),h=(S?"("===u?u:c:"-"===u||"("===u?"":u)+h,E=("s"===y?Dp[8+Sp/3]:"")+E+(S&&"("===u?")":""),k)for(s=-1,i=e.length;++s<i;)if(48>(l=e.charCodeAt(s))||l>57){E=(46===l?o+e.slice(s+1):e.slice(s))+E,e=e.slice(0,s);break}}f&&!m&&(e=r(e,1/0));var _=h.length+e.length+E.length,j=_<p?new Array(p-_+1).join(t):"";switch(f&&m&&(e=r(j+e,j.length?p-E.length:1/0),j=""),n){case"<":e=h+e+E+j;break;case"=":e=h+j+e+E;break;case"^":e=j.slice(0,_=j.length>>1)+h+e+E+j.slice(_);break;default:e=j+h+e+E}return a(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),E.toString=function(){return e+""},E}return{format:u,formatPrefix:function(e,t){var n=u(((e=jp(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Ep(t)/3))),s=Math.pow(10,-r),i=Dp[8+r/3];return function(e){return n(s*e)+i}}}}function Lp(e,t,n,r){var s,i=function(e,t,n){n=+n;const r=(t=+t)<(e=+e),s=r?pm(t,e,n):pm(e,t,n);return(r?-1:1)*(s<0?1/-s:s)}(e,t,n);switch((r=jp(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(s=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ep(t)/3)))-Ep(Math.abs(e)))}(i,o))||(r.precision=s),Mp(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(s=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ep(t)-Ep(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=s-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(s=function(e){return Math.max(0,-Ep(Math.abs(e)))}(i))||(r.precision=s-2*("%"===r.type))}return Pp(r)}function Bp(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[s,i,o]=r?mm(t,e,n):mm(e,t,n);if(!(i>=s))return[];const a=i-s+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Lp(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,s,i=t(),o=0,a=i.length-1,l=i[o],c=i[a],d=10;for(c<l&&(s=l,l=c,c=s,s=o,o=a,a=s);d-- >0;){if((s=pm(l,c,n))===r)return i[o]=l,i[a]=c,t(i);if(s>0)l=Math.floor(l/s)*s,c=Math.ceil(c/s)*s;else{if(!(s<0))break;l=Math.ceil(l*s)/s,c=Math.floor(c*s)/s}r=s}return e},e}function Op(){var e=wp()(xp,xp);return e.copy=function(){return t=e,Op().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},fm.apply(e,arguments),Bp(e)}Rp=Ip({thousands:",",grouping:[3],currency:["$",""]}),Pp=Rp.format,Mp=Rp.formatPrefix;const Fp={week:7,threeMonths:12,sixMonths:6},Up={week:1,threeMonths:7,sixMonths:30},Vp={strength:{week:{series:[Wp("strength","week",1050,.32,0),Wp("strength","week",860,.28,1),Wp("strength","week",1340,.3,2),Wp("strength","week",620,.26,3)],kpis:[{title:"Duration",unit:"hours",value:"3h 18m",currentNumeric:198,previous:172},{title:"Workouts",value:"5",currentNumeric:5,previous:4},{title:"Total Weight",unit:"kg",value:"82,640",currentNumeric:82640,previous:79320},{title:"Streak",unit:"days",value:"6",currentNumeric:6,previous:4}],history:[{type:"strength",id:"s1",name:"Upper Power",date:Hp(1),duration:"52 min",totalWeight:"28,450 kg"},{type:"strength",id:"s2",name:"Posterior Chain",date:Hp(3),duration:"47 min",totalWeight:"30,120 kg"},{type:"strength",id:"s3",name:"Power Pull",date:Hp(5),duration:"41 min",totalWeight:"24,360 kg"}]},threeMonths:{series:[Wp("strength","threeMonths",1220,.24,0),Wp("strength","threeMonths",940,.22,1),Wp("strength","threeMonths",1480,.25,2),Wp("strength","threeMonths",680,.21,3)],kpis:[{title:"Duration",unit:"hours",value:"12h 42m",currentNumeric:762,previous:708},{title:"Workouts",value:"18",currentNumeric:18,previous:16},{title:"Total Weight",unit:"kg",value:"322,130",currentNumeric:322130,previous:304980},{title:"Streak",unit:"days",value:"12",currentNumeric:12,previous:9}],history:[]},sixMonths:{series:[Wp("strength","sixMonths",1380,.18,0),Wp("strength","sixMonths",980,.17,1),Wp("strength","sixMonths",1620,.2,2),Wp("strength","sixMonths",720,.15,3)],kpis:[{title:"Duration",unit:"hours",value:"156",currentNumeric:9360,previous:9020},{title:"Workouts",value:"182",currentNumeric:182,previous:178},{title:"Total Weight",unit:"kg",value:"3.4M",currentNumeric:34e5,previous:332e4},{title:"Streak",unit:"days",value:"21",currentNumeric:21,previous:18}],history:[]}},cardio:{week:{series:[Wp("cardio","week",8,.32,0),Wp("cardio","week",6.4,.28,1),Wp("cardio","week",9.8,.3,2),Wp("cardio","week",5.2,.26,3)],kpis:[{title:"Total Time",unit:"hours",value:"4h 05m",currentNumeric:245,previous:203},{title:"Distance",unit:"km",value:"42.5",currentNumeric:42.5,previous:38.2},{title:"Calories",unit:"kcal",value:"3,420",currentNumeric:3420,previous:3150},{title:"Steps",value:"64,210",currentNumeric:64210,previous:60890}],history:[{type:"cardio",id:"c1",activity:"Outdoor Run",date:Hp(1),duration:"00:42:10",distance:"7.4 km",calories:"612 kcal"},{type:"cardio",id:"c2",activity:"Indoor Run",date:Hp(3),duration:"00:35:05",distance:"5.6 km",calories:"438 kcal"},{type:"cardio",id:"c3",activity:"Cycling",date:Hp(5),duration:"00:48:44",distance:"18.2 km",calories:"502 kcal"}]},threeMonths:{series:[Wp("cardio","threeMonths",28,.22,0),Wp("cardio","threeMonths",21,.2,1),Wp("cardio","threeMonths",34,.23,2),Wp("cardio","threeMonths",17,.19,3)],kpis:[{title:"Total Time",unit:"hours",value:"15h 38m",currentNumeric:938,previous:902},{title:"Distance",unit:"km",value:"168",currentNumeric:168,previous:160},{title:"Calories",unit:"kcal",value:"13,420",currentNumeric:13420,previous:12680},{title:"Steps",value:"262,410",currentNumeric:262410,previous:254e3}],history:[]},sixMonths:{series:[Wp("cardio","sixMonths",52,.18,0),Wp("cardio","sixMonths",38,.16,1),Wp("cardio","sixMonths",58,.19,2),Wp("cardio","sixMonths",32,.15,3)],kpis:[{title:"Total Time",unit:"hours",value:"168",currentNumeric:10080,previous:9980},{title:"Distance",unit:"km",value:"1,932",currentNumeric:1932,previous:1870},{title:"Calories",unit:"kcal",value:"124,650",currentNumeric:124650,previous:123200},{title:"Steps",value:"2.9M",currentNumeric:29e5,previous:284e4}],history:[]}},measurement:{week:{series:[Wp("measurement","week",101.2,.03,0),Wp("measurement","week",36.4,.025,1),Wp("measurement","week",58.8,.024,2),Wp("measurement","week",96.7,.028,3)],kpis:[{title:"Chest",unit:"cm",value:"101.2",currentNumeric:101.2,previous:101.5},{title:"Arms",unit:"cm",value:"36.4",currentNumeric:36.4,previous:36.1},{title:"Legs",unit:"cm",value:"58.8",currentNumeric:58.8,previous:58.6},{title:"Back",unit:"cm",value:"96.7",currentNumeric:96.7,previous:97.1}],history:[]},threeMonths:{series:[Wp("measurement","threeMonths",101.4,.03,0),Wp("measurement","threeMonths",36.2,.024,1),Wp("measurement","threeMonths",59.1,.022,2),Wp("measurement","threeMonths",96.9,.027,3)],kpis:[{title:"Chest",unit:"cm",value:"101.4",currentNumeric:101.4,previous:102},{title:"Arms",unit:"cm",value:"36.2",currentNumeric:36.2,previous:36},{title:"Legs",unit:"cm",value:"59.1",currentNumeric:59.1,previous:58.9},{title:"Back",unit:"cm",value:"96.9",currentNumeric:96.9,previous:97.3}],history:[]},sixMonths:{series:[Wp("measurement","sixMonths",102.8,.032,0),Wp("measurement","sixMonths",36,.022,1),Wp("measurement","sixMonths",59.6,.02,2),Wp("measurement","sixMonths",97.2,.026,3)],kpis:[{title:"Chest",unit:"cm",value:"102.8",currentNumeric:102.8,previous:103.6},{title:"Arms",unit:"cm",value:"36.0",currentNumeric:36,previous:35.8},{title:"Legs",unit:"cm",value:"59.6",currentNumeric:59.6,previous:59.2},{title:"Back",unit:"cm",value:"97.2",currentNumeric:97.2,previous:97.9}],history:[]}}};function Hp(e){const t=new Date;return t.setDate(t.getDate()-e),t.toISOString()}function Wp(e,t,n,r,s){const i=new Date,o=Fp[t],a=Up[t],l=function(e){let t=0;for(let r=0;r<e.length;r+=1)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n=t>>>0,function(){n+=1831565813;let e=Math.imul(n^n>>>15,1|n);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296};var n}(`${e}-${t}-${n}-${r}-${s}`);let c="measurement"===e?n:.55*n;c*="strength"===e?1+.08*s:"cardio"===e?1+.05*s:1+.02*s;const d=[];for(let u=0;u<o;u+=1){const h=new Date(i);h.setDate(i.getDate()-(o-1-u)*a);const m=o>1?u/(o-1):1,p=(l()-.5)*r*n*.18;if("strength"===e){const e=n*r*(.12+.18*l()+.04*s);c+=l()>.75?.15*e+p:e+p}else if("cardio"===e){c+=n*r*(.08+.22*l()+.03*s)+p,l()>.82&&(c-=n*r*.12)}else{c-=n*r*(.04+.06*m+.015*s),c+=p}const f="measurement"===e?.75*n:.35*n,g="measurement"===e?f*(1-.02*s):f*(1+.03*s),x=("measurement"===e?1.05*n:n*("sixMonths"===t?1.45:1.25))*(1+.08*s);c=Math.min(x,Math.max(g,c)),d.push({x:h.toISOString(),y:Number(c.toFixed(2)),isPersonalBest:u===o-2})}return d}const zp=[{value:"strength",label:"Strength"},{value:"cardio",label:"Cardio"},{value:"measurement",label:"Measurement"}],Gp=[{value:"week",label:"Week"},{value:"threeMonths",label:"3 Month"},{value:"sixMonths",label:"6 Month"}],qp=["#7FD1AE","#FFB38A","#FFE08A","#8FC5FF"],Yp=240;function Jp({bottomBar:e,onSelectRoutine:t}){var r,s,i,o,a,l;const[c,d]=n.useState("cardio"),[u,h]=n.useState("week"),[m,p]=n.useState(0),[f,g]=n.useState(!1),x=n.useRef(null),{userToken:y}=mt(),[v,b]=n.useState(null),[w,k]=n.useState([]),[E,S]=n.useState(!1),_=n.useMemo(()=>Vp[c][u],[c,u]),j=n.useMemo(()=>"strength"===c&&w.length>0?{..._,history:w}:_,[_,c,w]),C=n.useMemo(()=>xf(c,m),[c,m]),N=j.series[m]??j.series[0]??[],T="measurement"!==c&&(j.history.length>0||"strength"===c&&E),A="strength"===c&&E&&0===j.history.length;n.useEffect(()=>{p(0)},[c,u]),n.useEffect(()=>{if(!f)return;const e=e=>{x.current&&!x.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[f]),n.useEffect(()=>{let e=!1;return y?((async()=>{try{const t=await ze.getMyProfile();e||b(function(e){var t,n;if(!e)return null;const r=null==(t=e.first_name)?void 0:t.trim();if(r)return r.split(/\s+/)[0];const s=null==(n=e.display_name)?void 0:n.trim();if(s){const[e]=s.split(/\s+/);if(e)return e}return null}(t))}catch(t){e||b(null)}})(),()=>{e=!0}):(b(null),k([]),()=>{e=!0})},[y]),n.useEffect(()=>{let e=!1;return S(!0),(async()=>{try{const n=await ze.getSampleRoutines(),r=[];for(const s of n.slice(0,5)){if(e)break;try{const e=await lr(s.routine_template_id,{userIdOverride:_e}),t=Zp(e.length),n=Qp(e);r.push({type:"strength",id:String(s.routine_template_id),routineTemplateId:s.routine_template_id,name:s.name,date:s.created_at??(new Date).toISOString(),duration:ef(t),totalWeight:tf(n)})}catch(t){}}e||(r.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),k(r))}catch(t){e||k([])}finally{e||S(!1)}})(),()=>{e=!0}},[y]);const R=qp[m%qp.length],P=function(e){const t=e?`, ${e}`:"";return`Youâ€™ve got this${t}`}(v);return V.jsx(Rt,{header:null,bottomBar:e,bottomBarSticky:!0,showHeaderBorder:!1,showBottomBarBorder:!1,maxContent:"responsive",contentClassName:"",children:V.jsxs(rr,{gap:"fluid",children:[V.jsx(Qn,{y:"sm"}),V.jsxs("section",{className:"relative",ref:x,children:[V.jsx("h1",{className:"mb-3 text-2xl font-semibold tracking-tight text-[#111111]",children:P}),V.jsxs("button",{type:"button",onClick:()=>g(e=>!e),"aria-haspopup":"listbox","aria-expanded":f,className:"flex w-full items-center justify-between rounded-2xl px-5 py-3 text-sm font-semibold text-[#E27D60] shadow-[0_12px_24px_-16px_rgba(30,36,50,0.4)] focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",style:{backgroundColor:"transparent",border:"1px solid #E27D60"},children:[V.jsx("span",{children:(null==(r=zp.find(e=>e.value===c))?void 0:r.label)??"Select"}),V.jsx("span",{className:"ml-3 text-base","aria-hidden":!0,children:f?"â–²":"â–¼"})]}),f?V.jsx("ul",{role:"listbox",className:"absolute z-20 mt-2 w-full overflow-hidden rounded-2xl border border-[rgba(30,36,50,0.08)] bg-white shadow-[0_16px_32px_-18px_rgba(30,36,50,0.35)]",children:zp.map(e=>{const t=e.value===c;return V.jsx("li",{children:V.jsxs("button",{type:"button",role:"option","aria-selected":t,onClick:()=>{d(e.value),g(!1)},className:"flex w-full items-center justify-between px-5 py-3 text-sm font-semibold transition "+(t?"bg-[rgba(226,125,96,0.15)] text-[#E27D60]":"text-[rgba(34,49,63,0.75)] hover:bg-[rgba(226,125,96,0.08)]"),children:[V.jsx("span",{children:e.label}),t?V.jsx("span",{"aria-hidden":!0,children:"âœ“"}):null]})},e.value)})}):null]}),V.jsx("section",{className:"flex flex-wrap items-center justify-center gap-2 px-1 py-1",children:Gp.map(e=>{const t=e.value===u,n="#68A691";return V.jsx("button",{type:"button",onClick:()=>h(e.value),"aria-pressed":t,className:"rounded-full px-4 py-2 text-xs font-semibold transition focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[rgba(30,36,50,0.2)] sm:text-sm",style:{backgroundColor:t?n:"transparent",color:t?"#ffffff":n,border:`1px solid ${n}`,boxShadow:t?"0 12px 22px -16px rgba(30,36,50,0.35)":"0 2px 6px -4px rgba(30,36,50,0.18)",transform:t?"scale(1.05)":"scale(1)",transition:"all 0.28s cubic-bezier(0.22, 0.61, 0.36, 1)",minWidth:86},children:e.label},e.value)})}),V.jsxs("section",{className:"rounded-3xl border border-[rgba(30,36,50,0.08)] bg-white p-5 shadow-[0_18px_36px_-20px_rgba(30,36,50,0.4)]",children:[V.jsxs("header",{className:"flex items-center justify-between gap-3",children:[V.jsxs("div",{className:"space-y-1",children:[V.jsx("div",{className:"text-xs font-semibold uppercase tracking-[0.14em] text-[rgba(34,49,63,0.65)]",children:(null==(s=zp.find(e=>e.value===c))?void 0:s.label)??"Select"}),V.jsx("h2",{className:"text-xl font-semibold text-[#111111]",children:(null==(i=j.kpis[m])?void 0:i.title)??(null==(o=j.kpis[0])?void 0:o.title)??""}),V.jsxs("p",{className:"text-xs font-medium text-[rgba(34,49,63,0.65)]",children:[(null==(a=Gp.find(e=>e.value===u))?void 0:a.label)??""," overview"]})]}),V.jsx("div",{className:"rounded-full border border-[rgba(30,36,50,0.12)] bg-[#F7F6F3] px-3 py-1 text-xs font-semibold text-[rgba(34,49,63,0.7)]",children:(null==(l=zp.find(e=>e.value===c))?void 0:l.label)??""})]}),V.jsx(yf,{data:N,color:R,range:u,formatter:C})]}),V.jsx("section",{className:"mt-8 grid grid-cols-2 gap-4",children:j.kpis.map((e,t)=>{const n=t===m,r=qp[t]??qp[0],s=xf(c,t),i=e.previous??null,o=e.currentNumeric??null,a=function(e,t){if(null===e||null===t)return{icon:rf.flat,color:"text-[rgba(34,49,63,0.55)]",colorActive:"text-[#22313F]",text:"No change",delta:0};const n=lf(e),r=lf(t),s=n-r;if(Math.abs(s)<.01)return{icon:rf.flat,color:"text-[rgba(34,49,63,0.45)]",colorActive:"text-[#22313F]",text:"Same as prior",delta:0};if(s>0)return{icon:rf.up,color:"text-[rgba(46,125,102,0.85)]",colorActive:"text-[rgba(46,125,102,1)]",text:"Up",delta:s};return{icon:rf.down,color:"text-[rgba(226,125,96,0.85)]",colorActive:"text-[rgba(226,125,96,1)]",text:"Down",delta:Math.abs(s)}}(o,i),l=e.unit&&"sessions"!==e.unit.toLowerCase()?e.unit:void 0;return V.jsxs("button",{type:"button",onClick:()=>p(t),className:"rounded-2xl px-5 py-4 text-left shadow-[0_16px_28px_-18px_rgba(30,36,50,0.35)] transition focus:outline-none focus:ring-2 focus:ring-offset-2 ring-0",style:{backgroundColor:n?r:"#FFFFFF",border:n?"none":"1px solid rgba(30,36,50,0.08)"},"aria-pressed":n,"aria-label":`${e.title} ${e.value}`,children:[V.jsx("header",{className:"text-xs font-semibold uppercase tracking-wide "+(n?"text-[#22313F]":"text-[rgba(34,49,63,0.65)]"),children:l?`${e.title} (${l})`:e.title}),V.jsx("div",{className:"mt-3 text-3xl font-semibold text-[#111111]",children:e.value}),null!==i&&null!==o?V.jsxs("p",{className:`mt-2 flex items-center gap-1 text-xs font-medium ${n?a.colorActive:a.color}`,children:[V.jsx("span",{children:a.icon}),V.jsxs("span",{children:[a.text," ",s(Math.abs(a.delta))]})]}):null]},`${c}-${u}-${e.title}`)})}),V.jsx(Qn,{y:"sm"}),T?V.jsxs("section",{className:"rounded-3xl border border-[rgba(30,36,50,0.08)] bg-white p-5 shadow-[0_18px_36px_-20px_rgba(30,36,50,0.4)]",children:[V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsx("h2",{className:"text-lg font-semibold text-[#111111]",children:"History"}),V.jsx("span",{className:"text-xs font-medium text-[rgba(34,49,63,0.6)]",children:"Latest to oldest"})]}),A?V.jsx("div",{className:"mt-4 text-sm font-medium text-[rgba(34,49,63,0.65)]",children:"Loading sample routines..."}):V.jsx("ul",{className:"mt-4 space-y-3",children:[...j.history].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).map(e=>{if("strength"===e.type){const n=V.jsxs(V.Fragment,{children:[V.jsxs("div",{children:[V.jsx("p",{className:"text-sm font-semibold text-[#111111]",children:e.name}),V.jsxs("p",{className:"text-xs text-[rgba(34,49,63,0.65)]",children:[Kp(e.date)," Â· ",e.duration]})]}),V.jsx("p",{className:"text-sm font-semibold text-[#111111]",children:e.totalWeight})]}),r="number"==typeof e.routineTemplateId&&!!t;return V.jsx("li",{children:r?V.jsx("button",{type:"button",onClick:()=>(e=>{if("strength"!==e.type)return;if(!t)return;const{routineTemplateId:n}=e;"number"==typeof n&&t(n,e.name,pr.ReadOnly)})(e),className:"flex w-full items-center justify-between rounded-2xl bg-[#F8F6F3] px-4 py-3 text-left transition focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[rgba(226,125,96,0.35)]",children:n}):V.jsx("div",{className:"flex items-center justify-between rounded-2xl bg-[#F8F6F3] px-4 py-3",children:n})},e.id)}return V.jsxs("li",{className:"flex items-center justify-between rounded-2xl bg-[#F8F6F3] px-4 py-3",children:[V.jsxs("div",{children:[V.jsx("p",{className:"text-sm font-semibold text-[#111111]",children:Xp(e.activity)}),V.jsxs("p",{className:"text-xs text-[rgba(34,49,63,0.65)]",children:[Kp(e.date)," Â· ",e.duration]})]}),V.jsxs("div",{className:"text-right",children:[V.jsx("p",{className:"text-sm font-semibold text-[#111111]",children:e.distance}),e.calories?V.jsx("p",{className:"text-xs text-[rgba(34,49,63,0.65)]",children:e.calories}):null]})]},e.id)})})]}):null]})})}function Xp(e){return{"outdoor walk":"Outdoor Walk","indoor walk":"Indoor Walk","outdoor run":"Outdoor Run","indoor run":"Indoor Run",cycling:"Cycling",elliptical:"Elliptical",rowing:"Rowing","stair stepper":"Stair Stepper",swimming:"Swimming"}[e.trim().toLowerCase()]??e}function Kp(e){return new Date(e).toLocaleDateString(void 0,{month:"short",day:"numeric"})}function Zp(e){return!Number.isFinite(e)||e<=0?30:10*e}function Qp(e){return e.reduce((e,t)=>e+t.sets.reduce((e,t)=>{const n=Number.parseFloat(t.reps),r=Number.parseFloat(t.weight);return Number.isFinite(n)&&Number.isFinite(r)?n<=0||r<=0?e:e+n*r:e},0),0)}function ef(e){const t=Number.isFinite(e)&&e>0?Math.round(e):0,n=Math.floor(t/60),r=t%60;return n>0?r>0?`${n}h ${r}m`:`${n}h`:`${Math.max(r,1)} min`}function tf(e){const t=Number.isFinite(e)&&e>0?e:0;return`${new Intl.NumberFormat(void 0,{maximumFractionDigits:0}).format(Math.round(t))} kg`}function nf(e,t,n,r){const s=new Date(t);if("week"===e)return s.toLocaleDateString(void 0,{weekday:"short"});if("threeMonths"===e){const e=s.toLocaleDateString(void 0,{month:"short"}),t=function(e){const t=new Date(e.getFullYear(),e.getMonth(),1),n=0===t.getDay()?6:t.getDay()-1;return Math.floor((e.getDate()+n-1)/7)+1}(s);return`${e} W${t}`}return s.toLocaleDateString(void 0,{month:"short"})}const rf={up:"â–²",down:"â–¼",flat:"="},sf=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),of=new Intl.NumberFormat(void 0,{minimumFractionDigits:1,maximumFractionDigits:1}),af=new Intl.NumberFormat(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});function lf(e){return Number.isFinite(e)?Math.max(0,e):0}function cf(e){const t=lf(e),n=Math.floor(t/60),r=Math.round(t%60);return n>0&&r>0?`${n}h ${r}m`:n>0?`${n}h`:`${r}m`}function df(e){return`${sf.format(Math.round(lf(e)))} kg`}function uf(e){return`${sf.format(Math.round(lf(e)))} days`}function hf(e){return`${sf.format(Math.round(lf(e)))} workouts`}function mf(e){return`${of.format(lf(e))} km`}function pf(e){return`${sf.format(Math.round(lf(e)))} kcal`}function ff(e){return`${sf.format(Math.round(lf(e)))} steps`}function gf(e){return`${af.format(lf(e))} cm`}function xf(e,t){switch(e){case"strength":return[cf,hf,df,uf][t]??(e=>sf.format(Math.round(e)));case"cardio":return[cf,mf,pf,ff][t]??(e=>sf.format(Math.round(e)));default:return[gf,gf,gf,gf][t]??(e=>af.format(lf(e)))}}const yf=({data:e,color:t,range:r,formatter:s})=>{const i=n.useRef(null),[o,a]=n.useState(0),[l,c]=n.useState(null),d=n.useMemo(()=>`grad-${Math.random().toString(36).slice(2,10)}`,[]),u=n.useMemo(()=>"threeMonths"===r?{top:16,bottom:12,left:28,right:36}:"sixMonths"===r?{top:16,bottom:12,left:24,right:28}:{top:16,bottom:12,left:18,right:18},[r]);n.useEffect(()=>{const e=i.current;if(!e)return;const t=new ResizeObserver(e=>{const t=e[0];t&&a(t.contentRect.width)});return t.observe(e),()=>t.disconnect()},[]);const{areaPath:h,linePath:m,dots:p,ticks:f,yPosition:g,averageY:x,averageValue:y}=n.useMemo(()=>{if(!o||0===e.length)return{areaPath:"",linePath:"",dots:[],ticks:[],yPosition:e=>e,averageY:u.top,averageValue:0};const t=e.map(e=>e.y),n=Math.max(...t),s=Math.min(...t),i=0===n?1:1.12*n,a=.9*s,l=bm().domain(e.map((e,t)=>t)).range([u.left,o-u.right]).padding(1===e.length?1:.4),c=Op().domain([a,i]).range([Yp-u.bottom,u.top]).nice(),d=Kh().x((e,t)=>l(t)??u.left).y(e=>c(e.y)).curve(tm.alpha(.5)),h=function(e,t,n){var r=null,s=Bh(!0),i=null,o=Yh,a=null,l=zh(c);function c(c){var d,u,h,m,p,f=(c=Gh(c)).length,g=!1,x=new Array(f),y=new Array(f);for(null==i&&(a=o(p=l())),d=0;d<=f;++d){if(!(d<f&&s(m=c[d],d,c))===g)if(g=!g)u=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=d-1;h>=u;--h)a.point(x[h],y[h]);a.lineEnd(),a.areaEnd()}g&&(x[d]=+e(m,d,c),y[d]=+t(m,d,c),a.point(r?+r(m,d,c):x[d],n?+n(m,d,c):y[d]))}if(p)return a=null,p+""||null}function d(){return Kh().defined(s).curve(o).context(i)}return e="function"==typeof e?e:void 0===e?Jh:Bh(+e),t="function"==typeof t?t:Bh(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?Xh:Bh(+n),c.x=function(t){return arguments.length?(e="function"==typeof t?t:Bh(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:Bh(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Bh(+e),c):r},c.y=function(e){return arguments.length?(t="function"==typeof e?e:Bh(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:Bh(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:Bh(+e),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(r).y(t)},c.defined=function(e){return arguments.length?(s="function"==typeof e?e:Bh(!!e),c):s},c.curve=function(e){return arguments.length?(o=e,null!=i&&(a=o(i)),c):o},c.context=function(e){return arguments.length?(null==e?i=a=null:a=o(i=e),c):i},c}().x((e,t)=>l(t)??u.left).y0(Yp-u.bottom).y1(e=>c(e.y)).curve(tm.alpha(.5)),m=e.map((e,t)=>({cx:l(t)??u.left,cy:c(e.y),label:e.x})),p="week"===r?3:"threeMonths"===r?4:5,f=function(e,t){const[n,r]=e;if(n===r)return[Number(n.toFixed(2))];const s=(r-n)/Math.max(t-1,1);return Array.from({length:t},(e,t)=>Number((n+t*s).toFixed(2)))}(c.domain(),p),g=t.reduce((e,t)=>e+t,0)/t.length;return{areaPath:h(e)??"",linePath:d(e)??"",dots:m,ticks:f,yPosition:e=>c(e),averageY:c(g),averageValue:g}},[e,u.bottom,u.left,u.right,u.top,r,o]);return V.jsx("div",{ref:i,className:"w-full",style:{height:Yp},onMouseLeave:()=>c(null),children:o>0&&e.length>0?V.jsxs("svg",{width:o,height:Yp,role:"img","aria-label":"Progress trend",className:"transition-opacity duration-300",children:[V.jsx("defs",{children:V.jsxs("linearGradient",{id:d,x1:"0",y1:"0",x2:"0",y2:"1",children:[V.jsx("stop",{offset:"0%",stopColor:t,stopOpacity:.18}),V.jsx("stop",{offset:"100%",stopColor:t,stopOpacity:0})]})}),f.map(e=>V.jsx("line",{x1:u.left,x2:o-u.right,y1:g(e),y2:g(e),stroke:"rgba(30,36,50,0.08)",strokeDasharray:"4 6"},`grid-${e}`)),V.jsx("line",{x1:u.left,x2:o-u.right,y1:x,y2:x,stroke:t,strokeOpacity:.45,strokeWidth:2,strokeDasharray:"4 6"}),V.jsx("path",{d:h,fill:`url(#${d})`}),V.jsx("path",{d:m,fill:"none",stroke:t,strokeWidth:2.5,strokeLinecap:"round"}),p.map((e,n)=>V.jsxs("g",{children:[V.jsx("circle",{cx:e.cx,cy:e.cy,r:3.5,stroke:t,strokeWidth:1,fill:"#FFFFFF",style:{cursor:"pointer"},tabIndex:0,onMouseEnter:()=>c(n),onMouseLeave:()=>c(null),onFocus:()=>c(n),onBlur:()=>c(null)}),V.jsx("rect",{x:e.cx-Math.max(20,(o-u.left-u.right)/Math.max(p.length,1)/2),width:Math.max(40,(o-u.left-u.right)/Math.max(p.length,1)),y:u.top,height:Yp-u.top-u.bottom,fill:"transparent",onMouseEnter:()=>c(n),onMouseLeave:()=>c(null)})]},e.label)),e.map((t,n)=>{var s,i;const o=nf(r,t.x,0,e.length);if(!o)return null;const a="threeMonths"===r?220:236;return V.jsx("text",{x:(null==(s=p[n])?void 0:s.cx)??u.left,y:a,textAnchor:"threeMonths"===r?"end":"middle",fontSize:"threeMonths"===r?9:10,fill:"rgba(30,36,50,0.4)",transform:"threeMonths"===r?`rotate(-35, ${(null==(i=p[n])?void 0:i.cx)??u.left}, ${a})`:void 0,children:o},`x-${t.x}`)}),p.length>0?V.jsx("line",{x1:p[p.length-1].cx,x2:p[p.length-1].cx,y1:u.top,y2:Yp-u.bottom,stroke:"rgba(30,36,50,0.15)",strokeDasharray:"2 4"}):null,f.map(e=>{return V.jsx("text",{x:o-u.right+6,y:g(e),textAnchor:"start",fontSize:11,fill:"rgba(30,36,50,0.25)",children:(t=e,Math.abs(t)>=1e6?`${(t/1e6).toFixed(1)}M`:Math.abs(t)>=1e3?`${(t/1e3).toFixed(1)}k`:t.toFixed(0))},`y-${e}`);var t}),null!==l&&p[l]?V.jsxs("g",{transform:`translate(${p[l].cx},${p[l].cy})`,pointerEvents:"none",children:[V.jsx("line",{x1:0,x2:0,y1:0,y2:Yp-p[l].cy-u.bottom,stroke:t,strokeOpacity:.18,strokeDasharray:"2 4"}),V.jsx("circle",{r:6,fill:t,fillOpacity:.18}),V.jsx("circle",{r:3.5,stroke:t,strokeWidth:1.5,fill:"#FFFFFF"}),V.jsx("foreignObject",{x:-70,y:-60,width:140,height:52,children:V.jsxs("div",{className:"rounded-2xl border border-[rgba(30,36,50,0.08)] bg-white px-3 py-2 text-[10px] font-semibold text-[#111111] shadow-[0_12px_20px_-16px_rgba(30,36,50,0.45)]",children:[V.jsx("p",{className:"text-[11px] font-semibold text-[#111111]",children:s(e[l].y)}),V.jsx("p",{className:"text-[10px] font-medium text-[rgba(30,36,50,0.55)]",children:new Date(e[l].x).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]})})]}):null,V.jsx("text",{x:o-u.right,y:x-8,textAnchor:"end",fontSize:10,fill:"rgba(30,36,50,0.45)",children:`Avg ${s(y)}`})]},`${r}-${e.length}-${t}`):V.jsx("div",{className:"h-full w-full"})})};function vf({className:e,...t}){return V.jsx("div",{"data-slot":"card",className:Un("bg-card text-black flex flex-col gap-6 rounded-xl border",e),...t})}function bf({className:e,...t}){return V.jsx("div",{"data-slot":"card-header",className:Un("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function wf({className:e,...t}){return V.jsx("div",{"data-slot":"card-content",className:Un("px-6 [&:last-child]:pb-6",e),...t})}function kf(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const s=r.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return r.scopeName=t.scopeName,r}var Ef=(null==globalThis?void 0:globalThis.document)?n.useLayoutEffect:()=>{};function Sf(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function _f(e){const t=jf(e),r=n.forwardRef((e,r)=>{const{children:s,...i}=e,o=n.Children.toArray(s),a=o.find(Nf);if(a){const e=a.props.children,s=o.map(t=>t===a?n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null:t);return V.jsx(t,{...i,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,s):null})}return V.jsx(t,{...i,ref:r,children:s})});return r.displayName=`${e}.Slot`,r}function jf(e){const t=n.forwardRef((e,t)=>{const{children:r,...s}=e;if(n.isValidElement(r)){const e=function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,s=r&&"isReactWarning"in r&&r.isReactWarning;if(s)return e.ref;if(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s)return e.props.ref;return e.props.ref||e.ref}(r),i=function(e,t){const n={...t};for(const r in t){const s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...e)=>{const t=i(...e);return s(...e),t}:s&&(n[r]=s):"style"===r?n[r]={...s,...i}:"className"===r&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...e,...n}}(s,r.props);return r.type!==n.Fragment&&(i.ref=t?function(...e){return t=>{let n=!1;const r=e.map(e=>{const r=Sf(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():Sf(e[t],null)}}}}(t,e):e),n.cloneElement(r,i)}return n.Children.count(r)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Cf=Symbol("radix.slottable");function Nf(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Cf}var Tf=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const r=_f(`Primitive.${t}`),s=n.forwardRef((e,n)=>{const{asChild:s,...i}=e,o=s?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),V.jsx(o,{...i,ref:n})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),Af={exports:{}},Rf={},Pf=n;var Mf="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},$f=Pf.useState,Df=Pf.useEffect,If=Pf.useLayoutEffect,Lf=Pf.useDebugValue;function Bf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Mf(e,n)}catch(r){return!0}}var Of="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=$f({inst:{value:n,getSnapshot:t}}),s=r[0].inst,i=r[1];return If(function(){s.value=n,s.getSnapshot=t,Bf(s)&&i({inst:s})},[e,n,t]),Df(function(){return Bf(s)&&i({inst:s}),e(function(){Bf(s)&&i({inst:s})})},[e]),Lf(n),n};Rf.useSyncExternalStore=void 0!==Pf.useSyncExternalStore?Pf.useSyncExternalStore:Of,Af.exports=Rf;var Ff=Af.exports;function Uf(){return()=>{}}var Vf="Avatar",[Hf,Wf]=function(e,t=[]){let r=[];const s=()=>{const t=r.map(e=>n.createContext(e));return function(r){const s=(null==r?void 0:r[e])||t;return n.useMemo(()=>({[`__scope${e}`]:{...r,[e]:s}}),[r,s])}};return s.scopeName=e,[function(t,s){const i=n.createContext(s),o=r.length;r=[...r,s];const a=t=>{var r;const{scope:s,children:a,...l}=t,c=(null==(r=null==s?void 0:s[e])?void 0:r[o])||i,d=n.useMemo(()=>l,Object.values(l));return V.jsx(c.Provider,{value:d,children:a})};return a.displayName=t+"Provider",[a,function(r,a){var l;const c=(null==(l=null==a?void 0:a[e])?void 0:l[o])||i,d=n.useContext(c);if(d)return d;if(void 0!==s)return s;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},kf(s,...t)]}(Vf),[zf,Gf]=Hf(Vf),qf=n.forwardRef((e,t)=>{const{__scopeAvatar:r,...s}=e,[i,o]=n.useState("idle");return V.jsx(zf,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:o,children:V.jsx(Tf.span,{...s,ref:t})})});qf.displayName=Vf;var Yf="AvatarImage";n.forwardRef((e,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:i=()=>{},...o}=e,a=Gf(Yf,r),l=function(e,{referrerPolicy:t,crossOrigin:r}){const s=Ff.useSyncExternalStore(Uf,()=>!0,()=>!1),i=n.useRef(null),o=s?(i.current||(i.current=new window.Image),i.current):null,[a,l]=n.useState(()=>Kf(o,e));return Ef(()=>{l(Kf(o,e))},[o,e]),Ef(()=>{const e=e=>()=>{l(e)};if(!o)return;const n=e("loaded"),s=e("error");return o.addEventListener("load",n),o.addEventListener("error",s),t&&(o.referrerPolicy=t),"string"==typeof r&&(o.crossOrigin=r),()=>{o.removeEventListener("load",n),o.removeEventListener("error",s)}},[o,r,t]),a}(s,o),c=function(e){const t=n.useRef(e);return n.useEffect(()=>{t.current=e}),n.useMemo(()=>(...e)=>{var n;return null==(n=t.current)?void 0:n.call(t,...e)},[])}(e=>{i(e),a.onImageLoadingStatusChange(e)});return Ef(()=>{"idle"!==l&&c(l)},[l,c]),"loaded"===l?V.jsx(Tf.img,{...o,ref:t,src:s}):null}).displayName=Yf;var Jf="AvatarFallback",Xf=n.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:s,...i}=e,o=Gf(Jf,r),[a,l]=n.useState(void 0===s);return n.useEffect(()=>{if(void 0!==s){const e=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(e)}},[s]),a&&"loaded"!==o.imageLoadingStatus?V.jsx(Tf.span,{...i,ref:t}):null});function Kf(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}Xf.displayName=Jf;var Zf=qf,Qf=Xf;function eg({className:e,...t}){return V.jsx(Zf,{"data-slot":"avatar",className:Un("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...t})}function tg({className:e,...t}){return V.jsx(Qf,{"data-slot":"avatar-fallback",className:Un("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}function ng({bottomBar:e,onNavigateToMyAccount:t,onNavigateToDeviceSettings:r}){const{userToken:s,signOut:i}=mt(),[o,a]=n.useState(null),[l,c]=n.useState(!1),[d,u]=n.useState(!1),h=[{title:"Account & Settings",items:[{label:"My Account",description:"Profile details and connected services",icon:f,onPress:t},{label:"Device Settings",description:"Manage Health Connect and devices",icon:b,onPress:r},{label:"Notifications",description:"Choose reminders that keep you on track",icon:w},{label:"Privacy Settings",description:"Control data sharing and visibility",icon:k}]},{title:"Support",items:[{label:"Help & Support",description:"Get help or ask a question",icon:E},{label:"Tutorials",description:"Quick tips to learn the app",icon:S},{label:"About",description:"Our mission and release notes",icon:_},{label:"Getting Started",description:"Guided setup for new members",icon:j}]}];n.useEffect(()=>{(async()=>{if(s){c(!0);try{const e=await ze.getMyProfile();a(e)}catch(e){Z("Failed to fetch profile:",e),e instanceof Error&&"UNAUTHORIZED"===e.message?rt.error("Session expired. Please sign in."):rt.error("Failed to load profile data.")}finally{c(!1)}}})()},[s]);const m=()=>(null==o?void 0:o.display_name)?o.display_name:(null==o?void 0:o.first_name)&&(null==o?void 0:o.last_name)?`${o.first_name} ${o.last_name}`:(null==o?void 0:o.first_name)?o.first_name:"User";return V.jsx(Rt,{header:V.jsx(Wn,{title:"Profile",showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold text-black"}),maxContent:"responsive",showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:e,bottomBarSticky:!0,headerInScrollArea:!0,children:V.jsxs(rr,{gap:"fluid",children:[V.jsx(Kn,{variant:"plain",padding:"none",children:V.jsx(vf,{className:"border border-border bg-card/80 backdrop-blur-sm shadow-sm",children:V.jsxs(wf,{className:"p-6 text-center",children:[V.jsx(eg,{className:"w-20 h-20 mx-auto mb-4 bg-primary text-black shadow-lg shadow-primary/30",children:V.jsx(tg,{className:"bg-primary text-black text-lg font-semibold",children:(()=>{const e=m(),t=e.split(" ");return t.length>=2?`${t[0][0]}${t[1][0]}`.toUpperCase():e.slice(0,2).toUpperCase()})()})}),l?V.jsx("div",{className:"text-sm text-black/60",children:"Loading profile..."}):V.jsxs(V.Fragment,{children:[V.jsx("h1",{className:"text-[clamp(20px,5vw,26px)] font-semibold text-black mb-1",children:m()}),V.jsx("p",{className:"text-sm text-black/60",children:"Keep your profile up to date to personalize your plan."})]})]})})}),h.map(e=>V.jsx(Kn,{variant:"plain",padding:"none",children:V.jsxs("div",{className:"rounded-3xl border border-border bg-card/80 backdrop-blur-sm p-5 shadow-sm",children:[V.jsx("p",{className:"text-md font-bold uppercase tracking-[0.12em] text-black mb-4",children:e.title}),V.jsx("div",{className:"space-y-3",children:e.items.map(e=>{const t=e.icon;return V.jsx(wf,{className:"px-0 pt-1 pb-1",children:V.jsx("button",{type:"button",onClick:e.onPress,disabled:!e.onPress,className:"w-full rounded-2xl px-4 py-3 text-left transition hover:bg-black/5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-black/40 disabled:cursor-default disabled:opacity-60",children:V.jsxs("div",{className:"flex items-start gap-3",children:[V.jsx(t,{size:18,className:"mt-1 text-black"}),V.jsxs("div",{className:"flex-1 leading-none",children:[V.jsx("p",{className:"text-sm uppercase font-medium text-black leading-tight",children:e.label}),e.description&&V.jsx("p",{className:"text-xs text-black/60 leading-tight m-0",children:e.description})]}),V.jsx(C,{size:18,className:"text-black/30 self-center"})]})})},e.label)})})]})},e.title)),V.jsx(Kn,{variant:"plain",padding:"none",children:V.jsxs("div",{className:"space-y-4",children:[V.jsxs(hr,{variant:"secondary",className:"w-full flex items-center justify-center gap-2 rounded-2xl border-0 font-medium text-black",onClick:async()=>{if(!d){u(!0);try{await ze.signOut(),i(),rt.success("Signed out successfully")}catch(e){Z("Sign out failed:",e),i(),rt.success("Signed out successfully")}finally{u(!1)}}},disabled:d,children:[d?V.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-current border-t-transparent rounded-full"}):V.jsx(N,{size:16}),d?"Signing Out...":"Logout"]}),V.jsx("div",{className:"text-center text-xs text-black/50",children:"App Version: 1.0.0 (Build 1234)"})]})})]})})}var rg=n.forwardRef((e,t)=>V.jsx(Tf.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null==(n=e.onMouseDown)||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));rg.displayName="Label";var sg=rg;function ig({className:e,...t}){return V.jsx(sg,{"data-slot":"label",className:Un("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const og="prefer_not_to_say",ag={cm:bh("cm").toUpperCase(),m:bh("m").toUpperCase()},lg={kg:wh("kg").toUpperCase(),lb:wh("lb").toUpperCase()},cg=e=>Object.entries(e).map(([e,t])=>({value:e,label:t})),dg=cg(ag),ug=cg(lg),hg=()=>({displayName:"",firstName:"",lastName:"",height:"",weight:"",lengthUnit:oh,weightUnit:ah,gender:og}),mg=[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"non_binary",label:"Non-binary"},{value:"prefer_not_to_say",label:"Prefer not to say"}];function pg({onBack:e}){const t="my-account-form",[r,s]=n.useState(()=>hg()),[i,o]=n.useState(()=>hg()),[a,l]=n.useState(!1),[c,d]=n.useState(!1);n.useEffect(()=>{(async()=>{l(!0);try{const e=await ze.getMyProfile();if(e){const t=xg(e);s(t),o({...t})}else{const e=hg();s(e),o({...e})}}catch(e){Z("Failed to load account profile:",e),rt.error("Unable to load your profile right now.")}finally{l(!1)}})()},[]);const u=n.useMemo(()=>{const e=r.displayName.trim();if(e)return e;return[r.firstName.trim(),r.lastName.trim()].filter(Boolean).join(" ")||"User"},[r.displayName,r.firstName,r.lastName]);n.useMemo(()=>{const e=u;if(!e)return"US";const t=e.split(" ").filter(Boolean);return t.length>=2?`${t[0][0]}${t[1][0]}`.toUpperCase():e.slice(0,2).toUpperCase()},[u]);const h=n.useMemo(()=>JSON.stringify(r)!==JSON.stringify(i),[r,i]),m=e=>t=>{const{value:n}=t.target;s(t=>"weight"!==e||uh(n)?{...t,[e]:n}:t)},p="m"===r.lengthUnit?.01:.1;return V.jsx(Rt,{header:V.jsx(Wn,{title:"My Account",onBack:e,showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold text-black"}),maxContent:"responsive",showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:V.jsx(jr,{children:V.jsx(_r,{type:"submit",form:t,disabled:!h||c||a,className:"min-w-[160px]",children:c?V.jsxs("div",{className:"flex items-center justify-center gap-2",children:[V.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-current border-t-transparent rounded-full"}),"Saving..."]}):"Save Changes"})}),bottomBarSticky:!0,headerInScrollArea:!1,children:V.jsx("form",{id:t,onSubmit:async e=>{if(e.preventDefault(),c||!h)return;const t=r.displayName.trim(),n=r.firstName.trim(),i=r.lastName.trim();if(!t)return void rt.error("Display name is required.");const a=vg(r.height),l=vg(r.weight);if(void 0!==a&&a<=0)return void rt.error("Height must be a positive number.");if(void 0!==l&&l<=0)return void rt.error("Weight must be a positive number.");const u=void 0!==a?fh(a,r.lengthUnit):void 0,m=void 0!==l?gh(l,r.weightUnit):void 0;d(!0);try{const e=await ze.upsertProfile({firstName:n,lastName:i,displayName:t,heightCm:u,weightKg:m,lengthUnit:r.lengthUnit,weightUnit:r.weightUnit,gender:r.gender}),a=e?xg(e):{displayName:t,firstName:n,lastName:i,height:r.height,weight:r.weight,lengthUnit:r.lengthUnit,weightUnit:r.weightUnit,gender:r.gender};s(a),o({...a}),ee("[MyAccount] Saved profile preferences",{lengthUnit:a.lengthUnit,weightUnit:a.weightUnit,gender:a.gender}),rt.success("Profile updated successfully.")}catch(p){Z("Failed to update profile:",p),rt.error("Could not save your changes. Please try again.")}finally{d(!1)}},className:"h-full",children:V.jsxs(rr,{gap:"fluid",children:[V.jsx(Kn,{variant:"plain",padding:"none",children:V.jsxs("div",{className:"rounded-3xl border border-border bg-card/80 backdrop-blur-sm p-6 shadow-sm space-y-6",children:[V.jsxs("div",{children:[V.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-black/60",children:"Personal Information"}),V.jsx("h2",{className:"mt-2 text-lg font-semibold text-black",children:"How should we address you?"}),V.jsx("p",{className:"text-sm text-black/60 mt-1",children:"Update the details you'd like to share with the community."})]}),V.jsxs("div",{className:"space-y-4",children:[V.jsx(gg,{label:"Display Name",value:r.displayName,onChange:m("displayName"),placeholder:"eg. Alex Johnson",required:!0,disabled:a||c}),V.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[V.jsx(gg,{label:"First Name",value:r.firstName,onChange:m("firstName"),placeholder:"First name",disabled:a||c}),V.jsx(gg,{label:"Last Name",value:r.lastName,onChange:m("lastName"),placeholder:"Last name",disabled:a||c})]}),V.jsx(fg,{value:r.gender,onChange:e=>{a||c||s(t=>t.gender===e?t:{...t,gender:e})},disabled:a||c})]})]})}),V.jsx(Kn,{variant:"plain",padding:"none",children:V.jsxs("div",{className:"rounded-3xl border border-border bg-card/80 backdrop-blur-sm p-6 shadow-sm space-y-6",children:[V.jsxs("div",{children:[V.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-black/60",children:"Physical Information"}),V.jsx("h2",{className:"mt-2 text-lg font-semibold text-black",children:"Fitness stats help tailor your plan"}),V.jsx("p",{className:"text-sm text-black/60 mt-1",children:"Share optional stats to improve workout recommendations."})]}),V.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[V.jsx(gg,{label:`Height (${bh(r.lengthUnit).toUpperCase()})`,value:r.height,onChange:m("height"),placeholder:"m"===r.lengthUnit?"eg. 1.75":"eg. 175",type:"number",inputMode:"decimal",min:0,step:p,disabled:a||c}),V.jsx(gg,{label:`Weight (${wh(r.weightUnit).toUpperCase()})`,value:r.weight,onChange:m("weight"),placeholder:"lb"===r.weightUnit?"eg. 154":"eg. 70",type:"number",inputMode:"decimal",min:0,step:.01,disabled:a||c})]})]})}),V.jsx(Kn,{variant:"plain",padding:"none",children:V.jsxs("div",{className:"rounded-3xl border border-border bg-card/80 backdrop-blur-sm p-6 shadow-sm space-y-6",children:[V.jsxs("div",{children:[V.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-black/60",children:"Unit Preferences"}),V.jsx("h2",{className:"mt-2 text-lg font-semibold text-black",children:"Choose how measurements are displayed"}),V.jsx("p",{className:"text-sm text-black/60 mt-1",children:"Select your preferred units for length and weight."})]}),V.jsxs("div",{className:"space-y-1",children:[V.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[V.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.14em] text-black",children:"Length Units"}),V.jsx(ir,{value:r.lengthUnit,onChange:e=>{a||c||s(t=>{if(t.lengthUnit===e)return t;ee(`[MyAccount] Length unit set to ${e.toUpperCase()}`);const n=vg(t.height),r=void 0!==n?fh(n,t.lengthUnit):void 0,s=void 0!==r?xh(r,e):"";return{...t,lengthUnit:e,height:s}})},options:dg,size:"md",variant:"filled",tone:"accent"})]}),V.jsx("div",{className:"h-px bg-border/80"}),V.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[V.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.14em] text-black",children:"Weight Units"}),V.jsx(ir,{value:r.weightUnit,onChange:e=>{a||c||s(t=>{if(t.weightUnit===e)return t;ee(`[MyAccount] Weight unit set to ${e.toUpperCase()}`);const n=vg(t.weight),r=void 0!==n?gh(n,t.weightUnit):void 0,s=void 0!==r?yh(r,e):"";return{...t,weightUnit:e,weight:s}})},options:ug,size:"md",variant:"filled",tone:"accent"})]})]})]})})]})})})}function fg({value:e,onChange:t,disabled:n}){return V.jsxs("div",{className:"space-y-2",children:[V.jsx(ig,{className:"text-xs font-semibold uppercase tracking-[0.18em] text-black/60",children:"Gender"}),V.jsxs("div",{className:"relative",children:[V.jsx("select",{className:"bg-input-background border border-border text-sm h-11 rounded-xl w-full px-4 pr-10 text-black transition-[color,box-shadow] focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none disabled:opacity-50 disabled:cursor-not-allowed appearance-none",value:e,onChange:e=>t(e.target.value),disabled:n,children:mg.map(e=>V.jsx("option",{value:e.value,className:"text-black",children:e.label},e.value))}),V.jsx("svg",{"aria-hidden":"true",viewBox:"0 0 20 20",className:"pointer-events-none absolute right-4 top-1/2 h-4 w-4 -translate-y-1/2 text-black/60",children:V.jsx("path",{fill:"currentColor",d:"M5.23 7.21a.75.75 0 0 1 1.06.02L10 11.204l3.71-3.973a.75.75 0 1 1 1.08 1.04l-4.24 4.54a.75.75 0 0 1-1.08 0l-4.25-4.54a.75.75 0 0 1 .02-1.06Z"})})]})]})}function gg({label:e,className:t,...n}){return V.jsxs("div",{className:"space-y-2",children:[V.jsx(ig,{className:"text-xs font-semibold uppercase tracking-[0.18em] text-black/60",children:e}),V.jsx(Er,{className:`bg-input-background border-border text-sm h-11 rounded-xl ${t??""}`,...n})]})}function xg(e){var t,n,r;const s=mh(e.length_unit),i=ph(e.weight_unit);return{displayName:(null==(t=e.display_name)?void 0:t.trim())??"",firstName:(null==(n=e.first_name)?void 0:n.trim())??"",lastName:(null==(r=e.last_name)?void 0:r.trim())??"",height:void 0!==e.height_cm&&null!==e.height_cm?xh(e.height_cm,s):"",weight:void 0!==e.weight_kg&&null!==e.weight_kg?yh(e.weight_kg,i):"",lengthUnit:s,weightUnit:i,gender:yg(e.gender)}}function yg(e){switch(e){case"male":case"female":case"non_binary":case"prefer_not_to_say":return e;default:return og}}function vg(e){const t=e.trim();if(!t)return;const n=Number(t);return Number.isFinite(n)?n:void 0}function bg({onBack:e}){return V.jsx(Rt,{header:V.jsx(Wn,{title:"Device Settings",onBack:e,denseSmall:!0,titleClassName:"text-[17px] font-semibold text-black"}),showHeaderBorder:!1,showBottomBarBorder:!1,maxContent:"responsive",children:V.jsx(rr,{gap:"fluid",className:"py-6",children:V.jsx(Kn,{variant:"plain",padding:"none",children:V.jsxs("div",{className:"relative overflow-hidden rounded-[32px] border border-white/20 bg-gradient-to-br from-[var(--warm-coral)] via-[#f69a7f] to-[#c86a4a] p-6 text-white shadow-[0px_24px_48px_-18px_rgba(224,122,95,0.75)] sm:p-10",children:[V.jsx("div",{className:"pointer-events-none absolute inset-x-10 -top-32 h-64 rounded-full bg-white/25 blur-3xl","aria-hidden":!0}),V.jsx("div",{className:"pointer-events-none absolute -bottom-24 -right-10 h-60 w-60 rounded-full bg-white/10 blur-3xl","aria-hidden":!0}),V.jsxs(rr,{gap:"xl",className:"relative text-white",children:[V.jsxs(rr,{gap:"xs",children:[V.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.4em] text-white/70",children:"WorkItOut"}),V.jsx("h1",{className:"text-[clamp(24px,5vw,32px)] font-semibold leading-tight text-white",children:"Keep WorkItOut in sync with Apple Health"}),V.jsx("p",{className:"max-w-2xl text-sm leading-relaxed text-white/80",children:"Connecting your Apple Health data â€” from sleep to steps â€” personalizes your WorkItOut experience and helps us build better guidance over time."})]}),V.jsxs("div",{className:"rounded-3xl border border-white/60 bg-white/80 p-6 text-sm leading-relaxed text-black/75 shadow-md backdrop-blur-sm sm:p-8",children:[V.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.32em] text-black/60",children:"Manage permissions"}),V.jsx("p",{className:"mt-3",children:"You can review permissions any time in Settings. To keep WorkItOut in sync:"}),V.jsxs("ol",{className:"mt-4 list-decimal space-y-2 pl-5",children:[V.jsxs("li",{children:["Open ",V.jsx("span",{className:"font-medium",children:"Settings"})," â†’ ",V.jsx("span",{className:"font-medium",children:"Health"})," â†’"," ",V.jsx("span",{className:"font-medium",children:"Data Access & Devices"}),"."]}),V.jsxs("li",{children:["Choose ",V.jsx("span",{className:"font-medium",children:"WorkItOut"}),"."]}),V.jsx("li",{children:"Enable all categories you want to share with the app."})]}),V.jsx("p",{className:"mt-4 text-xs text-black/60",children:"You're in control and can change these choices at any time."})]})]})]})})})})}function wg({onAuthSuccess:e,onNavigateToSignUp:t,onNavigateToWelcome:r,bottomBar:s}){const[i,o]=n.useState(""),[a,l]=n.useState(""),[c,d]=n.useState(!1),[u,h]=n.useState(!1);return V.jsxs(Rt,{padHeader:!1,padBottomBar:!1,disableSafeArea:!0,backgroundImageSrc:"/Workout/Images/LandingPage.png",backgroundOverlayClassName:"bg-black/40",scrollAreaClassName:"flex flex-col",bottomBar:s,contentClassName:"",maxContent:"responsive",children:[V.jsx("button",{onClick:r,className:"text-blue-500 text-2xl p-4 self-start",children:"< Back"}),V.jsx("div",{className:"flex-1 flex items-center justify-center",children:V.jsxs(vf,{className:"\n            w-full\n            bg-card/80 backdrop-blur-sm border-border\n            shadow-soft\n          ",children:[V.jsx(bf,{className:"text-center pb-6",children:V.jsxs(rr,{gap:"md",children:[V.jsx("div",{className:"w-16 h-16 rounded-2xl gradient-primary flex items-center justify-center mx-auto",children:V.jsx(m,{size:32,className:"text-black"})}),V.jsxs("div",{children:[V.jsx("h1",{className:"text-2xl font-medium text-black",children:"Welcome Back"}),V.jsx("p",{className:"text-black",children:"Sign in to continue your fitness journey"})]})]})}),V.jsx(wf,{children:V.jsxs(rr,{gap:"lg",children:[V.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),i.trim()&&a.trim()){h(!0);try{const{access_token:t,refresh_token:n}=await ze.signIn(i,a);e(t,n),rt.success("Welcome back!")}catch(n){Z("Sign in failed:",n),n instanceof Error?n.message.includes("UNAUTHORIZED")||n.message.includes("Invalid")?rt.error("Invalid email or password. Please check your credentials."):n.message.includes("RATE_LIMIT")?rt.error("Too many attempts. Please try again in a few minutes."):rt.error(n.message||"Sign in failed. Please try again."):rt.error("Sign in failed. Please try again.")}finally{h(!1)}}else rt.error("Please enter both email and password")},className:"space-y-4",children:[V.jsxs("div",{className:"space-y-2",children:[V.jsx(ig,{htmlFor:"email",className:"text-black",children:"Email"}),V.jsx(Er,{id:"email",type:"email",value:i,onChange:e=>o(e.target.value),placeholder:"Enter your email",className:"bg-input-background border-border",disabled:u,required:!0})]}),V.jsxs("div",{className:"space-y-2",children:[V.jsx(ig,{htmlFor:"password",className:"text-black",children:"Password"}),V.jsxs("div",{className:"relative",children:[V.jsx(Er,{id:"password",type:c?"text":"password",value:a,onChange:e=>l(e.target.value),placeholder:"Enter your password",className:"bg-input-background border-border pr-10",disabled:u,required:!0}),V.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-black hover:text-black transition-colors",disabled:u,"aria-label":c?"Hide password":"Show password",children:c?V.jsx(T,{size:16}):V.jsx(A,{size:16})})]})]}),V.jsx(hr,{type:"submit",className:"w-full bg-gradient-to-r from-warm-coral to-warm-peach text-black rounded-xl border-0 font-medium",disabled:u,children:u?V.jsxs("div",{className:"flex items-center justify-center gap-2",children:[V.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-black border-t-transparent rounded-full"}),"Signing In..."]}):"Sign In"})]}),V.jsxs(rr,{gap:"md",className:"text-center",children:[V.jsx("button",{onClick:()=>rt.info("Password reset coming soon!"),className:"text-sm text-black hover:text-black transition-colors",disabled:u,children:"Forgot your password?"}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("div",{className:"flex-1 h-px bg-border"}),V.jsx("span",{className:"text-sm text-black",children:"or"}),V.jsx("div",{className:"flex-1 h-px bg-border"})]}),V.jsxs("div",{className:"text-sm text-black",children:["Don't have an account?"," ",V.jsx("button",{onClick:t,className:"text-black hover:text-black transition-colors font-medium",disabled:u,children:"Sign up"})]})]}),V.jsx(Qn,{y:"xs"})]})})]})})]})}function kg({onAuthSuccess:e,onNavigateToSignIn:t,onNavigateToWelcome:r,bottomBar:s}){const[i,o]=n.useState(""),[a,l]=n.useState(""),[c,d]=n.useState(""),[u,h]=n.useState(""),[m,p]=n.useState(""),[f,g]=n.useState(""),[x,y]=n.useState(""),[v,b]=n.useState(!1),w=v||!i||!a||!c||!f||!x;return V.jsxs(Rt,{padHeader:!1,padBottomBar:!1,disableSafeArea:!0,backgroundImageSrc:"/Workout/Images/LandingPage.png",backgroundOverlayClassName:"bg-black/40",scrollAreaClassName:"flex flex-col",maxContent:"responsive",bottomBar:s,contentClassName:"",children:[V.jsx("button",{onClick:r,className:"text-blue-500 text-2xl p-4 self-start",children:"< Back"}),V.jsx("div",{className:"flex-1 flex items-center justify-center",children:V.jsxs(vf,{className:"\n            w-full max-w-md\n            bg-card/90 backdrop-blur-sm border-border\n            shadow-soft\n            max-h-[100svh] overflow-y-auto\n            pt-safe pb-safe kb-aware\n          ",children:[V.jsx(bf,{className:"text-center",children:V.jsxs(rr,{gap:"xs",children:[V.jsx("h1",{className:"text-2xl font-medium text-black",children:"Create Account"}),V.jsx("p",{className:"text-black",children:"Join and start tracking your workouts"})]})}),V.jsx(wf,{children:V.jsxs(rr,{gap:"md",children:[V.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),i.trim()?a.trim()?c.trim()?f.trim()?x.trim()?x.length<6?(rt.error("Password must be at least 6 characters"),0):u&&(isNaN(Number(u))||Number(u)<=0)?(rt.error("Height must be a valid number"),0):!m||!(isNaN(Number(m))||Number(m)<=0)||(rt.error("Weight must be a valid number"),0):(rt.error("Password is required"),0):(rt.error("Email is required"),0):(rt.error("Display name is required"),0):(rt.error("Last name is required"),0):(rt.error("First name is required"),0)){b(!0);try{const t=await ze.signUp(f,x);let n,r;if(t.token&&t.refresh_token)n=t.token,r=t.refresh_token;else{if(!t.needsSignIn)throw new Error("No token received from sign up or sign in");{const e=await ze.signIn(f,x);n=e.access_token,r=e.refresh_token}}ze.setToken(n);const s=u?Number(u):void 0,o=m?Number(m):void 0;await ze.upsertProfile({firstName:i,lastName:a,displayName:c,heightCm:s,weightKg:o}),e(n,r),rt.success("Account created successfully!")}catch(n){n instanceof Error?"RATE_LIMIT"===n.message?rt.error("Too many requests. Please wait a few minutes and try again."):n.message.toLowerCase().includes("email")?rt.error("Invalid email address or email already exists"):n.message.toLowerCase().includes("password")?rt.error("Password must be at least 6 characters"):n.message.includes("429")?rt.error("Server is busy. Please wait a moment and try again."):rt.error(n.message||"Sign up failed"):rt.error("Sign up failed")}finally{b(!1)}}},className:"space-y-4",children:[V.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[V.jsx("div",{children:V.jsx("input",{type:"text",placeholder:"First Name",value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:v,autoComplete:"given-name",required:!0})}),V.jsx("div",{children:V.jsx("input",{type:"text",placeholder:"Last Name",value:a,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:v,autoComplete:"family-name",required:!0})})]}),V.jsx("div",{children:V.jsx("input",{type:"text",placeholder:"Display Name",value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:v,autoComplete:"nickname",required:!0})}),V.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[V.jsx("div",{children:V.jsx("input",{type:"number",placeholder:"Height (cm)",value:u,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:v,min:"1"})}),V.jsx("div",{children:V.jsx("input",{type:"number",placeholder:"Weight (kg)",value:m,onChange:e=>p(t=>uh(e.target.value)?e.target.value:t),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:v,min:"1"})})]}),V.jsx("div",{children:V.jsx("input",{type:"email",placeholder:"Email",value:f,onChange:e=>g(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:v,autoComplete:"email",required:!0})}),V.jsx("div",{children:V.jsx("input",{type:"password",placeholder:"Password (min 6 characters)",value:x,onChange:e=>y(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:v,autoComplete:"new-password",required:!0})}),V.jsx(hr,{type:"submit",disabled:w,className:"w-full bg-gradient-to-r from-warm-coral to-warm-peach text-black rounded-xl border-0 font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:v?V.jsxs("div",{className:"flex items-center justify-center gap-2",children:[V.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-black border-t-transparent rounded-full"}),"Creating Account..."]}):"Create Account"})]}),V.jsx(Qn,{y:"xs"}),V.jsx("div",{className:"text-center",children:V.jsxs("div",{className:"text-sm text-black",children:["Already have an account?"," ",V.jsx("button",{onClick:t,className:"text-black hover:text-black transition-colors font-medium",disabled:v,children:"Sign in"})]})})]})})]})})]})}function Eg(e){return V.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":!0,focusable:"false",...e,children:[V.jsx("path",{d:"M12 6.528V3a1 1 0 0 1 1-1",stroke:"currentColor",strokeWidth:1.8,strokeLinecap:"round"}),V.jsx("path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",fill:"currentColor"})]})}function Sg(e){return V.jsxs("svg",{viewBox:"0 0 18 18","aria-hidden":!0,focusable:"false",...e,children:[V.jsx("path",{fill:"#4285F4",d:"M17.64 9.2045c0-.6395-.0573-1.2518-.1641-1.8386H9v3.4791h4.8436c-.2092 1.125-.8454 2.0795-1.799 2.7173v2.258h2.9087c1.7028-1.5691 2.6877-3.8818 2.6877-6.6158z"}),V.jsx("path",{fill:"#34A853",d:"M9 18c2.43 0 4.4668-.8064 5.9559-2.1932l-2.9087-2.258c-.8077.54-1.84.8614-3.0472.8614-2.3442 0-4.3274-1.5831-5.0368-3.7119H.9055v2.3327C2.3846 15.7959 5.4446 18 9 18z"}),V.jsx("path",{fill:"#FBBC05",d:"M3.9632 10.6983A5.4082 5.4082 0 0 1 3.683 9c0-.5894.1019-1.1591.2802-1.6983V4.969h-2.39C.582 6.0977 0 7.495 0 9s.582 2.9023 1.5732 4.031l2.39-2.3327z"}),V.jsx("path",{fill:"#EA4335",d:"M9 3.5795c1.3214 0 2.5104.454 3.4447 1.3478l2.583-2.583C13.4636.9268 11.427 0 9 0 5.4446 0 2.3846 2.2041.9055 5.2018l2.3777 2.3327C4.6726 5.1623 6.6558 3.5795 9 3.5795z"})]})}function _g({variant:e,onClick:t,disabled:n=!1}){const r={Apple:{label:"Sign in with Apple",className:"bg-black text-white hover:bg-neutral-900 focus-visible:ring-offset-black shadow-[0_12px_24px_rgba(0,0,0,0.35)]",icon:V.jsx(Eg,{className:"h-5 w-5"})},Google:{label:"Sign in with Google",className:"bg-white text-[#3C4043] border border-[#E0E0E0] hover:bg-white/90 hover:border-[#CACACA] focus-visible:ring-offset-white shadow-[0_12px_24px_rgba(32,33,36,0.18)]",icon:V.jsx(Sg,{className:"h-5 w-5"})}},{label:s,className:i,icon:o}=r[e];return V.jsxs("button",{type:"button",onClick:t,disabled:n,"aria-label":s,"aria-disabled":n,className:Un("w-full h-12 sm:h-14 rounded-2xl font-semibold flex items-center justify-center gap-3 transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-warm-peach focus-visible:ring-offset-2","active:translate-y-px disabled:cursor-not-allowed disabled:opacity-70",i),children:[V.jsx("span",{className:"flex items-center justify-center","aria-hidden":!0,children:o}),V.jsx("span",{children:s})]})}function jg(){return V.jsxs("div",{className:"flex items-center gap-3 text-white/60 text-xs uppercase tracking-[0.3em]",children:[V.jsx("span",{className:"h-px flex-1 bg-white/20","aria-hidden":!0}),V.jsx("span",{children:"or"}),V.jsx("span",{className:"h-px flex-1 bg-white/20","aria-hidden":!0})]})}function Cg({onNavigateToSignUp:e,onNavigateToSignIn:t,onAuthSuccess:r,bottomBar:s}){const[i,o]=n.useState(null),a=async e=>{if(!i)try{o(e),await ze.signInWithOAuth(e)}catch(t){o(null);const e=t instanceof Error?t.message:"We couldn't start the sign-in flow. Please try again.";rt.error(e)}};return n.useEffect(()=>{const e=e=>{const t=e.detail;o(null),(null==t?void 0:t.token)&&t.refreshToken?(r(t.token,t.refreshToken),t.provider?rt.success(`Signed in with ${t.provider}`):rt.success("Welcome back!")):rt.error("We couldn't complete the sign-in. Please try again.")};return window.addEventListener("auth-success",e),()=>{window.removeEventListener("auth-success",e)}},[r]),V.jsx(Rt,{padHeader:!1,padBottomBar:!1,disableSafeArea:!0,backgroundImageSrc:"/Workout/Images/LandingPage.png",backgroundOverlayClassName:"bg-black/60",scrollAreaClassName:"flex flex-col",contentClassName:"flex-1 flex flex-col",bottomBar:s,maxContent:"responsive",children:V.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6 py-12 text-white",children:V.jsxs("div",{className:"w-full max-w-md flex flex-col items-center gap-10 sm:gap-12 text-center",children:[V.jsxs(rr,{align:"center",gap:"md",className:"text-balance",children:[V.jsx("div",{className:"w-16 h-16 rounded-2xl gradient-primary flex items-center justify-center shadow-glow",children:V.jsx(m,{className:"h-9 w-9 text-black","aria-hidden":!0})}),V.jsxs(rr,{align:"center",gap:"sm",className:"text-white",children:[V.jsx("h1",{className:"text-3xl sm:text-4xl font-semibold tracking-tight leading-tight",children:"Start your personalized workout plan."}),V.jsx("p",{className:"text-base sm:text-lg text-white/80",children:"Sign in to sync your workouts across devices and stay motivated every day."})]})]}),V.jsxs("div",{className:"w-full flex flex-col gap-4",children:[V.jsx(_g,{variant:"Apple",onClick:()=>a("Apple"),disabled:null!==i}),V.jsx(_g,{variant:"Google",onClick:()=>a("Google"),disabled:null!==i}),V.jsx(jg,{}),V.jsx(hr,{type:"button",className:"w-full rounded-2xl border-0 font-semibold text-black",onClick:e,children:"Continue with email"}),V.jsxs("button",{type:"button",onClick:t,className:"text-sm text-white/80 hover:text-white transition-colors",children:["Already have an account? ",V.jsx("span",{className:"font-semibold text-white",children:"Sign in"})]})]}),V.jsxs("p",{className:"text-xs text-white/70 leading-relaxed",children:["By continuing, you agree to our"," ",V.jsx("a",{href:"/terms",className:"font-medium text-white hover:underline",children:"Terms"})," ","and"," ",V.jsx("a",{href:"/privacy",className:"font-medium text-white hover:underline",children:"Privacy Policy"}),"."]})]})})})}function Ng(e){switch(e){case"left":return{x:"-100%"};case"right":return{x:"100%"};case"up":return{y:"-100%"};case"down":return{y:"100%"};case"center":return{x:0,y:0};default:return{x:0}}}function Tg({show:e,enterFrom:t="right",exitTo:n=t,duration:r=.3,children:s}){return V.jsx(La,{mode:"wait",children:e&&V.jsx($u.div,{initial:Ng(t),animate:{x:0,y:0},exit:Ng(n),transition:{type:"tween",ease:"easeInOut",duration:r},style:{position:"absolute",inset:0},children:s},"slide")})}function Ag({currentView:e,currentRoutineId:t,currentRoutineName:n,routineAccess:r,exerciseSetupMode:s,setExerciseSetupMode:i,selectedExercisesForSetup:o,setSelectedExercisesForSetup:a,isAuthenticated:l,onAuthSuccess:c,onNavigateToSignUp:d,onNavigateToSignIn:u,onNavigateToWelcome:h,onCreateRoutine:m,onEditMeasurements:p,onRoutineCreated:f,onCloseCreateRoutine:g,onCloseEditMeasurements:x,onCompleteRoutineCreation:y,onExerciseSelected:v,onCloseExerciseSetup:b,onCloseAddExercises:w,onExerciseSetupComplete:k,onSelectRoutine:E,onCloseExerciseSetupToRoutines:S,bottomBar:_,onOverlayChange:j,onNavigateToMyAccount:C,onCloseMyAccount:N,onNavigateToDeviceSettings:T,onCloseDeviceSettings:A}){return te(`ğŸ” [DBG] CURRENT SCREEN: ${e.toUpperCase()}`),l&&"signin"!==e&&"signup"!==e&&"welcome"!==e?V.jsxs("div",{className:"min-h-[100dvh] bg-gradient-to-br from-[var(--soft-gray)] via-[var(--background)] to-[var(--warm-cream)]/30",children:["workouts"===e&&V.jsx(kr,{onCreateRoutine:m,onEditMeasurements:p,onSelectRoutine:E,onOverlayChange:j,bottomBar:_}),V.jsx(Tg,{show:"create-routine"===e,enterFrom:"down",exitTo:"down",children:V.jsx(Sr,{onBack:g,onRoutineCreated:f})}),V.jsx(Tg,{show:"edit-measurements"===e,enterFrom:"down",exitTo:"down",children:V.jsx(Lh,{onBack:x})}),V.jsx(Tg,{show:"add-exercises-to-routine"===e&&!!n,enterFrom:"center",exitTo:"center",children:V.jsx(Rr,{routineId:t||void 0,routineName:n,onBack:t?w:g,onExerciseSelected:e=>v(e),isFromExerciseSetup:!!t})}),V.jsx(Tg,{show:"exercise-setup"===e&&null!==t&&!!n,enterFrom:"left",exitTo:"left",children:V.jsx(Mh,{routineId:t,routineName:n,selectedExercisesForSetup:o,setSelectedExercisesForSetup:a,onBack:S,onSave:k,onAddMoreExercises:b,isEditingExistingRoutine:!0,onShowExerciseSelector:b,access:r,initialMode:s,onModeChange:i})}),"progress"===e&&V.jsx(Jp,{bottomBar:_,onSelectRoutine:E}),"profile"===e&&V.jsx(ng,{bottomBar:_,onNavigateToMyAccount:C,onNavigateToDeviceSettings:T}),V.jsx(Tg,{show:"profile-my-account"===e,enterFrom:"right",exitTo:"right",children:V.jsx(pg,{onBack:N})}),V.jsx(Tg,{show:"profile-device-settings"===e,enterFrom:"right",exitTo:"right",children:V.jsx(bg,{onBack:A})})]}):"signup"===e?V.jsx(kg,{onAuthSuccess:c,onNavigateToSignIn:u,onNavigateToWelcome:h,bottomBar:_}):"signin"===e?V.jsx(wg,{onAuthSuccess:c,onNavigateToSignUp:d,onNavigateToWelcome:h,bottomBar:_}):V.jsx(Cg,{onNavigateToSignUp:d,onNavigateToSignIn:u,onAuthSuccess:c,bottomBar:_})}function Rg(){const e=document.createElement("div");e.style.paddingBottom="env(safe-area-inset-bottom, 999px)",document.body.appendChild(e);const t="999px"!==window.getComputedStyle(e).paddingBottom;document.body.removeChild(e),document.documentElement.setAttribute("data-safe-area-supported",t.toString()),t||function(){const e=/iPhone/i.test(navigator.userAgent),t=!0===window.navigator.standalone,n=window.matchMedia("(display-mode: standalone)").matches;if(e&&(t||n)){let e="0px",t="0px";window.screen.height>=812&&(e="34px",t="44px"),document.documentElement.style.setProperty("--manual-safe-area-top",t),document.documentElement.style.setProperty("--manual-safe-area-bottom",e),document.documentElement.setAttribute("data-manual-safe-area","true")}}()}function Pg(){n.useEffect(()=>{!function(){let e=document.querySelector('meta[name="viewport"]');e||(e=document.createElement("meta"),e.setAttribute("name","viewport"),document.head.appendChild(e));const t="width=device-width, initial-scale=1.0, viewport-fit=cover";e.getAttribute("content")!==t&&e.setAttribute("content",t)}(),document.documentElement.style.setProperty("--safe-area-inset-top","env(safe-area-inset-top, 0px)"),document.documentElement.style.setProperty("--safe-area-inset-bottom","env(safe-area-inset-bottom, 0px)"),document.documentElement.style.setProperty("--safe-area-inset-left","env(safe-area-inset-left, 0px)"),document.documentElement.style.setProperty("--safe-area-inset-right","env(safe-area-inset-right, 0px)");const e=setTimeout(Rg,100);return()=>clearTimeout(e)},[])}const Mg=({...e})=>{const[t,r]=n.useState(()=>document.documentElement.classList.contains("dark")?"dark":"light");return n.useEffect(()=>{const e=()=>r(document.documentElement.classList.contains("dark")?"dark":"light");return window.addEventListener("themechange",e),()=>window.removeEventListener("themechange",e)},[]),V.jsx(ut,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function $g({className:e}){const[t,r]=n.useState(()=>"undefined"!=typeof window&&document.documentElement.classList.contains("dark"));return n.useEffect(()=>{const e=document.documentElement;t?e.classList.add("dark"):e.classList.remove("dark"),window.dispatchEvent(new CustomEvent("themechange",{detail:{isDark:t}}))},[t]),V.jsx("button",{"aria-label":"Toggle theme",onClick:()=>r(e=>!e),className:`p-2 rounded-md border transition-colors ${e??""}`,children:t?V.jsx(R,{className:"h-4 w-4"}):V.jsx(P,{className:"h-4 w-4"})})}const Dg=["welcome","signin","signup","create-routine","add-exercises-to-routine","exercise-setup","edit-measurements","profile-my-account","profile-device-settings"];class Ig extends n.Component{constructor(){super(...arguments),t(this,"state",{hasError:!1})}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){Z("[ErrorBoundary]",e,t)}render(){return this.state.hasError?this.props.fallback??V.jsx("div",{className:"p-4 text-black",children:"Something went wrong."}):this.props.children}}function Lg(){const{setUserToken:e}=mt();Pg();const{currentView:t,setCurrentView:r,activeTab:s,currentRoutineId:i,currentRoutineName:o,selectedExercisesForSetup:a,setSelectedExercisesForSetup:l,routineAccess:c,exerciseSetupMode:d,setExerciseSetupMode:u,handleAuthSuccess:h,navigateToSignUp:m,navigateToSignIn:p,navigateToWelcome:f,handleTabChange:g,showCreateRoutine:x,showEditMeasurements:y,handleRoutineCreated:v,closeCreateRoutine:b,closeEditMeasurements:w,completeRoutineCreation:k,handleExercisesSelected:E,closeExerciseSetup:S,closeAddExercises:_,handleExerciseSetupComplete:j,onRoutineSelection:C,closeExerciseSetupToRoutines:N,showProfileAccount:T,closeProfileAccount:A,showProfileDeviceSettings:R,closeProfileDeviceSettings:P}=function(){const[e,t]=n.useState("workouts"),[r,s]=n.useState("workouts"),[i,o]=n.useState(null),[a,l]=n.useState(""),[c,d]=n.useState(0),[u,h]=n.useState([]),[m,p]=n.useState("editable"),[f,g]=n.useState("plan"),x=e=>"UNAUTHORIZED"===e.message&&(rt.error("Session expired. Please sign in."),t("welcome"),!0);return{currentView:e,setCurrentView:t,activeTab:r,currentRoutineId:i,currentRoutineName:a,refreshTrigger:c,selectedExercisesForSetup:u,setSelectedExercisesForSetup:h,routineAccess:m,setRoutineAccess:p,exerciseSetupMode:f,setExerciseSetupMode:g,handleAuthSuccess:(e,n,r)=>{r(e,n),t("workouts"),s("workouts")},navigateToSignUp:()=>t("signup"),navigateToSignIn:()=>t("signin"),navigateToWelcome:()=>t("welcome"),handleTabChange:e=>{switch(s(e),e){case"workouts":t("workouts");break;case"progress":t("progress");break;case"profile":t("profile")}},showCreateRoutine:()=>t("create-routine"),showEditMeasurements:()=>t("edit-measurements"),handleRoutineCreated:(e,n)=>{l(e),n&&o(n),h([]),p("editable"),g("plan"),t("exercise-setup")},closeCreateRoutine:()=>t("workouts"),closeEditMeasurements:()=>t("workouts"),completeRoutineCreation:()=>{o(null),l(""),h([]),g("plan"),t("workouts"),d(e=>e+1)},handleExercisesSelected:e=>{h(e),t("exercise-setup")},closeExerciseSetup:()=>{t("add-exercises-to-routine")},closeAddExercises:()=>{t("exercise-setup")},handleExerciseSetupComplete:()=>{},onRoutineSelection:(e,n,r)=>{o(e),l(n),h([]),p(r||"editable"),g("plan"),t("exercise-setup")},closeExerciseSetupToRoutines:()=>{o(null),l(""),h([]),g("plan"),t("workouts")},handleUnauthorizedError:x,safeNavigate:async(e,n)=>{try{await e()}catch(r){Z("Navigation action failed:",r),r instanceof Error&&!x(r)&&(rt.error("Something went wrong. Please try again."),n&&t(n))}},showProfileAccount:()=>{s("profile"),t("profile-my-account")},closeProfileAccount:()=>{s("profile"),t("profile")},showProfileDeviceSettings:()=>{s("profile"),t("profile-device-settings")},closeProfileDeviceSettings:()=>{s("profile"),t("profile")}}}(),{isAuthenticated:M,authReady:$}=function({currentView:e,setCurrentView:t}){const{isAuthenticated:r,userToken:s,signOut:i}=mt(),[o,a]=n.useState(!1);return n.useEffect(()=>{ze.setToken(s)},[s]),n.useEffect(()=>{let e=!1;return(async()=>{try{await Promise.resolve()}finally{e||a(!0)}})(),()=>{e=!0}},[]),n.useEffect(()=>{o&&(r?"signin"!==e&&"signup"!==e&&"welcome"!==e||t("workouts"):"signin"!==e&&"signup"!==e&&"welcome"!==e&&t("welcome"))},[o,r,e,t]),n.useEffect(()=>{const e=e=>{"UNAUTHORIZED"===e.message&&(rt.error("Session expired. Please sign in."),i())},t=t=>{t.reason instanceof Error&&e(t.reason)};window.addEventListener("unhandledrejection",t);const n=window.fetch;return window.fetch=async(...t)=>{const r=await n(...t);if((401===r.status||403===r.status)&&s){const n=String(t[0]);(n.includes("/rest/v1/")||n.includes("/auth/v1/")||n.includes("/api/"))&&e(new Error("UNAUTHORIZED"))}return r},()=>{window.removeEventListener("unhandledrejection",t),window.fetch=n}},[i,s]),{isAuthenticated:r,authReady:o}}({currentView:t,setCurrentView:r}),D=!Dg.includes(t),[I,L]=n.useState(!1),B=Tt(),O=M&&D&&!I&&!B?V.jsx(jr,{activeTab:s,onTabChange:g}):null;return $?V.jsxs("div",{id:"app",className:"relative h-dvh flex flex-col overflow-hidden",children:[V.jsx($g,{className:"absolute top-2 right-2"}),V.jsx("main",{className:"flex-1 min-h-0 overflow-hidden",children:V.jsx(Ag,{currentView:t,currentRoutineId:i,currentRoutineName:o,routineAccess:c,selectedExercisesForSetup:a,setSelectedExercisesForSetup:l,isAuthenticated:M,onAuthSuccess:(t,n)=>h(t,n,e),onNavigateToSignUp:m,onNavigateToSignIn:p,onNavigateToWelcome:f,onCreateRoutine:x,onEditMeasurements:y,onRoutineCreated:v,onCloseCreateRoutine:b,onCloseEditMeasurements:w,onCompleteRoutineCreation:k,onExerciseSelected:E,onCloseExerciseSetup:S,onCloseAddExercises:_,onExerciseSetupComplete:j,exerciseSetupMode:d,setExerciseSetupMode:u,onSelectRoutine:C,onCloseExerciseSetupToRoutines:N,bottomBar:O,onOverlayChange:L,onNavigateToMyAccount:T,onCloseMyAccount:A,onNavigateToDeviceSettings:R,onCloseDeviceSettings:P})})]}):V.jsx("div",{className:"h-dvh grid place-items-center",children:V.jsx("div",{className:"w-5 h-5 animate-spin border-2 border-current border-t-transparent rounded-full"})})}function Bg(){return V.jsxs(V.Fragment,{children:[V.jsx(Ig,{children:V.jsx(Lg,{})}),V.jsx(Mg,{})]})}function Og(){return V.jsx(gt,{children:V.jsx(yt,{children:V.jsx(Bg,{})})})}"undefined"!=typeof localStorage&&null===localStorage.getItem("USE_HARD_DELETE")&&localStorage.setItem("USE_HARD_DELETE","true"),H.createRoot(document.getElementById("root")).render(V.jsx(s.StrictMode,{children:V.jsx(Og,{})}));export{qu as W,Ce as _,Gu as r};
