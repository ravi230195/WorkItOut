const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-qRs1Wg-z.js","assets/vendor-w47DzTbS.js","assets/ui-vUMRdZCx.js","assets/index-BZG64wap.js","assets/index-De-4xZM4.js","assets/index-D3AEEMsG.js","assets/web-Bo_uWEz9.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,s)=>((t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s)(t,"symbol"!=typeof n?n+"":n,s);import{r as n,a as s,R as r,b as i}from"./vendor-w47DzTbS.js";import{A as o,P as a,E as l,C as c,a as d,b as u,T as h,D as m,R as p,U as f,S as g,X as x,c as v,M as y,F as b,d as w,e as k,f as E,g as S,h as C,i as N,j as _,B as j,k as A,L as T,l as R,I as P,m as M,n as D,o as $,p as I,q as O,r as L,s as B}from"./ui-vUMRdZCx.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var F={exports:{}},U={},H=n,V=Symbol.for("react.element"),W=Symbol.for("react.fragment"),z=Object.prototype.hasOwnProperty,G=H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q={key:!0,ref:!0,__self:!0,__source:!0};function K(e,t,n){var s,r={},i=null,o=null;for(s in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(o=t.ref),t)z.call(t,s)&&!q.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===r[s]&&(r[s]=t[s]);return{$$typeof:V,type:e,key:i,ref:o,props:r,_owner:G.current}}U.Fragment=W,U.jsx=K,U.jsxs=K,F.exports=U;var Y=F.exports,J={},X=s;J.createRoot=X.createRoot,J.hydrateRoot=X.hydrateRoot;var Z={};const Q={ERROR:0,WARN:1,DB:2,PERF:3,INFO:4,DEBUG:5},ee={level:"debug"},te=()=>{const e=localStorage.getItem("LOG_LEVEL");if(e&&void 0!==Q[e])return e;if("undefined"!=typeof process&&(null==Z?void 0:Z.LOG_LEVEL)){const e=String(Z.LOG_LEVEL).toUpperCase();if(void 0!==Q[e])return e}return ee.level};Math.max(...Object.values({ERROR:"error",WARN:"warn",INFO:"info",DEBUG:"debug",DB:"db",PERF:"perf",LOG:"log"}).map(e=>e.length));const ne=[],se=e=>{const t=[];return t.push((()=>{const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`})()),t.join(" ")},re=(e,t,n,s)=>{if(!(e=>{const t=te();return Q[e]<=Q[t]})("LOG"===e?"DEBUG":e))return;t(`${se()} ${n}`,...s),((e,t,n)=>{const s={level:e,ts:new Date,message:t,args:n};for(const r of ne)try{r(s)}catch{}})(e,n,s)},ie=(e,...t)=>re("ERROR",console.error,e,t),oe=(e,...t)=>re("WARN",console.warn,e,t),ae=(e,...t)=>re("INFO",console.info,e,t),le=(e,...t)=>re("DEBUG",console.debug,e,t),ce=(e,...t)=>re("DB",console.info,e,t),de=(e,...t)=>re("PERF",console.info,e,t);const ue=new class{constructor(e="appcache",t=!1){this.prefix=e,this.debug=t}setDebug(e){this.debug=e}prefixedKey(e){return`${this.prefix}:${e}`}get(e,t){try{const n=this.prefixedKey(e),s=localStorage.getItem(n);if(!s)return ce("ğŸ” [CACHE GET] [miss]",n),null;const r=JSON.parse(s),i=Date.now()-r.storedAtMs;return i>t?(ce("ğŸ” [CACHE GET] [stale]",n,{ageMs:i,maxAgeMs:t}),null):(ce("ğŸ” [CACHE GET] [hit]",n,{ageMs:i,maxAgeMs:t}),r.value)}catch{return ce("ğŸ” [CACHE GET] [error parsing]",e),null}}set(e,t,n){try{const s=this.prefixedKey(e),r={storedAtMs:Date.now(),value:t,hintTtlMs:n},i=JSON.stringify(r);localStorage.setItem(s,i),ce("ğŸ” [CACHE SET]",s,{bytes:i.length,hasTTL:!!n})}catch{ce("ğŸ” [CACHE SET] [failed]",e)}}remove(e){const t=this.prefixedKey(e);try{localStorage.removeItem(t),ce("ğŸ” [CACHE REMOVE]",t)}catch{ce("ğŸ” [CACHE REMOVE] [failed]",t)}}snapshot(e=!1){const t={},n=`${this.prefix}:`;try{for(let s=0;s<localStorage.length;s++){const r=localStorage.key(s)??"";if(!r.startsWith(n))continue;const i=localStorage.getItem(r)??"";try{const{storedAtMs:n,hintTtlMs:s,value:o}=JSON.parse(i);t[r]={storedAtMs:n,hintTtlMs:s,ageMs:"number"==typeof n?Date.now()-n:void 0,bytes:i.length,...e?{value:o}:{}}}catch{t[r]={parseError:!0,bytes:i.length}}}}catch{}return t}peek(e,t=400){const n=this.prefixedKey(e),s=localStorage.getItem(n);if(!s)return ce("ğŸ” [CACHE PEEK] [miss]",n),null;try{const{value:e}=JSON.parse(s),r=JSON.stringify(e),i=r.length>t?r.slice(0,t)+"â€¦(truncated)":r;return ce("ğŸ” [CACHE PEEK]",n,i),e}catch{const e=s.length>t?s.slice(0,t)+"â€¦(truncated)":s;return ce("ğŸ” [CACHE PEEK RAW]",n,e),s}}logChunks(e,t,n=8e3){let s;try{s="string"==typeof t?t:JSON.stringify(t)}catch{s=String(t)}for(let r=0;r<s.length;r+=n){const t=Math.min(r+n,s.length);ce(`    [${e}] [${r}-${t}/${s.length}]`,s.slice(r,t))}}debugDumpValuesChunked(e=8e3){const t=this.snapshot(!0);for(const[n,s]of Object.entries(t)){const t=s.value;ce("ğŸ” [CACHE ENTRY]",n,{storedAtMs:s.storedAtMs,ageMs:s.ageMs,bytes:s.bytes}),this.logChunks("ğŸ“¦ value",t,e)}}debugDump(e=!1){const t=this.snapshot(e),n=Object.keys(t);ce("ğŸ” [CACHE SNAPSHOT]",{prefix:this.prefix,count:n.length,entries:t})}clearPrefix(e){try{const t=e?`${this.prefix}:${e}`:`${this.prefix}:`;let n=0;for(let e=localStorage.length-1;e>=0;e--){const s=localStorage.key(e)??"";s.startsWith(t)&&(localStorage.removeItem(s),n++)}ce("ğŸ” [CACHE CLEAR_PREFIX]",t,{removed:n})}catch{ce("ğŸ” [CACHE CLEAR_PREFIX] [failed]",e??"")}}}("workit",!0),he=e=>`supabase:${e}:routines`,me=(e,t)=>`supabase:${e}:routine:${t}:exercises`,pe=(e,t)=>`supabase:${e}:routine:${t}:exercises+details`,fe=(e,t)=>`supabase:${e}:rtex:${t}:sets`,ge=e=>`supabase:${e}:profile`,xe=e=>`supabase:${e}:steps`,ve=e=>`supabase:${e}:bodyMeasurements`,ye="https://lledulwstlcejiholstu.supabase.co",be=864e5,we=864e5,ke=864e5,Ee=36e5,Se=36e5,Ce=36e5,Ne=36e5,_e=36e5,je=36e5,Ae=36e5;var Te=(e=>(e.CACHE_HIT="CACHE_HIT",e.FRESH_FETCH="FRESH_FETCH",e))(Te||{});class Re{constructor(){t(this,"userToken",null),t(this,"cachedUser",null),t(this,"keyExercisesPage",(e,t)=>((e,t)=>`supabase:exercises:${e}:${t}`)(e,t)),t(this,"keyExercisesMuscleGroup",(e,t,n)=>((e,t,n)=>`supabase:exercises:muscle_group:${e}:${t}:${n}`)(e,t,n)),t(this,"keyExerciseMuscleGroups",()=>"supabase:exercises:muscle_groups"),t(this,"keyExercise",e=>`supabase:exercise:${e}`),t(this,"keyUserRoutines",e=>he(e)),t(this,"keyRoutineExercises",(e,t)=>me(e,t)),t(this,"keyRoutineExercisesWithDetails",(e,t)=>pe(e,t)),t(this,"keyRoutineSets",(e,t)=>fe(e,t)),t(this,"keyProfile",e=>ge(e)),t(this,"keySteps",e=>xe(e)),t(this,"keyBodyMeasurements",e=>ve(e))}setToken(e){const t=this.userToken,n=null!==t,s=null!==e;e!==t&&(this.cachedUser=null),this.userToken=e,s!==n&&(ce(s?"ğŸ” [DBG] Token set - Clearing cache for fresh user session":"ğŸ” [DBG] Token cleared - Clearing cache on sign out"),ue.clearPrefix())}getHeaders(e=!1,t=!1,n="return=representation"){const s={apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxsZWR1bHdzdGxjZWppaG9sc3R1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NzYyNjQsImV4cCI6MjA3MDQ1MjI2NH0.c8-ZOMk76dUOhWiekUks04KFAn52F3_OOvNM28ZmjdU","Content-Type":"application/json"};return e&&this.userToken&&(s.Authorization=`Bearer ${this.userToken}`),t&&(s.Prefer=n),s}async fetchJson(e,t=!0,n="GET",s,r){const i=await fetch(e,{method:n,headers:this.getHeaders(t,!!r,r??"return=representation"),body:s?JSON.stringify(s):void 0}),o=204===i.status?"":await i.text();if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}${o?` â€” ${o}`:""}`);if(o)try{return JSON.parse(o)}catch{return o}}async getOrFetchAndCache(e,t,n,s=!0,r){const i=ue.get(t,n);if(null!=i){if(ce("ğŸ” [CACHE ACCESS] Cache hit",t," TTL:",n,"ms"),r){const e=r(i);return ce("ğŸ” [CACHE ACCESS] Post-filter applied to cache hit - Original:",i.length,"Filtered:",e.length),{data:e,status:"CACHE_HIT"}}return{data:i,status:"CACHE_HIT"}}ce("ğŸ” [CACHE ACCESS] Cache miss - fetching from:",e);const o=await this.fetchJson(e,s);if(r){const e=r(o);return ce("ğŸ” [CACHE ACCESS] Post-filter applied to fresh data - Original:",o.length,"Filtered:",e.length),ue.set(t,e,n),{data:e,status:"FRESH_FETCH"}}return ue.set(t,o,n),{data:o,status:"FRESH_FETCH"}}async getCurrentUser(){var e;if(this.cachedUser)return this.cachedUser;const t=await fetch(`${ye}/auth/v1/user`,{headers:this.getHeaders(!0)});if(!t.ok)throw new Error(`Failed to get current user: ${t.statusText}`);const n=await t.json(),s=(n&&"object"==typeof n&&"object"==typeof n.user_metadata&&null!==n.user_metadata?n.user_metadata:void 0)??(Array.isArray(null==n?void 0:n.identities)?null==(e=n.identities.find(e=>e&&"object"==typeof e.identity_data))?void 0:e.identity_data:void 0),r=s&&"object"==typeof s?s:void 0;return this.cachedUser={id:n.id,email:"string"==typeof n.email?n.email:null,user_metadata:r},this.cachedUser}async getUserId(){return(await this.getCurrentUser()).id}async refreshRoutines(e){try{const t=(new Error).stack;ce("ğŸ” [CACHE REFRESH TRIGGER] refreshRoutines called by:",t),ce("ğŸ” [CACHE REFRESH TRIGGER] User ID:",e);const n=`${ye}/rest/v1/user_routines?user_id=eq.${encodeURIComponent(e)}&is_active=is.true&select=*`,s=he(e);ce("ğŸ” [CACHE REFRESH TRIGGER] Cache key:",s),ce("ğŸ” [CACHE REFRESH TRIGGER] URL:",n);const r=await this.fetchJson(n,!0);ue.set(s,r),ce("ğŸ” [CACHE REFRESH] routines",s),ce("ğŸ” [CACHE REFRESH COMPLETE] Routines refreshed, count:",r.length)}catch(t){ce("ğŸ” [CACHE REFRESH routines] skipped due to error:",t),ce("ğŸ” [CACHE REFRESH ERROR] Stack trace:",(new Error).stack)}}async refreshRoutineExercises(e,t){const n=(new Error).stack;ce("ğŸ” [CACHE REFRESH TRIGGER] refreshRoutineExercises called by:",n),ce("ğŸ” [CACHE REFRESH TRIGGER] User ID:",e,"Routine ID:",t);const s=`${ye}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${t}&is_active=is.true&select=*`,r=me(e,t);ce("ğŸ” [CACHE REFRESH TRIGGER] Cache key:",r),ce("ğŸ” [CACHE REFRESH TRIGGER] URL:",s);const i=await this.fetchJson(s,!0);ue.set(r,i),ce("ğŸ” [CACHE REFRESH] routine exercises",r),ce("ğŸ” [CACHE REFRESH COMPLETE] Routine exercises refreshed, count:",i.length)}async refreshRoutineExercisesWithDetails(e,t){const n=(new Error).stack;ce("ğŸ” [CACHE REFRESH TRIGGER] refreshRoutineExercisesWithDetails called by:",n),ce("ğŸ” [CACHE REFRESH TRIGGER] User ID:",e,"Routine ID:",t);const s=`${ye}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${t}&is_active=is.true&select=*,exercises(name,category)`,r=pe(e,t);ce("ğŸ” [CACHE REFRESH TRIGGER] Cache key:",r),ce("ğŸ” [CACHE REFRESH TRIGGER] URL:",s);const i=(await this.fetchJson(s,!0)).map(e=>{var t,n;return{...e,exercise_name:(null==(t=e.exercises)?void 0:t.name)||"Unknown Exercise",category:(null==(n=e.exercises)?void 0:n.category)||"Unknown"}});ue.set(r,i),ce("ğŸ” [CACHE REFRESH] routine exercises+details",r),ce("ğŸ” [CACHE REFRESH COMPLETE] Routine exercises+details refreshed, count:",i.length)}async refreshRoutineSets(e,t){const n=(new Error).stack;ce("ğŸ” [CACHE REFRESH TRIGGER] refreshRoutineSets called by:",n),ce("ğŸ” [CACHE REFRESH TRIGGER] User ID:",e,"Routine Exercise ID:",t);const s=`${ye}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_id=eq.${t}&is_active=eq.true&order=set_order`,r=fe(e,t);ce("ğŸ” [CACHE REFRESH TRIGGER] Cache key:",r),ce("ğŸ” [CACHE REFRESH TRIGGER] URL:",s);const i=await this.fetchJson(s,!0);ue.set(r,i),ce("ğŸ” [CACHE REFRESH] routine sets",r),ce("ğŸ” [CACHE REFRESH COMPLETE] Routine sets refreshed, count:",i.length)}async refreshProfile(e){const t=(new Error).stack;ce("ğŸ” [CACHE REFRESH TRIGGER] refreshProfile called by:",t),ce("ğŸ” [CACHE REFRESH TRIGGER] User ID:",e);const n=`${ye}/rest/v1/profiles?user_id=eq.${e}&select=*`,s=ge(e);ce("ğŸ” [CACHE REFRESH TRIGGER] Cache key:",s),ce("ğŸ” [CACHE REFRESH TRIGGER] URL:",n);const r=await this.fetchJson(n,!0);ue.set(s,r),ce("ğŸ” [CACHE REFRESH] profile",s),ce("ğŸ” [CACHE REFRESH COMPLETE] Profile refreshed, count:",r.length)}async refreshSteps(e){const t=(new Error).stack;ce("ğŸ” [CACHE REFRESH TRIGGER] refreshSteps called by:",t),ce("ğŸ” [CACHE REFRESH TRIGGER] User ID:",e);const n=`${ye}/rest/v1/user_steps?user_id=eq.${e}&select=goal`,s=xe(e);ce("ğŸ” [CACHE REFRESH TRIGGER] Cache key:",s),ce("ğŸ” [CACHE REFRESH TRIGGER] URL:",n);const r=await this.fetchJson(n,!0);ue.set(s,r),ce("ğŸ” [CACHE REFRESH] steps",s),ce("ğŸ” [CACHE REFRESH COMPLETE] Steps refreshed, count:",r.length)}async refreshBodyMeasurements(e){const t=(new Error).stack;ce("ğŸ” [CACHE REFRESH TRIGGER] refreshBodyMeasurements called by:",t),ce("ğŸ” [CACHE REFRESH TRIGGER] User ID:",e);const n=`${ye}/rest/v1/user_body_measurements?user_id=eq.${e}&select=*&order=measured_on.desc`,s=ve(e);ce("ğŸ” [CACHE REFRESH TRIGGER] Cache key:",s),ce("ğŸ” [CACHE REFRESH TRIGGER] URL:",n);const r=await this.fetchJson(n,!0);ue.set(s,r),ce("ğŸ” [CACHE REFRESH] body measurements",s),ce("ğŸ” [CACHE REFRESH COMPLETE] Body measurements refreshed, count:",r.length)}}const Pe="58b39a78-0284-445f-8c88-4fed2944c8be";const Me={},De=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));s=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in Me)return;Me[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,n&&r.setAttribute("nonce",n),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};class $e{constructor(e){t(this,"startTime"),t(this,"label"),this.label=e,this.startTime=performance.now()}end(){const e=performance.now(),t=e-this.startTime;return{label:this.label,duration:t,startTime:this.startTime,endTime:e}}endWithLog(){const e=this.end();return de(`â±ï¸ [TIMER] ${this.label}: ${e.duration.toFixed(0)}ms`),e}getElapsed(){return performance.now()-this.startTime}}const Ie={start:e=>new $e(e),timeSync:(e,t)=>{const n=Ie.start(e);try{const e=t();return n.endWithLog(),e}catch(s){throw n.endWithLog(),s}},timeAsync:async(e,t)=>{const n=Ie.start(e);try{const e=await t();return n.endWithLog(),e}catch(s){throw n.endWithLog(),s}},timeBatch:async(e,t)=>{const n=Ie.start(e),s=[],r=[];for(const{name:c,operation:d}of t){const t=Ie.start(`${e} - ${c}`);try{const e=await d(),n=t.end();s.push(e),r.push({name:c,duration:n.duration})}catch(l){throw t.endWithLog(),l}}const i=n.end().duration,o=i/t.length,a=`â±ï¸ [TIMER] ${e} - Total: ${i.toFixed(0)}ms, Avg: ${o.toFixed(0)}ms, Count: ${t.length}`;return de(a),s}};Ie.timeSync,Ie.timeAsync,Ie.timeBatch;const Oe={};var Le={};const Be=new Set(["apple","google"]),Fe={google:{queryParams:{access_type:"offline",prompt:"consent"}},apple:{queryParams:{scope:"name email",scopes:"name email"}}},Ue=new Set(["capacitor:","ionic:","ms-appx:","ms-appx-web:"]),He=new Set(["javascript:","vbscript:","data:"]),Ve=/^[a-z][a-z0-9+\-.]*:$/i,We=e=>{if("string"!=typeof e)return null;const t=e.trim();return t.length>0?t:null},ze=(e,t)=>{var n;try{const t=new URL(e),s=null==(n=t.protocol)?void 0:n.toLowerCase();if(!s||!Ve.test(s))throw new Error;if(He.has(s))throw new Error;return t.hash="",t.toString()}catch{throw new Error(`${t} must be an absolute URL that uses http(s) or a custom app scheme like myapp://auth. Update it before retrying.`)}},Ge=e=>{const t=We(e);if(t)return t;const n=(()=>{if(void 0!==import.meta){const e=We(null==Oe?void 0:Oe.VITE_SUPABASE_OAUTH_REDIRECT);if(e)return e}if("undefined"!=typeof process){const e=We(Le.VITE_SUPABASE_OAUTH_REDIRECT);if(e)return e}if("undefined"!=typeof globalThis){const e=We(globalThis.VITE_SUPABASE_OAUTH_REDIRECT);if(e)return e}return null})();if(n)return ze(n,"VITE_SUPABASE_OAUTH_REDIRECT");if("undefined"==typeof window)throw new Error("Supabase OAuth needs a browser context to determine redirect_to. Set VITE_SUPABASE_OAUTH_REDIRECT to a web URL that you've whitelisted under Authentication â†’ URL Configuration in Supabase.");const{protocol:s,origin:r,pathname:i,search:o}=window.location,a=(null==s?void 0:s.toLowerCase())??"",l=`${r}${i}${o}`;try{return ze(l,"window.location")}catch(c){if(Ue.has(a))throw new Error("Set VITE_SUPABASE_OAUTH_REDIRECT to your app's deep link (for example capacitor://localhost/auth/callback) and whitelist it under Supabase Authentication â†’ URL Configuration so native builds can complete the OAuth hand-off.");throw c instanceof Error?c:new Error(String(c))}};class qe extends Re{async signInWithOAuth(e,t){if("undefined"==typeof window)throw new Error("Social sign-in can only be initiated in a browser environment.");const n=e.toLowerCase();if(!Be.has(n))throw new Error(`Unsupported OAuth provider: ${e}`);const s=window.Capacitor,r=!!s&&"function"==typeof s.isNativePlatform&&s.isNativePlatform(),i="undefined"!=typeof navigator?navigator.userAgent:"",o=/iphone/i.test(i)&&/safari/i.test(i)&&!r,a=r||o,l=a?"workouttracker://auth/callback":Ge(t),c=new URLSearchParams({provider:n,redirect_to:l}),d=Fe[n];if(null==d?void 0:d.queryParams)for(const[m,p]of Object.entries(d.queryParams))"string"==typeof p&&p.length>0&&c.set(m,p);const u=`${ye}/auth/v1/authorize?${c.toString()}`;if(console.log("Platform check:",{hasCapacitor:!!window.Capacitor,isNativePlatform:r,isIOSSimulator:o,shouldUseMobileFlow:a,redirectUrl:l,queryParams:(null==d?void 0:d.queryParams)??null}),a)try{const{Browser:e}=await De(async()=>{const{Browser:e}=await import("./index-qRs1Wg-z.js");return{Browser:e}},__vite__mapDeps([0,1,2])),{App:t}=await De(async()=>{const{App:e}=await Promise.resolve().then(()=>lh);return{App:e}},void 0),n=await t.addListener("appUrlOpen",async t=>{if(console.log("Deep link received:",t.url),t.url.startsWith("workouttracker://auth/callback"))try{const r=new URL(t.url).hash.substring(1),i=new URLSearchParams(r),o=i.get("access_token"),a=i.get("refresh_token"),l=i.get("error");if(l)return void console.error("OAuth error:",l);if(o){console.log("OAuth success! Access token received"),this.setToken(o);try{await e.close()}catch(s){console.warn("Failed to close browser:",s)}window.dispatchEvent(new CustomEvent("auth-success",{detail:{token:o,refreshToken:a}})),n.remove()}}catch(s){console.error("Error parsing OAuth response:",s)}});await e.open({url:u})}catch(h){console.warn("Capacitor plugins not available, falling back to window.location:",h),window.location.assign(u)}else window.location.assign(u)}async exchangeCodeForSession(e){try{const t=await fetch(`${ye}/auth/v1/token?grant_type=pkce`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({code:e,code_verifier:"your-code-verifier"})});if(!t.ok)throw new Error("Failed to exchange code for session");const n=await t.json();n.access_token&&(this.setToken(n.access_token),window.dispatchEvent(new CustomEvent("auth-success",{detail:{provider:"Google",providerSlug:"google",token:n.access_token,refreshToken:n.refresh_token}})))}catch(t){throw console.error("Error exchanging code for session:",t),t}}async signUp(e,t){return Ie.timeAsync(`[SUPABASE] signUp(${e})`,async()=>{var n,s;const r=await this.fetchJson(`${ye}/auth/v1/signup`,!1,"POST",{email:e,password:t});if(r.error)throw new Error(r.error.message);return r.access_token||(null==(n=r.session)?void 0:n.access_token)?{token:r.access_token||r.session.access_token,refresh_token:r.refresh_token||(null==(s=r.session)?void 0:s.refresh_token)}:{needsSignIn:!0}})}async signIn(e,t){return Ie.timeAsync(`[SUPABASE] signIn(${e})`,async()=>{const n=await this.fetchJson(`${ye}/auth/v1/token?grant_type=password`,!1,"POST",{email:e,password:t});if(n.error)throw new Error(n.error.message);if(!n.access_token)throw new Error("No access token received");if(!n.refresh_token)throw new Error("No refresh token received");return{access_token:n.access_token,refresh_token:n.refresh_token}})}async refreshToken(e){return Ie.timeAsync("[SUPABASE] refreshToken",async()=>{const t=await this.fetchJson(`${ye}/auth/v1/token?grant_type=refresh_token`,!1,"POST",{refresh_token:e});if(t.error)throw new Error(t.error.message);if(!t.access_token)throw new Error("No access token received");return t.access_token})}async signOut(){return Ie.timeAsync("[SUPABASE] signOut",async()=>{try{this.userToken&&await this.fetchJson(`${ye}/auth/v1/logout`,!0,"POST")}catch(e){oe("Supabase logout failed, but continuing with local sign out:",e)}finally{this.setToken(null)}})}async createUserRoutine(e){return Ie.timeAsync(`[SUPABASE] createUserRoutine(${e})`,async()=>{const t=await this.getUserId(),n=await this.fetchJson(`${ye}/rest/v1/user_routines`,!0,"POST",{user_id:t,name:e.trim(),version:1,is_active:!0},"return=representation");return await this.refreshRoutines(t),n[0]??null})}async renameRoutine(e,t){return Ie.timeAsync(`[SUPABASE] renameRoutine(${e}, ${t})`,async()=>{const n=await this.getUserId();await this.fetchJson(`${ye}/rest/v1/user_routines?routine_template_id=eq.${e}`,!0,"PATCH",{name:t.trim()},"return=representation"),await this.refreshRoutines(n)})}async deleteRoutine(e){return Ie.timeAsync(`[SUPABASE] deleteRoutine(${e})`,async()=>{const t=await this.getUserId();await this.fetchJson(`${ye}/rest/v1/user_routines?routine_template_id=eq.${e}`,!0,"PATCH",{is_active:!1},"return=representation"),await this.refreshRoutines(t)})}async hardDeleteRoutine(e){return Ie.timeAsync(`[SUPABASE] hardDeleteRoutine(${e})`,async()=>{const t=await this.getUserId(),n=`${ye}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${e}&is_active=is.true&select=routine_template_exercise_id`,s=this.keyRoutineExercises(t,e);ce("ğŸ” [DELETE ROUTINE] Cache key:",s);const{data:r}=await this.getOrFetchAndCache(n,s,Se,!0);for(const{routine_template_exercise_id:e}of r)await this.hardDeleteRoutineExercise(e);await this.fetchJson(`${ye}/rest/v1/user_routines?routine_template_id=eq.${e}`,!0,"DELETE"),await Promise.all([this.refreshRoutines(t),this.refreshRoutineExercises(t,e),this.refreshRoutineExercisesWithDetails(t,e)])})}async addExerciseToRoutine(e,t,n){return Ie.timeAsync(`[SUPABASE] addExerciseToRoutine(${e}, ${t}, ${n})`,async()=>{const s=await this.getUserId(),r=await this.fetchJson(`${ye}/rest/v1/user_routine_exercises_data`,!0,"POST",{routine_template_id:e,exercise_id:t,exercise_order:n,is_active:!0},"return=representation");return await Promise.all([this.refreshRoutineExercises(s,e),this.refreshRoutineExercisesWithDetails(s,e)]),r[0]??null})}async addExerciseSetsToRoutine(e,t,n){return Ie.timeAsync(`[SUPABASE] addExerciseSetsToRoutine(${e}, ${t}, ${n.length} sets)`,async()=>{const s=await this.getUserId(),r=n.map((n,s)=>({routine_template_exercise_id:e,exercise_id:t,set_order:n.set_order??s+1,is_active:!0,planned_reps:n.reps>0?n.reps:null,planned_weight_kg:n.weight>0?n.weight:null})),i=await this.fetchJson(`${ye}/rest/v1/user_routine_exercises_set_data`,!0,"POST",r,"return=representation");return await this.refreshRoutineSets(s,e),i})}async findRoutineIdForExercise(e){var t;const n=`${ye}/rest/v1/user_routine_exercises_data?routine_template_exercise_id=eq.${e}&select=routine_template_id`,s=`rtex:${e}:routine`,{data:r}=await this.getOrFetchAndCache(n,s,Se,!0),i=null==(t=r[0])?void 0:t.routine_template_id;if(!i)throw new Error(`Could not find routine ID for exercise ${e}`);return i}async deleteRoutineExercise(e){return Ie.timeAsync(`[SUPABASE] deleteRoutineExercise(${e})`,async()=>{const t=await this.getUserId();await this.fetchJson(`${ye}/rest/v1/user_routine_exercises_data?routine_template_exercise_id=eq.${e}`,!0,"PATCH",{is_active:!1},"return=minimal"),await this.fetchJson(`${ye}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_id=eq.${e}`,!0,"PATCH",{is_active:!1},"return=minimal");const n=await this.findRoutineIdForExercise(e);await Promise.all([this.refreshRoutineExercises(t,n),this.refreshRoutineExercisesWithDetails(t,n)])})}async hardDeleteRoutineExercise(e){return Ie.timeAsync(`[SUPABASE] hardDeleteRoutineExercise(${e})`,async()=>{const t=await this.getUserId(),n=await this.findRoutineIdForExercise(e),s=`${ye}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_id=eq.${e}&is_active=is.true&select=routine_template_exercise_set_id`,r=this.keyRoutineSets(t,e),{data:i}=await this.getOrFetchAndCache(s,r,Ne,!0);for(const{routine_template_exercise_set_id:o}of i)await this.hardDeleteExerciseSet(o,e);await this.fetchJson(`${ye}/rest/v1/user_routine_exercises_data?routine_template_exercise_id=eq.${e}`,!0,"DELETE"),await Promise.all([this.refreshRoutineExercises(t,n),this.refreshRoutineExercisesWithDetails(t,n)])})}async startWorkout(e){return Ie.timeAsync(`[SUPABASE] startWorkout(${e})`,async()=>{const t=await this.getUserId();return(await this.fetchJson(`${ye}/rest/v1/workouts`,!0,"POST",{template_id:e,started_at:(new Date).toISOString(),user_id:t},"return=representation"))[0]})}async endWorkout(e){return Ie.timeAsync(`[SUPABASE] endWorkout(${e})`,async()=>{await this.fetchJson(`${ye}/rest/v1/workouts?id=eq.${e}`,!0,"PATCH",{ended_at:(new Date).toISOString()},"return=minimal")})}async addWorkoutExercise(e,t,n){return Ie.timeAsync(`[SUPABASE] addWorkoutExercise(${e}, ${t}, ${n})`,async()=>(await this.fetchJson(`${ye}/rest/v1/workout_exercises`,!0,"POST",{workout_id:e,exercise_id:t,order_index:n},"return=representation"))[0])}async addWorkoutSet(e,t,n,s,r){return Ie.timeAsync(`[SUPABASE] addWorkoutSet(${e}, ${t}, ${n}, ${s})`,async()=>(await this.fetchJson(`${ye}/rest/v1/sets`,!0,"POST",{workout_exercise_id:e,set_index:t,reps:n,weight:s,completed_at:r},"return=representation"))[0])}async updateWorkoutSet(e,t){return Ie.timeAsync(`[SUPABASE] updateWorkoutSet(${e})`,async()=>(await this.fetchJson(`${ye}/rest/v1/sets?id=eq.${e}`,!0,"PATCH",t,"return=representation"))[0])}async updateExerciseSet(e,t,n){return Ie.timeAsync(`[SUPABASE] updateExerciseSet(${e})`,async()=>{var s;const r=await this.getUserId(),i=null==(s=(await this.fetchJson(`${ye}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}&select=routine_template_exercise_id`,!0))[0])?void 0:s.routine_template_exercise_id,o=await this.fetchJson(`${ye}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}`,!0,"PATCH",{planned_reps:t&&t>0?t:null,planned_weight_kg:n&&n>0?n:null},"return=representation");return i&&await this.refreshRoutineSets(r,i),o[0]??null})}async updateExerciseSetOrder(e,t){return Ie.timeAsync(`[SUPABASE] updateExerciseSetOrder(${e}, ${t})`,async()=>{var n;const s=await this.getUserId(),r=null==(n=(await this.fetchJson(`${ye}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}&select=routine_template_exercise_id`,!0))[0])?void 0:n.routine_template_exercise_id;await this.fetchJson(`${ye}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}`,!0,"PATCH",{set_order:t},"return=minimal"),r&&await this.refreshRoutineSets(s,r)})}async deleteExerciseSet(e){return Ie.timeAsync(`[SUPABASE] deleteExerciseSet(${e})`,async()=>{var t;const n=await this.getUserId(),s=null==(t=(await this.fetchJson(`${ye}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}&select=routine_template_exercise_id`,!0))[0])?void 0:t.routine_template_exercise_id;await this.fetchJson(`${ye}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}`,!0,"PATCH",{is_active:!1},"return=minimal"),s&&await this.refreshRoutineSets(n,s)})}async hardDeleteExerciseSet(e,t){return Ie.timeAsync(`[SUPABASE] hardDeleteExerciseSet(${e})`,async()=>{var n;const s=await this.getUserId();let r=t;if(!r){const t=`${ye}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}&select=routine_template_exercise_id`,s=`rtexset:${e}:parent`,{data:i}=await this.getOrFetchAndCache(t,s,Ne,!0);r=null==(n=i[0])?void 0:n.routine_template_exercise_id}await this.fetchJson(`${ye}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}`,!0,"DELETE"),r&&await this.refreshRoutineSets(s,r)})}async upsertProfile({firstName:e,lastName:t,displayName:n,heightCm:s,weightKg:r,lengthUnit:i="cm",weightUnit:o="kg",gender:a="prefer_not_to_say",userId:l}){return Ie.timeAsync(`[SUPABASE] upsertProfile(${n})`,async()=>{const c=l??await this.getUserId(),d=await this.fetchJson(`${ye}/rest/v1/profiles`,!0,"POST",{user_id:c,first_name:e,last_name:t,display_name:n,height_cm:s,weight_kg:r,length_unit:i,weight_unit:o,gender:a},"resolution=merge-duplicates, return=representation");return await this.refreshProfile(c),d.length>0?d[0]:null})}async createUserStepGoal(e=1e4){return Ie.timeAsync(`[SUPABASE] createUserStepGoal(${e})`,async()=>{var t;const n=await this.getUserId(),s=await this.fetchJson(`${ye}/rest/v1/user_steps`,!0,"POST",{user_id:n,goal:e},"return=representation");return await this.refreshSteps(n),(null==(t=s[0])?void 0:t.goal)??e})}async upsertBodyMeasurement(e){return Ie.timeAsync(`[SUPABASE] upsertBodyMeasurement(${e.measured_on})`,async()=>{const t=await this.getUserId(),n=[{...e,user_id:t}],s=await this.fetchJson(`${ye}/rest/v1/user_body_measurements?on_conflict=user_id,measured_on`,!0,"POST",n,"resolution=merge-duplicates, return=representation");return await this.refreshBodyMeasurements(t),s[0]??null})}async deleteBodyMeasurement(e){return Ie.timeAsync(`[SUPABASE] deleteBodyMeasurement(${e})`,async()=>{const t=await this.getUserId();await this.fetchJson(`${ye}/rest/v1/user_body_measurements?user_id=eq.${t}&measured_on=eq.${e}`,!0,"DELETE"),await this.refreshBodyMeasurements(t)})}async recomputeAndSaveRoutineMuscleSummary(e){return Ie.timeAsync(`[SUPABASE] recomputeAndSaveRoutineMuscleSummary(${e})`,async()=>{ce("ğŸ” DGB [MUSCLE SUMMARY] Starting recompute for routine:",e);const t=`${ye}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${e}&is_active=eq.true&select=exercises(muscle_group)`;ce("ğŸ” DGB [MUSCLE SUMMARY] Fetching exercises from URL:",t);const n=await this.fetchJson(t,!0);if(ce("ğŸ” DGB [MUSCLE SUMMARY] Found exercises:",n.length),0===n.length)return ce("ğŸ” DGB [MUSCLE SUMMARY] No active exercises found, skipping recomputation"),void ce("ğŸ” DGB [MUSCLE SUMMARY] No database update or cache refresh needed");const s=new Map;n.forEach(e=>{var t;const n=((null==(t=e.exercises)?void 0:t.muscle_group)??"").trim();n&&s.set(n,(s.get(n)||0)+1)}),ce("ğŸ” DGB [MUSCLE SUMMARY] Muscle group counts:",Object.fromEntries(s));const r=Array.from(s.entries()).sort(([,e],[,t])=>t-e).slice(0,3).map(([e])=>e);ce("ğŸ” DGB [MUSCLE SUMMARY] Top 3 muscle groups:",r);const i=r.length?r.join(" â€¢ "):null;ce("ğŸ” DGB [MUSCLE SUMMARY] Final summary:",i);const o=`${ye}/rest/v1/user_routines?routine_template_id=eq.${e}`;ce("ğŸ” DGB [MUSCLE SUMMARY] Patching routine with URL:",o),await this.fetchJson(o,!0,"PATCH",[{muscle_group_summary:i}],"return=representation"),ce("ğŸ” DGB [MUSCLE SUMMARY] Refreshing routines cache...");const a=await this.getUserId();ce("ğŸ” DGB [MUSCLE SUMMARY] User ID for cache refresh:",a),await this.refreshRoutines(a),ce("ğŸ” DGB [MUSCLE SUMMARY] Cache refresh completed")})}async deleteProfile(e){const t=e??await this.getUserId();await this.fetchJson(`${ye}/rest/v1/profiles?user_id=eq.${t}`,!0,"DELETE"),await this.refreshProfile(t)}async logToDatabase(e,t,n=[]){return Ie.timeAsync(`[SUPABASE] logToDatabase(${e})`,async()=>{try{const s=await this.getUserId(),r={level:e,message:t,args:n.length>0?JSON.stringify(n):null,timestamp:(new Date).toISOString(),user_id:s},i=`${ye}/rest/v1/logger`;await this.fetchJson(i,!0,"POST",[r],"return=minimal")}catch(s){ie("Failed to log to database:",s)}})}}var Ke={};const Ye=()=>{if("undefined"!=typeof localStorage){const e=localStorage.getItem("USE_HARD_DELETE");if(null!==e)return"true"===e}if("undefined"!=typeof process&&(null==Ke?void 0:Ke.USE_HARD_DELETE)){const e=String(Ke.USE_HARD_DELETE).toLowerCase();return"true"===e||"1"===e}return!1};class Je extends qe{async deleteRoutine(e){return Ye()?this.hardDeleteRoutine(e):super.deleteRoutine(e)}async deleteRoutineExercise(e){return Ye()?this.hardDeleteRoutineExercise(e):super.deleteRoutineExercise(e)}async deleteExerciseSet(e){return Ye()?this.hardDeleteExerciseSet(e):super.deleteExerciseSet(e)}}var Xe;Xe=Je,[class extends Re{async getExercises(e={}){const{limit:t,offset:n,muscleGroup:s,search:r,other:i}=e;let o=`${ye}/rest/v1/exercises?select=exercise_id,name,muscle_group`;s?o+=`&muscle_group=eq.${encodeURIComponent(s)}`:i&&(o+="&or=(muscle_group.is.null,muscle_group.eq.)"),r&&(o+=`&name=ilike.*${encodeURIComponent(r)}*`),null!=t&&(o+=`&limit=${t}`),null!=n&&(o+=`&offset=${n}`);const a=t??0,l=n??0,c=s?this.keyExercisesMuscleGroup(s,a,l):i?this.keyExercisesMuscleGroup("other",a,l):this.keyExercisesPage(a,l),{data:d,status:u}=await this.getOrFetchAndCache(o,c,we,!0);return u===Te.FRESH_FETCH&&d.forEach(e=>{const t=this.keyExercise(e.exercise_id);ue.set(t,e,be)}),d}async getMuscleGroups(){const e=`${ye}/rest/v1/exercises?select=muscle_group&order=muscle_group`,{data:t}=await this.getOrFetchAndCache(e,this.keyExerciseMuscleGroups(),ke,!0),n=new Set;let s=!1;for(const i of t){const e=(i.muscle_group||"").trim();e?n.add(e):s=!0}const r=Array.from(n).sort((e,t)=>e.localeCompare(t));return s&&r.push("Other"),r}async getExercise(e){const t=`${ye}/rest/v1/exercises?exercise_id=eq.${e}&select=exercise_id,name,muscle_group&limit=1`,n=this.keyExercise(e),{data:s}=await this.getOrFetchAndCache(t,n,be,!0);return(Array.isArray(s)?s[0]:s)??null}async getUserRoutines(){const e=await this.getUserId(),t=`${ye}/rest/v1/user_routines?user_id=eq.${e}&is_active=eq.true&select=*&order=created_at.asc`,n=this.keyUserRoutines(e),{data:s}=await this.getOrFetchAndCache(t,n,Ee,!0,e=>e.filter(e=>!0===e.is_active));return s}async getSampleRoutines(){const e=`${ye}/rest/v1/user_routines?user_id=eq.${Pe}&is_active=eq.true&select=*&order=created_at.asc`,t=this.keyUserRoutines(Pe),{data:n}=await this.getOrFetchAndCache(e,t,Ee,!0);return n}async getUserRoutineExercises(e,t){const n=t??await this.getUserId(),s=`${ye}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${e}&is_active=is.true&select=*`,r=this.keyRoutineExercises(n,e),{data:i}=await this.getOrFetchAndCache(s,r,Se,!0,e=>e.filter(e=>!0===e.is_active));return i}async getUserRoutineExercisesWithDetails(e,t){const n=t??await this.getUserId(),s=`${ye}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${e}&select=*,exercises(name,category)`,r=this.keyRoutineExercisesWithDetails(n,e),{data:i}=await this.getOrFetchAndCache(s,r,Ce,!0,e=>e.filter(e=>!0===e.is_active));return i.map(e=>{var t,n,s;return{...e,exercise_name:(null==(t=e.exercises)?void 0:t.name)||"Unknown Exercise",category:(null==(n=e.exercises)?void 0:n.category)||"Unknown",muscle_group:(null==(s=e.exercises)?void 0:s.muscle_group)||"Unknown"}})}async getExerciseSetsForRoutine(e,t){const n=t??await this.getUserId(),s=`${ye}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_id=eq.${e}&is_active=eq.true&order=set_order`,r=this.keyRoutineSets(n,e),{data:i}=await this.getOrFetchAndCache(s,r,Ne,!0);return i}async getMyProfile(){const e=await this.getUserId(),t=`${ye}/rest/v1/profiles?user_id=eq.${e}&select=*`,n=this.keyProfile(e),{data:s}=await this.getOrFetchAndCache(t,n,_e,!0);return s[0]??null}async getBodyMeasurements(e=4){const t=await this.getUserId(),n=`${ye}/rest/v1/user_body_measurements?user_id=eq.${t}&select=*&order=measured_on.desc&limit=${e}`,s=this.keyBodyMeasurements(t),{data:r}=await this.getOrFetchAndCache(n,s,Ae,!0);return r}async getUserStepGoal(){var e;const t=await this.getUserId(),n=`${ye}/rest/v1/user_steps?user_id=eq.${t}&select=goal`,s=this.keySteps(t),{data:r}=await this.getOrFetchAndCache(n,s,je,!0);if(r.length>0)return r[0].goal;const i=await this.fetchJson(`${ye}/rest/v1/user_steps`,!0,"POST",{user_id:t,goal:1e4},"return=representation");return await this.refreshSteps(t),(null==(e=i[0])?void 0:e.goal)??1e4}}].forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(t=>{"constructor"!==t&&Object.defineProperty(Xe.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t)||Object.create(null))})});const Ze=new Je;const Qe=Array(12).fill(0),et=({visible:e,className:t})=>r.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},r.createElement("div",{className:"sonner-spinner"},Qe.map((e,t)=>r.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),tt=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},r.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),nt=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},r.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),st=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},r.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),rt=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},r.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),it=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},r.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let ot=1;const at=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...s}=e,r="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:ot++,i=this.toasts.find(e=>e.id===r),o=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),i?this.toasts=this.toasts.map(t=>t.id===r?(this.publish({...t,...e,id:r,title:n}),{...t,...e,id:r,dismissible:o,title:n}):t):this.addToast({title:n,...s,dismissible:o,id:r}),r},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;void 0!==t.loading&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let i,o=void 0!==n;const a=s.then(async e=>{i=["resolve",e];if(r.isValidElement(e))o=!1,this.create({id:n,type:"default",message:e});else if(lt(e)&&!e.ok){o=!1;const s="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,i="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,a="object"==typeof s&&!r.isValidElement(s)?s:{message:s};this.create({id:n,type:"error",description:i,...a})}else if(e instanceof Error){o=!1;const s="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description,a="object"==typeof s&&!r.isValidElement(s)?s:{message:s};this.create({id:n,type:"error",description:i,...a})}else if(void 0!==t.success){o=!1;const s="function"==typeof t.success?await t.success(e):t.success,i="function"==typeof t.description?await t.description(e):t.description,a="object"==typeof s&&!r.isValidElement(s)?s:{message:s};this.create({id:n,type:"success",description:i,...a})}}).catch(async e=>{if(i=["reject",e],void 0!==t.error){o=!1;const s="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description,a="object"==typeof s&&!r.isValidElement(s)?s:{message:s};this.create({id:n,type:"error",description:i,...a})}}).finally(()=>{o&&(this.dismiss(n),n=void 0),null==t.finally||t.finally.call(t)}),l=()=>new Promise((e,t)=>a.then(()=>"reject"===i[0]?t(i[1]):e(i[1])).catch(t));return"string"!=typeof n&&"number"!=typeof n?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{const n=(null==t?void 0:t.id)||ot++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},lt=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,ct=(e,t)=>{const n=(null==t?void 0:t.id)||ot++;return at.addToast({title:e,...t,id:n}),n},dt=Object.assign(ct,{success:at.success,info:at.info,warning:at.warning,error:at.error,custom:at.custom,message:at.message,promise:at.promise,dismiss:at.dismiss,loading:at.loading},{getHistory:()=>at.toasts,getToasts:()=>at.getActiveToasts()});function ut(e){return void 0!==e.label}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const ht=3,mt=14;function pt(...e){return e.filter(Boolean).join(" ")}const ft=e=>{var t,n,s,i,o,a,l,c,d;const{invert:u,toast:h,unstyled:m,interacting:p,setHeights:f,visibleToasts:g,heights:x,index:v,toasts:y,expanded:b,removeToast:w,defaultRichColors:k,closeButton:E,style:S,cancelButtonStyle:C,actionButtonStyle:N,className:_="",descriptionClassName:j="",duration:A,position:T,gap:R,expandByDefault:P,classNames:M,icons:D,closeButtonAriaLabel:$="Close toast"}=e,[I,O]=r.useState(null),[L,B]=r.useState(null),[F,U]=r.useState(!1),[H,V]=r.useState(!1),[W,z]=r.useState(!1),[G,q]=r.useState(!1),[K,Y]=r.useState(!1),[J,X]=r.useState(0),[Z,Q]=r.useState(0),ee=r.useRef(h.duration||A||4e3),te=r.useRef(null),ne=r.useRef(null),se=0===v,re=v+1<=g,ie=h.type,oe=!1!==h.dismissible,ae=h.className||"",le=h.descriptionClassName||"",ce=r.useMemo(()=>x.findIndex(e=>e.toastId===h.id)||0,[x,h.id]),de=r.useMemo(()=>{var e;return null!=(e=h.closeButton)?e:E},[h.closeButton,E]),ue=r.useMemo(()=>h.duration||A||4e3,[h.duration,A]),he=r.useRef(0),me=r.useRef(0),pe=r.useRef(0),fe=r.useRef(null),[ge,xe]=T.split("-"),ve=r.useMemo(()=>x.reduce((e,t,n)=>n>=ce?e:e+t.height,0),[x,ce]),ye=(()=>{const[e,t]=r.useState(document.hidden);return r.useEffect(()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),be=h.invert||u,we="loading"===ie;me.current=r.useMemo(()=>ce*R+ve,[ce,ve]),r.useEffect(()=>{ee.current=ue},[ue]),r.useEffect(()=>{U(!0)},[]),r.useEffect(()=>{const e=ne.current;if(e){const t=e.getBoundingClientRect().height;return Q(t),f(e=>[{toastId:h.id,height:t,position:h.position},...e]),()=>f(e=>e.filter(e=>e.toastId!==h.id))}},[f,h.id]),r.useLayoutEffect(()=>{if(!F)return;const e=ne.current,t=e.style.height;e.style.height="auto";const n=e.getBoundingClientRect().height;e.style.height=t,Q(n),f(e=>e.find(e=>e.toastId===h.id)?e.map(e=>e.toastId===h.id?{...e,height:n}:e):[{toastId:h.id,height:n,position:h.position},...e])},[F,h.title,h.description,f,h.id,h.jsx,h.action,h.cancel]);const ke=r.useCallback(()=>{V(!0),X(me.current),f(e=>e.filter(e=>e.toastId!==h.id)),setTimeout(()=>{w(h)},200)},[h,w,f,me]);r.useEffect(()=>{if(h.promise&&"loading"===ie||h.duration===1/0||"loading"===h.type)return;let e;return b||p||ye?(()=>{if(pe.current<he.current){const e=(new Date).getTime()-he.current;ee.current=ee.current-e}pe.current=(new Date).getTime()})():ee.current!==1/0&&(he.current=(new Date).getTime(),e=setTimeout(()=>{null==h.onAutoClose||h.onAutoClose.call(h,h),ke()},ee.current)),()=>clearTimeout(e)},[b,p,h,ie,ye,ke]),r.useEffect(()=>{h.delete&&(ke(),null==h.onDismiss||h.onDismiss.call(h,h))},[ke,h.delete]);const Ee=h.icon||(null==D?void 0:D[ie])||(e=>{switch(e){case"success":return tt;case"info":return st;case"warning":return nt;case"error":return rt;default:return null}})(ie);var Se,Ce,Ne,_e;return r.createElement("li",{tabIndex:0,ref:ne,className:pt(_,ae,null==M?void 0:M.toast,null==h||null==(t=h.classNames)?void 0:t.toast,null==M?void 0:M.default,null==M?void 0:M[ie],null==h||null==(n=h.classNames)?void 0:n[ie]),"data-sonner-toast":"","data-rich-colors":null!=(Se=h.richColors)?Se:k,"data-styled":!Boolean(h.jsx||h.unstyled||m),"data-mounted":F,"data-promise":Boolean(h.promise),"data-swiped":K,"data-removed":H,"data-visible":re,"data-y-position":ge,"data-x-position":xe,"data-index":v,"data-front":se,"data-swiping":W,"data-dismissible":oe,"data-type":ie,"data-invert":be,"data-swipe-out":G,"data-swipe-direction":L,"data-expanded":Boolean(b||P&&F),"data-testid":h.testId,style:{"--index":v,"--toasts-before":v,"--z-index":y.length-v,"--offset":`${H?J:me.current}px`,"--initial-height":P?"auto":`${Z}px`,...S,...h.style},onDragEnd:()=>{z(!1),O(null),fe.current=null},onPointerDown:e=>{2!==e.button&&!we&&oe&&(te.current=new Date,X(me.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(z(!0),fe.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,n;if(G||!oe)return;fe.current=null;const s=Number((null==(e=ne.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),r=Number((null==(t=ne.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),i=(new Date).getTime()-(null==(n=te.current)?void 0:n.getTime()),o="x"===I?s:r,a=Math.abs(o)/i;if(Math.abs(o)>=45||a>.11)return X(me.current),null==h.onDismiss||h.onDismiss.call(h,h),B("x"===I?s>0?"right":"left":r>0?"down":"up"),ke(),void q(!0);var l,c;null==(l=ne.current)||l.style.setProperty("--swipe-amount-x","0px"),null==(c=ne.current)||c.style.setProperty("--swipe-amount-y","0px"),Y(!1),z(!1),O(null)},onPointerMove:t=>{var n,s,r;if(!fe.current||!oe)return;if((null==(n=window.getSelection())?void 0:n.toString().length)>0)return;const i=t.clientY-fe.current.y,o=t.clientX-fe.current.x;var a;const l=null!=(a=e.swipeDirections)?a:function(e){const[t,n]=e.split("-"),s=[];return t&&s.push(t),n&&s.push(n),s}(T);!I&&(Math.abs(o)>1||Math.abs(i)>1)&&O(Math.abs(o)>Math.abs(i)?"x":"y");let c={x:0,y:0};const d=e=>1/(1.5+Math.abs(e)/20);if("y"===I){if(l.includes("top")||l.includes("bottom"))if(l.includes("top")&&i<0||l.includes("bottom")&&i>0)c.y=i;else{const e=i*d(i);c.y=Math.abs(e)<Math.abs(i)?e:i}}else if("x"===I&&(l.includes("left")||l.includes("right")))if(l.includes("left")&&o<0||l.includes("right")&&o>0)c.x=o;else{const e=o*d(o);c.x=Math.abs(e)<Math.abs(o)?e:o}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&Y(!0),null==(s=ne.current)||s.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(r=ne.current)||r.style.setProperty("--swipe-amount-y",`${c.y}px`)}},de&&!h.jsx&&"loading"!==ie?r.createElement("button",{"aria-label":$,"data-disabled":we,"data-close-button":!0,onClick:we||!oe?()=>{}:()=>{ke(),null==h.onDismiss||h.onDismiss.call(h,h)},className:pt(null==M?void 0:M.closeButton,null==h||null==(s=h.classNames)?void 0:s.closeButton)},null!=(Ce=null==D?void 0:D.close)?Ce:it):null,(ie||h.icon||h.promise)&&null!==h.icon&&(null!==(null==D?void 0:D[ie])||h.icon)?r.createElement("div",{"data-icon":"",className:pt(null==M?void 0:M.icon,null==h||null==(i=h.classNames)?void 0:i.icon)},h.promise||"loading"===h.type&&!h.icon?h.icon||((null==D?void 0:D.loading)?r.createElement("div",{className:pt(null==M?void 0:M.loader,null==h||null==(_e=h.classNames)?void 0:_e.loader,"sonner-loader"),"data-visible":"loading"===ie},D.loading):r.createElement(et,{className:pt(null==M?void 0:M.loader,null==h||null==(Ne=h.classNames)?void 0:Ne.loader),visible:"loading"===ie})):null,"loading"!==h.type?Ee:null):null,r.createElement("div",{"data-content":"",className:pt(null==M?void 0:M.content,null==h||null==(o=h.classNames)?void 0:o.content)},r.createElement("div",{"data-title":"",className:pt(null==M?void 0:M.title,null==h||null==(a=h.classNames)?void 0:a.title)},h.jsx?h.jsx:"function"==typeof h.title?h.title():h.title),h.description?r.createElement("div",{"data-description":"",className:pt(j,le,null==M?void 0:M.description,null==h||null==(l=h.classNames)?void 0:l.description)},"function"==typeof h.description?h.description():h.description):null),r.isValidElement(h.cancel)?h.cancel:h.cancel&&ut(h.cancel)?r.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||C,onClick:e=>{ut(h.cancel)&&oe&&(null==h.cancel.onClick||h.cancel.onClick.call(h.cancel,e),ke())},className:pt(null==M?void 0:M.cancelButton,null==h||null==(c=h.classNames)?void 0:c.cancelButton)},h.cancel.label):null,r.isValidElement(h.action)?h.action:h.action&&ut(h.action)?r.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||N,onClick:e=>{ut(h.action)&&(null==h.action.onClick||h.action.onClick.call(h.action,e),e.defaultPrevented||ke())},className:pt(null==M?void 0:M.actionButton,null==h||null==(d=h.classNames)?void 0:d.actionButton)},h.action.label):null)};function gt(){if("undefined"==typeof window)return"ltr";if("undefined"==typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function xt(e,t){const n={};return[e,t].forEach((e,t)=>{const s=1===t,r=s?"--mobile-offset":"--offset",i=s?"16px":"24px";function o(e){["top","right","bottom","left"].forEach(t=>{n[`${r}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?o(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?n[`${r}-${t}`]=i:n[`${r}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):o(i)}),n}const vt=r.forwardRef(function(e,t){const{id:n,invert:s,position:o="bottom-right",hotkey:a=["altKey","KeyT"],expand:l,closeButton:c,className:d,offset:u,mobileOffset:h,theme:m="light",richColors:p,duration:f,style:g,visibleToasts:x=ht,toastOptions:v,dir:y=gt(),gap:b=mt,icons:w,containerAriaLabel:k="Notifications"}=e,[E,S]=r.useState([]),C=r.useMemo(()=>n?E.filter(e=>e.toasterId===n):E.filter(e=>!e.toasterId),[E,n]),N=r.useMemo(()=>Array.from(new Set([o].concat(C.filter(e=>e.position).map(e=>e.position)))),[C,o]),[_,j]=r.useState([]),[A,T]=r.useState(!1),[R,P]=r.useState(!1),[M,D]=r.useState("system"!==m?m:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=r.useRef(null),I=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=r.useRef(null),L=r.useRef(!1),B=r.useCallback(e=>{S(t=>{var n;return(null==(n=t.find(t=>t.id===e.id))?void 0:n.delete)||at.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return r.useEffect(()=>at.subscribe(e=>{e.dismiss?requestAnimationFrame(()=>{S(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t))}):setTimeout(()=>{i.flushSync(()=>{S(t=>{const n=t.findIndex(t=>t.id===e.id);return-1!==n?[...t.slice(0,n),{...t[n],...e},...t.slice(n+1)]:[e,...t]})})})}),[E]),r.useEffect(()=>{if("system"!==m)return void D(m);if("system"===m&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?D("dark"):D("light")),"undefined"==typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{D(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{D(e?"dark":"light")}catch(t){console.error(t)}})}},[m]),r.useEffect(()=>{E.length<=1&&T(!1)},[E]),r.useEffect(()=>{const e=e=>{var t;var n;a.every(t=>e[t]||e.code===t)&&(T(!0),null==(n=$.current)||n.focus());"Escape"!==e.code||document.activeElement!==$.current&&!(null==(t=$.current)?void 0:t.contains(document.activeElement))||T(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),r.useEffect(()=>{if($.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,L.current=!1)}},[$.current]),r.createElement("section",{ref:t,"aria-label":`${k} ${I}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((t,n)=>{var i;const[o,a]=t.split("-");return C.length?r.createElement("ol",{key:t,dir:"auto"===y?gt():y,tabIndex:-1,ref:$,className:d,"data-sonner-toaster":!0,"data-sonner-theme":M,"data-y-position":o,"data-x-position":a,style:{"--front-toast-height":`${(null==(i=_[0])?void 0:i.height)||0}px`,"--width":"356px","--gap":`${b}px`,...g,...xt(u,h)},onBlur:e=>{L.current&&!e.currentTarget.contains(e.relatedTarget)&&(L.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||L.current||(L.current=!0,O.current=e.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{R||T(!1)},onDragEnd:()=>T(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||P(!0)},onPointerUp:()=>P(!1)},C.filter(e=>!e.position&&0===n||e.position===t).map((n,i)=>{var o,a;return r.createElement(ft,{key:n.id,icons:w,index:i,toast:n,defaultRichColors:p,duration:null!=(o=null==v?void 0:v.duration)?o:f,className:null==v?void 0:v.className,descriptionClassName:null==v?void 0:v.descriptionClassName,invert:s,visibleToasts:x,closeButton:null!=(a=null==v?void 0:v.closeButton)?a:c,interacting:R,position:t,style:null==v?void 0:v.style,unstyled:null==v?void 0:v.unstyled,classNames:null==v?void 0:v.classNames,cancelButtonStyle:null==v?void 0:v.cancelButtonStyle,actionButtonStyle:null==v?void 0:v.actionButtonStyle,closeButtonAriaLabel:null==v?void 0:v.closeButtonAriaLabel,removeToast:B,toasts:C.filter(e=>e.position==n.position),heights:_.filter(e=>e.position==n.position),setHeights:j,expandByDefault:l,gap:b,expanded:A,swipeDirections:e.swipeDirections})})):null}))}),yt=n.createContext(void 0);function bt(){const e=n.useContext(yt);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}const wt=e=>e&&e.length?e.charAt(0).toUpperCase()+e.slice(1):null,kt=(...e)=>{for(const t of e){if("string"!=typeof t)continue;const e=t.trim();if(e.length>0)return e}return null};function Et({children:e}){const[t,s]=n.useState(null),[r,i]=n.useState(null),[o,a]=n.useState(!1),l=n.useCallback((e,t)=>{s(e),t&&i(t),e?(localStorage.setItem("USER_TOKEN",e),t&&localStorage.setItem("REFRESH_TOKEN",t),Ze.setToken(e)):(localStorage.removeItem("USER_TOKEN"),localStorage.removeItem("REFRESH_TOKEN"),i(null),Ze.setToken(null))},[]),c=n.useCallback(async e=>{try{const t=await Ze.refreshToken(e);l(t,e)}catch(t){ie("Token refresh failed on app start:",t),l(null,null)}},[l]),d=n.useCallback(async()=>{let e=null;try{e=await Ze.getMyProfile()}catch(t){ie("Failed to load profile after sign-in:",t)}if(e)return!0;try{const e=await Ze.getCurrentUser(),{firstName:t,lastName:n,displayName:s}=((e,t)=>{const n=(()=>{if("string"!=typeof t)return null;const[e]=t.split("@");if(!e)return null;const n=e.trim();return n.length>0?n:null})()??"New member",s=kt(null==e?void 0:e.full_name,null==e?void 0:e.name,null==e?void 0:e.display_name),r=kt(null==e?void 0:e.preferred_username,null==e?void 0:e.nickname),i=kt(null==e?void 0:e.given_name,null==e?void 0:e.first_name,s?s.split(/\s+/)[0]:null)??n,o=kt(null==e?void 0:e.family_name,null==e?void 0:e.last_name,s?s.split(/\s+/).slice(1).join(" "):null)??"",a=kt(r,s,[i,o].filter(Boolean).join(" "),n)??n;return{firstName:i,lastName:o,displayName:a}})(e.user_metadata,e.email);return await Ze.upsertProfile({firstName:t,lastName:n,displayName:s}),!0}catch(t){return ie("Failed to finish profile setup after OAuth sign-in:",t),dt.error("We couldn't finish setting up your profile. Please try signing in again."),!1}},[]),u=n.useCallback(()=>{if("undefined"==typeof window)return!1;const{hash:e}=window.location;if(!e||e.length<=1)return!1;const t=new URLSearchParams(e.slice(1)),n=t.get("access_token"),s=t.get("refresh_token"),r=t.get("error_description")||t.get("error"),i=t.get("provider"),o=wt(i);if(!n&&!r)return!1;if(r){const e=((e,t)=>{if(e.toLowerCase().includes("provider is not enabled")){const e=wt(t);return e?`${e} sign-in isn't configured yet. Enable it for your Supabase project and try again.`:"This sign-in provider isn't configured yet. Enable it for your Supabase project and try again."}return e})(r,i);dt.error(e),ie("OAuth sign-in failed:",r)}else n&&(l(n,s),dt.success(o?`Signed in with ${o}`:"Signed in successfully"),d());const a=`${window.location.origin}${window.location.pathname}${window.location.search}`;return window.history.replaceState({},document.title,a),!0},[d,l]);n.useEffect(()=>{(async()=>{if(u())return void a(!0);const e=localStorage.getItem("USER_TOKEN"),t=localStorage.getItem("REFRESH_TOKEN");if(e&&t){(e=>{try{const t=1e3*JSON.parse(atob(e.split(".")[1])).iat;return Date.now()-t}catch{return 1/0}})(e)>36e5?await c(t):l(e,t)}a(!0)})()},[u,c,l]),n.useEffect(()=>{t&&d()},[d,t]);n.useEffect(()=>{if(!t||!r)return;const e=setInterval(async()=>{if("visible"===document.visibilityState)try{const e=await Ze.refreshToken(r);l(e,r)}catch(e){ie("Active token refresh failed:",e),l(null,null)}},27e5);return()=>clearInterval(e)},[t,r,l]),n.useEffect(()=>{if(!t||!r)return;const e=()=>{"visible"===document.visibilityState&&(async()=>{try{const e=await Ze.refreshToken(r);l(e,r)}catch(e){ie("Token refresh failed on resume:",e),l(null,null)}})()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[t,r,l]);const h=!!t;return o?Y.jsx(yt.Provider,{value:{userToken:t,setUserToken:l,isAuthenticated:h,signOut:async()=>{await Ze.signOut(),l(null,null)}},children:e}):Y.jsx("div",{className:"bg-gradient-to-br from-[var(--soft-gray)] via-[var(--background)] to-[var(--warm-cream)]/30 flex items-center justify-center",children:Y.jsx("div",{className:"text-black",children:"Loading..."})})}const St=n.createContext(void 0);function Ct({children:e}){const[t,s]=n.useState(!1),[r,i]=n.useState(5);return Y.jsx(St.Provider,{value:{hasWorkedOutToday:t,todaysWorkout:{name:"Upper Push",exercises:["Bench Press","Overhead Press","Dips","Tricep Pushdown"],estimatedTime:"60-75 min"},workoutStreak:r,completeWorkout:()=>{s(!0),i(e=>e+1)}},children:e})}async function Nt(){try{const{Capacitor:t}=await De(async()=>{const{Capacitor:e}=await Promise.resolve().then(()=>oh);return{Capacitor:e}},void 0),n=t.getPlatform();if("ios"!==n&&"android"!==n)return 0;const{start:s,end:r}=function(){const e=new Date;return{start:new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),end:e}}();if("ios"===n)try{const{Health:e}=await De(async()=>{const{Health:e}=await import("./index-BZG64wap.js");return{Health:e}},__vite__mapDeps([3,1,2])),t=await e.isHealthAvailable();if(!(null==t?void 0:t.available))return 0;await e.requestHealthPermissions({permissions:["READ_STEPS"]}),le("[steps] Sending to HealthKit:",{startDate:s.toISOString(),endDate:r.toISOString(),startLocal:s.toLocaleString(),endLocal:r.toLocaleString()});const n=await e.queryAggregated({startDate:s.toISOString(),endDate:r.toISOString(),dataType:"steps",bucket:"day"});le("[steps] HealthKit response:",n);const i=Array.isArray(null==n?void 0:n.aggregatedData)?n.aggregatedData:[],o=Intl.DateTimeFormat().resolvedOptions().timeZone,a=e=>new Date(e).toLocaleString("en-GB",{timeZone:o,hour12:!1});i.forEach((e,t)=>{le(`[steps] Row ${t}:`,a(e.startDate),"â†’",a(e.endDate),"Steps:",e.value,"tz:",o)});const l=i.reduce((e,t)=>e+(Number(null==t?void 0:t.value)||0),0);return Math.round(l)}catch(e){return oe("[steps] iOS Health read failed:",e),0}if("android"===n)try{const{HealthConnect:e}=await De(async()=>{const{HealthConnect:e}=await import("./index-De-4xZM4.js");return{HealthConnect:e}},__vite__mapDeps([4,1,2])),t=await e.checkAvailability();if("Available"!==(null==t?void 0:t.availability))return 0;const n=await e.requestHealthPermissions({read:["Steps"],write:[]});if(!(null==n?void 0:n.hasAllPermissions))return 0;const i=await e.readRecords({type:"Steps",timeRangeFilter:{type:"between",startTime:s,endTime:r}});le("[steps] Health Connect response:",i);const o=Array.isArray(null==i?void 0:i.records)?i.records:[];o.forEach((e,t)=>{le(`[steps] Record ${t}:`,"Steps:",null==e?void 0:e.count,"Time:",null==e?void 0:e.startTime)});const a=o.reduce((e,t)=>e+(Number(null==t?void 0:t.count)||0),0);return Math.round(a)}catch(e){return oe("[steps] Android Health Connect read failed:",e),0}return 0}catch(t){return oe("[steps] readTodayStepsNative fallback to 0:",t),0}}function _t(){const e="undefined"!=typeof window&&"undefined"!=typeof document?getComputedStyle(document.documentElement):null,t=t=>{var n;return(null==(n=null==e?void 0:e.getPropertyValue(t))?void 0:n.trim())||""};return{warmBrown:t("--foreground"),warmCoral:t("--primary"),accentBlue:t("--accent-blue"),trackGray:t("--ring-track-gray"),recoveryYellow:t("--recovery-yellow")}}function jt({value:e,max:t=100,label:n,unit:s="%",size:r=112,strokeWidth:i=10,decimals:o=0,trackColor:a,progressColor:l,textColor:c,primaryTextOverride:d,secondaryTextOverride:u}){const{warmBrown:h,warmCoral:m,trackGray:p}=_t(),f=a??p,g=l??m,x=c??h,v="number"==typeof e&&isFinite(e)?Math.max(0,Math.min(e,t)):null,y=(r-i)/2,b=2*Math.PI*y,w=b*(1-(null==v?0:v/t)),k=`grad-${String(n).replace(/[^a-zA-Z0-9_-]/g,"")}`;return Y.jsxs("div",{className:"flex flex-col items-center select-none",role:"group","aria-label":`${n} progress`,children:[Y.jsxs("svg",{width:r,height:r,viewBox:`0 0 ${r} ${r}`,className:"block",children:[Y.jsx("defs",{children:Y.jsxs("linearGradient",{id:k,x1:"0",y1:"0",x2:"1",y2:"1",children:[Y.jsx("stop",{offset:"0%",stopColor:g}),Y.jsx("stop",{offset:"100%",stopColor:g})]})}),Y.jsx("circle",{cx:r/2,cy:r/2,r:y,stroke:f,strokeWidth:i,fill:"none",strokeLinecap:"round",style:{opacity:.25}}),Y.jsx("circle",{cx:r/2,cy:r/2,r:y,stroke:`url(#${k})`,strokeWidth:i,fill:"none",strokeDasharray:`${b} ${b}`,strokeDashoffset:w,strokeLinecap:"round",transform:`rotate(-90 ${r/2} ${r/2})`,role:"progressbar","aria-valuemin":0,"aria-valuemax":t,"aria-valuenow":v??void 0,"aria-valuetext":d&&u?`${d} of ${u} ${s||""}`.trim():void 0}),Y.jsxs("g",{transform:`translate(${r/2}, ${r/2})`,children:[Y.jsx("text",{textAnchor:"middle",dominantBaseline:"central",style:{fontSize:.24*r,fontWeight:700,fill:x},children:d??(null==v?"â€”":v.toFixed(o))}),Y.jsx("text",{y:.18*r,textAnchor:"middle",dominantBaseline:"hanging",style:{fontSize:.14*r,fontWeight:600,fill:x,opacity:.5},children:u??s})]})]}),Y.jsx("div",{className:"mt-2 text-xs",style:{color:x,opacity:.75},children:n})]})}const At=(e,t,n)=>Math.min(n,Math.max(t,e)),Tt=e=>null==e?"â€”":Math.round(e).toLocaleString();function Rt({steps:e,goal:t,recoveryPercent:s,strain:r,onStepsClick:i,onRecoveryClick:o,onStrainClick:a}){const{warmBrown:l,warmCoral:c,accentBlue:d,trackGray:u,recoveryYellow:h}=_t(),m=function(){const[e,t]=n.useState(()=>"undefined"!=typeof window?window.innerWidth:390);return n.useEffect(()=>{const e=()=>t(window.innerWidth);window.addEventListener("resize",e),window.addEventListener("orientationchange",e),window.addEventListener("pageshow",e);const n=setTimeout(e,100);return()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e),window.removeEventListener("pageshow",e),clearTimeout(n)}},[]),e}(),p=n.useMemo(()=>{const e=.28*m;return Math.round(At(e,96,140))},[m]),f=n.useMemo(()=>{const e=Math.round(p*(10/108));return At(e,8,14)},[p]),g=[{key:"steps",onClick:i,node:Y.jsx(jt,{value:(x=e,v=t,null==x||null==v||!isFinite(x)||!isFinite(v)||v<=0?null:At(Math.round(x/v*100),0,100)),max:100,label:"Steps",unit:"%",size:p,strokeWidth:f,textColor:l,progressColor:d,trackColor:u,primaryTextOverride:Tt(e),secondaryTextOverride:Tt(t)})},{key:"recovery",onClick:o,node:Y.jsx(jt,{value:s??null,max:100,label:"Recovery",unit:"%",size:p,strokeWidth:f,textColor:l,progressColor:h,trackColor:u})},{key:"strain",onClick:a,node:Y.jsx(jt,{value:r??null,max:10,label:"Strain",unit:"",size:p,strokeWidth:f,decimals:1,textColor:l,progressColor:c,trackColor:u})}];var x,v;return Y.jsxs("div",{className:"w-full",children:[Y.jsx("div",{className:"flex justify-center gap-4 sm:gap-6 px-2",children:g.map(({key:e,onClick:t,node:n})=>Y.jsx("button",{className:"touch-manipulation inline-flex shrink-0",onClick:t,"aria-label":`${e} progress`,children:n},e))}),Y.jsx("div",{className:"mt-3 h-px bg-foreground/5"})]})}const Pt={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl"};let Mt=0,Dt=null;function $t(){n.useLayoutEffect(()=>{if(Mt+=1,!Dt){const e=document.documentElement;let t=0;const n=()=>{t=0;const n=window.visualViewport;if(!n)return e.style.setProperty("--kb-inset","0px"),e.style.setProperty("--keyboard-inset","0px"),void e.style.setProperty("--app-kb-inset","0px");const s=Math.max(0,window.innerHeight-n.height-(n.offsetTop||0)),r=`${Math.round(s)}px`;e.style.setProperty("--kb-inset",r),e.style.setProperty("--keyboard-inset",r),e.style.setProperty("--app-kb-inset",r)},s=()=>{t&&cancelAnimationFrame(t),t=requestAnimationFrame(n)};let r=null;(async()=>{n();try{const{Capacitor:t}=await De(async()=>{const{Capacitor:e}=await Promise.resolve().then(()=>oh);return{Capacitor:e}},void 0),{Keyboard:n}=await De(async()=>{const{Keyboard:e}=await import("./index-D3AEEMsG.js");return{Keyboard:e}},__vite__mapDeps([5,1,2]));if(t.isNativePlatform()){const t=await n.addListener("keyboardWillShow",t=>{const n=(null==t?void 0:t.keyboardHeight)||0,s=`${Math.round(n)}px`;e.style.setProperty("--kb-inset",s),e.style.setProperty("--keyboard-inset",s),e.style.setProperty("--app-kb-inset",s)}),s=await n.addListener("keyboardWillHide",()=>{e.style.setProperty("--kb-inset","0px"),e.style.setProperty("--keyboard-inset","0px"),e.style.setProperty("--app-kb-inset","0px")});return void(r=()=>{t.remove(),s.remove()})}}catch{}window.visualViewport?(window.visualViewport.addEventListener("resize",s),window.visualViewport.addEventListener("scroll",s)):window.addEventListener("resize",s),r=()=>{window.visualViewport?(window.visualViewport.removeEventListener("resize",s),window.visualViewport.removeEventListener("scroll",s)):window.removeEventListener("resize",s)}})(),Dt=()=>{t&&cancelAnimationFrame(t),null==r||r(),e.style.removeProperty("--kb-inset"),e.style.removeProperty("--keyboard-inset"),e.style.removeProperty("--app-kb-inset"),Dt=null}}return()=>{Mt-=1,Mt<=0&&Dt&&Dt()}},[])}function It(){const[e,t]=n.useState(!1);return $t(),n.useEffect(()=>{const e=document.documentElement,n=()=>{const n=parseInt(getComputedStyle(e).getPropertyValue("--kb-inset")||"0",10);t(n>0)};n();const s=new MutationObserver(n);s.observe(e,{attributes:!0,attributeFilter:["style"]});const r=window.visualViewport;return r?(r.addEventListener("resize",n),r.addEventListener("scroll",n)):window.addEventListener("resize",n),()=>{s.disconnect(),r?(r.removeEventListener("resize",n),r.removeEventListener("scroll",n)):window.removeEventListener("resize",n)}},[]),e}const Ot=(...e)=>e.filter(Boolean).join(" ");function Lt({header:e,stickyHeader:t=!1,bottomBar:s,bottomBarSticky:r=!0,hideBottomBarOnKeyboard:i=!0,showHeaderBorder:o=!0,showBottomBarBorder:a=!0,maxContent:l="md",maxContentPx:c,maxContentClassName:d,padContent:u=!0,padHeader:h=!0,padBottomBar:m=!1,keyboardInsetVarName:p="--app-kb-inset",className:f="",contentClassName:g="",scrollAreaClassName:x="",headerShellClassName:v="",bottomBarShellClassName:y="",padHeaderSafeArea:b=!1,contentGuttersPreset:w="responsive",contentBottomPaddingClassName:k="",children:E,headerInScrollArea:S=!1,onScroll:C,backgroundImageSrc:N,backgroundOverlayClassName:_,disableSafeArea:j=!1}){$t();const A=It(),T=function(){const[e,t]=n.useState(!1);return n.useEffect(()=>{const e=()=>{const e=document.activeElement,n=e instanceof HTMLInputElement&&("number"===e.type||"numeric"===e.inputMode);t(n)};return document.addEventListener("focusin",e),document.addEventListener("focusout",e),e(),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}},[]),e}(),R=n.useRef(null),P=n.useRef(null),M=n.useRef(null),D=A&&T,$=D?Y.jsx("div",{className:"w-full flex justify-end",children:Y.jsx("button",{className:"px-3 py-2 text-black text-lg bg-transparent border-0",onClick:()=>{var e;return null==(e=document.activeElement)?void 0:e.blur()},type:"button",children:"Done"})}):!s||i&&A?null:s;n.useLayoutEffect(()=>{if(!R.current)return;const t=()=>{var t,n;const s=(null==(t=P.current)?void 0:t.offsetHeight)??0,r=(null==(n=M.current)?void 0:n.offsetHeight)??0;R.current.style.setProperty("--app-header-h",`${e?s:0}px`),R.current.style.setProperty("--app-bottom-h",`${$?r:0}px`)},n=new ResizeObserver(t);return P.current&&n.observe(P.current),M.current&&n.observe(M.current),t(),()=>n.disconnect()},[e,$]);const I="number"==typeof c?"":"none"===(O=l)?"":"responsive"===O?"max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl xl:max-w-3xl 2xl:max-w-4xl":Pt[O]??"";var O;const L=Ot("w-full",("none"!==l||"number"==typeof c)&&"mx-auto",I,d),B=n.useMemo(()=>"number"==typeof c?{maxWidth:c}:void 0,[c]),F=`var(${p}, var(--kb-inset, var(--keyboard-inset, 0px)))`,U="responsive"===w?"px-4 py-6 sm:px-6 md:px-8 md:py-8":"compact"===w?"px-4 py-4":u?"px-4":"",H=()=>Y.jsx("div",{ref:P,className:Ot("shrink-0",t&&"sticky top-0 z-30","bg-background",o&&"border-b border-border",v),style:{paddingTop:b?"max(env(safe-area-inset-top), 0px)":void 0},children:Y.jsx("div",{className:Ot(L,h&&"px-4"),style:B,children:e})});return Y.jsxs("div",{ref:R,className:Ot("fixed inset-0 flex flex-col overflow-hidden overscroll-contain bg-background",f),style:{paddingLeft:"max(env(safe-area-inset-left), 0px)",paddingRight:"max(env(safe-area-inset-right), 0px)",paddingTop:j?0:void 0,paddingBottom:j?0:void 0},children:[N&&Y.jsxs("div",{className:"absolute inset-0 -z-10",children:[Y.jsx("img",{src:N,alt:"",className:"w-full h-full object-cover"}),_&&Y.jsx("div",{className:Ot("absolute inset-0",_)})]}),e&&!S?H():null,Y.jsxs("div",{className:Ot("flex-1 min-h-0 overflow-y-auto w-full",N?"bg-transparent":"bg-background",x),onScroll:C,children:[e&&S?H():null,Y.jsx("div",{className:Ot(L,U,k,g),style:{...B,paddingBottom:$?"var(--app-bottom-h, 0px)":j?F:`calc(env(safe-area-inset-bottom) + ${F})`},children:E})]}),$?Y.jsx("div",{ref:M,className:Ot("shrink-0",r&&"sticky bottom-0 z-50","bg-background",a&&"border-t border-border","pointer-events-auto",y),style:D?{marginBottom:`calc(${F} - env(safe-area-inset-bottom))`}:{paddingBottom:F},children:Y.jsx("div",{className:Ot(L,m&&"px-4 py-2"),style:B,children:$})}):null]})}function Bt(e){var t,n,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Bt(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function Ft(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Bt(e))&&(s&&(s+=" "),s+=t);return s}const Ut=e=>{const t=zt(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),Ht(n,t)||Wt(e)},getConflictingClassGroupIds:(e,t)=>{const r=n[e]||[];return t&&s[e]?[...r,...s[e]]:r}}},Ht=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const s=e[0],r=t.nextPart.get(s),i=r?Ht(e.slice(1),r):void 0;if(i)return i;if(0===t.validators.length)return;const o=e.join("-");return null==(n=t.validators.find(({validator:e})=>e(o)))?void 0:n.classGroupId},Vt=/^\[(.+)\]$/,Wt=e=>{if(Vt.test(e)){const t=Vt.exec(e)[1],n=null==t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},zt=e=>{const{theme:t,classGroups:n}=e,s={nextPart:new Map,validators:[]};for(const r in n)Gt(n[r],s,r,t);return s},Gt=(e,t,n,s)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:qt(t,e)).classGroupId=n)}if("function"==typeof e)return Kt(e)?void Gt(e(s),t,n,s):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(([e,r])=>{Gt(r,qt(t,e),n,s)})})},qt=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},Kt=e=>e.isThemeGetter,Yt=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const r=(r,i)=>{n.set(r,i),t++,t>e&&(t=0,s=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=s.get(e))?(r(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):r(e,t)}}},Jt=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=e=>{const t=[];let n,s=0,r=0,i=0;for(let l=0;l<e.length;l++){let o=e[l];if(0===s&&0===r){if(":"===o){t.push(e.slice(i,l)),i=l+1;continue}if("/"===o){n=l;continue}}"["===o?s++:"]"===o?s--:"("===o?r++:")"===o&&r--}const o=0===t.length?e:e.substring(i),a=Xt(o);return{modifiers:t,hasImportantModifier:a!==o,baseClassName:a,maybePostfixModifierPosition:n&&n>i?n-i:void 0}};if(t){const e=t+":",n=s;s=t=>t.startsWith(e)?n(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(n){const e=s;s=t=>n({className:t,parseClassName:e})}return s},Xt=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,Zt=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;const n=[];let s=[];return e.forEach(e=>{"["===e[0]||t[e]?(n.push(...s.sort(),e),s=[]):s.push(e)}),n.push(...s.sort()),n}},Qt=/\s+/;function en(){let e,t,n=0,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=tn(e))&&(s&&(s+=" "),s+=t);return s}const tn=e=>{if("string"==typeof e)return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=tn(e[s]))&&(n&&(n+=" "),n+=t);return n};function nn(e,...t){let n,s,r,i=function(a){const l=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:Yt(e.cacheSize),parseClassName:Jt(e),sortModifiers:Zt(e),...Ut(e)}))(l),s=n.cache.get,r=n.cache.set,i=o,o(a)};function o(e){const t=s(e);if(t)return t;const i=((e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:i}=t,o=[],a=e.trim().split(Qt);let l="";for(let c=a.length-1;c>=0;c-=1){const e=a[c],{isExternal:t,modifiers:d,hasImportantModifier:u,baseClassName:h,maybePostfixModifierPosition:m}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let p=!!m,f=s(p?h.substring(0,m):h);if(!f){if(!p){l=e+(l.length>0?" "+l:l);continue}if(f=s(h),!f){l=e+(l.length>0?" "+l:l);continue}p=!1}const g=i(d).join(":"),x=u?g+"!":g,v=x+f;if(o.includes(v))continue;o.push(v);const y=r(f,p);for(let n=0;n<y.length;++n){const e=y[n];o.push(x+e)}l=e+(l.length>0?" "+l:l)}return l})(e,n);return r(e,i),i}return function(){return i(en.apply(null,arguments))}}const sn=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},rn=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,on=/^\((?:(\w[\w-]*):)?(.+)\)$/i,an=/^\d+\/\d+$/,ln=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cn=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dn=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,un=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hn=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,mn=e=>an.test(e),pn=e=>!!e&&!Number.isNaN(Number(e)),fn=e=>!!e&&Number.isInteger(Number(e)),gn=e=>e.endsWith("%")&&pn(e.slice(0,-1)),xn=e=>ln.test(e),vn=()=>!0,yn=e=>cn.test(e)&&!dn.test(e),bn=()=>!1,wn=e=>un.test(e),kn=e=>hn.test(e),En=e=>!Cn(e)&&!Rn(e),Sn=e=>Ln(e,Hn,bn),Cn=e=>rn.test(e),Nn=e=>Ln(e,Vn,yn),_n=e=>Ln(e,Wn,pn),jn=e=>Ln(e,Fn,bn),An=e=>Ln(e,Un,kn),Tn=e=>Ln(e,Gn,wn),Rn=e=>on.test(e),Pn=e=>Bn(e,Vn),Mn=e=>Bn(e,zn),Dn=e=>Bn(e,Fn),$n=e=>Bn(e,Hn),In=e=>Bn(e,Un),On=e=>Bn(e,Gn,!0),Ln=(e,t,n)=>{const s=rn.exec(e);return!!s&&(s[1]?t(s[1]):n(s[2]))},Bn=(e,t,n=!1)=>{const s=on.exec(e);return!!s&&(s[1]?t(s[1]):n)},Fn=e=>"position"===e||"percentage"===e,Un=e=>"image"===e||"url"===e,Hn=e=>"length"===e||"size"===e||"bg-size"===e,Vn=e=>"length"===e,Wn=e=>"number"===e,zn=e=>"family-name"===e,Gn=e=>"shadow"===e,qn=nn(()=>{const e=sn("color"),t=sn("font"),n=sn("text"),s=sn("font-weight"),r=sn("tracking"),i=sn("leading"),o=sn("breakpoint"),a=sn("container"),l=sn("spacing"),c=sn("radius"),d=sn("shadow"),u=sn("inset-shadow"),h=sn("text-shadow"),m=sn("drop-shadow"),p=sn("blur"),f=sn("perspective"),g=sn("aspect"),x=sn("ease"),v=sn("animate"),y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Rn,Cn],b=()=>[Rn,Cn,l],w=()=>[mn,"full","auto",...b()],k=()=>[fn,"none","subgrid",Rn,Cn],E=()=>["auto",{span:["full",fn,Rn,Cn]},fn,Rn,Cn],S=()=>[fn,"auto",Rn,Cn],C=()=>["auto","min","max","fr",Rn,Cn],N=()=>["auto",...b()],_=()=>[mn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...b()],j=()=>[e,Rn,Cn],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Dn,jn,{position:[Rn,Cn]}],T=()=>["auto","cover","contain",$n,Sn,{size:[Rn,Cn]}],R=()=>[gn,Pn,Nn],P=()=>["","none","full",c,Rn,Cn],M=()=>["",pn,Pn,Nn],D=()=>[pn,gn,Dn,jn],$=()=>["","none",p,Rn,Cn],I=()=>["none",pn,Rn,Cn],O=()=>["none",pn,Rn,Cn],L=()=>[pn,Rn,Cn],B=()=>[mn,"full",...b()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[xn],breakpoint:[xn],color:[vn],container:[xn],"drop-shadow":[xn],ease:["in","out","in-out"],font:[En],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[xn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[xn],shadow:[xn],spacing:["px",pn],text:[xn],"text-shadow":[xn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",mn,Cn,Rn,g]}],container:["container"],columns:[{columns:[pn,Cn,Rn,a]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:y()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[fn,"auto",Rn,Cn]}],basis:[{basis:[mn,"full","auto",a,...b()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[pn,mn,"auto","initial","none",Cn]}],grow:[{grow:["",pn,Rn,Cn]}],shrink:[{shrink:["",pn,Rn,Cn]}],order:[{order:[fn,"first","last","none",Rn,Cn]}],"grid-cols":[{"grid-cols":k()}],"col-start-end":[{col:E()}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":k()}],"row-start-end":[{row:E()}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":C()}],"auto-rows":[{"auto-rows":C()}],gap:[{gap:b()}],"gap-x":[{"gap-x":b()}],"gap-y":[{"gap-y":b()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:b()}],px:[{px:b()}],py:[{py:b()}],ps:[{ps:b()}],pe:[{pe:b()}],pt:[{pt:b()}],pr:[{pr:b()}],pb:[{pb:b()}],pl:[{pl:b()}],m:[{m:N()}],mx:[{mx:N()}],my:[{my:N()}],ms:[{ms:N()}],me:[{me:N()}],mt:[{mt:N()}],mr:[{mr:N()}],mb:[{mb:N()}],ml:[{ml:N()}],"space-x":[{"space-x":b()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":b()}],"space-y-reverse":["space-y-reverse"],size:[{size:_()}],w:[{w:[a,"screen",..._()]}],"min-w":[{"min-w":[a,"screen","none",..._()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},..._()]}],h:[{h:["screen","lh",..._()]}],"min-h":[{"min-h":["screen","lh","none",..._()]}],"max-h":[{"max-h":["screen","lh",..._()]}],"font-size":[{text:["base",n,Pn,Nn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,Rn,_n]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",gn,Cn]}],"font-family":[{font:[Mn,Cn,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Rn,Cn]}],"line-clamp":[{"line-clamp":[pn,"none",Rn,_n]}],leading:[{leading:[i,...b()]}],"list-image":[{"list-image":["none",Rn,Cn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Rn,Cn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:j()}],"text-color":[{text:j()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[pn,"from-font","auto",Rn,Nn]}],"text-decoration-color":[{decoration:j()}],"underline-offset":[{"underline-offset":[pn,"auto",Rn,Cn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:b()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Rn,Cn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Rn,Cn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:A()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:T()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},fn,Rn,Cn],radial:["",Rn,Cn],conic:[fn,Rn,Cn]},In,An]}],"bg-color":[{bg:j()}],"gradient-from-pos":[{from:R()}],"gradient-via-pos":[{via:R()}],"gradient-to-pos":[{to:R()}],"gradient-from":[{from:j()}],"gradient-via":[{via:j()}],"gradient-to":[{to:j()}],rounded:[{rounded:P()}],"rounded-s":[{"rounded-s":P()}],"rounded-e":[{"rounded-e":P()}],"rounded-t":[{"rounded-t":P()}],"rounded-r":[{"rounded-r":P()}],"rounded-b":[{"rounded-b":P()}],"rounded-l":[{"rounded-l":P()}],"rounded-ss":[{"rounded-ss":P()}],"rounded-se":[{"rounded-se":P()}],"rounded-ee":[{"rounded-ee":P()}],"rounded-es":[{"rounded-es":P()}],"rounded-tl":[{"rounded-tl":P()}],"rounded-tr":[{"rounded-tr":P()}],"rounded-br":[{"rounded-br":P()}],"rounded-bl":[{"rounded-bl":P()}],"border-w":[{border:M()}],"border-w-x":[{"border-x":M()}],"border-w-y":[{"border-y":M()}],"border-w-s":[{"border-s":M()}],"border-w-e":[{"border-e":M()}],"border-w-t":[{"border-t":M()}],"border-w-r":[{"border-r":M()}],"border-w-b":[{"border-b":M()}],"border-w-l":[{"border-l":M()}],"divide-x":[{"divide-x":M()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":M()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:j()}],"border-color-x":[{"border-x":j()}],"border-color-y":[{"border-y":j()}],"border-color-s":[{"border-s":j()}],"border-color-e":[{"border-e":j()}],"border-color-t":[{"border-t":j()}],"border-color-r":[{"border-r":j()}],"border-color-b":[{"border-b":j()}],"border-color-l":[{"border-l":j()}],"divide-color":[{divide:j()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[pn,Rn,Cn]}],"outline-w":[{outline:["",pn,Pn,Nn]}],"outline-color":[{outline:j()}],shadow:[{shadow:["","none",d,On,Tn]}],"shadow-color":[{shadow:j()}],"inset-shadow":[{"inset-shadow":["none",u,On,Tn]}],"inset-shadow-color":[{"inset-shadow":j()}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:j()}],"ring-offset-w":[{"ring-offset":[pn,Nn]}],"ring-offset-color":[{"ring-offset":j()}],"inset-ring-w":[{"inset-ring":M()}],"inset-ring-color":[{"inset-ring":j()}],"text-shadow":[{"text-shadow":["none",h,On,Tn]}],"text-shadow-color":[{"text-shadow":j()}],opacity:[{opacity:[pn,Rn,Cn]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[pn]}],"mask-image-linear-from-pos":[{"mask-linear-from":D()}],"mask-image-linear-to-pos":[{"mask-linear-to":D()}],"mask-image-linear-from-color":[{"mask-linear-from":j()}],"mask-image-linear-to-color":[{"mask-linear-to":j()}],"mask-image-t-from-pos":[{"mask-t-from":D()}],"mask-image-t-to-pos":[{"mask-t-to":D()}],"mask-image-t-from-color":[{"mask-t-from":j()}],"mask-image-t-to-color":[{"mask-t-to":j()}],"mask-image-r-from-pos":[{"mask-r-from":D()}],"mask-image-r-to-pos":[{"mask-r-to":D()}],"mask-image-r-from-color":[{"mask-r-from":j()}],"mask-image-r-to-color":[{"mask-r-to":j()}],"mask-image-b-from-pos":[{"mask-b-from":D()}],"mask-image-b-to-pos":[{"mask-b-to":D()}],"mask-image-b-from-color":[{"mask-b-from":j()}],"mask-image-b-to-color":[{"mask-b-to":j()}],"mask-image-l-from-pos":[{"mask-l-from":D()}],"mask-image-l-to-pos":[{"mask-l-to":D()}],"mask-image-l-from-color":[{"mask-l-from":j()}],"mask-image-l-to-color":[{"mask-l-to":j()}],"mask-image-x-from-pos":[{"mask-x-from":D()}],"mask-image-x-to-pos":[{"mask-x-to":D()}],"mask-image-x-from-color":[{"mask-x-from":j()}],"mask-image-x-to-color":[{"mask-x-to":j()}],"mask-image-y-from-pos":[{"mask-y-from":D()}],"mask-image-y-to-pos":[{"mask-y-to":D()}],"mask-image-y-from-color":[{"mask-y-from":j()}],"mask-image-y-to-color":[{"mask-y-to":j()}],"mask-image-radial":[{"mask-radial":[Rn,Cn]}],"mask-image-radial-from-pos":[{"mask-radial-from":D()}],"mask-image-radial-to-pos":[{"mask-radial-to":D()}],"mask-image-radial-from-color":[{"mask-radial-from":j()}],"mask-image-radial-to-color":[{"mask-radial-to":j()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[pn]}],"mask-image-conic-from-pos":[{"mask-conic-from":D()}],"mask-image-conic-to-pos":[{"mask-conic-to":D()}],"mask-image-conic-from-color":[{"mask-conic-from":j()}],"mask-image-conic-to-color":[{"mask-conic-to":j()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:A()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:T()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Rn,Cn]}],filter:[{filter:["","none",Rn,Cn]}],blur:[{blur:$()}],brightness:[{brightness:[pn,Rn,Cn]}],contrast:[{contrast:[pn,Rn,Cn]}],"drop-shadow":[{"drop-shadow":["","none",m,On,Tn]}],"drop-shadow-color":[{"drop-shadow":j()}],grayscale:[{grayscale:["",pn,Rn,Cn]}],"hue-rotate":[{"hue-rotate":[pn,Rn,Cn]}],invert:[{invert:["",pn,Rn,Cn]}],saturate:[{saturate:[pn,Rn,Cn]}],sepia:[{sepia:["",pn,Rn,Cn]}],"backdrop-filter":[{"backdrop-filter":["","none",Rn,Cn]}],"backdrop-blur":[{"backdrop-blur":$()}],"backdrop-brightness":[{"backdrop-brightness":[pn,Rn,Cn]}],"backdrop-contrast":[{"backdrop-contrast":[pn,Rn,Cn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",pn,Rn,Cn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[pn,Rn,Cn]}],"backdrop-invert":[{"backdrop-invert":["",pn,Rn,Cn]}],"backdrop-opacity":[{"backdrop-opacity":[pn,Rn,Cn]}],"backdrop-saturate":[{"backdrop-saturate":[pn,Rn,Cn]}],"backdrop-sepia":[{"backdrop-sepia":["",pn,Rn,Cn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":b()}],"border-spacing-x":[{"border-spacing-x":b()}],"border-spacing-y":[{"border-spacing-y":b()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Rn,Cn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[pn,"initial",Rn,Cn]}],ease:[{ease:["linear","initial",x,Rn,Cn]}],delay:[{delay:[pn,Rn,Cn]}],animate:[{animate:["none",v,Rn,Cn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[f,Rn,Cn]}],"perspective-origin":[{"perspective-origin":y()}],rotate:[{rotate:I()}],"rotate-x":[{"rotate-x":I()}],"rotate-y":[{"rotate-y":I()}],"rotate-z":[{"rotate-z":I()}],scale:[{scale:O()}],"scale-x":[{"scale-x":O()}],"scale-y":[{"scale-y":O()}],"scale-z":[{"scale-z":O()}],"scale-3d":["scale-3d"],skew:[{skew:L()}],"skew-x":[{"skew-x":L()}],"skew-y":[{"skew-y":L()}],transform:[{transform:[Rn,Cn,"","none","gpu","cpu"]}],"transform-origin":[{origin:y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:B()}],"translate-x":[{"translate-x":B()}],"translate-y":[{"translate-y":B()}],"translate-z":[{"translate-z":B()}],"translate-none":["translate-none"],accent:[{accent:j()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:j()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Rn,Cn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Rn,Cn]}],fill:[{fill:["none",...j()]}],"stroke-w":[{stroke:[pn,Pn,Nn,_n]}],stroke:[{stroke:["none",...j()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function Kn(...e){return qn(Ft(e))}function Yn({onClick:e,className:t,iconSize:n=24,ariaLabel:s="Go back"}){return Y.jsx("button",{onClick:e,"aria-label":s,className:Kn("p-0 m-0 bg-transparent border-0 text-black",t),children:Y.jsx(o,{size:n})})}const Jn={className:"p-0 m-0 bg-transparent border-0 text-black"};function Xn({title:e,subtitle:t,onBack:n,right:s,onAdd:r,sticky:i=!1,dense:o=!1,denseSmall:l=!0,showBorder:c=!1,className:d="",reserveLeftPx:u=44,reserveRightPx:h=44,padSafeArea:m=!1,contentHeightPx:p=0,titleClassName:f="",subtitleClassName:g=""}){const x=l?"compactTiny":o?"compact":"comfortable",{py:v,minH:y}={compactTiny:{py:"py-1.5",minH:"min-h-[44px]"},compact:{py:"py-2",minH:"min-h-[52px]"},comfortable:{py:"py-3",minH:"min-h-[64px]"}}[x],b=0!==p,w=Ft(i&&"sticky top-0 z-30","relative w-full bg-background",m&&"pt-safe",c&&"border-b border-border",d),k=Ft("relative flex items-center w-full",!b&&y,!b&&v),E=`calc(100% - ${u+h}px)`;return Y.jsx("header",{className:w,children:Y.jsxs("div",{className:k,style:b?{height:p}:void 0,children:[Y.jsx("div",{className:"shrink-0 flex items-center",style:{width:u},children:n?Y.jsx(Yn,{onClick:n,...Jn,iconSize:28}):null}),Y.jsxs("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center m-0 pt-2 pb-2",style:{maxWidth:E},children:[Y.jsx("h1",{className:Ft("font-medium leading-1.5 text-black truncate text-[clamp(16px,4.2vw,28px)]",f),children:e}),t?Y.jsx("p",{className:Ft("mt-1",g??"text-xs text-black"),children:t}):null]}),Y.jsx("div",{className:"ml-auto shrink-0 flex items-center justify-end",style:{width:h},children:s??(r?Y.jsx("button",{onClick:r,"aria-label":"Add",...Jn,children:Y.jsx(a,{size:28})}):null)})]})})}const Zn={none:"p-0",xs:"p-2",sm:"p-3",md:"p-4",lg:"p-6"},Qn={none:"rounded-none",sm:"rounded-md",md:"rounded-lg",lg:"rounded-xl",xl:"rounded-2xl","2xl":"rounded-2xl"},es={none:"shadow-none",sm:"shadow-sm",md:"shadow-md"},ts={transparent:"bg-transparent",card:"bg-card",muted:"bg-soft-gray/30",translucent:"bg-card/80 backdrop-blur-sm"},ns={none:"",top:"border-t border-border",bottom:"border-b border-border",both:"border-y border-border"},ss={plain:"bg-transparent shadow-none rounded-none",card:"bg-card shadow-sm rounded-2xl",panel:"bg-card shadow-md rounded-2xl border border-border",translucent:"bg-card/80 backdrop-blur-sm shadow-sm rounded-2xl",muted:"bg-soft-gray/30 rounded-2xl shadow-none"};function rs({title:e,subtitle:t,actions:s,padding:r="md",radius:i="2xl",shadow:o="none",bg:a="transparent",divider:l="none",variant:c="plain",bleedX:d=!1,loading:u=!1,loadingBehavior:h="overlay",skeleton:m,className:p="",as:f,children:g,...x}){const v=f||"section",y=n.useId(),b=["w-full relative",c?ss[c]:"",ts[a],Qn[i],es[o],Zn[r],ns[l],d?"-mx-4 sm:mx-0":"",p].filter(Boolean).join(" "),w=e||s||t,k=u&&"replace"===h?m??Y.jsxs("div",{className:"animate-pulse",children:[w&&Y.jsxs("div",{className:"mb-3",children:[Y.jsx("div",{className:"h-4 w-1/3 bg-foreground/10 rounded"}),Y.jsx("div",{className:"mt-2 h-3 w-1/2 bg-foreground/5 rounded"})]}),Y.jsx("div",{className:"h-24 bg-foreground/5 rounded"})]}):g;return Y.jsxs(v,{className:b,"aria-labelledby":e?y:void 0,"aria-busy":u||void 0,...x,children:[w&&Y.jsxs("div",{className:"mb-3 flex items-start gap-3",children:[Y.jsxs("div",{className:"min-w-0 flex-1",children:[e?Y.jsx("h2",{id:y,className:"font-medium text-black truncate",children:e}):null,t?Y.jsx("p",{className:"text-sm text-black mt-0.5 truncate",children:t}):null]}),s?Y.jsx("div",{className:"shrink-0",children:s}):null]}),k,u&&"overlay"===h&&Y.jsx("div",{className:"absolute inset-0 rounded-inherit bg-card/60 backdrop-blur-[2px] grid place-items-center pointer-events-none",children:Y.jsxs("div",{className:"flex items-center gap-2 text-black",children:[Y.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-warm-coral border-t-transparent rounded-full"}),Y.jsx("span",{className:"text-sm",children:"Loadingâ€¦"})]})})]})}const is=e=>{switch(e){case"xss":return"var(--space-xss, 8px)";case"xs":return"var(--space-xs, 12px)";case"sm":return"var(--space-sm, 16px)";case"md":return"var(--space-md, 22px)";case"lg":return"var(--space-lg, 28px)";case"xl":return"var(--space-xl, 40px)";case"fluid":return"var(--space-fluid, 20px)"}};function os({y:e,x:t,as:n,className:s="",...r}){const i=n||"div",o={...e?{height:is(e)}:null,...t?{width:is(t)}:null},a=["shrink-0",s].filter(Boolean).join(" ");return Y.jsx(i,{"aria-hidden":!0,className:a,style:o,...r})}const as=e=>{switch(e){case"xss":return"var(--space-xss, 8px)";case"xs":return"var(--space-xs, 12px)";case"sm":return"var(--space-sm, 16px)";case"md":return"var(--space-md, 22px)";case"lg":return"var(--space-lg, 28px)";case"xl":return"var(--space-xl, 40px)";case"fluid":return"var(--space-fluid, 20px)"}},ls={start:"items-start",center:"items-center",end:"items-end",stretch:"items-stretch",baseline:"items-baseline"},cs={start:"justify-start",center:"justify-center",end:"justify-end",between:"justify-between",around:"justify-around",evenly:"justify-evenly"};function ds({direction:e="y",gap:t="sm",gapMode:s="gap",wrap:r=!1,align:i="stretch",justify:o="start",as:a,className:l="",children:c,...d}){const u=a||"div",h=["flex","y"===e?"flex-col":"flex-row",r&&"flex-wrap",ls[i],cs[o],l].filter(Boolean).join(" ");if("gap"===s)return Y.jsx(u,{className:h,style:{gap:as(t)},...d,children:c});const m=n.Children.toArray(c),p=m.length<=1?m:m.flatMap((n,s)=>0===s?[n]:["y"===e?Y.jsx(os,{y:t},`s-${s}`):Y.jsx(os,{x:t},`s-${s}`),n]);return Y.jsx(u,{className:h,...d,children:p})}const us={accent:{text:"text-black",border:"border-warm-coral",bgSoft:"bg-warm-coral/14",bgHover:"hover:bg-warm-coral/12"},sage:{text:"text-black",border:"border-[var(--warm-sage)]",bgSoft:"bg-[var(--warm-sage)]/14",bgHover:"hover:bg-[var(--warm-sage)]/12"},brown:{text:"text-black",border:"border-black",bgSoft:"bg-black/10",bgHover:"hover:bg-black/8"}};function hs({value:e,onChange:t,options:n,size:s="sm",variant:r="direct",tone:i="accent",className:o}){const a="sm"===s?{pad:"px-3 py-1.5",text:"text-[13px]"}:{pad:"px-4 py-2",text:"text-sm"},l=us[i];return Y.jsx("div",{role:"tablist","aria-label":"Segmented toggle",className:Ft("inline-flex items-center rounded-lg border border-border bg-card/70 backdrop-blur-sm p-0.5 gap-1",o),children:n.map(n=>{const s=n.value===e,i=Ft(a.pad,a.text,"font-medium border",l.bgSoft,l.border,l.text),o=Ft(a.pad,a.text,"border border-transparent","text-black","hover:text-black",l.bgHover),c=Ft(a.pad,a.text,"font-medium text-black",l.border,"bg-primary"),d=Ft(a.pad,a.text,"text-black","hover:text-black"),u="direct"===r?s?i:o:s?c:d;return Y.jsx("button",{role:"tab","aria-selected":s,className:Ft("relative isolate rounded-md transition-colors select-none focus:outline-none focus-visible:ring-2 focus-visible:ring-black/20",u),onClick:()=>t(n.value),children:n.label},String(n.value))})})}const ms=5,ps=e=>{const t=(e??"").toString().trim();return t?/^(unknown|undefined|null|n\/a)$/i.test(t)?"":t:""};async function fs(e,t={}){const{concurrency:n=ms,timer:s=Ie,userIdOverride:r}=t,i=s.start("routineLoader - load routine exercises");try{const t=s.start("routineLoader - fetch routine exercises"),i=await Ze.getUserRoutineExercisesWithDetails(e,r);t.endWithLog();const o=s.start("routineLoader - fetch exercise meta"),a=new Map;await Promise.all(i.map(async e=>{const t=!!ps(e.exercise_name),n=!!ps(e.muscle_group);if(!t||!n)try{const t=await Ze.getExercise(e.exercise_id);t&&a.set(e.exercise_id,t)}catch(s){oe("Failed to fetch exercise meta",e.exercise_id,s)}})),o.endWithLog();const l=[];for(let e=0;e<i.length;e+=n)l.push(i.slice(e,e+n));const c=[];for(const e of l){const t=await Promise.all(e.map(e=>Ze.getExerciseSetsForRoutine(e.routine_template_exercise_id,r).then(e=>e.sort((e,t)=>(e.set_order||0)-(t.set_order||0)).map(e=>({id:e.routine_template_exercise_set_id,set_order:e.set_order??0,reps:String(e.planned_reps??"0"),weight:String(e.planned_weight_kg??"0")}))).catch(t=>(oe("Failed to fetch sets for",e.routine_template_exercise_id,t),[]))));e.forEach((e,n)=>{const s=ps(e.exercise_name),r=ps(e.muscle_group),i=s&&r?void 0:a.get(e.exercise_id),o=s||ps(null==i?void 0:i.name),l=r||ps(null==i?void 0:i.muscle_group);c.push({templateId:e.routine_template_exercise_id,exerciseId:e.exercise_id,name:o,muscle_group:l||void 0,sets:t[n]})})}return c}finally{i.endWithLog()}}const gs=e=>"number"==typeof e?`${e}px`:e,xs=(e,t)=>{if(void 0===e&&void 0===t)return;const n=void 0!==e?gs(e):void 0,s=void 0!==t?gs(t):void 0;if(!s||"0"===s||"0px"===s)return n;if(!n||"0"===n||"0px"===n)return s;return"string"==typeof n&&["auto","fit-content","max-content","min-content"].includes(n)?n:`calc(${n} + ${s})`};function vs({actions:e,onOpenChange:t,backdropWidth:s,backdropWidthOffset:r,backdropHeight:i,backdropHeightOffset:o,backdropFadeDuration:l=400}){const[c,d]=n.useState(!1),[u,h]=n.useState(!1),m=n.useRef(null),[p,f]=n.useState({width:0,height:0});n.useLayoutEffect(()=>{if(!c||!m.current)return;const e=()=>{const e=m.current;if(!e)return;const t=e.getBoundingClientRect();f({width:t.width,height:t.height})};let t=null;const n=()=>{null!==t&&cancelAnimationFrame(t),t=window.requestAnimationFrame(()=>{e(),t=null})};e();const s="undefined"!=typeof ResizeObserver?new ResizeObserver(()=>n()):null,r=m.current;s&&r&&s.observe(r);const i=()=>n();return window.addEventListener("resize",i),()=>{s&&r&&(s.unobserve(r),s.disconnect()),window.removeEventListener("resize",i),null!==t&&cancelAnimationFrame(t)}},[c]);const g=void 0===s?p.width>0?p.width:void 0:s,x=void 0===i?p.height>0?p.height:void 0:i,v=xs(g,r),y=xs(x,o);n.useEffect(()=>{let e;return c?h(!0):u&&(e=setTimeout(()=>h(!1),l)),()=>{e&&clearTimeout(e)}},[c,u,l]);return Y.jsx("div",{className:"fixed right-4 bottom-20 z-40",children:Y.jsxs("div",{className:"flex flex-col items-end "+(c?"gap-4":""),children:[Y.jsxs("div",{ref:m,className:"relative",children:[u&&Y.jsx("div",{className:"pointer-events-none absolute right-0 bottom-0 translate-x-6 rounded-[36px] bg-white/90 shadow-xl blur-lg transition-all ease-out -z-10 transform "+(c?"opacity-100 scale-100":"opacity-0 scale-95"),style:{width:v,height:y,transitionDuration:`${l}ms`}}),c&&Y.jsx("div",{className:"flex flex-col items-end gap-4 z-10",children:e.map(e=>Y.jsxs("button",{onClick:()=>{d(!1),null==t||t(!1),e.onPress()},className:"flex items-center gap-3",children:[Y.jsx("span",{className:"uppercase whitespace-nowrap text-black text-xl font-bold tracking-wide",style:{textShadow:"0 2px 2px rgba(0,0,0,0.3)"},children:e.label}),e.icon&&Y.jsx("span",{className:"w-12 h-12 rounded-full bg-primary text-black shadow flex items-center justify-center",children:e.icon})]},e.label))})]}),Y.jsx("button",{onClick:()=>{d(e=>{const n=!e;return null==t||t(n),n})},"aria-label":"Speed dial","aria-expanded":c,className:"\n            relative z-20 w-16 h-16 rounded-full bg-primary text-black\n            shadow-lg flex items-center justify-center\n            transition-transform\n          ",children:Y.jsx(a,{className:"w-6 h-6 transition-transform "+(c?"rotate-45":"")})})]})})}function ys({children:e,variant:t="primary",size:n="md",className:s,...r}){return Y.jsx("button",{className:Kn({primary:"btn-tactile bg-primary hover:bg-primary-hover text-black",secondary:"btn-tactile bg-warm-cream hover:bg-warm-cream/90 text-black",sage:"btn-tactile bg-warm-sage hover:bg-warm-sage/90 text-black btn-tactile-sage",peach:"btn-tactile bg-warm-peach hover:bg-warm-peach/90 text-black",mint:"btn-tactile bg-warm-mint hover:bg-warm-mint/90 text-black",ghost:"bg-transparent hover:bg-transparent text-black shadow-none hover:shadow-none active:shadow-none rounded-none transition-none hover:translate-y-0 active:translate-y-0"}[t],{sm:"px-3 py-2 text-sm",md:"px-4 py-3",lg:"px-6 py-4 text-lg"}[n],s),...r,children:e})}function bs({as:e="div",leading:t,leadingClassName:n="w-12 h-12 rounded-xl bg-black/10 flex items-center justify-center",primary:s,primaryClassName:r="text-base font-semibold text-black",secondary:i,secondaryClassName:o="text-sm text-black",tertiary:a,tertiaryClassName:d="text-sm text-black",trailing:u,rightIcon:h,rightIconRotated:m=!1,onRightIconClick:p,className:f="",...g}){const x=!!i||!!a?"py-4":"py-3",v="button"===e?"w-full text-left focus:outline-none":"",y="button"===e?"button":"div";return Y.jsxs(y,{className:`flex items-center gap-3 ${x} ${v} ${f}`,...g,children:[t&&Y.jsx("div",{className:`shrink-0 ${n}`,children:t}),Y.jsxs("div",{className:"flex-1 min-w-0",children:[Y.jsx("div",{className:`${r} truncate`,children:s}),i&&Y.jsx("div",{className:`${o} truncate`,children:i}),a&&Y.jsx("div",{className:`${d} truncate`,children:a})]}),u,h&&Y.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),null==p||p(e)},className:"ml-2 text-black",children:"kebab"===h?Y.jsx(l,{size:18}):Y.jsx(c,{size:18,className:m?"transform rotate-180":""})})]})}var ws=(e=>(e.Editable="editable",e.ReadOnly="readonly",e))(ws||{});var ks=(e=>(e.My="my",e.Sample="sample",e))(ks||{});const Es=[{bg:"bg-soft-gray",iconBg:"bg-warm-coral",emoji:"ğŸ‹ï¸"},{bg:"bg-[var(--warm-cream)]",iconBg:"bg-black",emoji:"ğŸƒ"},{bg:"bg-soft-gray",iconBg:"bg-[var(--warm-sage)]",emoji:"ğŸ§˜"},{bg:"bg-[var(--warm-cream)]",iconBg:"bg-warm-coral",emoji:"ğŸ¤¸"},{bg:"bg-soft-gray",iconBg:"bg-black",emoji:"ğŸ”¥"}];function Ss({routines:e,routinesError:t,isLoading:n,reloadRoutines:s,view:r,exerciseCounts:i,loadingCounts:o,canEdit:a,onSelectRoutine:l,openActions:c}){return Y.jsx(rs,{variant:"plain",padding:"none",className:"space-y-3",loading:n,loadingBehavior:"replace",children:!n&&Y.jsx(Y.Fragment,{children:t?Y.jsx(rs,{variant:"card",title:"Error Loading Routines",actions:Y.jsx(ys,{onClick:s,variant:"secondary",className:"px-4 py-2 text-sm rounded-xl border-0 font-medium",children:"Try Again"}),children:Y.jsxs("div",{className:"text-center py-4",children:[Y.jsx("div",{className:"w-12 h-12 mx-auto mb-3 bg-destructive-light rounded-full flex items-center justify-center",children:Y.jsx(d,{className:"w-5 h-5 text-black"})}),Y.jsx("p",{className:"text-black text-sm",children:t})]})}):0===e.length?Y.jsx(rs,{variant:"card",className:"text-center",children:Y.jsx("p",{className:"text-black text-sm",children:r===ks.My?"Start by adding a new routine":"No sample routines found"})}):Y.jsx("div",{className:"space-y-3",children:e.map((e,t)=>{var n;const s=Es[t%Es.length],d=(null==(n=e.muscle_group_summary)?void 0:n.trim())||"â€”",m=i[e.routine_template_id]??0,p=m>0?10*m:null,f=r===ks.My?ws.Editable:ws.ReadOnly;return Y.jsx("button",{onClick:()=>l(e.routine_template_id,e.name,f),className:"w-full rounded-2xl border border-border card-modern shadow-xl hover:shadow-xl transition-all text-left",style:{border:"2px solid var(--border)"},children:Y.jsx(bs,{leading:Y.jsx("div",{className:`w-8 h-8 ${s.iconBg} rounded-lg grid place-items-center text-black text-lg`,children:Y.jsx("span",{children:s.emoji})}),leadingClassName:`w-12 h-12 rounded-xl flex items-center justify-center ${s.bg}`,primary:e.name,secondary:d,tertiary:Y.jsxs("div",{className:"mt-2 flex items-center gap-4 text-black",children:[Y.jsxs("span",{className:"inline-flex items-center gap-1",children:[Y.jsx(u,{size:14}),o?"â€”":null!==p?`${p} min`:"â€”"]}),Y.jsxs("span",{className:"inline-flex items-center gap-1",children:[Y.jsx(h,{size:14}),o?"â€”":`${m} exercise${1===m?"":"s"}`]})]}),primaryClassName:"font-medium text-black text-[clamp(16px,4.5vw,19px)]",secondaryClassName:"text-[clamp(11px,3.2vw,12px)] text-black",tertiaryClassName:"text-[clamp(11px,3.2vw,12px)]",className:"p-4",rightIcon:a?"kebab":void 0,onRightIconClick:t=>c(e,t)})},e.routine_template_id)})})})})}const Cs=(...e)=>e.filter(Boolean).join(" ");function Ns({open:e,onClose:t,header:n,footer:s,children:r,maxWidthClassName:i="max-w-md",className:o="",innerClassName:a="",zIndex:l=60,closeOnBackdrop:c=!0,fullWidth:d=!1}){if(!e)return null;$t();const u="var(--app-kb-inset, var(--kb-inset, var(--keyboard-inset, 0px)))";return Y.jsxs("div",{className:Cs("fixed inset-0",o),style:{zIndex:l},"aria-modal":"true",role:"dialog",onClick:c?t:void 0,children:[Y.jsx("div",{className:"absolute inset-0 bg-overlay/30 backdrop-blur-[2px]"}),Y.jsx("div",{className:"absolute inset-x-0 bottom-0",onClick:e=>e.stopPropagation(),children:Y.jsx("div",{className:Cs("w-full",d?"px-0 max-w-none":Cs("mx-auto px-4",i)),children:Y.jsxs("div",{className:Cs("bg-card rounded-t-2xl shadow-2xl border-t border-x border-border overflow-hidden",a),children:[Y.jsx("div",{className:"flex justify-center py-2",children:Y.jsx("div",{className:"h-1.5 w-10 rounded-full bg-border"})}),n?Y.jsx("div",{className:"px-4 pb-2",children:n}):null,Y.jsx("div",{className:"overflow-y-auto",style:{maxHeight:`calc(85svh - ${u})`,paddingBottom:s?u:`calc(var(--app-bottom-h, 0px) + env(safe-area-inset-bottom) + ${u})`},children:r}),s?Y.jsx("div",{className:"px-4 pt-2",style:{paddingBottom:`calc(var(--app-bottom-h, 0px) + env(safe-area-inset-bottom) + ${u})`},children:s}):null]})})})]})}function _s({open:e,onClose:t,title:n,message:s,actions:r,cancelText:i="Cancel",zIndex:o=60,fullWidth:a=!0,children:l}){const c=n?Y.jsx("div",{className:"text-center",children:"string"==typeof n?Y.jsx("h3",{className:"font-medium text-black text-[clamp(14px,3.8vw,18px)]",children:n}):n}):void 0;return Y.jsx(Ns,{open:e,onClose:t,header:c,footer:null!==i?Y.jsx(ys,{variant:"secondary",className:"w-full py-3 rounded-xl border-0 font-medium",onClick:t,children:i}):null,zIndex:o,fullWidth:a,children:Y.jsxs("div",{className:"p-4 space-y-4",children:[s&&Y.jsx("p",{className:"text-sm text-black",children:s}),l,Y.jsx("div",{className:"space-y-3",children:r.map((e,t)=>"button"===e.type?Y.jsx(ys,{onClick:e.onClick,disabled:e.disabled,variant:"secondary"===e.variant?"secondary":"primary",className:Kn("w-full rounded-xl border-0 font-medium","destructive"===e.variant&&"bg-destructive hover:bg-destructive/90 text-black"),children:Y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.icon,Y.jsx("span",{children:e.label})]})},t):Y.jsxs("button",{className:Kn("flex w-full items-center gap-3 px-4 py-3 text-left hover:bg-gray-50","destructive"===e.variant&&"text-black hover:bg-destructive-light"),onClick:e.onClick,disabled:e.disabled,children:[e.icon,Y.jsx("span",{children:e.label})]},t))})]})})}function js({routine:e,onClose:t,reloadRoutines:s}){const[r,i]=n.useState("main"),[o,a]=n.useState(""),[l,c]=n.useState(!1),[d,u]=n.useState(!1);if(n.useEffect(()=>{e&&(i("main"),a(e.name),c(!1),u(!1))},[e]),!e)return null;const h=async()=>{o.trim()&&(c(!0),await Ze.renameRoutine(e.routine_template_id,o.trim()),await s(),dt.success("Routine renamed"),c(!1),t())};return Y.jsxs(Y.Fragment,{children:["main"===r&&Y.jsx(_s,{open:!!e,onClose:t,title:e.name,actions:[{label:"Rename Routine",onClick:()=>i("rename"),type:"button"},{label:"Delete Routine",onClick:()=>i("delete"),type:"button",variant:"destructive"}]}),"rename"===r&&Y.jsx(_s,{open:!!e,onClose:t,title:"Rename Routine",cancelText:null,actions:[{label:l?"Savingâ€¦":"Save",onClick:h,type:"button",disabled:!o.trim()||l},{label:"Cancel",onClick:()=>i("main"),type:"button",variant:"secondary",disabled:l}],children:Y.jsxs("div",{className:"space-y-3",children:[Y.jsx("label",{className:"text-sm text-black",children:"New name"}),Y.jsx("input",{autoFocus:!0,value:o,onChange:e=>a(e.target.value),className:"w-full rounded-lg border border-border px-3 py-2 outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",placeholder:"Enter routine name",onKeyDown:async e=>{"Enter"!==e.key||l||await h()}})]})}),"delete"===r&&Y.jsx(_s,{open:!!e,onClose:t,title:`Delete ${e.name}?`,cancelText:null,message:"This will remove it from your list",actions:[{label:d?"Deletingâ€¦":"Delete",onClick:async()=>{u(!0),await Ze.deleteRoutine(e.routine_template_id),await s(),dt.success("Routine deleted"),u(!1),t()},type:"button",variant:"destructive",disabled:d},{label:"Cancel",onClick:()=>i("main"),type:"button",variant:"secondary",disabled:d}]})]})}function As({onCreateRoutine:e,onEditMeasurements:t,onSelectRoutine:s,onOverlayChange:r,bottomBar:i}){const{userToken:o}=bt(),[a,l]=n.useState(ks.My),[c,d]=n.useState([]),[u,h]=n.useState(!0),[f,g]=n.useState(null),[x,v]=n.useState({}),[y,b]=n.useState(!1),[w,k]=n.useState(null),[E,S]=n.useState(null),{steps:C,goal:N,isLoading:_}=function(){const[e,t]=n.useState({steps:0,lastUpdated:0,goal:1e4}),[s,r]=n.useState(!1),i=n.useRef(null),o=n.useRef(0),{userToken:a}=bt(),l=n.useCallback(()=>!document.hidden,[]),c=n.useCallback(()=>Date.now()-o.current>=6e5,[]),d=n.useCallback(async()=>{if(a)try{const e=await Ze.getUserStepGoal();t(t=>({...t,goal:e}))}catch(e){ie("âŒ [steps] Error loading step goal:",e)}},[a]),u=n.useCallback(async(e=!1)=>{if(e||l()&&c()){r(!0),o.current=Date.now();try{const e=await Nt();t(t=>({steps:e,lastUpdated:Date.now(),goal:t.goal}))}catch(n){ie("âŒ [steps] Error during read:",n),t(e=>({steps:0,lastUpdated:Date.now(),goal:e.goal}))}finally{r(!1)}}},[l,c]),h=n.useCallback(async()=>{await u(!0)},[u]);n.useEffect(()=>{a&&d()},[a,d]),n.useEffect(()=>(a&&(u(),i.current=setInterval(()=>u(),6e4)),()=>{i.current&&clearInterval(i.current)}),[a,u]);const m=e.goal>0?e.steps/e.goal*100:0,p=Math.min(Math.max(m,0),100);return{steps:e.steps,goal:e.goal,progressPercentage:p,isLoading:s,refreshStepGoal:d,forceRefreshStepData:h}}(),j=a===ks.My,A=async(e=a)=>{h(!0),g(null);try{const t=e===ks.My?await Ze.getUserRoutines():await Ze.getSampleRoutines();t.sort((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime()),d(Array.isArray(t)?t:[])}catch(t){ie(String(t)),g(t instanceof Error?t.message:"Failed to load routines")}finally{h(!1)}};n.useEffect(()=>{a!==ks.My||o?A(a):d([])},[a,o]),n.useEffect(()=>{(async()=>{if(o)try{const e=await Ze.getMyProfile();S(e)}catch(e){ie("Failed to load profile for dashboard greeting",e)}})()},[o]);const T=()=>(null==E?void 0:E.first_name)&&""!==E.first_name.trim()?E.first_name.split(" ")[0]:(null==E?void 0:E.display_name)&&""!==E.display_name.trim()?E.display_name.split(" ")[0]:null;n.useEffect(()=>{let e=!1;return(async()=>{const t=Ie.start("fetchExerciseCounts");if(0===c.length)return le("ğŸ” DGB [WORKOUT_SCREEN] No routines, skipping"),v({}),void t.endWithLog();b(!0);try{const t=await Promise.all(c.map(async e=>{const t=Ie.start(`fetchExerciseCounts - routine ${e.routine_template_id}`);le("ğŸ” DGB [WORKOUT_SCREEN] Processing routine:",e.routine_template_id,"name:",e.name);const n=await fs(e.routine_template_id,{timer:Ie});let s=!1;if(j){const t=e.muscle_group_summary;n.length>0&&(!t||""===t.trim())?(ae("ğŸ” DGB [WORKOUT_SCREEN] Routine needs recompute:",e.routine_template_id,"summary:",t,"active exercises:",n.length),s=!0):0===n.length&&le("ğŸ” DGB [WORKOUT_SCREEN] Routine has 0 active exercises, skipping recompute:",e.routine_template_id,"summary:",t)}return t.endWithLog(),{id:e.routine_template_id,count:n.length,needsRecompute:s}})),n=t.map(({id:e,count:t})=>[e,t]),s=t.filter(e=>e.needsRecompute).map(e=>e.id);if(e||v(Object.fromEntries(n)),j&&s.length>0){const t=Ie.start("fetchExerciseCounts - muscle summary recompute");le("ğŸ” DGB [WORKOUT_SCREEN] Triggering muscle summary recompute for routines:",s),le("ğŸ” DGB [WORKOUT_SCREEN] canEdit:",j,"needsRecompute count:",s.length);const n=await Promise.allSettled(s.map(e=>(le("ğŸ” DGB [WORKOUT_SCREEN] Calling recomputeAndSaveRoutineMuscleSummary for routine ID:",e),Ze.recomputeAndSaveRoutineMuscleSummary(e))));if(!e){le("ğŸ” DGB [WORKOUT_SCREEN] Muscle summary recompute completed, results:",n);const e=n.filter(e=>"fulfilled"===e.status).length;le("ğŸ” DGB [WORKOUT_SCREEN] Successful recomputes:",e,"out of",s.length),e>0&&(le("ğŸ” DGB [WORKOUT_SCREEN] Muscle summary recompute completed successfully"),le("ğŸ” DGB [WORKOUT_SCREEN] No need to trigger routine state update - let cache handle it"))}t.endWithLog()}}catch(n){ie("Failed to load exercise counts / recompute summaries",n)}finally{e||b(!1),t.endWithLog()}})(),()=>{e=!0}},[c,j]),n.useEffect(()=>()=>{w&&(null==r||r(!1))},[]);return Y.jsxs(Lt,{header:Y.jsx(Xn,{title:"My Routines",showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:i,bottomBarSticky:!0,contentClassName:"",headerInScrollArea:!0,children:[Y.jsxs(ds,{gap:"fluid",children:[Y.jsx(rs,{variant:"plain",padding:"none",className:"text-center",children:Y.jsx("p",{className:"text-4xl md:text-5xl font-extrabold tracking-tight leading-tight text-transparent bg-clip-text bg-gradient-to-r from-rose-500 via-orange-400 to-amber-500 drop-shadow-sm",children:T()?`Welcome back, ${T()}!`:"Welcome back!"})}),Y.jsx(os,{y:"sm"}),Y.jsx(rs,{variant:"plain",padding:"none",className:"text-center",children:Y.jsx("p",{className:"text-sm text-black mt-1",children:a===ks.My?"Select a routine to start your workout":"Explore prebuilt routines to get started"})}),Y.jsx(os,{y:"sm"}),Y.jsx(rs,{variant:"plain",padding:"none",children:Y.jsx(Rt,{steps:_?null:C,goal:_?null:N,recoveryPercent:null,strain:null,onStepsClick:()=>{},onRecoveryClick:()=>{},onStrainClick:()=>{}})}),Y.jsx(os,{y:"xss"}),Y.jsx(rs,{variant:"plain",padding:"none",className:"flex items-center justify-start px-4",children:Y.jsx(hs,{value:a,onChange:l,options:[{value:ks.My,label:"My routines"},{value:ks.Sample,label:"Sample routines"}],size:"sm",className:"data-[checked=true]:bg-warm-coral/20 data-[checked=true]:text-black",variant:"filled",tone:"accent"})}),Y.jsx(Ss,{routines:c,routinesError:f,isLoading:u,reloadRoutines:()=>A(),view:a,exerciseCounts:x,loadingCounts:y,canEdit:j,onSelectRoutine:s,openActions:(e,t)=>{j&&(t.stopPropagation(),k(e),null==r||r(!0))}}),Y.jsx(os,{y:"lg"}),j&&w&&Y.jsx(js,{routine:w,onClose:()=>{k(null),null==r||r(!1)},reloadRoutines:()=>A(ks.My)})]}),Y.jsx(vs,{actions:[{label:"Create Routine",onPress:e,icon:Y.jsx(m,{className:"w-6 h-6"})},{label:"Edit Measurement",onPress:t,icon:Y.jsx(p,{className:"w-6 h-6"})}],backdropWidthOffset:"100px",backdropHeightOffset:"40px"})]})}function Ts({className:e,type:t,...n}){return Y.jsx("input",{type:t,"data-slot":"input",className:Kn("file:text-black placeholder:text-black selection:bg-primary selection:text-black border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function Rs({onBack:e,onRoutineCreated:t}){const[s,r]=n.useState(""),[i,o]=n.useState(!1),{userToken:l}=bt();return Y.jsx(Lt,{header:Y.jsx(Xn,{title:"Create Routine",onBack:e,showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",padContent:!1,showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:null,bottomBarSticky:!0,contentClassName:"",children:Y.jsxs(ds,{gap:"fluid",children:[Y.jsx(os,{y:"sm"}),Y.jsx(rs,{variant:"card",padding:"md",className:"space-y-3",children:Y.jsx(Ts,{value:s,onChange:e=>r(e.target.value),placeholder:"Routine Name",className:"bg-input-background border-border text-black placeholder:text-black h-12 md:h-12 text-base md:text-lg rounded-xl focus:border-warm-coral focus:ring-warm-coral/20",maxLength:50,autoFocus:!0,disabled:i})}),Y.jsx(os,{y:"sm"}),Y.jsx(rs,{variant:"plain",padding:"none",children:Y.jsx(ys,{onClick:async()=>{const e=s.trim();if(e)if(l)try{o(!0);const n=await Ze.createUserRoutine(e);if(!n)throw new Error("Failed to create routine");t(e,n.routine_template_id)}catch(n){const e=n instanceof Error?n.message:"Failed to create routine";dt.error(e)}finally{o(!1)}else dt.error("Please sign in to create routines");else dt.error("Please enter a routine name")},disabled:!s.trim()||i,className:"w-full h-12 md:h-14 bg-primary hover:bg-primary-hover text-black font-medium text-sm md:text-base rounded-full disabled:opacity-50 disabled:cursor-not-allowed border-0",children:Y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[Y.jsx(a,{size:20}),i?"CREATING...":"ADD ROUTINE"]})})})]})})}function Ps({children:e,variant:t="primary",className:n,...s}){return Y.jsx(ys,{variant:t,size:"sm",className:Kn("px-6 md:px-8 py-3 font-medium border-0 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",n),...s,children:e})}function Ms({activeTab:e,onTabChange:t,children:n,className:s=""}){const r=[{id:"workouts",label:"Workouts",icon:m},{id:"progress",label:"Progress",icon:h},{id:"profile",label:"Profile",icon:f}];return n?Y.jsx("nav",{"aria-label":"Bottom navigation",className:`w-full h-14 flex items-center justify-center bg-background pointer-events-auto ${s}`,children:Y.jsx("div",{className:"flex w-full items-center justify-center gap-3",children:n})}):Y.jsx("nav",{"aria-label":"Bottom navigation",className:`w-full h-14 flex items-center justify-center bg-background pointer-events-auto ${s}`,children:Y.jsx("ul",{className:"w-full flex justify-around",children:r.map(n=>{const s=e===n.id;return Y.jsx("li",{className:"flex-1",children:Y.jsxs("button",{onClick:()=>t&&t(n.id),className:"w-full flex flex-col items-center gap-1 py-2 text-xs","aria-current":s?"page":void 0,children:[Y.jsx("span",{children:Y.jsx(n.icon,{size:20,className:s?"text-black fill-black":"text-gray-500 fill-gray-500"})}),Y.jsx("span",{className:s?"font-medium text-black fill-black":"text-gray-500 fill-gray-500",children:n.label})]})},n.id)})})})}const Ds="Other",$s=n.memo(function({value:e,onChange:t,placeholder:n}){return Y.jsxs("div",{className:"relative",children:[Y.jsx(g,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-black",size:20}),Y.jsx(Ts,{value:e,onChange:e=>t(e.target.value),placeholder:n??"Search for an exercise...",className:"bg-input-background border-border text-black placeholder:text-black h-12 md:h-12 pl-10 pr-4 rounded-xl focus:border-warm-coral focus:ring-warm-coral/20"})]})}),Is=n.memo(function({exercise:e,selected:t,onSelect:n}){const s=e.name.substring(0,2).toUpperCase(),r=(e.muscle_group||"").trim()||Ds;return Y.jsx(bs,{as:"button",type:"button","aria-pressed":t,onClick:()=>n(e),leading:Y.jsx("span",{className:"font-medium text-black",children:s}),leadingClassName:"w-8 h-8 rounded-xl bg-card/10 grid place-items-center",primary:e.name,secondary:r,primaryClassName:"font-medium text-black text-[clamp(16px,4.5vw,19px)]",secondaryClassName:"text-[clamp(11px,3.2vw,12px)] text-black",className:["w-full rounded-2xl border border-border card-modern shadow-xl hover:shadow-xl transition-all text-left px-4 py-0",t?"bg-warm-coral border-warm-coral":"hover:bg-warm-coral/10"].join(" "),style:{border:"2px solid var(--border)"}})});function Os({groupedAZ:e,selectedExercises:t,onSelect:s,onLoadMore:r,hasMore:i,isLoadingMore:o}){const a=n.useMemo(()=>Object.keys(e).sort((e,t)=>e.localeCompare(t)),[e]),l=n.useMemo(()=>t.map(e=>e.exercise_id),[t]),c=n.useMemo(()=>a.reduce((t,n)=>t+e[n].length,0),[a,e]),d=n.useRef(null);if(n.useEffect(()=>{const e=d.current;if(!e)return;const t=new IntersectionObserver(e=>{e[0].isIntersecting&&i&&!o&&r()});return t.observe(e),()=>t.disconnect()},[r,i,o,c]),0===a.length)return null;let u=-1;return Y.jsxs(Y.Fragment,{children:[a.map(t=>Y.jsxs("div",{children:[Y.jsx("h2",{className:"text-xs md:text-sm text-black font-medium mb-3 px-2 tracking-wide",children:t}),Y.jsx("div",{className:"space-y-2",children:e[t].map(e=>{u++;const t=u===c-5?d:void 0;return Y.jsx("div",{ref:t,children:Y.jsx(Is,{exercise:e,selected:l.includes(e.exercise_id),onSelect:s})},e.exercise_id)})})]},t)),o&&Y.jsx("div",{className:"text-center text-black py-4",children:"Loading..."})]})}function Ls({routineId:e,routineName:t,onBack:s,onExerciseSelected:r,isFromExerciseSetup:i=!0}){const{userToken:o}=bt(),a=It(),l=n.useCallback(()=>{var e;a&&(null==(e=document.activeElement)||e.blur())},[a]),[c,d]=n.useState(""),[u,h]=n.useState("all"),[m,p]=n.useState("all"),[f,g]=n.useState([]),[x,v]=n.useState([]),[y,b]=n.useState(!0),[w,k]=n.useState(!1),[E,S]=n.useState(!0),[C,N]=n.useState(!1),[_,j]=n.useState(!1),[A,T]=n.useState(!1),R=n.useRef(0),[P,M]=n.useState([]),[D,$]=n.useState(!1),I=n.useRef("all");n.useEffect(()=>{const e=Ie.start("AddExercisesToRoutineScreen render");return()=>{const t=e.end();ae(`[ADD_EXERCISES] Component render: ${t.duration.toFixed(2)}ms`)}},[]);const O=n.useCallback(async(e,t,n)=>{const s=e?0:R.current;try{e?(b(!0),S(!1),R.current=0):N(!0),j(!1);const r=Ie.start("AddExercisesToRoutineScreen fetch exercises"),i=await Ze.getExercises({limit:30,offset:30*s,muscleGroup:"all"===t||t===Ds?void 0:t,other:t===Ds,search:n.trim()||void 0}),o=r.end();ae(`[ADD_EXERCISES] Fetch exercises: ${o.duration.toFixed(2)}ms`),g(t=>e?i:[...t,...i]),S(30===i.length),R.current=s+1,p(t),j(!1)}catch(r){ie("[AddExercises] fetch error:",r),dt.error("Failed to load exercises"),e&&g([]),j(!0)}finally{e?b(!1):N(!1)}},[]);n.useEffect(()=>{let e=!0;return Ze.getMuscleGroups().then(t=>{e&&M(t)}).catch(e=>ie("[AddExercises] failed to load muscle groups",e)).finally(()=>{e&&$(!0)}),()=>{e=!1}},[]),n.useEffect(()=>{I.current=u},[u]),n.useEffect(()=>{if(!D)return;const e=setTimeout(()=>O(!0,I.current,c),300);return()=>clearTimeout(e)},[D,c,O]),n.useEffect(()=>{let e;return y?e=setTimeout(()=>T(!0),1e3):T(!1),()=>clearTimeout(e)},[y]);const L=n.useMemo(()=>{const e=new Map;for(const t of f){const n=(t.muscle_group||"").trim()||Ds;(e.get(n)??e.set(n,[]).get(n)).push(t)}return e},[f]),B=n.useMemo(()=>{var e;const t=Ie.start("AddExercisesToRoutineScreen filter exercises"),n="all"===m?f:L.get(m)??[],s=c.trim().toLowerCase(),r=s?n.filter(e=>e.name.toLowerCase().includes(s)):n,i={};for(const a of r){const t=((null==(e=a.name)?void 0:e[0])||"#").toUpperCase();(i[t]||(i[t]=[])).push(a)}const o=t.end();return ae(`[ADD_EXERCISES] Filter exercises (${r.length} results): ${o.duration.toFixed(2)}ms`),i},[f,L,m,c]),F=n.useMemo(()=>[{value:"all",label:"ALL"},...P.map(e=>({value:e,label:e}))],[P]);return Y.jsx(Lt,{header:Y.jsx(Xn,{title:"Select exercises",onBack:s,showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",padContent:!1,showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:Y.jsx(Ms,{children:Y.jsx(Ps,{onClick:async()=>{if(0===x.length)return dt.error("Please select an exercise");if(!o)return dt.error("Please sign in to add exercises");k(!0);try{r(x)}catch(e){const t=e instanceof Error?e.message:"Please try again.";dt.error(`Failed to proceed: ${t}`)}finally{k(!1)}},disabled:0===x.length||w,className:"sm:w-auto",children:w?"ADDING...":x.length>0?`ADD (${x.length})`:"ADD"})}),bottomBarSticky:!0,contentClassName:"",onScroll:l,children:Y.jsxs(ds,{gap:"fluid",children:[Y.jsx(os,{y:"xss"}),Y.jsx(rs,{variant:"plain",padding:"none",children:D?Y.jsx("div",{className:"overflow-x-auto no-scrollbar",children:Y.jsx(hs,{value:u,onChange:e=>{h(e),O(!0,e,c)},options:F,size:"sm",variant:"filled",tone:"accent",className:"min-w-max"})}):Y.jsx("div",{className:"py-2 flex justify-center",children:Y.jsx("div",{className:"w-6 h-6 border-4 border-warm-coral border-t-transparent rounded-full animate-spin"})})}),Y.jsx(rs,{variant:"plain",padding:"none",children:Y.jsx($s,{value:c,onChange:d})}),Y.jsx(os,{y:"xss"}),Y.jsx(rs,{variant:"plain",padding:"none",className:"space-y-6",children:_?Y.jsx(rs,{variant:"card",className:"text-center",children:Y.jsx("p",{className:"text-black",children:"Failed to load exercises"})}):Y.jsxs(Y.Fragment,{children:[Y.jsx(Os,{groupedAZ:B,selectedExercises:x,onSelect:e=>{v(t=>t.find(t=>t.exercise_id===e.exercise_id)?t.filter(t=>t.exercise_id!==e.exercise_id):[...t,e])},onLoadMore:()=>O(!1,m,c),hasMore:E,isLoadingMore:C}),y&&A&&Y.jsx("div",{className:"py-6 flex justify-center",children:Y.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-warm-coral border-t-transparent rounded-full"})})]})}),Y.jsx(os,{y:"xl"})]})})}const Bs=n.createContext({});function Fs(e){const t=n.useRef(null);return null===t.current&&(t.current=e()),t.current}const Us="undefined"!=typeof window,Hs=Us?n.useLayoutEffect:n.useEffect,Vs=n.createContext(null);function Ws(e,t){-1===e.indexOf(t)&&e.push(t)}function zs(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Gs=(e,t,n)=>n>t?t:n<e?e:n;const qs={},Ks=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Ys(e){return"object"==typeof e&&null!==e}const Js=e=>/^0[^.\s]+$/u.test(e);function Xs(e){let t;return()=>(void 0===t&&(t=e()),t)}const Zs=e=>e,Qs=(e,t)=>n=>t(e(n)),er=(...e)=>e.reduce(Qs),tr=(e,t,n)=>{const s=t-e;return 0===s?1:(n-e)/s};class nr{constructor(){this.subscriptions=[]}add(e){return Ws(this.subscriptions,e),()=>zs(this.subscriptions,e)}notify(e,t,n){const s=this.subscriptions.length;if(s)if(1===s)this.subscriptions[0](e,t,n);else for(let r=0;r<s;r++){const s=this.subscriptions[r];s&&s(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const sr=e=>1e3*e,rr=e=>e/1e3;function ir(e,t){return t?e*(1e3/t):0}const or=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function ar(e,t,n,s){if(e===t&&n===s)return Zs;const r=t=>function(e,t,n,s,r){let i,o,a=0;do{o=t+(n-t)/2,i=or(o,s,r)-e,i>0?n=o:t=o}while(Math.abs(i)>1e-7&&++a<12);return o}(t,0,1,e,n);return e=>0===e||1===e?e:or(r(e),t,s)}const lr=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,cr=e=>t=>1-e(1-t),dr=ar(.33,1.53,.69,.99),ur=cr(dr),hr=lr(ur),mr=e=>(e*=2)<1?.5*ur(e):.5*(2-Math.pow(2,-10*(e-1))),pr=e=>1-Math.sin(Math.acos(e)),fr=cr(pr),gr=lr(pr),xr=ar(.42,0,1,1),vr=ar(0,0,.58,1),yr=ar(.42,0,.58,1),br=e=>Array.isArray(e)&&"number"==typeof e[0],wr={linear:Zs,easeIn:xr,easeInOut:yr,easeOut:vr,circIn:pr,circInOut:gr,circOut:fr,backIn:ur,backInOut:hr,backOut:dr,anticipate:mr},kr=e=>{if(br(e)){e.length;const[t,n,s,r]=e;return ar(t,n,s,r)}return"string"==typeof e?wr[e]:e},Er=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Sr(e,t){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Er.reduce((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,s=!1,r=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(t){i.has(t)&&(l.schedule(t),e()),t(o)}const l={schedule:(e,r=!1,o=!1)=>{const a=o&&s?t:n;return r&&i.add(e),a.has(e)||a.add(e),e},cancel:e=>{n.delete(e),i.delete(e)},process:e=>{o=e,s?r=!0:(s=!0,[t,n]=[n,t],t.forEach(a),t.clear(),s=!1,r&&(r=!1,l.process(e)))}};return l}(i),e),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:m,postRender:p}=o,f=()=>{const i=qs.useManualTiming?r.timestamp:performance.now();n=!1,qs.useManualTiming||(r.delta=s?1e3/60:Math.max(Math.min(i-r.timestamp,40),1)),r.timestamp=i,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),d.process(r),u.process(r),h.process(r),m.process(r),p.process(r),r.isProcessing=!1,n&&t&&(s=!1,e(f))};return{schedule:Er.reduce((t,i)=>{const a=o[i];return t[i]=(t,i=!1,o=!1)=>(n||(n=!0,s=!0,r.isProcessing||e(f)),a.schedule(t,i,o)),t},{}),cancel:e=>{for(let t=0;t<Er.length;t++)o[Er[t]].cancel(e)},state:r,steps:o}}const{schedule:Cr,cancel:Nr,state:_r,steps:jr}=Sr("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Zs,!0);let Ar;function Tr(){Ar=void 0}const Rr={now:()=>(void 0===Ar&&Rr.set(_r.isProcessing||qs.useManualTiming?_r.timestamp:performance.now()),Ar),set:e=>{Ar=e,queueMicrotask(Tr)}},Pr=e=>t=>"string"==typeof t&&t.startsWith(e),Mr=Pr("--"),Dr=Pr("var(--"),$r=e=>!!Dr(e)&&Ir.test(e.split("/*")[0].trim()),Ir=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Or={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},Lr={...Or,transform:e=>Gs(0,1,e)},Br={...Or,default:1},Fr=e=>Math.round(1e5*e)/1e5,Ur=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const Hr=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Vr=(e,t)=>n=>Boolean("string"==typeof n&&Hr.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),Wr=(e,t,n)=>s=>{if("string"!=typeof s)return s;const[r,i,o,a]=s.match(Ur);return{[e]:parseFloat(r),[t]:parseFloat(i),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},zr={...Or,transform:e=>Math.round((e=>Gs(0,255,e))(e))},Gr={test:Vr("rgb","red"),parse:Wr("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+zr.transform(e)+", "+zr.transform(t)+", "+zr.transform(n)+", "+Fr(Lr.transform(s))+")"};const qr={test:Vr("#"),parse:function(e){let t="",n="",s="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,s+=s,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}},transform:Gr.transform},Kr=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Yr=Kr("deg"),Jr=Kr("%"),Xr=Kr("px"),Zr=Kr("vh"),Qr=Kr("vw"),ei=(()=>({...Jr,parse:e=>Jr.parse(e)/100,transform:e=>Jr.transform(100*e)}))(),ti={test:Vr("hsl","hue"),parse:Wr("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+Jr.transform(Fr(t))+", "+Jr.transform(Fr(n))+", "+Fr(Lr.transform(s))+")"},ni={test:e=>Gr.test(e)||qr.test(e)||ti.test(e),parse:e=>Gr.test(e)?Gr.parse(e):ti.test(e)?ti.parse(e):qr.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?Gr.transform(e):ti.transform(e),getAnimatableNone:e=>{const t=ni.parse(e);return t.alpha=0,ni.transform(t)}},si=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const ri="number",ii="color",oi=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ai(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},r=[];let i=0;const o=t.replace(oi,e=>(ni.test(e)?(s.color.push(i),r.push(ii),n.push(ni.parse(e))):e.startsWith("var(")?(s.var.push(i),r.push("var"),n.push(e)):(s.number.push(i),r.push(ri),n.push(parseFloat(e))),++i,"${}")).split("${}");return{values:n,split:o,indexes:s,types:r}}function li(e){return ai(e).values}function ci(e){const{split:t,types:n}=ai(e),s=t.length;return e=>{let r="";for(let i=0;i<s;i++)if(r+=t[i],void 0!==e[i]){const t=n[i];r+=t===ri?Fr(e[i]):t===ii?ni.transform(e[i]):e[i]}return r}}const di=e=>"number"==typeof e?0:ni.test(e)?ni.getAnimatableNone(e):e;const ui={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null==(t=e.match(Ur))?void 0:t.length)||0)+((null==(n=e.match(si))?void 0:n.length)||0)>0},parse:li,createTransformer:ci,getAnimatableNone:function(e){const t=li(e);return ci(e)(t.map(di))}};function hi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function mi(e,t){return n=>n>0?t:e}const pi=(e,t,n)=>e+(t-e)*n,fi=(e,t,n)=>{const s=e*e,r=n*(t*t-s)+s;return r<0?0:Math.sqrt(r)},gi=[qr,Gr,ti];function xi(e){const t=(n=e,gi.find(e=>e.test(n)));var n;if(!Boolean(t))return!1;let s=t.parse(e);return t===ti&&(s=function({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,n/=100;let r=0,i=0,o=0;if(t/=100){const s=n<.5?n*(1+t):n+t-n*t,a=2*n-s;r=hi(a,s,e+1/3),i=hi(a,s,e),o=hi(a,s,e-1/3)}else r=i=o=n;return{red:Math.round(255*r),green:Math.round(255*i),blue:Math.round(255*o),alpha:s}}(s)),s}const vi=(e,t)=>{const n=xi(e),s=xi(t);if(!n||!s)return mi(e,t);const r={...n};return e=>(r.red=fi(n.red,s.red,e),r.green=fi(n.green,s.green,e),r.blue=fi(n.blue,s.blue,e),r.alpha=pi(n.alpha,s.alpha,e),Gr.transform(r))},yi=new Set(["none","hidden"]);function bi(e,t){return n=>pi(e,t,n)}function wi(e){return"number"==typeof e?bi:"string"==typeof e?$r(e)?mi:ni.test(e)?vi:Si:Array.isArray(e)?ki:"object"==typeof e?ni.test(e)?vi:Ei:mi}function ki(e,t){const n=[...e],s=n.length,r=e.map((e,n)=>wi(e)(e,t[n]));return e=>{for(let t=0;t<s;t++)n[t]=r[t](e);return n}}function Ei(e,t){const n={...e,...t},s={};for(const r in n)void 0!==e[r]&&void 0!==t[r]&&(s[r]=wi(e[r])(e[r],t[r]));return e=>{for(const t in s)n[t]=s[t](e);return n}}const Si=(e,t)=>{const n=ui.createTransformer(t),s=ai(e),r=ai(t);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?yi.has(e)&&!r.values.length||yi.has(t)&&!s.values.length?function(e,t){return yi.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):er(ki(function(e,t){const n=[],s={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const i=t.types[r],o=e.indexes[i][s[i]],a=e.values[o]??0;n[r]=a,s[i]++}return n}(s,r),r.values),n):mi(e,t)};function Ci(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return pi(e,t,n);return wi(e)(e,t)}const Ni=e=>{const t=({timestamp:t})=>e(t);return{start:(e=!0)=>Cr.update(t,e),stop:()=>Nr(t),now:()=>_r.isProcessing?_r.timestamp:Rr.now()}},_i=(e,t,n=10)=>{let s="";const r=Math.max(Math.round(t/n),2);for(let i=0;i<r;i++)s+=Math.round(1e4*e(i/(r-1)))/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},ji=2e4;function Ai(e){let t=0;let n=e.next(t);for(;!n.done&&t<ji;)t+=50,n=e.next(t);return t>=ji?1/0:t}function Ti(e,t,n){const s=Math.max(t-5,0);return ir(n-e(s),t-s)}const Ri=100,Pi=10,Mi=1,Di=0,$i=800,Ii=.3,Oi=.3,Li={granular:.01,default:2},Bi={granular:.005,default:.5},Fi=.01,Ui=10,Hi=.05,Vi=1,Wi=.001;function zi({duration:e=$i,bounce:t=Ii,velocity:n=Di,mass:s=Mi}){let r,i,o=1-t;o=Gs(Hi,Vi,o),e=Gs(Fi,Ui,rr(e)),o<1?(r=t=>{const s=t*o,r=s*e,i=s-n,a=qi(t,o),l=Math.exp(-r);return Wi-i/a*l},i=t=>{const s=t*o*e,i=s*n+n,a=Math.pow(o,2)*Math.pow(t,2)*e,l=Math.exp(-s),c=qi(Math.pow(t,2),o);return(-r(t)+Wi>0?-1:1)*((i-a)*l)/c}):(r=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,i=t=>Math.exp(-t*e)*(e*e*(n-t)));const a=function(e,t,n){let s=n;for(let r=1;r<Gi;r++)s-=e(s)/t(s);return s}(r,i,5/e);if(e=sr(e),isNaN(a))return{stiffness:Ri,damping:Pi,duration:e};{const t=Math.pow(a,2)*s;return{stiffness:t,damping:2*o*Math.sqrt(s*t),duration:e}}}const Gi=12;function qi(e,t){return e*Math.sqrt(1-t*t)}const Ki=["duration","bounce"],Yi=["stiffness","damping","mass"];function Ji(e,t){return t.some(t=>void 0!==e[t])}function Xi(e=Oi,t=Ii){const n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:r}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:m}=function(e){let t={velocity:Di,stiffness:Ri,damping:Pi,mass:Mi,isResolvedFromDuration:!1,...e};if(!Ji(e,Yi)&&Ji(e,Ki))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(1.2*n),r=s*s,i=2*Gs(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:Mi,stiffness:r,damping:i}}else{const n=zi(e);t={...t,...n,mass:Mi},t.isResolvedFromDuration=!0}return t}({...n,velocity:-rr(n.velocity||0)}),p=h||0,f=c/(2*Math.sqrt(l*d)),g=o-i,x=rr(Math.sqrt(l/d)),v=Math.abs(g)<5;let y;if(s||(s=v?Li.granular:Li.default),r||(r=v?Bi.granular:Bi.default),f<1){const e=qi(x,f);y=t=>{const n=Math.exp(-f*x*t);return o-n*((p+f*x*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===f)y=e=>o-Math.exp(-x*e)*(g+(p+x*g)*e);else{const e=x*Math.sqrt(f*f-1);y=t=>{const n=Math.exp(-f*x*t),s=Math.min(e*t,300);return o-n*((p+f*x*g)*Math.sinh(s)+e*g*Math.cosh(s))/e}}const b={calculatedDuration:m&&u||null,next:e=>{const t=y(e);if(m)a.done=e>=u;else{let n=0===e?p:0;f<1&&(n=0===e?sr(p):Ti(y,e,t));const i=Math.abs(n)<=s,l=Math.abs(o-t)<=r;a.done=i&&l}return a.value=a.done?o:t,a},toString:()=>{const e=Math.min(Ai(b),ji),t=_i(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function Zi({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const u=e[0],h={done:!1,value:u},m=e=>void 0===a?l:void 0===l||Math.abs(a-e)<Math.abs(l-e)?a:l;let p=n*t;const f=u+p,g=void 0===o?f:o(f);g!==f&&(p=g-u);const x=e=>-p*Math.exp(-e/s),v=e=>g+x(e),y=e=>{const t=x(e),n=v(e);h.done=Math.abs(t)<=c,h.value=h.done?g:n};let b,w;const k=e=>{var t;(t=h.value,void 0!==a&&t<a||void 0!==l&&t>l)&&(b=e,w=Xi({keyframes:[h.value,m(h.value)],velocity:Ti(v,e,h.value),damping:r,stiffness:i,restDelta:c,restSpeed:d}))};return k(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==b||(t=!0,y(e),k(e)),void 0!==b&&e>=b?w.next(e-b):(!t&&y(e),h)}}}function Qi(e,t,{clamp:n=!0,ease:s,mixer:r}={}){const i=e.length;if(t.length,1===i)return()=>t[0];if(2===i&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=function(e,t,n){const s=[],r=n||qs.mix||Ci,i=e.length-1;for(let o=0;o<i;o++){let n=r(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||Zs:t;n=er(e,n)}s.push(n)}return s}(t,s,r),l=a.length,c=n=>{if(o&&n<e[0])return t[0];let s=0;if(l>1)for(;s<e.length-2&&!(n<e[s+1]);s++);const r=tr(e[s],e[s+1],n);return a[s](r)};return n?t=>c(Gs(e[0],e[i-1],t)):c}function eo(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const r=tr(0,t,s);e.push(pi(n,1,r))}}(t,e.length-1),t}function to({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const r=(e=>Array.isArray(e)&&"number"!=typeof e[0])(s)?s.map(kr):kr(s),i={done:!1,value:t[0]},o=function(e,t){return e.map(e=>e*t)}(n&&n.length===t.length?n:eo(t),e),a=Qi(o,t,{ease:Array.isArray(r)?r:(l=t,c=r,l.map(()=>c||yr).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(i.value=a(t),i.done=t>=e,i)}}Xi.applyToOptions=e=>{const t=function(e,t=100,n){const s=n({...e,keyframes:[0,t]}),r=Math.min(Ai(s),ji);return{type:"keyframes",ease:e=>s.next(r*e).value/t,duration:rr(r)}}(e,100,Xi);return e.ease=t.ease,e.duration=sr(t.duration),e.type="keyframes",e};const no=e=>null!==e;function so(e,{repeat:t,repeatType:n="loop"},s,r=1){const i=e.filter(no),o=r<0||t&&"loop"!==n&&t%2==1?0:i.length-1;return o&&void 0!==s?s:i[o]}const ro={decay:Zi,inertia:Zi,tween:to,keyframes:to,spring:Xi};function io(e){"string"==typeof e.type&&(e.type=ro[e.type])}class oo{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const ao=e=>e/100;class lo extends oo{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==Rr.now()&&this.tick(Rr.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null==(t=(e=this.options).onStop)||t.call(e))},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;io(e);const{type:t=to,repeat:n=0,repeatDelay:s=0,repeatType:r,velocity:i=0}=e;let{keyframes:o}=e;const a=t||to;a!==to&&"number"!=typeof o[0]&&(this.mixKeyframes=er(ao,Ci(o[0],o[1])),o=[0,100]);const l=a({...e,keyframes:o});"mirror"===r&&(this.mirroredGenerator=a({...e,keyframes:[...o].reverse(),velocity:-i})),null===l.calculatedDuration&&(l.calculatedDuration=Ai(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:s,mixKeyframes:r,mirroredGenerator:i,resolvedDuration:o,calculatedDuration:a}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:h,type:m,onUpdate:p,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?g<0:g>s;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=s);let v=this.currentTime,y=n;if(d){const e=Math.min(this.currentTime,s)/o;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(n=1-n,h&&(n-=h/o)):"mirror"===u&&(y=i)),v=Gs(0,1,n)*o}const b=x?{done:!1,value:c[0]}:y.next(v);r&&(b.value=r(b.value));let{done:w}=b;x||null===a||(w=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const k=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return k&&m!==Zi&&(b.value=so(c,this.options,f,this.speed)),p&&p(b.value),k&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return rr(this.calculatedDuration)}get time(){return rr(this.currentTime)}set time(e){var t;e=sr(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null==(t=this.driver)||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Rr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=rr(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=Ni,startTime:s}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null==(t=(e=this.options).onPlay)||t.call(e);const r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Rr.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null==(t=(e=this.options).onComplete)||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null==(t=(e=this.options).onCancel)||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null==(t=this.driver)||t.stop(),e.observe(this)}}const co=e=>180*e/Math.PI,uo=e=>{const t=co(Math.atan2(e[1],e[0]));return mo(t)},ho={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:uo,rotateZ:uo,skewX:e=>co(Math.atan(e[1])),skewY:e=>co(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},mo=e=>((e%=360)<0&&(e+=360),e),po=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),fo=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),go={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:po,scaleY:fo,scale:e=>(po(e)+fo(e))/2,rotateX:e=>mo(co(Math.atan2(e[6],e[5]))),rotateY:e=>mo(co(Math.atan2(-e[2],e[0]))),rotateZ:uo,rotate:uo,skewX:e=>co(Math.atan(e[4])),skewY:e=>co(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function xo(e){return e.includes("scale")?1:0}function vo(e,t){if(!e||"none"===e)return xo(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,r;if(n)s=go,r=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=ho,r=t}if(!r)return xo(t);const i=s[t],o=r[1].split(",").map(yo);return"function"==typeof i?i(o):o[i]}function yo(e){return parseFloat(e.trim())}const bo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wo=(()=>new Set(bo))(),ko=e=>e===Or||e===Xr,Eo=new Set(["x","y","z"]),So=bo.filter(e=>!Eo.has(e));const Co={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>vo(t,"x"),y:(e,{transform:t})=>vo(t,"y")};Co.translateX=Co.x,Co.translateY=Co.y;const No=new Set;let _o=!1,jo=!1,Ao=!1;function To(){if(jo){const e=Array.from(No).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return So.forEach(n=>{const s=e.getValue(n);void 0!==s&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(([t,n])=>{var s;null==(s=e.getValue(t))||s.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}jo=!1,_o=!1,No.forEach(e=>e.complete(Ao)),No.clear()}function Ro(){No.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(jo=!0)})}class Po{constructor(e,t,n,s,r,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=s,this.element=r,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(No.add(this),_o||(_o=!0,Cr.read(Ro),Cr.resolveKeyframes(To))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:s}=this;if(null===e[0]){const r=null==s?void 0:s.get(),i=e[e.length-1];if(void 0!==r)e[0]=r;else if(n&&t){const s=n.readValue(t,i);null!=s&&(e[0]=s)}void 0===e[0]&&(e[0]=i),s&&void 0===r&&s.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),No.delete(this)}cancel(){"scheduled"===this.state&&(No.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const Mo=Xs(()=>void 0!==window.ScrollTimeline),Do={};function $o(e,t){const n=Xs(e);return()=>Do[t]??n()}const Io=$o(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),Oo=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,Lo={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Oo([0,.65,.55,1]),circOut:Oo([.55,0,1,.45]),backIn:Oo([.31,.01,.66,-.59]),backOut:Oo([.33,1.53,.69,.99])};function Bo(e,t){return e?"function"==typeof e?Io()?_i(e,t):"ease-out":br(e)?Oo(e):Array.isArray(e)?e.map(e=>Bo(e,t)||Lo.easeOut):Lo[e]:void 0}function Fo(e,t,n,{delay:s=0,duration:r=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const d={[t]:n};l&&(d.offset=l);const u=Bo(a,r);Array.isArray(u)&&(d.easing=u);const h={delay:s,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:"reverse"===o?"alternate":"normal"};c&&(h.pseudoElement=c);return e.animate(d,h)}function Uo(e){return"function"==typeof e&&"applyToOptions"in e}class Ho extends oo{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:s,pseudoElement:r,allowFlatten:i=!1,finalKeyframe:o,onComplete:a}=e;this.isPseudoElement=Boolean(r),this.allowFlatten=i,this.options=e,e.type;const l=function({type:e,...t}){return Uo(e)&&Io()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=Fo(t,n,s,l,r),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const e=so(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null==a||a(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null==(t=(e=this.animation).finish)||t.call(e)}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||null==(t=(e=this.animation).commitStyles)||t.call(e)}get duration(){var e,t;const n=(null==(t=null==(e=this.animation.effect)?void 0:e.getComputedTiming)?void 0:t.call(e).duration)||0;return rr(Number(n))}get time(){return rr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=sr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&(null==(n=this.animation.effect)||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Mo()?(this.animation.timeline=e,Zs):t(this)}}const Vo={anticipate:mr,backInOut:hr,circInOut:gr};function Wo(e){"string"==typeof e.ease&&e.ease in Vo&&(e.ease=Vo[e.ease])}class zo extends Ho{constructor(e){Wo(e),io(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:s,element:r,...i}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const o=new lo({...i,autoplay:!1}),a=sr(this.finishedTime??this.time);t.setWithVelocity(o.sample(a-10).value,o.sample(a).value,10),o.stop()}}const Go=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!ui.test(e)&&"0"!==e||e.startsWith("url(")));function qo(e){e.duration=0,e.type}const Ko=new Set(["opacity","clipPath","filter","transform"]),Yo=Xs(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class Jo extends oo{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:i="loop",keyframes:o,name:a,motionValue:l,element:c,...d}){var u;super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null==(e=this.stopTimeline)||e.call(this)),null==(t=this.keyframeResolver)||t.cancel()},this.createdAt=Rr.now();const h={autoplay:e,delay:t,type:n,repeat:s,repeatDelay:r,repeatType:i,name:a,motionValue:l,element:c,...d},m=(null==c?void 0:c.KeyframeResolver)||Po;this.keyframeResolver=new m(o,(e,t,n)=>this.onKeyframesResolved(e,t,h,!n),a,l,c),null==(u=this.keyframeResolver)||u.scheduleResolve()}onKeyframesResolved(e,t,n,s){this.keyframeResolver=void 0;const{name:r,type:i,velocity:o,delay:a,isHandoff:l,onUpdate:c}=n;this.resolvedAt=Rr.now(),function(e,t,n,s){const r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;const i=e[e.length-1],o=Go(r,t),a=Go(i,t);return!(!o||!a)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||Uo(n))&&s)}(e,r,i,o)||(!qs.instantAnimations&&a||null==c||c(so(e,n,t)),e[0]=e[e.length-1],qo(n),n.repeat=0);const d={startTime:s?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},u=!l&&function(e){var t;const{motionValue:n,name:s,repeatDelay:r,repeatType:i,damping:o,type:a}=e;if(!((null==(t=null==n?void 0:n.owner)?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return Yo()&&s&&Ko.has(s)&&("transform"!==s||!c)&&!l&&!r&&"mirror"!==i&&0!==o&&"inertia"!==a}(d)?new zo({...d,element:d.motionValue.owner.current}):new lo(d);u.finished.then(()=>this.notifyFinished()).catch(Zs),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||(null==(e=this.keyframeResolver)||e.resume(),Ao=!0,Ro(),To(),Ao=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null==(e=this.keyframeResolver)||e.cancel()}}const Xo=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Zo(e,t,n=1){const[s,r]=function(e){const t=Xo.exec(e);if(!t)return[,];const[,n,s,r]=t;return[`--${n??s}`,r]}(e);if(!s)return;const i=window.getComputedStyle(t).getPropertyValue(s);if(i){const e=i.trim();return Ks(e)?parseFloat(e):e}return $r(r)?Zo(r,t,n+1):r}function Qo(e,t){return(null==e?void 0:e[t])??(null==e?void 0:e.default)??e}const ea=new Set(["width","height","top","left","right","bottom",...bo]),ta=e=>t=>t.test(e),na=[Or,Xr,Jr,Yr,Qr,Zr,{test:e=>"auto"===e,parse:e=>e}],sa=e=>na.find(ta(e));function ra(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||Js(e))}const ia=new Set(["brightness","contrast","saturate","opacity"]);function oa(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[s]=n.match(Ur)||[];if(!s)return e;const r=n.replace(s,"");let i=ia.has(t)?1:0;return s!==n&&(i*=100),t+"("+i+r+")"}const aa=/\b([a-z-]*)\(.*?\)/gu,la={...ui,getAnimatableNone:e=>{const t=e.match(aa);return t?t.map(oa).join(" "):e}},ca={...Or,transform:Math.round},da={borderWidth:Xr,borderTopWidth:Xr,borderRightWidth:Xr,borderBottomWidth:Xr,borderLeftWidth:Xr,borderRadius:Xr,radius:Xr,borderTopLeftRadius:Xr,borderTopRightRadius:Xr,borderBottomRightRadius:Xr,borderBottomLeftRadius:Xr,width:Xr,maxWidth:Xr,height:Xr,maxHeight:Xr,top:Xr,right:Xr,bottom:Xr,left:Xr,padding:Xr,paddingTop:Xr,paddingRight:Xr,paddingBottom:Xr,paddingLeft:Xr,margin:Xr,marginTop:Xr,marginRight:Xr,marginBottom:Xr,marginLeft:Xr,backgroundPositionX:Xr,backgroundPositionY:Xr,...{rotate:Yr,rotateX:Yr,rotateY:Yr,rotateZ:Yr,scale:Br,scaleX:Br,scaleY:Br,scaleZ:Br,skew:Yr,skewX:Yr,skewY:Yr,distance:Xr,translateX:Xr,translateY:Xr,translateZ:Xr,x:Xr,y:Xr,z:Xr,perspective:Xr,transformPerspective:Xr,opacity:Lr,originX:ei,originY:ei,originZ:Xr},zIndex:ca,fillOpacity:Lr,strokeOpacity:Lr,numOctaves:ca},ua={...da,color:ni,backgroundColor:ni,outlineColor:ni,fill:ni,stroke:ni,borderColor:ni,borderTopColor:ni,borderRightColor:ni,borderBottomColor:ni,borderLeftColor:ni,filter:la,WebkitFilter:la},ha=e=>ua[e];function ma(e,t){let n=ha(e);return n!==la&&(n=ui),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const pa=new Set(["auto","none","0"]);class fa extends Po{constructor(e,t,n,s,r){super(e,t,n,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let a=0;a<e.length;a++){let n=e[a];if("string"==typeof n&&(n=n.trim(),$r(n))){const s=Zo(n,t.current);void 0!==s&&(e[a]=s),a===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!ea.has(n)||2!==e.length)return;const[s,r]=e,i=sa(s),o=sa(r);if(i!==o)if(ko(i)&&ko(o))for(let a=0;a<e.length;a++){const t=e[a];"string"==typeof t&&(e[a]=parseFloat(t))}else Co[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let s=0;s<e.length;s++)(null===e[s]||ra(e[s]))&&n.push(s);n.length&&function(e,t,n){let s,r=0;for(;r<e.length&&!s;){const t=e[r];"string"==typeof t&&!pa.has(t)&&ai(t).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=ma(n,s)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Co[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];void 0!==s&&e.getValue(n,s).jump(s,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const r=t.getValue(n);r&&r.jump(this.measuredOrigin,!1);const i=s.length-1,o=s[i];s[i]=Co[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==o&&void 0===this.finalKeyframe&&(this.finalKeyframe=o),(null==(e=this.removedTransforms)?void 0:e.length)&&this.removedTransforms.forEach(([e,n])=>{t.getValue(e).set(n)}),this.resolveNoneKeyframes()}}const ga=(e,t)=>t&&"number"==typeof e?t.transform(e):e;function xa(e){return Ys(e)&&"offsetHeight"in e}class va{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{var t;const n=Rr.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(null==(t=this.events.change)||t.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=Rr.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new nr);const n=this.events[e].add(t);return"change"===e?()=>{n(),Cr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null==(e=this.events.change)||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Rr.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return ir(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null==(e=this.dependents)||e.clear(),null==(t=this.events.destroy)||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ya(e,t){return new va(e,t)}const{schedule:ba}=Sr(queueMicrotask,!1),wa={x:!1,y:!1};function ka(){return wa.x||wa.y}function Ea(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document;const s=(null==n?void 0:n[e])??t.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}(e),s=new AbortController;return[n,{passive:!0,...t,signal:s.signal},()=>s.abort()]}function Sa(e){return!("touch"===e.pointerType||ka())}const Ca=(e,t)=>!!t&&(e===t||Ca(e,t.parentElement)),Na=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,_a=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const ja=new WeakSet;function Aa(e){return t=>{"Enter"===t.key&&e(t)}}function Ta(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function Ra(e){return Na(e)&&!ka()}function Pa(e,t,n={}){const[s,r,i]=Ea(e,n),o=e=>{const s=e.currentTarget;if(!Ra(e))return;ja.add(s);const i=t(s,e),o=(e,t)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),ja.has(s)&&ja.delete(s),Ra(e)&&"function"==typeof i&&i(e,{success:t})},a=e=>{o(e,s===window||s===document||n.useGlobalTarget||Ca(s,e.target))},l=e=>{o(e,!1)};window.addEventListener("pointerup",a,r),window.addEventListener("pointercancel",l,r)};return s.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",o,r),xa(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const s=Aa(()=>{if(ja.has(n))return;Ta(n,"down");const e=Aa(()=>{Ta(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>Ta(n,"cancel"),t)});n.addEventListener("keydown",s,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),t)})(e,r)),t=e,_a.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),i}function Ma(e){return Ys(e)&&"ownerSVGElement"in e}const Da=e=>Boolean(e&&e.getVelocity),$a=[...na,ni,ui],Ia=n.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Oa extends n.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=xa(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=n-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function La({children:e,isPresent:t,anchorX:s,root:r}){const i=n.useId(),o=n.useRef(null),a=n.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=n.useContext(Ia);return n.useInsertionEffect(()=>{const{width:e,height:n,top:c,left:d,right:u}=a.current;if(t||!o.current||!e||!n)return;const h="left"===s?`left: ${d}`:`right: ${u}`;o.current.dataset.motionPopId=i;const m=document.createElement("style");l&&(m.nonce=l);const p=r??document.head;return p.appendChild(m),m.sheet&&m.sheet.insertRule(`\n          [data-motion-pop-id="${i}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${n}px !important;\n            ${h}px !important;\n            top: ${c}px !important;\n          }\n        `),()=>{p.contains(m)&&p.removeChild(m)}},[t]),Y.jsx(Oa,{isPresent:t,childRef:o,sizeRef:a,children:n.cloneElement(e,{ref:o})})}const Ba=({children:e,initial:t,isPresent:s,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:a,anchorX:l,root:c})=>{const d=Fs(Fa),u=n.useId();let h=!0,m=n.useMemo(()=>(h=!1,{id:u,initial:t,isPresent:s,custom:i,onExitComplete:e=>{d.set(e,!0);for(const t of d.values())if(!t)return;r&&r()},register:e=>(d.set(e,!1),()=>d.delete(e))}),[s,d,r]);return o&&h&&(m={...m}),n.useMemo(()=>{d.forEach((e,t)=>d.set(t,!1))},[s]),n.useEffect(()=>{!s&&!d.size&&r&&r()},[s]),"popLayout"===a&&(e=Y.jsx(La,{isPresent:s,anchorX:l,root:c,children:e})),Y.jsx(Vs.Provider,{value:m,children:e})};function Fa(){return new Map}function Ua(e=!0){const t=n.useContext(Vs);if(null===t)return[!0,null];const{isPresent:s,onExitComplete:r,register:i}=t,o=n.useId();n.useEffect(()=>{if(e)return i(o)},[e]);const a=n.useCallback(()=>e&&r&&r(o),[o,r,e]);return!s&&r?[!1,a]:[!0]}const Ha=e=>e.key||"";function Va(e){const t=[];return n.Children.forEach(e,e=>{n.isValidElement(e)&&t.push(e)}),t}const Wa=({children:e,custom:t,initial:s=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:a=!1,anchorX:l="left",root:c})=>{const[d,u]=Ua(a),h=n.useMemo(()=>Va(e),[e]),m=a&&!d?[]:h.map(Ha),p=n.useRef(!0),f=n.useRef(h),g=Fs(()=>new Map),[x,v]=n.useState(h),[y,b]=n.useState(h);Hs(()=>{p.current=!1,f.current=h;for(let e=0;e<y.length;e++){const t=Ha(y[e]);m.includes(t)?g.delete(t):!0!==g.get(t)&&g.set(t,!1)}},[y,m.length,m.join("-")]);const w=[];if(h!==x){let e=[...h];for(let t=0;t<y.length;t++){const n=y[t],s=Ha(n);m.includes(s)||(e.splice(t,0,n),w.push(n))}return"wait"===o&&w.length&&(e=w),b(Va(e)),v(h),null}const{forceRender:k}=n.useContext(Bs);return Y.jsx(Y.Fragment,{children:y.map(e=>{const n=Ha(e),x=!(a&&!d)&&(h===y||m.includes(n));return Y.jsx(Ba,{isPresent:x,initial:!(p.current&&!s)&&void 0,custom:t,presenceAffectsLayout:i,mode:o,root:c,onExitComplete:x?void 0:()=>{if(!g.has(n))return;g.set(n,!0);let e=!0;g.forEach(t=>{t||(e=!1)}),e&&(null==k||k(),b(f.current),a&&(null==u||u()),r&&r())},anchorX:l,children:e},n)})})},za=n.createContext({strict:!1}),Ga={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qa={};for(const Qx in Ga)qa[Qx]={isEnabled:e=>Ga[Qx].some(t=>!!e[t])};const Ka=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ya(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ka.has(e)}let Ja=e=>!Ya(e);try{"function"==typeof(Xa=require("@emotion/is-prop-valid").default)&&(Ja=e=>e.startsWith("on")?!Ya(e):Xa(e))}catch{}var Xa;const Za=n.createContext({});function Qa(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function el(e){return"string"==typeof e||Array.isArray(e)}const tl=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nl=["initial",...tl];function sl(e){return Qa(e.animate)||nl.some(t=>el(e[t]))}function rl(e){return Boolean(sl(e)||e.variants)}function il(e){const{initial:t,animate:s}=function(e,t){if(sl(e)){const{initial:t,animate:n}=e;return{initial:!1===t||el(t)?t:void 0,animate:el(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,n.useContext(Za));return n.useMemo(()=>({initial:t,animate:s}),[ol(t),ol(s)])}function ol(e){return Array.isArray(e)?e.join(" "):e}const al={};function ll(e,{layout:t,layoutId:n}){return wo.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!al[e]||"opacity"===e)}const cl={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},dl=bo.length;function ul(e,t,n){const{style:s,vars:r,transformOrigin:i}=e;let o=!1,a=!1;for(const l in t){const e=t[l];if(wo.has(l))o=!0;else if(Mr(l))r[l]=e;else{const t=ga(e,da[l]);l.startsWith("origin")?(a=!0,i[l]=t):s[l]=t}}if(t.transform||(o||n?s.transform=function(e,t,n){let s="",r=!0;for(let i=0;i<dl;i++){const o=bo[i],a=e[o];if(void 0===a)continue;let l=!0;if(l="number"==typeof a?a===(o.startsWith("scale")?1:0):0===parseFloat(a),!l||n){const e=ga(a,da[o]);l||(r=!1,s+=`${cl[o]||o}(${e}) `),n&&(t[o]=e)}}return s=s.trim(),n?s=n(t,r?"":s):r&&(s="none"),s}(t,e.transform,n):s.transform&&(s.transform="none")),a){const{originX:e="50%",originY:t="50%",originZ:n=0}=i;s.transformOrigin=`${e} ${t} ${n}`}}const hl=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ml(e,t,n){for(const s in t)Da(t[s])||ll(s,n)||(e[s]=t[s])}function pl(e,t){const s={};return ml(s,e.style||{},e),Object.assign(s,function({transformTemplate:e},t){return n.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return ul(n,t,e),Object.assign({},n.vars,n.style)},[t])}(e,t)),s}function fl(e,t){const n={},s=pl(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const gl={offset:"stroke-dashoffset",array:"stroke-dasharray"},xl={offset:"strokeDashoffset",array:"strokeDasharray"};function vl(e,{attrX:t,attrY:n,attrScale:s,pathLength:r,pathSpacing:i=1,pathOffset:o=0,...a},l,c,d){if(ul(e,a,c),l)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:u,style:h}=e;u.transform&&(h.transform=u.transform,delete u.transform),(h.transform||u.transformOrigin)&&(h.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),h.transform&&(h.transformBox=(null==d?void 0:d.transformBox)??"fill-box",delete u.transformBox),void 0!==t&&(u.x=t),void 0!==n&&(u.y=n),void 0!==s&&(u.scale=s),void 0!==r&&function(e,t,n=1,s=0,r=!0){e.pathLength=1;const i=r?gl:xl;e[i.offset]=Xr.transform(-s);const o=Xr.transform(t),a=Xr.transform(n);e[i.array]=`${o} ${a}`}(u,r,i,o,!1)}const yl=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),bl=e=>"string"==typeof e&&"svg"===e.toLowerCase();function wl(e,t,s,r){const i=n.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return vl(n,t,bl(r),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){const t={};ml(t,e.style,e),i.style={...t,...i.style}}return i}const kl=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function El(e){return"string"==typeof e&&!e.includes("-")&&!!(kl.indexOf(e)>-1||/[A-Z]/u.test(e))}function Sl(e,t,s,{latestValues:r},i,o=!1){const a=(El(e)?wl:fl)(t,r,i,e),l=function(e,t,n){const s={};for(const r in e)"values"===r&&"object"==typeof e.values||(Ja(r)||!0===n&&Ya(r)||!t&&!Ya(r)||e.draggable&&r.startsWith("onDrag"))&&(s[r]=e[r]);return s}(t,"string"==typeof e,o),c=e!==n.Fragment?{...l,...a,ref:s}:{},{children:d}=t,u=n.useMemo(()=>Da(d)?d.get():d,[d]);return n.createElement(e,{...c,children:u})}function Cl(e){const t=[{},{}];return null==e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function Nl(e,t,n,s){if("function"==typeof t){const[r,i]=Cl(s);t=t(void 0!==n?n:e.custom,r,i)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[r,i]=Cl(s);t=t(void 0!==n?n:e.custom,r,i)}return t}function _l(e){return Da(e)?e.get():e}function jl(e,t,n,s){const r={},i=s(e,{});for(const h in i)r[h]=_l(i[h]);let{initial:o,animate:a}=e;const l=sl(e),c=rl(e);t&&c&&!l&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===a&&(a=t.animate));let d=!!n&&!1===n.initial;d=d||!1===o;const u=d?a:o;if(u&&"boolean"!=typeof u&&!Qa(u)){const t=Array.isArray(u)?u:[u];for(let n=0;n<t.length;n++){const s=Nl(e,t[n]);if(s){const{transitionEnd:e,transition:t,...n}=s;for(const s in n){let e=n[s];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(r[s]=e)}for(const s in e)r[s]=e[s]}}}return r}const Al=e=>(t,s)=>{const r=n.useContext(Za),i=n.useContext(Vs),o=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},n,s,r){return{latestValues:jl(n,s,r,e),renderState:t()}}(e,t,r,i);return s?o():Fs(o)};function Tl(e,t,n){var s;const{style:r}=e,i={};for(const o in r)(Da(r[o])||t.style&&Da(t.style[o])||ll(o,e)||void 0!==(null==(s=null==n?void 0:n.getValue(o))?void 0:s.liveStyle))&&(i[o]=r[o]);return i}const Rl=Al({scrapeMotionValuesFromProps:Tl,createRenderState:hl});function Pl(e,t,n){const s=Tl(e,t,n);for(const r in e)if(Da(e[r])||Da(t[r])){s[-1!==bo.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return s}const Ml=Al({scrapeMotionValuesFromProps:Pl,createRenderState:yl}),Dl=Symbol.for("motionComponentSymbol");function $l(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Il(e,t,s){return n.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),s&&("function"==typeof s?s(n):$l(s)&&(s.current=n))},[t])}const Ol=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Ll="data-"+Ol("framerAppearId"),Bl=n.createContext({});function Fl(e,t,s,r,i){var o,a;const{visualElement:l}=n.useContext(Za),c=n.useContext(za),d=n.useContext(Vs),u=n.useContext(Ia).reducedMotion,h=n.useRef(null);r=r||c.renderer,!h.current&&r&&(h.current=r(e,{visualState:t,parent:l,props:s,presenceContext:d,blockInitialAnimation:!!d&&!1===d.initial,reducedMotionConfig:u}));const m=h.current,p=n.useContext(Bl);!m||m.projection||!i||"html"!==m.type&&"svg"!==m.type||function(e,t,n,s){const{layoutId:r,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Ul(e.parent)),e.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:Boolean(o)||a&&$l(a),visualElement:e,animationType:"string"==typeof i?i:"both",initialPromotionConfig:s,crossfade:d,layoutScroll:l,layoutRoot:c})}(h.current,s,i,p);const f=n.useRef(!1);n.useInsertionEffect(()=>{m&&f.current&&m.update(s,d)});const g=s[Ll],x=n.useRef(Boolean(g)&&!(null==(o=window.MotionHandoffIsComplete)?void 0:o.call(window,g))&&(null==(a=window.MotionHasOptimisedAnimation)?void 0:a.call(window,g)));return Hs(()=>{m&&(f.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),x.current&&m.animationState&&m.animationState.animateChanges())}),n.useEffect(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var e;null==(e=window.MotionHandoffMarkAsComplete)||e.call(window,g)}),x.current=!1),m.enteringChildren=void 0)}),m}function Ul(e){if(e)return!1!==e.options.allowProjection?e.projection:Ul(e.parent)}function Hl(e,{forwardMotionProps:t=!1}={},s,r){s&&function(e){for(const t in e)qa[t]={...qa[t],...e[t]}}(s);const i=El(e)?Ml:Rl;function o(s,o){let a;const l={...n.useContext(Ia),...s,layoutId:Vl(s)},{isStatic:c}=l,d=il(s),u=i(s,c);if(!c&&Us){n.useContext(za).strict;const t=function(e){const{drag:t,layout:n}=qa;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}(l);a=t.MeasureLayout,d.visualElement=Fl(e,u,l,r,t.ProjectionNode)}return Y.jsxs(Za.Provider,{value:d,children:[a&&d.visualElement?Y.jsx(a,{visualElement:d.visualElement,...l}):null,Sl(e,s,Il(u,d.visualElement,o),u,c,t)]})}o.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;const a=n.forwardRef(o);return a[Dl]=e,a}function Vl({layoutId:e}){const t=n.useContext(Bs).id;return t&&void 0!==e?t+"-"+e:e}function Wl(e,t){if("undefined"==typeof Proxy)return Hl;const n=new Map,s=(n,s)=>Hl(n,s,e,t);return new Proxy((e,t)=>s(e,t),{get:(r,i)=>"create"===i?s:(n.has(i)||n.set(i,Hl(i,void 0,e,t)),n.get(i))})}function zl({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function Gl(e){return void 0===e||1===e}function ql({scale:e,scaleX:t,scaleY:n}){return!Gl(e)||!Gl(t)||!Gl(n)}function Kl(e){return ql(e)||Yl(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Yl(e){return Jl(e.x)||Jl(e.y)}function Jl(e){return e&&"0%"!==e}function Xl(e,t,n){return n+t*(e-n)}function Zl(e,t,n,s,r){return void 0!==r&&(e=Xl(e,r,s)),Xl(e,n,s)+t}function Ql(e,t=0,n=1,s,r){e.min=Zl(e.min,t,n,s,r),e.max=Zl(e.max,t,n,s,r)}function ec(e,{x:t,y:n}){Ql(e.x,t.translate,t.scale,t.originPoint),Ql(e.y,n.translate,n.scale,n.originPoint)}const tc=.999999999999,nc=1.0000000000001;function sc(e,t){e.min=e.min+t,e.max=e.max+t}function rc(e,t,n,s,r=.5){Ql(e,t,n,pi(e.min,e.max,r),s)}function ic(e,t){rc(e.x,t.x,t.scaleX,t.scale,t.originX),rc(e.y,t.y,t.scaleY,t.scale,t.originY)}function oc(e,t){return zl(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}(e.getBoundingClientRect(),t))}const ac=()=>({x:{min:0,max:0},y:{min:0,max:0}}),lc={current:null},cc={current:!1};const dc=new WeakMap;const uc=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hc{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:r,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Po,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Rr.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,Cr.render(this.render,!1,!0))};const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=Boolean(r),this.isControllingVariants=sl(t),this.isVariantNode=rl(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const u in d){const e=d[u];void 0!==a[u]&&Da(e)&&e.set(a[u])}}mount(e){var t;this.current=e,dc.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),cc.current||function(){if(cc.current=!0,Us)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>lc.current=e.matches;e.addEventListener("change",t),t()}else lc.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||lc.current),null==(t=this.parent)||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Nr(this.notifyUpdate),Nr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null==(e=this.parent)||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=wo.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Cr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in qa){const t=qa[e];if(!t)continue;const{isEnabled:n,Feature:s}=t;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<uc.length;n++){const t=uc[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const s=e["on"+t];s&&(this.propEventSubscriptions[t]=this.on(t,s))}this.prevMotionValues=function(e,t,n){for(const s in t){const r=t[s],i=n[s];if(Da(r))e.addValue(s,r);else if(Da(i))e.addValue(s,ya(r,{owner:e}));else if(i!==r)if(e.hasValue(s)){const t=e.getValue(s);!0===t.liveStyle?t.jump(r):t.hasAnimated||t.set(r)}else{const t=e.getStaticValue(s);e.addValue(s,ya(void 0!==t?t:r,{owner:e}))}}for(const s in n)void 0===t[s]&&e.removeValue(s);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=ya(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var s;return null!=n&&("string"==typeof n&&(Ks(n)||Js(n))?n=parseFloat(n):(s=n,!$a.find(ta(s))&&ui.test(t)&&(n=ma(e,t))),this.setBaseTarget(e,Da(n)?n.get():n)),Da(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let s;if("string"==typeof n||"object"==typeof n){const r=Nl(this.props,n,null==(t=this.presenceContext)?void 0:t.custom);r&&(s=r[e])}if(n&&void 0!==s)return s;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||Da(r)?void 0!==this.initialValues[e]&&void 0===s?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new nr),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){ba.render(this.render)}}class mc extends hc{constructor(){super(...arguments),this.KeyframeResolver=fa}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Da(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function pc(e,{style:t,vars:n},s,r){const i=e.style;let o;for(o in t)i[o]=t[o];for(o in null==r||r.applyProjectionStyles(i,s),n)i.setProperty(o,n[o])}class fc extends mc{constructor(){super(...arguments),this.type="html",this.renderInstance=pc}readValueFromInstance(e,t){var n,s;if(wo.has(t))return(null==(n=this.projection)?void 0:n.isProjecting)?xo(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return vo(n,t)})(e,t);{const n=(s=e,window.getComputedStyle(s)),r=(Mr(t)?n.getPropertyValue(t):n[t])||0;return"string"==typeof r?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return oc(e,t)}build(e,t,n){ul(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return Tl(e,t,n)}}const gc=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class xc extends mc{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ac}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(wo.has(t)){const e=ha(t);return e&&e.default||0}return t=gc.has(t)?t:Ol(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return Pl(e,t,n)}build(e,t,n){vl(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,s){!function(e,t,n,s){pc(e,t,void 0,s);for(const r in t.attrs)e.setAttribute(gc.has(r)?r:Ol(r),t.attrs[r])}(e,t,0,s)}mount(e){this.isSVGTag=bl(e.tagName),super.mount(e)}}const vc=(e,t)=>El(e)?new xc(t):new fc(t,{allowProjection:e!==n.Fragment});function yc(e,t,n){const s=e.getProps();return Nl(s,t,void 0!==n?n:s.custom,e)}const bc=e=>Array.isArray(e);function wc(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ya(n))}function kc(e){return bc(e)?e[e.length-1]||0:e}function Ec(e,t){const n=e.getValue("willChange");if(s=n,Boolean(Da(s)&&s.add))return n.add(t);if(!n&&qs.WillChange){const n=new qs.WillChange("auto");e.addValue("willChange",n),n.add(t)}var s}function Sc(e){return e.props[Ll]}const Cc=e=>null!==e;const Nc={type:"spring",stiffness:500,damping:25,restSpeed:10},_c={type:"keyframes",duration:.8},jc={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ac=(e,{keyframes:t})=>t.length>2?_c:wo.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:Nc:jc;const Tc=(e,t,n,s={},r,i)=>o=>{const a=Qo(s,e)||{},l=a.delay||s.delay||0;let{elapsed:c=0}=s;c-=sr(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:i?void 0:r};(function({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length})(a)||Object.assign(d,Ac(e,d)),d.duration&&(d.duration=sr(d.duration)),d.repeatDelay&&(d.repeatDelay=sr(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(qo(d),0===d.delay&&(u=!0)),(qs.instantAnimations||qs.skipAnimations)&&(u=!0,qo(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,u&&!i&&void 0!==t.get()){const e=function(e,{repeat:t,repeatType:n="loop"}){const s=e.filter(Cc);return s[t&&"loop"!==n&&t%2==1?0:s.length-1]}(d.keyframes,a);if(void 0!==e)return void Cr.update(()=>{d.onUpdate(e),d.onComplete()})}return a.isSync?new lo(d):new Jo(d)};function Rc({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,s}function Pc(e,t,{delay:n=0,transitionOverride:s,type:r}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=t;s&&(i=s);const l=[],c=r&&e.animationState&&e.animationState.getState()[r];for(const d in a){const t=e.getValue(d,e.latestValues[d]??null),s=a[d];if(void 0===s||c&&Rc(c,d))continue;const r={delay:n,...Qo(i||{},d)},o=t.get();if(void 0!==o&&!t.isAnimating&&!Array.isArray(s)&&s===o&&!r.velocity)continue;let u=!1;if(window.MotionHandoffAnimation){const t=Sc(e);if(t){const e=window.MotionHandoffAnimation(t,d,Cr);null!==e&&(r.startTime=e,u=!0)}}Ec(e,d),t.start(Tc(d,t,s,e.shouldReduceMotion&&ea.has(d)?{type:!1}:r,e,u));const h=t.animation;h&&l.push(h)}return o&&Promise.all(l).then(()=>{Cr.update(()=>{o&&function(e,t){const n=yc(e,t);let{transitionEnd:s={},transition:r={},...i}=n||{};i={...i,...s};for(const o in i)wc(e,o,kc(i[o]))}(e,o)})}),l}function Mc(e,t,n,s=0,r=1){const i=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),o=e.size,a=(o-1)*s;return"function"==typeof n?n(i,o):1===r?i*s:a-i*s}function Dc(e,t,n={}){var s;const r=yc(e,t,"exit"===n.type?null==(s=e.presenceContext)?void 0:s.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(Pc(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(s=0)=>{const{delayChildren:r=0,staggerChildren:o,staggerDirection:a}=i;return function(e,t,n=0,s=0,r=0,i=1,o){const a=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),a.push(Dc(l,t,{...o,delay:n+("function"==typeof s?0:s)+Mc(e.variantChildren,l,s,r,i)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}(e,t,s,r,o,a,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[e,t]="beforeChildren"===l?[o,a]:[a,o];return e().then(()=>t())}return Promise.all([o(),a(n.delay)])}function $c(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}const Ic=nl.length;function Oc(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Oc(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Ic;n++){const s=nl[n],r=e.props[s];(el(r)||!1===r)&&(t[s]=r)}return t}const Lc=[...tl].reverse(),Bc=tl.length;function Fc(e){return t=>Promise.all(t.map(({animation:t,options:n})=>function(e,t,n={}){let s;if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map(t=>Dc(e,t,n));s=Promise.all(r)}else if("string"==typeof t)s=Dc(e,t,n);else{const r="function"==typeof t?yc(e,t,n.custom):t;s=Promise.all(Pc(e,r,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}(e,t,n)))}function Uc(e){let t=Fc(e),n=Wc(),s=!0;const r=t=>(n,s)=>{var r;const i=yc(e,s,"exit"===t?null==(r=e.presenceContext)?void 0:r.custom:void 0);if(i){const{transition:e,transitionEnd:t,...s}=i;n={...n,...s,...t}}return n};function i(i){const{props:o}=e,a=Oc(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<Bc;t++){const h=Lc[t],m=n[h],p=void 0!==o[h]?o[h]:a[h],f=el(p),g=h===i?m.isActive:null;!1===g&&(u=t);let x=p===a[h]&&p!==o[h]&&f;if(x&&s&&e.manuallyAnimateOnMount&&(x=!1),m.protectedKeys={...d},!m.isActive&&null===g||!p&&!m.prevProp||Qa(p)||"boolean"==typeof p)continue;const v=Hc(m.prevProp,p);let y=v||h===i&&m.isActive&&!x&&f||t>u&&f,b=!1;const w=Array.isArray(p)?p:[p];let k=w.reduce(r(h),{});!1===g&&(k={});const{prevResolvedValues:E={}}=m,S={...E,...k},C=t=>{y=!0,c.has(t)&&(b=!0,c.delete(t)),m.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in S){const t=k[e],n=E[e];if(d.hasOwnProperty(e))continue;let s=!1;s=bc(t)&&bc(n)?!$c(t,n):t!==n,s?null!=t?C(e):c.add(e):void 0!==t&&c.has(e)?C(e):m.protectedKeys[e]=!0}m.prevProp=p,m.prevResolvedValues=k,m.isActive&&(d={...d,...k}),s&&e.blockInitialAnimation&&(y=!1);const N=x&&v;y&&(!N||b)&&l.push(...w.map(t=>{const n={type:h};if("string"==typeof t&&s&&!N&&e.manuallyAnimateOnMount&&e.parent){const{parent:s}=e,r=yc(s,t);if(s.enteringChildren&&r){const{delayChildren:t}=r.transition||{};n.delay=Mc(s.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(c.size){const t={};if("boolean"!=typeof o.initial){const n=yc(e,Array.isArray(o.initial)?o.initial[0]:o.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const s=e.getBaseTarget(n),r=e.getValue(n);r&&(r.liveStyle=!0),t[n]=s??null}),l.push({animation:t})}let h=Boolean(l.length);return!s||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(h=!1),s=!1,h?t(l):Promise.resolve()}return{animateChanges:i,setActive:function(t,s){var r;if(n[t].isActive===s)return Promise.resolve();null==(r=e.variantChildren)||r.forEach(e=>{var n;return null==(n=e.animationState)?void 0:n.setActive(t,s)}),n[t].isActive=s;const o=i(t);for(const e in n)n[e].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=Wc(),s=!0}}}function Hc(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!$c(t,e)}function Vc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Wc(){return{animate:Vc(!0),whileInView:Vc(),whileHover:Vc(),whileTap:Vc(),whileDrag:Vc(),whileFocus:Vc(),exit:Vc()}}class zc{constructor(e){this.isMounted=!1,this.node=e}update(){}}let Gc=0;const qc={animation:{Feature:class extends zc{constructor(e){super(e),e.animationState||(e.animationState=Uc(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Qa(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}}},exit:{Feature:class extends zc{constructor(){super(...arguments),this.id=Gc++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function Kc(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function Yc(e){return{point:{x:e.pageX,y:e.pageY}}}function Jc(e,t,n,s){return Kc(e,t,(e=>t=>Na(t)&&e(t,Yc(t)))(n),s)}function Xc(e){return e.max-e.min}function Zc(e,t,n,s=.5){e.origin=s,e.originPoint=pi(t.min,t.max,e.origin),e.scale=Xc(n)/Xc(t),e.translate=pi(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Qc(e,t,n,s){Zc(e.x,t.x,n.x,s?s.originX:void 0),Zc(e.y,t.y,n.y,s?s.originY:void 0)}function ed(e,t,n){e.min=n.min+t.min,e.max=e.min+Xc(t)}function td(e,t,n){e.min=t.min-n.min,e.max=e.min+Xc(t)}function nd(e,t,n){td(e.x,t.x,n.x),td(e.y,t.y,n.y)}function sd(e){return[e("x"),e("y")]}const rd=({current:e})=>e?e.ownerDocument.defaultView:null,id=(e,t)=>Math.abs(e-t);class od{constructor(e,t,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=cd(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=id(e.x,t.x),s=id(e.y,t.y);return Math.sqrt(n**2+s**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:s}=e,{timestamp:r}=_r;this.history.push({...s,timestamp:r});const{onStart:i,onMove:o}=this.handlers;t||(i&&i(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=ad(t,this.transformPagePoint),Cr.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:s,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=cd("pointercancel"===e.type?this.lastMoveEventInfo:ad(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),s&&s(e,i)},!Na(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=s||window;const o=ad(Yc(e),this.transformPagePoint),{point:a}=o,{timestamp:l}=_r;this.history=[{...a,timestamp:l}];const{onSessionStart:c}=t;c&&c(e,cd(o,this.history)),this.removeListeners=er(Jc(this.contextWindow,"pointermove",this.handlePointerMove),Jc(this.contextWindow,"pointerup",this.handlePointerUp),Jc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Nr(this.updatePoint)}}function ad(e,t){return t?{point:t(e.point)}:e}function ld(e,t){return{x:e.x-t.x,y:e.y-t.y}}function cd({point:e},t){return{point:e,delta:ld(e,ud(t)),offset:ld(e,dd(t)),velocity:hd(t,.1)}}function dd(e){return e[0]}function ud(e){return e[e.length-1]}function hd(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const r=ud(e);for(;n>=0&&(s=e[n],!(r.timestamp-s.timestamp>sr(t)));)n--;if(!s)return{x:0,y:0};const i=rr(r.timestamp-s.timestamp);if(0===i)return{x:0,y:0};const o={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function md(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function pd(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}const fd=.35;function gd(e,t,n){return{min:xd(e,t),max:xd(e,n)}}function xd(e,t){return"number"==typeof e?e:e[t]||0}const vd=new WeakMap;class yd{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&!1===s.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new od(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Yc(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:s,onDragStart:r}=this.getProps();if(n&&!s&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(i=n)||"y"===i?wa[i]?null:(wa[i]=!0,()=>{wa[i]=!1}):wa.x||wa.y?null:(wa.x=wa.y=!0,()=>{wa.x=wa.y=!1}),!this.openDragLock))return;var i;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sd(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Jr.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const s=n.layout.layoutBox[e];if(s){t=Xc(s)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),r&&Cr.postRender(()=>r(e,t)),Ec(this.visualElement,"transform");const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:s,onDirectionLock:r,onDrag:i}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:o}=t;if(s&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(o),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,o),this.updateAxis("y",t.point,o),this.visualElement.render(),i&&i(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>sd(e=>{var t;return"paused"===this.getAnimationState(e)&&(null==(t=this.getAxisMotionValue(e).animation)?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,distanceThreshold:n,contextWindow:rd(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,s=t||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!s||!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Cr.postRender(()=>o(n,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:s}=this.getProps();if(!n||!bd(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=function(e,{min:t,max:n},s){return void 0!==t&&e<t?e=s?pi(t,e,s.min):Math.max(e,t):void 0!==n&&e>n&&(e=s?pi(n,e,s.max):Math.min(e,n)),e}(i,this.constraints[e],this.elastic[e])),r.set(i)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(e=this.visualElement.projection)?void 0:e.layout,r=this.constraints;t&&$l(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!s)&&function(e,{top:t,left:n,bottom:s,right:r}){return{x:md(e.x,n,r),y:md(e.y,t,s)}}(s.layoutBox,t),this.elastic=function(e=fd){return!1===e?e=0:!0===e&&(e=fd),{x:gd(e,"left","right"),y:gd(e,"top","bottom")}}(n),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&sd(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(s.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!$l(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=function(e,t,n){const s=oc(e,n),{scroll:r}=t;return r&&(sc(s.x,r.offset.x),sc(s.y,r.offset.y)),s}(n,s.root,this.visualElement.getTransformPagePoint());let i=function(e,t){return{x:pd(e.x,t.x),y:pd(e.y,t.y)}}(s.layout.layoutBox,r);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(i));this.hasMutatedConstraints=!!e,e&&(i=zl(e))}return i}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:s,dragTransition:r,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},l=sd(o=>{if(!bd(o,t,this.currentDirection))return;let l=a&&a[o]||{};i&&(l={min:0,max:0});const c=s?200:1e6,d=s?40:1e7,u={type:"inertia",velocity:n?e[o]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...r,...l};return this.startAxisValueAnimation(o,u)});return Promise.all(l).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Ec(this.visualElement,e),n.start(Tc(e,n,0,t,this.visualElement,!1))}stopAnimation(){sd(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sd(e=>{var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.pause()})}getAnimationState(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[t];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){sd(t=>{const{drag:n}=this.getProps();if(!bd(t,n,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:n,max:i}=s.layout.layoutBox[t];r.set(e[t]-pi(n,i,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!$l(t)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};sd(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();s[e]=function(e,t){let n=.5;const s=Xc(e),r=Xc(t);return r>s?n=tr(t.min,t.max-s,e.min):s>r&&(n=tr(e.min,e.max-r,t.min)),Gs(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),sd(t=>{if(!bd(t,e,null))return;const n=this.getAxisMotionValue(t),{min:r,max:i}=this.constraints[t];n.set(pi(r,i,s[t]))})}addListeners(){if(!this.visualElement.current)return;vd.set(this.visualElement,this);const e=Jc(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();$l(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,s=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),Cr.read(t);const r=Kc(window,"resize",()=>this.scalePositionWithinConstraints()),i=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(sd(t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())});return()=>{r(),e(),s(),i&&i()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:i=fd,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:s,dragConstraints:r,dragElastic:i,dragMomentum:o}}}function bd(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const wd=e=>(t,n)=>{e&&Cr.postRender(()=>e(t,n))};const kd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ed(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Sd={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!Xr.test(e))return e;e=parseFloat(e)}return`${Ed(e,t.target.x)}% ${Ed(e,t.target.y)}%`}},Cd={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,r=ui.parse(e);if(r.length>5)return s;const i=ui.createTransformer(e),o="number"!=typeof r[0]?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;r[0+o]/=a,r[1+o]/=l;const c=pi(a,l,.5);return"number"==typeof r[2+o]&&(r[2+o]/=c),"number"==typeof r[3+o]&&(r[3+o]/=c),i(r)}};let Nd=!1;class _d extends n.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:s}=this.props,{projection:r}=e;!function(e){for(const t in e)al[t]=e[t],Mr(t)&&(al[t].isCSSVariable=!0)}(Ad),r&&(t.group&&t.group.add(r),n&&n.register&&s&&n.register(r),Nd&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),kd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:s,isPresent:r}=this.props,{projection:i}=n;return i?(i.isPresent=r,Nd=!0,s||e.layoutDependency!==t||void 0===t||e.isPresent!==r?i.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?i.promote():i.relegate()||Cr.postRender(()=>{const e=i.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ba.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:s}=e;Nd=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function jd(e){const[t,s]=Ua(),r=n.useContext(Bs);return Y.jsx(_d,{...e,layoutGroup:r,switchLayoutGroup:n.useContext(Bl),isPresent:t,safeToRemove:s})}const Ad={borderRadius:{...Sd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sd,borderTopRightRadius:Sd,borderBottomLeftRadius:Sd,borderBottomRightRadius:Sd,boxShadow:Cd};const Td=(e,t)=>e.depth-t.depth;class Rd{constructor(){this.children=[],this.isDirty=!1}add(e){Ws(this.children,e),this.isDirty=!0}remove(e){zs(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Td),this.isDirty=!1,this.children.forEach(e)}}const Pd=["TopLeft","TopRight","BottomLeft","BottomRight"],Md=Pd.length,Dd=e=>"string"==typeof e?parseFloat(e):e,$d=e=>"number"==typeof e||Xr.test(e);function Id(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Od=Bd(0,.5,fr),Ld=Bd(.5,.95,Zs);function Bd(e,t,n){return s=>s<e?0:s>t?1:n(tr(e,t,s))}function Fd(e,t){e.min=t.min,e.max=t.max}function Ud(e,t){Fd(e.x,t.x),Fd(e.y,t.y)}function Hd(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Vd(e,t,n,s,r){return e=Xl(e-=t,1/n,s),void 0!==r&&(e=Xl(e,1/r,s)),e}function Wd(e,t,[n,s,r],i,o){!function(e,t=0,n=1,s=.5,r,i=e,o=e){Jr.test(t)&&(t=parseFloat(t),t=pi(o.min,o.max,t/100)-o.min);if("number"!=typeof t)return;let a=pi(i.min,i.max,s);e===i&&(a-=t),e.min=Vd(e.min,t,n,a,r),e.max=Vd(e.max,t,n,a,r)}(e,t[n],t[s],t[r],t.scale,i,o)}const zd=["x","scaleX","originX"],Gd=["y","scaleY","originY"];function qd(e,t,n,s){Wd(e.x,t,zd,n?n.x:void 0,s?s.x:void 0),Wd(e.y,t,Gd,n?n.y:void 0,s?s.y:void 0)}function Kd(e){return 0===e.translate&&1===e.scale}function Yd(e){return Kd(e.x)&&Kd(e.y)}function Jd(e,t){return e.min===t.min&&e.max===t.max}function Xd(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Zd(e,t){return Xd(e.x,t.x)&&Xd(e.y,t.y)}function Qd(e){return Xc(e.x)/Xc(e.y)}function eu(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class tu{constructor(){this.members=[]}add(e){Ws(this.members,e),e.scheduleRender()}remove(e){if(zs(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let s=t;s>=0;s--){const e=this.members[s];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;!1===s&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const nu=["","X","Y","Z"];let su=0;function ru(e,t,n,s){const{latestValues:r}=t;r[e]&&(n[e]=r[e],t.setStaticValue(e,0),s&&(s[e]=0))}function iu(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Sc(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Cr,!(t||s))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&iu(s)}function ou({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(e={},n=(null==t?void 0:t())){this.id=su++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(cu),this.nodes.forEach(gu),this.nodes.forEach(xu),this.nodes.forEach(du)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new Rd)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new nr),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;var n;this.isSVG=Ma(t)&&!(Ma(n=t)&&"svg"===n.tagName),this.instance=t;const{layoutId:s,layout:r,visualElement:i}=this.options;if(i&&!i.current&&i.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||s)&&(this.isLayoutDirty=!0),e){let n,s=0;const r=()=>this.root.updateBlockedByResize=!1;Cr.read(()=>{s=window.innerWidth}),e(t,()=>{const e=window.innerWidth;e!==s&&(s=e,this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=Rr.now(),s=({timestamp:r})=>{const i=r-n;i>=t&&(Nr(s),e(i-t))};return Cr.setup(s,!0),()=>Nr(s)}(r,250),kd.hasAnimatedSinceResize&&(kd.hasAnimatedSinceResize=!1,this.nodes.forEach(fu)))})}s&&this.root.registerSharedNode(s,this),!1!==this.options.animate&&i&&(s||r)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:s})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const r=this.options.transition||i.getDefaultTransition()||Eu,{onLayoutAnimationStart:o,onLayoutAnimationComplete:a}=i.getProps(),l=!this.targetLayout||!Zd(this.targetLayout,s),c=!t&&n;if(this.options.layoutRoot||this.resumeFrom||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const t={...Qo(r,"layout"),onPlay:o,onComplete:a};(i.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,c)}else t||fu(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=s})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Nr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vu),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&iu(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const s=this.getTransformTemplate();this.prevTransformTemplateValue=s?s(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(hu);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(mu);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(pu),this.nodes.forEach(au),this.nodes.forEach(lu)):this.nodes.forEach(mu),this.clearAllSnapshots();const e=Rr.now();_r.delta=Gs(0,1e3/60,e-_r.timestamp),_r.timestamp=e,_r.isProcessing=!0,jr.update.process(_r),jr.preRender.process(_r),jr.render.process(_r),_r.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ba.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(uu),this.sharedNodes.forEach(yu)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Cr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Cr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||Xc(this.snapshot.measuredBox.x)||Xc(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=s(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!r)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Yd(this.projectionDelta),n=this.getTransformTemplate(),s=n?n(this.latestValues,""):void 0,i=s!==this.prevTransformTemplateValue;e&&this.instance&&(t||Kl(this.latestValues)||i)&&(r(this.instance,s),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var s;return e&&(n=this.removeTransform(n)),Nu((s=n).x),Nu(s.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(ju))){const{scroll:e}=this.root;e&&(sc(n.x,e.offset.x),sc(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(Ud(n,e),null==(t=this.scroll)?void 0:t.wasRoot)return n;for(let s=0;s<this.path.length;s++){const t=this.path[s],{scroll:r,options:i}=t;t!==this.root&&r&&i.layoutScroll&&(r.wasRoot&&Ud(n,e),sc(n.x,r.offset.x),sc(n.y,r.offset.y))}return n}applyTransform(e,t=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};Ud(n,e);for(let s=0;s<this.path.length;s++){const e=this.path[s];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&ic(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Kl(e.latestValues)&&ic(n,e.latestValues)}return Kl(this.latestValues)&&ic(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Ud(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Kl(e.latestValues))continue;ql(e.latestValues)&&e.updateSnapshot();const s=ac();Ud(s,e.measurePageBox()),qd(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,s)}return Kl(this.latestValues)&&qd(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_r.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const s=Boolean(this.resumingFrom)||this!==n;if(!(e||s&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(t=this.parent)?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:i}=this.options;if(this.layout&&(r||i)){if(this.resolvedRelativeTargetAt=_r.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},nd(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Ud(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var o,a,l;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,l=this.relativeParent.target,ed(o.x,a.x,l.x),ed(o.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Ud(this.target,this.layout.layoutBox),ec(this.target,this.targetDelta)):Ud(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},nd(this.relativeTargetOrigin,this.target,e.target),Ud(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!ql(this.parent.latestValues)&&!Yl(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let s=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(s=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(s=!1),this.resolvedRelativeTargetAt===_r.timestamp&&(s=!1),s)return;const{layout:r,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!i)return;Ud(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;!function(e,t,n,s=!1){const r=n.length;if(!r)return;let i,o;t.x=t.y=1;for(let a=0;a<r;a++){i=n[a],o=i.projectionDelta;const{visualElement:r}=i.options;r&&r.props.style&&"contents"===r.props.style.display||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ic(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,ec(e,o)),s&&Kl(i.latestValues)&&ic(e,i.latestValues))}t.x<nc&&t.x>tc&&(t.x=1),t.y<nc&&t.y>tc&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(Hd(this.prevProjectionDelta.x,this.projectionDelta.x),Hd(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Qc(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===o&&this.treeScale.y===a&&eu(this.projectionDelta.x,this.prevProjectionDelta.x)&&eu(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null==(t=this.options.visualElement)||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const n=this.snapshot,s=n?n.latestValues:{},r={...this.latestValues},i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const o={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(ku));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,m,p,f,g;bu(i.x,e.x,n),bu(i.y,e.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(nd(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),m=this.relativeTarget,p=this.relativeTargetOrigin,f=o,g=n,wu(m.x,p.x,f.x,g),wu(m.y,p.y,f.y,g),u&&(l=this.relativeTarget,h=u,Jd(l.x,h.x)&&Jd(l.y,h.y))&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),Ud(u,this.relativeTarget)),a&&(this.animationValues=r,function(e,t,n,s,r,i){r?(e.opacity=pi(0,n.opacity??1,Od(s)),e.opacityExit=pi(t.opacity??1,0,Ld(s))):i&&(e.opacity=pi(t.opacity??1,n.opacity??1,s));for(let o=0;o<Md;o++){const r=`border${Pd[o]}Radius`;let i=Id(t,r),a=Id(n,r);void 0===i&&void 0===a||(i||(i=0),a||(a=0),0===i||0===a||$d(i)===$d(a)?(e[r]=Math.max(pi(Dd(i),Dd(a),s),0),(Jr.test(a)||Jr.test(i))&&(e[r]+="%")):e[r]=a)}(t.rotate||n.rotate)&&(e.rotate=pi(t.rotate||0,n.rotate||0,s))}(r,s,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n,s;this.notifyListeners("animationStart"),null==(t=this.currentAnimation)||t.stop(),null==(s=null==(n=this.resumingFrom)?void 0:n.currentAnimation)||s.stop(),this.pendingAnimation&&(Nr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Cr.update(()=>{kd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ya(0)),this.currentAnimation=function(e,t,n){const s=Da(e)?e:ya(e);return s.start(Tc("",s,t,n)),s.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:s,latestValues:r}=e;if(t&&n&&s){if(this!==e&&this.layout&&s&&_u(this.options.animationType,this.layout.layoutBox,s.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Xc(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const s=Xc(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+s}Ud(t,n),ic(t,r),Qc(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new tu);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null==(e=this.getStack())?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null==(e=this.getStack())?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const s=this.getStack();s&&s.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const s={};n.z&&ru("z",e,s,this.animationValues);for(let r=0;r<nu.length;r++)ru(`rotate${nu[r]}`,e,s,this.animationValues),ru(`skew${nu[r]}`,e,s,this.animationValues);e.render();for(const r in s)e.setStaticValue(r,s[r]),this.animationValues&&(this.animationValues[r]=s[r]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=_l(null==t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=_l(null==t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!Kl(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const r=s.animationValues||s.latestValues;this.applyTransformsToTarget();let i=function(e,t,n){let s="";const r=e.x.translate/t.x,i=e.y.translate/t.y,o=(null==n?void 0:n.z)||0;if((r||i||o)&&(s=`translate3d(${r}px, ${i}px, ${o}px) `),1===t.x&&1===t.y||(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:r,rotateY:i,skewX:o,skewY:a}=n;e&&(s=`perspective(${e}px) ${s}`),t&&(s+=`rotate(${t}deg) `),r&&(s+=`rotateX(${r}deg) `),i&&(s+=`rotateY(${i}deg) `),o&&(s+=`skewX(${o}deg) `),a&&(s+=`skewY(${a}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return 1===a&&1===l||(s+=`scale(${a}, ${l})`),s||"none"}(this.projectionDeltaWithTransform,this.treeScale,r);n&&(i=n(r,i)),e.transform=i;const{x:o,y:a}=this.projectionDelta;e.transformOrigin=`${100*o.origin}% ${100*a.origin}% 0`,s.animationValues?e.opacity=s===this?r.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:r.opacityExit:e.opacity=s===this?void 0!==r.opacity?r.opacity:"":void 0!==r.opacityExit?r.opacityExit:0;for(const l in al){if(void 0===r[l])continue;const{correct:t,applyTo:n,isCSSVariable:o}=al[l],a="none"===i?r[l]:t(r[l],s);if(n){const t=n.length;for(let s=0;s<t;s++)e[n[s]]=a}else o?this.options.visualElement.renderState.vars[l]=a:e[l]=a}this.options.layoutId&&(e.pointerEvents=s===this?_l(null==t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach(hu),this.root.sharedNodes.clear()}}}function au(e){e.updateLayout()}function lu(e){var t;const n=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=e.layout,{animationType:r}=e.options,i=n.source!==e.layout.source;"size"===r?sd(e=>{const s=i?n.measuredBox[e]:n.layoutBox[e],r=Xc(s);s.min=t[e].min,s.max=s.min+r}):_u(r,n.layoutBox,t)&&sd(s=>{const r=i?n.measuredBox[s]:n.layoutBox[s],o=Xc(t[s]);r.max=r.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[s].max=e.relativeTarget[s].min+o)});const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Qc(o,t,n.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i?Qc(a,e.applyTransform(s,!0),n.measuredBox):Qc(a,t,n.layoutBox);const l=!Yd(o);let c=!1;if(!e.resumeFrom){const s=e.getClosestProjectingParent();if(s&&!s.resumeFrom){const{snapshot:r,layout:i}=s;if(r&&i){const o={x:{min:0,max:0},y:{min:0,max:0}};nd(o,n.layoutBox,r.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};nd(a,t,i.layoutBox),Zd(o,a)||(c=!0),s.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=o,e.relativeParent=s)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function cu(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function du(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function uu(e){e.clearSnapshot()}function hu(e){e.clearMeasurements()}function mu(e){e.isLayoutDirty=!1}function pu(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function fu(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function gu(e){e.resolveTargetDelta()}function xu(e){e.calcProjection()}function vu(e){e.resetSkewAndRotation()}function yu(e){e.removeLeadSnapshot()}function bu(e,t,n){e.translate=pi(t.translate,0,n),e.scale=pi(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function wu(e,t,n,s){e.min=pi(t.min,n.min,s),e.max=pi(t.max,n.max,s)}function ku(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Eu={duration:.45,ease:[.4,0,.1,1]},Su=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Cu=Su("applewebkit/")&&!Su("chrome/")?Math.round:Zs;function Nu(e){e.min=Cu(e.min),e.max=Cu(e.max)}function _u(e,t,n){return"position"===e||"preserve-aspect"===e&&(s=Qd(t),r=Qd(n),i=.2,!(Math.abs(s-r)<=i));var s,r,i}function ju(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}const Au=ou({attachResizeListener:(e,t)=>Kc(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Tu={current:void 0},Ru=ou({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Tu.current){const e=new Au({});e.mount(window),e.setOptions({layoutScroll:!0}),Tu.current=e}return Tu.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Pu={pan:{Feature:class extends zc{constructor(){super(...arguments),this.removePointerDownListener=Zs}onPointerDown(e){this.session=new od(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:rd(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:wd(e),onStart:wd(t),onMove:n,onEnd:(e,t)=>{delete this.session,s&&Cr.postRender(()=>s(e,t))}}}mount(){this.removePointerDownListener=Jc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends zc{constructor(e){super(e),this.removeGroupControls=Zs,this.removeListeners=Zs,this.controls=new yd(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zs}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Ru,MeasureLayout:jd}};function Mu(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover","Start"===n);const r=s["onHover"+n];r&&Cr.postRender(()=>r(t,Yc(t)))}function Du(e,t,n){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap","Start"===n);const r=s["onTap"+("End"===n?"":n)];r&&Cr.postRender(()=>r(t,Yc(t)))}const $u=new WeakMap,Iu=new WeakMap,Ou=e=>{const t=$u.get(e.target);t&&t(e)},Lu=e=>{e.forEach(Ou)};function Bu(e,t,n){const s=function({root:e,...t}){const n=e||document;Iu.has(n)||Iu.set(n,{});const s=Iu.get(n),r=JSON.stringify(t);return s[r]||(s[r]=new IntersectionObserver(Lu,{root:e,...t})),s[r]}(t);return $u.set(e,n),s.observe(e),()=>{$u.delete(e),s.unobserve(e)}}const Fu={some:0,all:1};const Uu=Wl({...qc,...{inView:{Feature:class extends zc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:s="some",once:r}=e,i={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof s?s:Fu[s]};return Bu(this.node.current,i,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:s}=this.node.getProps(),i=t?n:s;i&&i(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends zc{mount(){const{current:e}=this.node;e&&(this.unmount=Pa(e,(e,t)=>(Du(this.node,t,"Start"),(e,{success:t})=>Du(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends zc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=er(Kc(this.node.current,"focus",()=>this.onFocus()),Kc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends zc{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){const[s,r,i]=Ea(e,n),o=e=>{if(!Sa(e))return;const{target:n}=e,s=t(n,e);if("function"!=typeof s||!n)return;const i=e=>{Sa(e)&&(s(e),n.removeEventListener("pointerleave",i))};n.addEventListener("pointerleave",i,r)};return s.forEach(e=>{e.addEventListener("pointerenter",o,r)}),i}(e,(e,t)=>(Mu(this.node,t,"Start"),e=>Mu(this.node,e,"End"))))}unmount(){}}}},...Pu,...{layout:{ProjectionNode:Ru,MeasureLayout:jd}}},vc),Hu={glass:"rounded-2xl border overflow-hidden backdrop-blur-md bg-card/4 border-border shadow-xl shadow-black/40",solid:"rounded-2xl border overflow-hidden bg-card/80 border-border shadow-sm",plain:"rounded-2xl overflow-hidden"},Vu={sm:"px-3 py-2.5",md:"px-4 py-3",lg:"px-5 py-4"};function Wu({expanded:e,onToggle:t,title:s,subtitle:r,leading:i,trailing:o,children:a,variant:l="glass",className:d="",headerClassName:u="",bodyClassName:h="",size:m="md",disableChevron:p=!1,disabled:f=!1,transition:g={duration:.3},style:x}){const v=n.useId();return Y.jsxs(Uu.div,{layout:!0,initial:!1,transition:g,style:x,className:[Hu[l],e?"ring-1 ring-border":"",d].join(" "),children:[Y.jsxs("button",{type:"button",onClick:f?void 0:t,"aria-expanded":e,"aria-controls":v,className:["w-full flex items-center gap-3 text-left select-none",Vu[m],u,f?"opacity-60 cursor-default":"hover:bg-card/3"].join(" "),children:[i&&Y.jsx("div",{className:"w-12 h-12 rounded-xl overflow-hidden bg-card/10 flex items-center justify-center shrink-0",children:i}),Y.jsxs("div",{className:"min-w-0 flex-1",children:[Y.jsx("div",{className:["truncate font-semibold","glass"===l?"text-black opacity-95":"text-black"].join(" "),children:s}),r&&Y.jsx("div",{className:["truncate text-sm","glass"===l?"text-black opacity-60":"text-black"].join(" "),children:r})]}),o,!p&&Y.jsx(Uu.div,{animate:{rotate:e?180:0},transition:{type:"spring",stiffness:300,damping:24,...g},className:["ml-1","glass"===l?"text-black opacity-70":"text-black"].join(" "),children:Y.jsx(c,{size:18})})]}),Y.jsx(Wa,{initial:!1,children:e&&Y.jsx(Uu.div,{id:v,layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:g,className:["pt-1 pb-4 px-4",h,"glass"===l?"text-black opacity-90":"text-black"].join(" "),children:a},"body")})]})}function zu({className:e,step:t,min:n,mode:s,inputMode:r,pattern:i,onFocus:o,...a}){const l=s??"decimal",c=r??l,d=i??("numeric"===l?"[0-9]*":"[0-9]*[.,]?[0-9]*");return Y.jsx(Ts,{type:"number",inputMode:c,pattern:d,step:t,min:n,className:Kn(e),onFocus:e=>{e.target.select(),null==o||o(e)},...a})}const Gu=({mode:e="edit",items:t,weightUnitLabel:s="kg",onChange:r,onRemove:i,onAdd:o,onToggleDone:l,onDeleteExercise:c,deleteTitle:d="Remove this exercise from the routine",deleteDisabled:u=!1,onFocusScroll:h,disabled:m=!1,className:p=""})=>{const f=m||"view"===e,g=f||u;return n.useEffect(()=>{},[e,m,f,t.length,i,r,o,c,h,p]),Y.jsxs("div",{className:p,children:[Y.jsxs("div",{className:"grid grid-cols-4 gap-3 md:gap-4 text-[10px] md:text-xs text-black uppercase tracking-wider mb-2",children:[Y.jsx("span",{children:"Set"}),Y.jsx("span",{className:"text-center",children:"Reps"}),Y.jsxs("span",{className:"text-center",children:["Weight (",s,")"]}),Y.jsx("span",{})]}),Y.jsx("div",{className:"space-y-3",children:t.map((n,s)=>{const o="edit"===e&&!f&&!!i&&(n.removable??!0)&&t.length>1;return Y.jsxs("div",{className:"grid grid-cols-4 gap-3 md:gap-4 items-center py-2 px-3 rounded-lg border border-border/20 "+(n.done?"bg-success-light":"bg-soft-gray/30"),children:[Y.jsx("span",{className:"text-sm font-medium text-black",children:s+1}),Y.jsx(zu,{mode:"numeric",step:1,min:0,value:n.reps??"0",onFocus:h,onChange:e=>null==r?void 0:r(n.key,"reps",e.target.value),disabled:f,className:"bg-input-background border-border text-black text-center h-10 md:h-8 rounded-md focus:border-warm-sage/20 text-sm "+(f?"opacity-50 cursor-not-allowed":"")}),Y.jsx(zu,{mode:"decimal",step:.5,min:0,value:n.weight??"0",onFocus:h,onChange:e=>null==r?void 0:r(n.key,"weight",e.target.value),disabled:f,className:"bg-input-background border-border text-black text-center h-10 md:h-8 rounded-md focus:border-warm-sage/20 text-sm "+(f?"opacity-50 cursor-not-allowed":"")}),"workout"===e?Y.jsx("div",{className:"flex justify-end",children:Y.jsx("input",{type:"checkbox",checked:!!n.done,onChange:e=>null==l?void 0:l(n.key,e.target.checked),className:"w-5 h-5 ml-auto rounded-full border-2 border-border text-black accent-success checked:border-success"})}):o?Y.jsx(ys,{type:"button",variant:"ghost",size:"sm",onClick:()=>null==i?void 0:i(n.key),className:"p-1 h-auto ml-auto",title:"Remove this set",children:Y.jsx(x,{size:14})}):Y.jsx("div",{className:"w-6 h-6 ml-auto"})]},n.key)})}),(o||c)&&Y.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[o?Y.jsxs(ys,{onClick:o,variant:"primary",className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium",disabled:g,title:g?f?"Editing disabled":"Adding sets is disabled":"Add a set",children:[Y.jsx(a,{size:16}),Y.jsx("span",{className:"text-xs md:text-sm font-medium uppercase tracking-wider",children:"Add Set"})]}):Y.jsx("div",{}),c&&Y.jsx(ys,{variant:"secondary",size:"sm",onClick:c,disabled:u||f,className:"p-2 h-auto rounded-lg font-medium "+(u||f?"opacity-50 cursor-not-allowed":"bg-destructive-light text-black hover:bg-destructive"),title:d,children:Y.jsx(v,{size:16})})]})]})},qu=({items:e,weightUnitLabel:t,onChange:n,onRemove:s,onAdd:r,onToggleDone:i,onDeleteExercise:o,deleteDisabled:a,disabled:l=!1,onFocusScroll:c,className:d="",note:u,onCancel:h,onPrimary:m,primaryLabel:p="Save",primaryDisabled:f=!1,mode:g="edit"})=>Y.jsxs("div",{className:["rounded-2xl bg-card/70 border border-border p-3 md:p-4",d].join(" "),children:[u&&Y.jsx("p",{className:"text-xs md:text-sm text-black mb-3 italic bg-[var(--warm-cream)]/60 p-3 rounded-lg",children:u}),Y.jsx(Gu,{mode:g,items:e,weightUnitLabel:t,onDeleteExercise:"workout"===g?void 0:o,deleteDisabled:a,onChange:n,onRemove:"workout"===g?void 0:s,onAdd:r,onToggleDone:i,onFocusScroll:c,disabled:l}),"workout"!==g&&h&&Y.jsx("div",{className:"mt-4 flex justify-end items-center gap-2",children:Y.jsx(ys,{variant:"secondary",size:"sm",onClick:h,disabled:l,className:"p-3 h-auto bg-card/70 border-destructive-light text-black hover:bg-destructive-light btn-tactile rounded-xl font-medium "+(l?"opacity-50 cursor-not-allowed":""),title:"Cancel",children:Y.jsx(v,{size:18})})}),"workout"!==g&&m&&Y.jsx("div",{className:"mt-6",children:Y.jsx(ys,{onClick:m,disabled:f||l,className:"w-full h-12 md:h-14 bg-primary text-black font-medium rounded-full hover:bg-primary-hover btn-tactile "+(f||l?"opacity-50 cursor-not-allowed":""),children:p})})]});
/*! Capacitor: https://capacitorjs.com/ - MIT License */
var Ku,Yu;(Yu=Ku||(Ku={})).Unimplemented="UNIMPLEMENTED",Yu.Unavailable="UNAVAILABLE";class Ju extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const Xu=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},s=n.Plugins=n.Plugins||{},r=()=>null!==t?t.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e),i=e=>{var t;return null===(t=n.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},o=new Map;return n.convertFileSrc||(n.convertFileSrc=e=>e),n.getPlatform=r,n.handleError=t=>e.console.error(t),n.isNativePlatform=()=>"web"!==r(),n.isPluginAvailable=e=>{const t=o.get(e);return!!(null==t?void 0:t.platforms.has(r()))||!!i(e)},n.registerPlugin=(e,a={})=>{const l=o.get(e);if(l)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),l.proxy;const c=r(),d=i(e);let u;const h=s=>{let r;const i=(...i)=>{const o=(async()=>(!u&&c in a?u=u="function"==typeof a[c]?await a[c]():a[c]:null!==t&&!u&&"web"in a&&(u=u="function"==typeof a.web?await a.web():a.web),u))().then(t=>{const o=((t,s)=>{var r,i;if(!d){if(t)return null===(i=t[s])||void 0===i?void 0:i.bind(t);throw new Ju(`"${e}" plugin is not implemented on ${c}`,Ku.Unimplemented)}{const i=null==d?void 0:d.methods.find(e=>s===e.name);if(i)return"promise"===i.rtype?t=>n.nativePromise(e,s.toString(),t):(t,r)=>n.nativeCallback(e,s.toString(),t,r);if(t)return null===(r=t[s])||void 0===r?void 0:r.bind(t)}})(t,s);if(o){const e=o(...i);return r=null==e?void 0:e.remove,e}throw new Ju(`"${e}.${s}()" is not implemented on ${c}`,Ku.Unimplemented)});return"addListener"===s&&(o.remove=async()=>r()),o};return i.toString=()=>`${s.toString()}() { [capacitor code] }`,Object.defineProperty(i,"name",{value:s,writable:!1,configurable:!1}),i},m=h("addListener"),p=h("removeListener"),f=(e,t)=>{const n=m({eventName:e},t),s=async()=>{const s=await n;p({eventName:e,callbackId:s},t)},r=new Promise(e=>n.then(()=>e({remove:s})));return r.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await s()},r},g=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return d?f:m;case"removeListener":return p;default:return h(t)}}});return s[e]=g,o.set(e,{name:e,proxy:g,platforms:new Set([...Object.keys(a),...d?[c]:[]])}),g},n.Exception=Ju,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Zu=(e=>e.Capacitor=Xu(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:{}),Qu=Zu.registerPlugin;class eh{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),n&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const s=this.listeners[e];if(s)s.forEach(e=>e(t));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new Zu.Exception(e,Ku.Unimplemented)}unavailable(e="not available"){return new Zu.Exception(e,Ku.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const s=n.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const th=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),nh=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class sh extends eh{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[n,s]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=nh(n).trim(),s=nh(s).trim(),t[n]=s}),t}async setCookie(e){try{const t=th(e.key),n=th(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),i=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${s}; path=${r}; ${i};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Qu("CapacitorCookies",{web:()=>new sh});const rh=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),s=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((n,s,r)=>(n[s]=e[t[r]],n),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)n.body=e.data;else if(s.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,s]of Object.entries(e.data||{}))t.set(n,s);n.body=t.toString()}else if(s.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,n)=>{t.append(n,e)});else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const s=new Headers(n.headers);s.delete("content-type"),n.headers=s}else(s.includes("application/json")||"object"==typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class ih extends eh{async request(e){const t=rh(e,e.webFetchExtra),n=((e,t=!0)=>e?Object.entries(e).reduce((e,n)=>{const[s,r]=n;let i,o;return Array.isArray(r)?(o="",r.forEach(e=>{i=t?encodeURIComponent(e):e,o+=`${s}=${i}&`}),o.slice(0,-1)):(i=t?encodeURIComponent(r):r,o=`${s}=${i}`),`${e}&${o}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),s=n?`${e.url}?${n}`:e.url,r=await fetch(s,t),i=r.headers.get("content-type")||"";let o,a,{responseType:l="text"}=r.ok?e:{};switch(i.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":a=await r.blob(),o=await(async e=>new Promise((t,n)=>{const s=new FileReader;s.onload=()=>{const e=s.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},s.onerror=e=>n(e),s.readAsDataURL(e)}))(a);break;case"json":o=await r.json();break;default:o=await r.text()}const c={};return r.headers.forEach((e,t)=>{c[t]=e}),{data:o,headers:c,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Qu("CapacitorHttp",{web:()=>new ih});const oh=Object.freeze(Object.defineProperty({__proto__:null,Capacitor:Zu,CapacitorException:Ju,get ExceptionCode(){return Ku},WebPlugin:eh,buildRequestInit:rh,registerPlugin:Qu},Symbol.toStringTag,{value:"Module"})),ah=Qu("App",{web:()=>De(()=>import("./web-Bo_uWEz9.js"),__vite__mapDeps([6,1,2])).then(e=>new e.AppWeb)}),lh=Object.freeze(Object.defineProperty({__proto__:null,App:ah},Symbol.toStringTag,{value:"Module"})),ch=[];let dh=null;function uh(e){dh!==e&&(dh=e,ae(`[APP-STATE] App state changed - isActive: ${e}, total savers: ${ch.length}`),e?(ae(`[APP-STATE] App becoming active - restoring state for ${ch.length} savers`),ch.forEach(({key:e,restore:t})=>{const n=ue.get(`appstate:${e}`,Number.MAX_SAFE_INTEGER);if(null!==n)try{ae(`[APP-STATE] Restoring state for key: ${e}`,n),t(n),ae(`[APP-STATE] Successfully restored state for key: ${e}`)}catch(s){ae(`[APP-STATE] Failed to restore state for key: ${e}`,s)}finally{ue.remove(`appstate:${e}`),ae(`[APP-STATE] Removed cached state for key: ${e}`)}else ae(`[APP-STATE] No cached state found for key: ${e}`)}),ae("[APP-STATE] Completed restoring all states")):(ae(`[APP-STATE] App becoming inactive - saving state for ${ch.length} savers`),ch.forEach(({key:e,save:t})=>{try{ae(`[APP-STATE] Saving state for key: ${e}`);const n=t();ue.set(`appstate:${e}`,n),ae(`[APP-STATE] Successfully saved state for key: ${e}`,n)}catch(n){ae(`[APP-STATE] Failed to save state for key: ${e}`,n)}}),ae("[APP-STATE] Completed saving all states")))}function hh(e,t,s){const r=n.useRef(t);n.useEffect(()=>{r.current=t},[t,e]),n.useEffect(()=>{ae(`[APP-STATE] useAppStateSaver - setting up state saver for key: ${e}`);const t=`appstate:${e}`,n=ue.get(t,Number.MAX_SAFE_INTEGER);if(null!==n)try{ae(`[APP-STATE] Restoring cached state for key: ${e} on mount`,n),s(n),ae(`[APP-STATE] Successfully restored cached state for key: ${e} on mount`)}catch(i){ae(`[APP-STATE] Failed to restore cached state for key: ${e} on mount`,i)}finally{ue.remove(t),ae(`[APP-STATE] Removed cached state for key: ${e} on mount`)}else ae(`[APP-STATE] No cached state found for key: ${e} on mount`);return function(e,t,n){return ae(`[APP-STATE] Registering state saver for key: ${e}`),ch.push({key:e,save:t,restore:n}),ae(`[APP-STATE] Total savers registered: ${ch.length}`),()=>{const s=ch.findIndex(s=>s.key===e&&s.save===t&&s.restore===n);s>=0?(ch.splice(s,1),ae(`[APP-STATE] Unregistered state saver for key: ${e}. Remaining savers: ${ch.length}`)):ae(`[APP-STATE] State saver not found for unregistration: ${e}`)}}(e,()=>r.current,s)},[e,s])}ae("[APP-STATE] Setting up app state change listeners"),ah.addListener("appStateChange",({isActive:e})=>{ae(`[APP-STATE] Capacitor app state change event - isActive: ${e}`),uh(e)}),"undefined"!=typeof document?(ae("[APP-STATE] Setting up document visibility change listener"),document.addEventListener("visibilitychange",()=>{const e="visible"===document.visibilityState;ae(`[APP-STATE] Document visibility change event - isVisible: ${e}`),uh(e)})):ae("[APP-STATE] Document not available - skipping visibility change listener");const mh="cm",ph="kg",fh=2.2046226218,gh=(e,t)=>{if(!Number.isFinite(e))return"";if(t<=0)return Math.round(e).toString();const n=((e,t)=>{const n=10**t;return Math.round(e*n)/n})(e,t);return Number(n.toFixed(t)).toString()},xh=(e,t)=>{if(!e)return!0;const n=e.trim();if(!n)return!0;if("."===n||"-."===n||"+."===n)return t>=0;return new RegExp(`^[-+]?\\d*(?:\\.\\d{0,${t}})?$`).test(n)},vh=e=>xh(e,2),yh=e=>xh(e,2),bh=e=>"m"===e||"cm"===e?e:mh,wh=e=>"lb"===e||"lbs"===e?"lb":ph,kh=(e,t)=>"m"===bh(t)?100*e:e,Eh=(e,t)=>"lb"===wh(t)?e/fh:e,Sh=(e,t,n=("m"===t?2:1))=>{if(null==e||!Number.isFinite(e))return"";const s=((e,t)=>"m"===bh(t)?e/100:e)(e,t);return gh(s,n)},Ch=(e,t,n=2)=>{if(null==e||!Number.isFinite(e))return"";const s=((e,t)=>"lb"===wh(t)?e*fh:e)(e,t);return gh(s,n)},Nh=(e,t)=>{const n=e.trim();if(!n)return;const s=Number(n);return Number.isFinite(s)?kh(s,t):void 0},_h=e=>bh(e),jh=e=>"lb"===wh(e)?"lbs":"kg",Ah=(e,t)=>{const n=(new Date).toISOString();t?le(`ğŸ“ JNL [${n}] ${e}`,t):le(`ğŸ“ JNL [${n}] ${e}`)},Th=(e,t)=>{Ah(`=== JOURNAL STATE AFTER ${t} ===`),Ah(`Exercise Actions (${e.ex.length}):`,e.ex),Ah(`Set Actions (${e.sets.length}):`,e.sets),Ah(`Total Actions: ${e.ex.length+e.sets.length}`),Ah("=== END JOURNAL STATE ===")};function Rh(e,t,n,s,r,i){const o={t:"SET_ADD",exId:t,setId:n,set_order:s,reps:r,weight:i};Ah("Recording SET_ADD action:",o),e.sets.push(o),Th(e,"SET_ADD")}function Ph(e,t,n,s,r){const i={t:"SET_UPDATE",exId:t,setId:n,reps:s,weight:r};Ah("Recording SET_UPDATE action:",i),e.sets.push(i),Th(e,"SET_UPDATE")}function Mh(e,t,n,s){const r={t:"SET_REORDER",exId:t,setId:n,set_order:s};Ah("Recording SET_REORDER action:",r),e.sets.push(r),Th(e,"SET_REORDER")}const Dh=(e,t)=>{const n=(new Date).toISOString();t?le(`ğŸ“ JNL [${n}] ${e}`,t):le(`ğŸ“ JNL [${n}] ${e}`)};function $h(e){var t,n,s,r,i,o,a,l;Dh("Starting collapseJournal with journal:",e),Dh(`Exercise actions: ${e.ex.length}, Set actions: ${e.sets.length}`);const c=new Map,d=new Map;Dh("=== FOLDING EXERCISE ACTIONS ===");for(const m of e.ex){Dh("Processing exercise action:",m);const e=c.get(m.exId)??{};"EX_ADD"===m.t&&(e.added={exerciseId:m.exerciseId,name:m.name,order:m.order},Dh("Added exercise to fold:",e.added)),"EX_DELETE"===m.t&&(e.deleted=!0,Dh("Marked exercise as deleted in fold:",e)),"EX_REORDER"===m.t&&(e.finalOrder=m.order,Dh("Updated final order in fold:",e)),"EX_UPDATE_META"===m.t&&(e.meta={...e.meta,...m},Dh("Updated meta in fold:",e.meta)),c.set(m.exId,e),Dh(`Updated exercise action map for exId ${m.exId}:`,e)}const u=(e,t)=>`${e}:${t}`;for(const m of e.sets){const e=u(m.exId,m.setId),t=d.get(e)??{};switch(m.t){case"SET_ADD":t.added={reps:m.reps,weight:m.weight,set_order:m.set_order},t.touched=!0;break;case"SET_UPDATE":t.final={...t.final,...void 0!==m.reps?{reps:m.reps}:{},...void 0!==m.weight?{weight:m.weight}:{}},t.touched=!0;break;case"SET_DELETE":t.deleted=!0,t.touched=!0;break;case"SET_REORDER":t.final={...t.final,set_order:m.set_order},t.touched=!0}d.set(e,t)}const h={deleteExercises:[],deleteSets:[],updateSets:[],orderSets:[],createExercises:[],createSetsByExercise:{}};for(const[m,p]of c.entries())p.added&&p.deleted||(p.deleted&&m>0?h.deleteExercises.push(m):p.added&&h.createExercises.push({tempExId:m,exerciseId:p.added.exerciseId,order:p.finalOrder??p.added.order??1,name:p.added.name}));for(const[m,p]of d.entries()){const[e,d]=m.split(":"),u=Number(e),f=Number(d),g=c.get(u);if(!(null==g?void 0:g.deleted)&&(!p.added||!p.deleted))if(p.deleted&&f>0)h.deleteSets.push(f);else{if(p.added&&f<0){h.createSetsByExercise[u]||(h.createSetsByExercise[u]=[]);const e=parseInt(((null==(t=p.final)?void 0:t.reps)??p.added.reps)||"0",10)||0,r=parseFloat(((null==(n=p.final)?void 0:n.weight)??p.added.weight)||"0")||0,i=((null==(s=p.final)?void 0:s.set_order)??p.added.set_order??0)||0;(e>0||r>0)&&h.createSetsByExercise[u].push({setId:f,reps:e,weight:r,set_order:i});continue}if(f>0&&p.touched&&!p.deleted){if(void 0!==(null==(r=p.final)?void 0:r.reps)||void 0!==(null==(i=p.final)?void 0:i.weight)){const e=parseInt(((null==(o=p.final)?void 0:o.reps)??"0")||"0",10)||0,t=parseFloat(((null==(a=p.final)?void 0:a.weight)??"0")||"0")||0;h.updateSets.push({id:f,reps:e,weight:t})}void 0!==(null==(l=p.final)?void 0:l.set_order)&&h.orderSets.push({id:f,set_order:p.final.set_order})}}}for(const[m,p]of Object.entries(h.createSetsByExercise))p.length||delete h.createSetsByExercise[m];return h.createExercises=h.createExercises.filter(e=>{const t=h.createSetsByExercise[e.tempExId];return!(!t||0===t.length)||(delete h.createSetsByExercise[e.tempExId],!1)}),h}function Ih(e){return 0===e.ex.length&&0===e.sets.length}const Oh=(e,t)=>{const n=(new Date).toISOString();t?le(`ğŸ” DGB [${n}] ${e}`,t):le(`ğŸ” DGB [${n}] ${e}`)};async function Lh(e,t,n,s=ph){Oh("Starting runJournal with plan:",e),Oh(`Routine ID: ${t}, Exercise Map:`,n);const r=wh(s),i=e=>Number.isFinite(e)?Eh(e,r):0;e.deleteExercises.length&&(Oh(`Deleting ${e.deleteExercises.length} exercises:`,e.deleteExercises),await Promise.all(e.deleteExercises.map(e=>Ze.deleteRoutineExercise(e)))),e.deleteSets.length&&(Oh(`Deleting ${e.deleteSets.length} sets:`,e.deleteSets),await Promise.all(e.deleteSets.map(e=>Ze.deleteExerciseSet(e)))),e.updateSets.length&&(Oh(`Updating ${e.updateSets.length} sets:`,e.updateSets),await Promise.all(e.updateSets.map(e=>Ze.updateExerciseSet(e.id,e.reps,i(e.weight))))),e.orderSets.length&&(Oh(`Reordering ${e.orderSets.length} sets:`,e.orderSets),await Promise.all(e.orderSets.map(e=>Ze.updateExerciseSetOrder(e.id,e.set_order)))),Oh(`Creating ${e.createExercises.length} new exercises:`,e.createExercises);const o=new Map;for(const a of e.createExercises){const n=e.createSetsByExercise[a.tempExId];if(!n||0===n.length){Oh(`Skipping exercise ${a.tempExId} - no set payloads`);continue}Oh("Creating exercise:",a);const s=await Ze.addExerciseToRoutine(t,a.exerciseId,a.order);s&&(o.set(a.tempExId,s.routine_template_exercise_id),Oh(`Exercise created with template ID: ${s.routine_template_exercise_id}`))}Oh("Creating sets for exercises:",Object.keys(e.createSetsByExercise));for(const[a,l]of Object.entries(e.createSetsByExercise)){const e=Number(a);Oh(`Processing sets for exercise ID: ${e}, rows:`,l);const t=n[e],s=o.get(e)??(null==t?void 0:t.templateId),r=null==t?void 0:t.exerciseId;if(Oh(`Template ID: ${s}, Exercise ID: ${r}`),!s||!r){Oh(`Skipping exercise ${e} - missing templateId or exerciseId`);continue}const c=l.map(e=>({reps:e.reps,weight:i(e.weight),set_order:e.set_order||0})).filter(e=>e.reps>0||e.weight>0);Oh(`Filtered payload for exercise ${e}:`,c),c.length&&(Oh(`Adding ${c.length} sets to routine`),await Ze.addExerciseSetsToRoutine(s,r,c))}Oh(`Recomputing muscle summary for routine ${t}`),await Ze.recomputeAndSaveRoutineMuscleSummary(t),Oh("Journal execution completed successfully")}const Bh=()=>{const e=-Math.floor(1e9*Math.random())-1;return(e=>{const t=(new Date).toISOString();le(`ğŸ“ JNL [${t}] ${e}`)})(`Generated temp ID: ${e}`),e};function Fh({routineId:e,routineName:t,selectedExercisesForSetup:s,setSelectedExercisesForSetup:r,onBack:i,onSave:o,onAddMoreExercises:a,isEditingExistingRoutine:l=!1,onShowExerciseSelector:c,access:d=ws.Editable,initialMode:u="plan",onModeChange:h}){const{userToken:m}=bt(),[p,f]=n.useState(ph),[g,x]=n.useState(!1),v=n.useRef(ph),[y,b]=n.useState([]),[w,k]=n.useState(!0),[E,S]=n.useState(!1),[C,N]=n.useState(!1),[_,j]=n.useState(!1),[A,T]=n.useState({}),[R,P]=n.useState(u),M="workout"===R,D=n.useRef({ex:[],sets:[]}),$=n.useRef([]),I=n.useRef([]),O=n.useRef(null),L=n.useRef(null),[B,F]=n.useState(0);n.useEffect(()=>{let e=!1;return(async()=>{if(m)try{const t=await Ze.getMyProfile();if(e)return;const n=wh(null==t?void 0:t.weight_unit);f(n),v.current=n}catch(t){e||ie("Failed to load weight unit preference",t)}finally{e||x(!0)}else e||(f(ph),v.current=ph,x(!0))})(),()=>{e=!0}},[m]);const U=n.useMemo(()=>jh(p).toUpperCase(),[p]),H=n.useCallback(e=>{const t="number"==typeof e?e:null!=e&&""!==e?Number(e):0;if(!Number.isFinite(t))return"0";const n=Ch(t,p);return""!==n?n:"0"},[p]);n.useEffect(()=>{if(!g)return;const e=v.current;e!==p&&(b(t=>t.map(t=>({...t,sets:t.sets.map(t=>{const n=Number(t.weight);if(!Number.isFinite(n))return{...t,weight:"0"};const s=Eh(n,e),r=Ch(s,p);return{...t,weight:""!==r?r:"0"}})}))),v.current=p)},[p,g]);const V=n.useCallback(e=>{b(e.exercises??[]),P(e.screenMode??u),r(e.selectedExercisesForSetup??[]),F(e.elapsedSeconds??0),D.current=e.journal??{ex:[],sets:[]},$.current=e.savedSnapshot??[],I.current=e.preWorkoutExercises??[]},[u,r]);hh("exercise-setup",{exercises:y,screenMode:R,selectedExercisesForSetup:s,elapsedSeconds:B,journal:D.current,savedSnapshot:$.current,preWorkoutExercises:I.current},V);const W=e=>[Math.floor(e/3600),Math.floor(e%3600/60),e%60].map(e=>e.toString().padStart(2,"0")).join(":");n.useEffect(()=>(M?O.current=setInterval(()=>{null!=L.current&&F(Math.floor((Date.now()-L.current)/1e3))},1e3):(O.current&&(clearInterval(O.current),O.current=null),L.current=null,F(0)),()=>{O.current&&(clearInterval(O.current),O.current=null)}),[M]);const z=e=>{const t=(e??"").toString().trim();return t?/^(unknown|undefined|null|n\/a)$/i.test(t)?"":t:""},G=e=>e.map(e=>({id:e.id,exerciseId:e.exerciseId,sets:e.sets.slice().sort((e,t)=>e.set_order-t.set_order).map(e=>({id:e.id,set_order:e.set_order,reps:e.reps,weight:e.weight}))})).sort((e,t)=>e.id-t.id);n.useEffect(()=>{if(!m||!g)return;if(y.length>0)return void k(!1);let t=!1;return(async()=>{const n=Ie.start("ExerciseSetup - load saved exercises");k(!0);try{const n=await fs(e,{concurrency:ms,timer:Ie});if(t)return;const s=n.map(e=>({id:e.templateId,templateId:e.templateId,exerciseId:e.exerciseId,name:e.name,muscle_group:e.muscle_group,loaded:!0,expanded:!1,completed:!1,sets:e.sets.map(e=>({...e,weight:H(e.weight)}))}));b(s),$.current=G(s)}catch(s){ie(String(s)),dt.error("Failed to load exercises")}finally{t||k(!1),n.endWithLog()}})(),()=>{t=!0}},[e,m,g,H]),n.useEffect(()=>{w||0!==s.length&&(async()=>{const e=Ie.start("ExerciseSetup - add selected exercises");for(const t of s)await X(t);r([]),requestAnimationFrame(()=>window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})),e.endWithLog()})()},[s,w]);const q=e=>{b(t=>{const n=t.map(e=>({...e,sets:e.sets.map(e=>({...e}))}));return e(n),n})},K=e=>{const t=e.sets.length>0&&e.sets.every(e=>e.done);e.completed=t,e.expanded=!t},J=async e=>{if(e.loaded||!e.templateId)return;const t=Ie.start(`ExerciseSetup - ensureSetsLoaded for exercise ${e.id}`);T(t=>({...t,[String(e.id)]:!0}));try{const t=(await Ze.getExerciseSetsForRoutine(e.templateId)).sort((e,t)=>(e.set_order||0)-(t.set_order||0)).map(e=>({id:e.routine_template_exercise_set_id,set_order:e.set_order??0,reps:String(e.planned_reps??"0"),weight:H(e.planned_weight_kg)}));q(n=>{const s=n.findIndex(t=>t.id===e.id);s>=0&&(n[s].sets=t,n[s].loaded=!0)})}catch(n){ie(String(n)),dt.error("Failed to load sets")}finally{T(t=>{const n={...t};return delete n[String(e.id)],n}),t.endWithLog()}},X=async e=>{var t,n;const s=Ie.start("ExerciseSetup - addNewExercise"),r=Bh(),i=Bh();let o=(null==(t=e.name)?void 0:t.trim())||"",a=(null==(n=e.muscle_group||"")?void 0:n.toString().trim())||"";if(!o||!a){const t=Ie.start("ExerciseSetup - fetchExerciseMeta in addNewExercise"),n=await(async e=>{try{const t=await Ze.getExercise(e);return(Array.isArray(t)?t[0]:t)??null}catch(t){return ie(" [EXERCISE_SETUP] fetchExerciseMeta error:",t),null}})(e.exercise_id);n&&(o||(o=z(n.name)||o),a||(a=z(n.muscle_group)||a)),t.endWithLog()}b(t=>[...t,{id:r,exerciseId:e.exercise_id,name:o,muscle_group:a||void 0,loaded:!0,expanded:!0,completed:!1,sets:[{id:i,set_order:1,reps:"0",weight:"0",...M?{done:!1}:{}}]}]),function(e,t,n,s,r){const i={t:"EX_ADD",exId:t,exerciseId:n,name:s,order:r};Ah("Recording EX_ADD action:",i),e.ex.push(i),Th(e,"EX_ADD")}(D.current,r,e.exercise_id,o),Rh(D.current,r,i,1,"0","0"),s.endWithLog()},Z=async e=>{if(d===ws.ReadOnly)return;const t=y.find(t=>t.id===e);t&&(!t.loaded&&t.templateId&&await J(t),q(t=>{const n=t.findIndex(t=>t.id===e);if(n<0)return;const s=t[n],r=s.sets.reduce((e,t)=>Math.max(e,t.set_order||0),0)+1;const i=s.sets.length>0?s.sets.slice().sort((e,t)=>e.set_order-t.set_order)[s.sets.length-1]:void 0,o=Bh(),a=i?i.reps:"0",l=i?i.weight:"0";s.sets.push({id:o,set_order:r,reps:a,weight:l,...M?{done:!1}:{}}),Rh(D.current,e,o,r,a,l),K(s)}))},Q=(e,t)=>{if("number"==typeof t){const n=e.sets.find(e=>e.id===t);if(n)return n.id;const s=e.sets.find(e=>e.set_order===t);return s?s.id:null}if("string"==typeof t){const n=Number(t);if(!Number.isNaN(n)){const t=e.sets.find(e=>e.id===n);if(t)return t.id;const s=e.sets.find(e=>e.set_order===n);return s?s.id:null}}return null},ee=(e,t)=>{d!==ws.ReadOnly&&q(n=>{const s=n.findIndex(t=>t.id===e);if(s<0)return;const r=n[s],i=Q(r,t);if(null==i)return;const o=r.sets.slice();r.sets=r.sets.filter(e=>e.id!==i),function(e,t,n){const s={t:"SET_DELETE",exId:t,setId:n};Ah("Recording SET_DELETE action:",s),e.sets.push(s),Th(e,"SET_DELETE")}(D.current,e,i);let a=1;for(const t of r.sets){const n=o.find(e=>e.id===t.id);t.set_order=a++,t.id>0&&n&&n.set_order!==t.set_order&&Mh(D.current,e,t.id,t.set_order)}K(r)})},te=e=>{d!==ws.ReadOnly&&(b(t=>t.filter(t=>t.id!==e)),function(e,t){const n={t:"EX_DELETE",exId:t};Ah("Recording EX_DELETE action:",n),e.ex.push(n),Th(e,"EX_DELETE")}(D.current,e))},ne=e=>{P(e),null==h||h(e)},se=()=>{L.current=Date.now(),F(0),I.current=JSON.parse(JSON.stringify(y)),D.current={ex:[],sets:[]},b(e=>e.map(e=>({...e,sets:e.sets.map(e=>({...e,done:!1})),completed:!1,expanded:!1}))),ne("workout"),ae(" [EXERCISE_SETUP] Workout started for id: "+e)},re=async()=>{k(!0);try{const t=(await fs(e,{concurrency:ms,timer:Ie})).map(e=>({id:e.templateId,templateId:e.templateId,exerciseId:e.exerciseId,name:e.name,muscle_group:e.muscle_group,loaded:!0,expanded:!1,completed:!1,sets:e.sets.map(e=>({...e,weight:H(e.weight)}))}));b(t),$.current=G(t)}catch(t){ie(String(t)),dt.error("Failed to refresh")}finally{k(!1)}},oe=async()=>{if(!m)return void dt.error("Please sign in to save changes");const t=D.current;if(Ih(t))return void dt.message("No changes to save");const n={};for(const e of y)n[e.id]={templateId:e.templateId,exerciseId:e.exerciseId};const s=$h(t);S(!0);try{await Lh(s,e,n,p),D.current={ex:[],sets:[]},await re(),dt.success("All changes saved!"),null==o||o()}catch(r){ie(String(r)),dt.error("Failed to save changes")}finally{S(!1)}},le=n.useMemo(()=>Ie.timeSync("ExerciseSetup - check unsaved",()=>JSON.stringify(G(y))!==JSON.stringify($.current)),[y]),ce=y,de=n.useMemo(()=>y.filter(e=>e.completed).length,[y]),ue=n.useMemo(()=>y.some(e=>e.sets.some(e=>!e.done)),[y]),he=()=>{const e=Ie.start("ExerciseSetup - handleBack");if("plan"===R&&le){if(!window.confirm("You have unsaved changes. Leave without saving?"))return void e.endWithLog()}i(),e.endWithLog()},me=e=>{const t=!!A[String(e.id)],n=e.name.substring(0,2).toUpperCase(),s=e.loaded?e.sets.slice().sort((e,t)=>e.set_order-t.set_order).map(t=>({key:t.id,order:t.set_order,reps:t.reps,weight:t.weight,removable:e.sets.length>1,done:t.done})):[],r=(()=>{const t=z(e.muscle_group);if(e.loaded){const e=s.length,n=1===e?"1 Set":`${e} Sets`;return t?`${t} â€¢ ${n}`:n}return t||""})();return Y.jsx("div",{className:"scroll-mt-24",children:Y.jsx(Wu,{variant:"plain",size:"md",expanded:e.expanded,onToggle:()=>(async e=>{const t=y.find(t=>t.id===e);t&&(!t.loaded&&t.templateId&&await J(t),q(t=>{const n=t.findIndex(t=>t.id===e);n>=0&&(t[n].expanded=!t[n].expanded)}))})(e.id),title:e.name,subtitle:r,leading:Y.jsx("span",{className:"text-sm md:text-base font-medium text-black",children:n}),trailing:M?Y.jsx("input",{type:"checkbox",checked:e.completed,onClick:e=>e.stopPropagation(),onChange:t=>{(async(e,t)=>{const n=y.find(t=>t.id===e);n&&(!n.loaded&&n.templateId&&await J(n),q(n=>{const s=n.find(t=>t.id===e);s&&(s.sets.forEach(e=>e.done=t),K(s))}))})(e.id,t.target.checked)},className:"w-5 h-5 rounded-full border-2 border-border text-black accent-success checked:border-success"}):void 0,disableChevron:M,className:"w-full rounded-2xl border border-border card-modern shadow-xl hover:shadow-xl transition-all text-left "+(e.completed&&!e.expanded?"bg-success-light":"bg-card/80"),style:{border:"2px solid var(--border)"},bodyClassName:"pt-2",children:t||!e.loaded?Y.jsxs("div",{className:"flex items-center justify-center py-4",children:[Y.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-warm-coral border-t-transparent rounded-full"}),Y.jsx("span",{className:"ml-2 text-sm text-black",children:"Loading sets..."})]}):Y.jsx(qu,{name:e.name,initials:n,items:s,weightUnitLabel:U,mode:M?"workout":"edit",onChange:(t,n,s)=>((e,t,n,s)=>{d!==ws.ReadOnly&&q(r=>{const i=r.findIndex(t=>t.id===e);if(i<0)return;const o=r[i],a=Q(o,t);if(null==a)return;const l=o.sets.findIndex(e=>e.id===a);if(l<0)return;const c=o.sets[l];if("weight"===n&&!vh(s))return;const d={...c,[n]:s};o.sets[l]=d,"reps"===n?Ph(D.current,e,a,s,void 0):Ph(D.current,e,a,void 0,s)})})(e.id,t,n,s),onRemove:M?void 0:t=>ee(e.id,t),onAdd:()=>Z(e.id),onDeleteExercise:M?void 0:()=>te(e.id),onToggleDone:M?(t,n)=>((e,t,n)=>{q(s=>{const r=s.find(t=>t.id===e);if(!r)return;const i=Q(r,t);if(null==i)return;const o=r.sets.find(e=>e.id===i);o&&(o.done=n),K(r)})})(e.id,t,n):void 0,deleteDisabled:d===ws.ReadOnly,disabled:d===ws.ReadOnly,onFocusScroll:e=>{const t=e.currentTarget;setTimeout(()=>{t&&t.scrollIntoView&&t.scrollIntoView({block:"center",behavior:"smooth"})},60)},className:"mb-2"})})},e.id)};return Y.jsxs(Y.Fragment,{children:[Y.jsx(Lt,{header:Y.jsx(Xn,{title:t||"Routine",subtitle:M?W(B):void 0,subtitleClassName:"text-base font-bold text-black",onBack:M?void 0:he,...d!==ws.Editable||M?{}:{onAdd:()=>{l&&c?c():a()}},showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",padContent:!1,contentBottomPaddingClassName:le||M?"pb-24":"",bottomBar:"plan"===R?le?Y.jsx(Ms,{children:Y.jsx(Ps,{onClick:oe,disabled:E||d===ws.ReadOnly,children:E?"SAVING...":"SAVE ALL"})}):0===ce.length?null:Y.jsx(Ms,{children:Y.jsx(Ps,{onClick:se,children:"START WORKOUT"})}):Y.jsx(Ms,{children:Y.jsx(Ps,{onClick:()=>j(!0),disabled:C,children:C?"SAVING...":"END WORKOUT"})}),showHeaderBorder:!1,showBottomBarBorder:!1,contentClassName:"",children:Y.jsxs(ds,{gap:"fluid",children:[Y.jsx(os,{y:"sm"}),Y.jsx(rs,{variant:"plain",padding:"none",children:Y.jsxs("div",{className:"mt-2 mb-6",children:[M?de>0&&Y.jsxs("h3",{className:"text-xs md:text-sm text-black uppercase tracking-wider mb-3",children:[de," COMPLETED"]}):Y.jsxs("h3",{className:"text-xs md:text-sm text-black uppercase tracking-wider mb-3",children:["EXERCISES IN ROUTINE (",ce.length,")"]}),w?Y.jsx("div",{className:"space-y-3",children:[1,2].map(e=>Y.jsx(bs,{leading:Y.jsx("div",{}),leadingClassName:"w-10 h-10 md:w-12 md:h-12 bg-muted rounded-lg",primary:Y.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),secondary:Y.jsx("div",{className:"h-3 bg-muted rounded w-1/2"}),className:"px-3 md:px-4 bg-card/50 rounded-xl animate-pulse"},e))}):0===ce.length?Y.jsx("div",{className:"text-center py-4",children:Y.jsx("p",{className:"text-black",children:"Ready to add exercises to this routine"})}):Y.jsx("div",{className:"space-y-3",children:ce.map(e=>me(e))})]})})]})}),Y.jsx(_s,{open:_,onClose:()=>j(!1),title:"Finish Workout?",message:ue?"There are valid sets in this workout that have not been marked as complete.":void 0,actions:[{label:C?"Savingâ€¦":"Finish Workout",onClick:async()=>{j(!1),await(async()=>{if(m){N(!0);try{ae(" [EXERCISE_SETUP] Workout ended for id: "+e);let t={id:"123",template_id:e,started_at:(new Date).toISOString(),ended_at:(new Date).toISOString()};for(let e=0;e<y.length;e++){const n=y[e];let s={id:"123",workout_id:t.id,exercise_id:n.exerciseId,order_index:e+1};ae(" [EXERCISE_SETUP] Workout exercise added for id: "+n.exerciseId);for(const e of n.sets)ae(" [EXERCISE_SETUP] Workout set added for id: "+s.id+" Set order: "+e.set_order+" Reps: "+(Number(e.reps)||0)+" Weight: "+(Number(e.weight)||0)+" Done: "+(e.done?"DONE":"NOT DONE"))}ae(" [EXERCISE_SETUP] Workout ended for id: "+t.id);const n=null!=L.current?Math.floor((Date.now()-L.current)/1e3):B;ae(" [EXERCISE_SETUP] Workout duration: "+W(n));const s=D.current,r={};for(const e of y)r[e.id]={templateId:e.templateId,exerciseId:e.exerciseId};const i=$h(s);Ih(s)||await Lh(i,e,r,p),D.current={ex:[],sets:[]},await re(),dt.success("Workout saved!"),ne("plan")}catch(t){ie(String(t)),dt.error("Failed to save workout")}finally{N(!1)}}else dt.error("Please sign in to save workout")})()},type:"button",disabled:C},{label:"Cancel Workout",onClick:async()=>{j(!1),await(async()=>{D.current={ex:[],sets:[]},b(JSON.parse(JSON.stringify(I.current))),ne("plan")})()},type:"button",variant:"destructive",disabled:C}]})]})}function Uh({label:e,icon:t,unit:s="cm",entries:r,onEntryChange:i}){var o,l;const[c,d]=n.useState(!1),u=n.useMemo(()=>"m"===s?.01:.5,[s]),h="m"===s?2:1,m=h,p=e=>{const t=parseFloat(e);return isNaN(t)?0:t},f=e=>{var t;const n=(null==(t=r[0])?void 0:t.value)??"0";i(0,(p(n)+e).toFixed(h))},g=null!=r[1]?p((null==(o=r[0])?void 0:o.value)??"0")-p(r[1].value):null,x=null!=g?`${g>=0?"+":""}${gh(g,m)}${s}`:void 0;return Y.jsx(Wu,{variant:"plain",size:"md",expanded:c,onToggle:()=>d(e=>!e),className:"w-full rounded-2xl border border-border card-modern shadow-xl hover:shadow-xl transition-all text-left",style:{border:"2px solid var(--border)"},title:Y.jsx("div",{className:"min-w-0 flex-[0_0_50%]",children:Y.jsx("div",{className:"truncate",children:e})}),subtitle:x&&Y.jsx("span",{className:"text-sm text-black",children:x}),leading:Y.jsx("span",{className:"text-xl",children:t}),trailing:Y.jsx("div",{className:"flex-[0_0_40%] shrink-0 mr-[10%]",onClick:e=>e.stopPropagation(),children:Y.jsxs("div",{className:"grid grid-cols-[28px_minmax(3.5rem,1fr)_28px] items-center gap-2",children:[Y.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),f(-u)},className:"w-7 h-7 rounded-full bg-soft-gray flex items-center justify-center text-black",children:Y.jsx(y,{size:14})}),Y.jsx(zu,{step:u,min:0,mode:"decimal",value:(null==(l=r[0])?void 0:l.value)??"",onChange:e=>{e.stopPropagation();const{value:t}=e.target;yh(t)&&i(0,t)},placeholder:s,className:"h-7 text-center px-1 w-full"}),Y.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),f(u)},className:"w-7 h-7 rounded-full bg-soft-gray flex items-center justify-center text-black",children:Y.jsx(a,{size:14})})]})}),children:r.length>0&&Y.jsx("div",{className:"space-y-3",onClick:e=>e.stopPropagation(),children:r.slice(0,4).map((e,t)=>Y.jsxs("div",{className:"flex items-center justify-between gap-2",children:[Y.jsx("span",{className:"text-sm text-black",children:e.date}),Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx(zu,{step:u,min:0,mode:"decimal",value:e.value,onChange:e=>{const{value:n}=e.target;yh(n)&&i(t,n)},className:"h-7 text-center px-1 w-[6.5rem] sm:w-[7.5rem]"}),Y.jsx("span",{className:"text-sm text-black",children:s})]})]},t))})})}const Hh=[{key:"chest_cm",label:"Chest",icon:"ğŸ«"},{key:"right_arm_cm",label:"Right Arm",icon:"ğŸ’ª"},{key:"left_arm_cm",label:"Left Arm",icon:"ğŸ’ª"},{key:"waist_cm",label:"Waist",icon:"ğŸ“"},{key:"hip_cm",label:"Hip",icon:"ğŸ©³"},{key:"glutes_cm",label:"Glutes",icon:"ğŸ‘"},{key:"left_quad_cm",label:"Left Quad",icon:"ğŸ¦µ"},{key:"right_quad_cm",label:"Right Quad",icon:"ğŸ¦µ"},{key:"left_calf_cm",label:"Left Calf",icon:"ğŸ¦µ"},{key:"right_calf_cm",label:"Right Calf",icon:"ğŸ¦µ"}],Vh=mh;function Wh({onBack:e}){const[t,s]=n.useState([]),[r,i]=n.useState(!0),o=n.useRef([]),a=n.useRef([]),l=n.useCallback(async()=>{const e=await Ze.getBodyMeasurements(4),t=(new Date).toISOString().split("T")[0],n=e.some(e=>e.measured_on===t);let r=e;if(!n){const n=e[0],s={measured_on:t};Hh.forEach(e=>{s[e.key]=n&&null!=n[e.key]?Sh(Number(n[e.key]),Vh):""}),r=[s,...e]}r=r.sort((e,t)=>new Date(t.measured_on).getTime()-new Date(e.measured_on).getTime()).slice(0,4);const l=r.map(e=>{const t={measured_on:e.measured_on};return Hh.forEach(n=>{t[n.key]=null!=e[n.key]?Sh(Number(e[n.key]),Vh):""}),t});a.current=JSON.parse(JSON.stringify(l)),o.current=[],s(l),i(n)},[]);n.useEffect(()=>{let e=!1;return(async()=>{try{if(e)return;await l()}catch(t){ie("Failed to load measurements",t)}})(),()=>{e=!0}},[l]);const c=n.useMemo(()=>!r||JSON.stringify(t)!==JSON.stringify(a.current),[t,r]);return Y.jsx(Lt,{header:Y.jsx(Xn,{title:"Body Measurements",onBack:e,showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",padContent:!1,showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:Y.jsx(Ms,{children:Y.jsx(Ps,{onClick:async()=>{const n=function(e){const t={};for(const n of e)t[n.date]||(t[n.date]={}),t[n.date][n.key]=n.value;return t}(o.current);if(!r){const e=t[0],s={};Hh.forEach(t=>{e[t.key]&&(s[t.key]=e[t.key])}),n[e.measured_on]={...n[e.measured_on]??{},...s}}for(const[e,t]of Object.entries(n)){const n={measured_on:e};for(const[e,s]of Object.entries(t)){const t=Nh(s,Vh);void 0===t||isNaN(t)||(n[e]=t)}Object.keys(n).length>1&&await Ze.upsertBodyMeasurement(n)}o.current=[],await l(),dt.success("Measurements saved"),e()},disabled:!c,children:"SAVE CHANGES"})}),bottomBarSticky:!0,contentClassName:"",children:Y.jsxs(ds,{gap:"fluid",children:[Y.jsx(rs,{variant:"card",className:"flex items-center gap-3",children:Y.jsxs("div",{className:"min-w-0",children:[Y.jsx("div",{className:"text-base font-semibold text-black truncate",children:"Track Your Progress"}),Y.jsx("div",{className:"text-sm text-black truncate",children:"Record measurements to see changes over time"})]})}),Y.jsx(os,{y:"sm"}),Hh.map(e=>Y.jsx("div",{className:"space-y-2",children:Y.jsx(Uh,{label:e.label,icon:e.icon,unit:_h(Vh),entries:t.map(t=>({date:t.measured_on,value:t[e.key]||""})),onEntryChange:(t,n)=>s(s=>{const r=[...s],i=r[t].measured_on,a=""===n?"":String(parseFloat(n));return r[t]={...r[t],[e.key]:a},function(e,t,n,s){e.push({t:"UPDATE",date:t,key:n,value:s})}(o.current,i,e.key,a),r})})},e.key)),Y.jsx(os,{y:"sm"})]})})}const zh={week:7,threeMonths:12,sixMonths:6},Gh={week:1,threeMonths:7,sixMonths:30},qh=function(e){const t={};for(const n of e){const e=new Date(n.start);if(Number.isNaN(e.getTime()))continue;const s=e.toISOString().slice(0,10);t[s]||(t[s]=[]),t[s].push(n)}for(const n of Object.keys(t))t[n].sort((e,t)=>new Date(t.start).getTime()-new Date(e.start).getTime());return t}([Jh("c1","Outdoor Run",1,6,30,42.17,7.4,612,7420),Jh("c1b","Interval Sprints",1,12,15,18.4,3.1,284,3140),Jh("c1c","Evening Walk",1,19,20,35.8,3.9,236,4680),Jh("c2","Indoor Run",2,18,10,35.1,5.6,438,5120),Jh("c2b","Rowing Intervals",2,7,5,28.9,4.2,312,0),Jh("c3","Cycling",3,9,0,48.7,18.2,502,1860),Jh("c3b","Hill Repeats",3,6,10,24.3,2.1,198,2840),Jh("c3c","Lunch Walk",3,12,35,22.6,2.7,176,3210),Jh("c3d","Evening Spin",3,19,45,31.1,10.5,286,960),Jh("c4","Trail Run",4,8,10,65.2,9.6,684,8120)]),Kh={workouts:{week:{series:[Yh("workouts","week",8,.32,0),Yh("workouts","week",6.4,.28,1),Yh("workouts","week",9.8,.3,2),Yh("workouts","week",5.2,.26,3)],kpis:[{title:"Total Time",unit:"hours",value:"4h 05m",currentNumeric:245,previous:203},{title:"Distance",unit:"km",value:"42.5",currentNumeric:42.5,previous:38.2},{title:"Calories",unit:"kcal",value:"3,420",currentNumeric:3420,previous:3150},{title:"Steps",value:"64,210",currentNumeric:64210,previous:60890}],workouts:qh},threeMonths:{series:[Yh("workouts","threeMonths",28,.22,0),Yh("workouts","threeMonths",21,.2,1),Yh("workouts","threeMonths",34,.23,2),Yh("workouts","threeMonths",17,.19,3)],kpis:[{title:"Total Time",unit:"hours",value:"15h 38m",currentNumeric:938,previous:902},{title:"Distance",unit:"km",value:"168",currentNumeric:168,previous:160},{title:"Calories",unit:"kcal",value:"13,420",currentNumeric:13420,previous:12680},{title:"Steps",value:"262,410",currentNumeric:262410,previous:254e3}],workouts:{}},sixMonths:{series:[Yh("workouts","sixMonths",52,.18,0),Yh("workouts","sixMonths",38,.16,1),Yh("workouts","sixMonths",58,.19,2),Yh("workouts","sixMonths",32,.15,3)],kpis:[{title:"Total Time",unit:"hours",value:"168",currentNumeric:10080,previous:9980},{title:"Distance",unit:"km",value:"1,932",currentNumeric:1932,previous:1870},{title:"Calories",unit:"kcal",value:"124,650",currentNumeric:124650,previous:123200},{title:"Steps",value:"2.9M",currentNumeric:29e5,previous:284e4}],workouts:{}}},measurement:{week:{series:[Yh("measurement","week",101.2,.03,0),Yh("measurement","week",36.4,.025,1),Yh("measurement","week",58.8,.024,2),Yh("measurement","week",96.7,.028,3)],kpis:[{title:"Chest",unit:"cm",value:"101.2",currentNumeric:101.2,previous:101.5},{title:"Arms",unit:"cm",value:"36.4",currentNumeric:36.4,previous:36.1},{title:"Legs",unit:"cm",value:"58.8",currentNumeric:58.8,previous:58.6},{title:"Back",unit:"cm",value:"96.7",currentNumeric:96.7,previous:97.1}],workouts:{}},threeMonths:{series:[Yh("measurement","threeMonths",101.4,.03,0),Yh("measurement","threeMonths",36.2,.024,1),Yh("measurement","threeMonths",59.1,.022,2),Yh("measurement","threeMonths",96.9,.027,3)],kpis:[{title:"Chest",unit:"cm",value:"101.4",currentNumeric:101.4,previous:102},{title:"Arms",unit:"cm",value:"36.2",currentNumeric:36.2,previous:36},{title:"Legs",unit:"cm",value:"59.1",currentNumeric:59.1,previous:58.9},{title:"Back",unit:"cm",value:"96.9",currentNumeric:96.9,previous:97.3}],workouts:{}},sixMonths:{series:[Yh("measurement","sixMonths",102.8,.032,0),Yh("measurement","sixMonths",36,.022,1),Yh("measurement","sixMonths",59.6,.02,2),Yh("measurement","sixMonths",97.2,.026,3)],kpis:[{title:"Chest",unit:"cm",value:"102.8",currentNumeric:102.8,previous:103.6},{title:"Arms",unit:"cm",value:"36.0",currentNumeric:36,previous:35.8},{title:"Legs",unit:"cm",value:"59.6",currentNumeric:59.6,previous:59.2},{title:"Back",unit:"cm",value:"97.2",currentNumeric:97.2,previous:97.9}],workouts:{}}}};function Yh(e,t,n,s,r){const i=new Date,o=zh[t],a=Gh[t],l=function(e){let t=0;for(let s=0;s<e.length;s+=1)t=(t<<5)-t+e.charCodeAt(s),t|=0;return n=t>>>0,function(){n+=1831565813;let e=Math.imul(n^n>>>15,1|n);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296};var n}(`${e}-${t}-${n}-${s}-${r}`);let c="measurement"===e?n:.55*n;c*="workouts"===e?1+.05*r:1+.02*r;const d=[];for(let u=0;u<o;u+=1){const h=new Date(i);h.setDate(i.getDate()-(o-1-u)*a);const m=o>1?u/(o-1):1,p=(l()-.5)*s*n*.18;if("workouts"===e){c+=n*s*(.08+.22*l()+.03*r)+p,l()>.82&&(c-=n*s*.12)}else{c-=n*s*(.04+.06*m+.015*r),c+=p}const f="measurement"===e?.75*n:.35*n,g="measurement"===e?f*(1-.02*r):f*(1+.03*r),x=("measurement"===e?1.05*n:n*("sixMonths"===t?1.45:1.25))*(1+.08*r);c=Math.min(x,Math.max(g,c)),d.push({x:h.toISOString(),y:Number(c.toFixed(2)),isPersonalBest:u===o-2})}return d}function Jh(e,t,n,s,r,i,o,a,l){const c=new Date;c.setDate(c.getDate()-n),c.setHours(s,r,0,0);const d=Math.max(0,Math.round(60*i*1e3)),u=new Date(c.getTime()+d);return{id:e,activity:t,start:c.toISOString(),end:u.toISOString(),durationMinutes:i,distanceKm:o,calories:a,steps:l}}const Xh="#E27D60",Zh="rgba(226,125,96,0.15)",Qh="rgba(226,125,96,0.35)",em="#68A691",tm="#111111",nm="rgba(34,49,63,0.65)",sm="rgba(34,49,63,0.6)",rm="rgba(34,49,63,0.55)",im="rgba(30,36,50,0.08)",om="rgba(30,36,50,0.12)",am="#FFFFFF",lm="0 12px 24px -16px rgba(30,36,50,0.4)",cm="0 18px 36px -20px rgba(30,36,50,0.4)",dm="0 2px 6px -4px rgba(30,36,50,0.18)",um="0 12px 22px -16px rgba(30,36,50,0.35)",hm="0 12px 20px -16px rgba(30,36,50,0.45)",mm=["#7FD1AE","#FFB38A","#FFE08A","#8FC5FF"],pm="â–²",fm="â–¼",gm="=",xm=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),vm=new Intl.NumberFormat(void 0,{minimumFractionDigits:1,maximumFractionDigits:1}),ym=new Intl.NumberFormat(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});function bm(e){return Number.isFinite(e)?Math.max(0,e):0}function wm(e){const t=bm(e),n=Math.floor(t/60),s=Math.round(t%60);return n>0&&s>0?`${n}h ${s}m`:n>0?`${n}h`:`${s}m`}function km(e){return`${vm.format(bm(e))} km`}function Em(e){return`${xm.format(Math.round(bm(e)))} kcal`}function Sm(e){return`${xm.format(Math.round(bm(e)))} steps`}function Cm(e){return`${ym.format(bm(e))} cm`}function Nm(e,t){const n=new Date(t);if("week"===e)return n.toLocaleDateString(void 0,{weekday:"short"});if("threeMonths"===e){const e=n.toLocaleDateString(void 0,{month:"short"}),t=function(e){const t=new Date(e.getFullYear(),e.getMonth(),1),n=0===t.getDay()?6:t.getDay()-1;return Math.floor((e.getDate()+n-1)/7)+1}(n);return`${e} W${t}`}return n.toLocaleDateString(void 0,{month:"short"})}function _m(e,t){return"workouts"===e?[wm,km,Em,Sm][t]??(e=>xm.format(Math.round(e))):[Cm,Cm,Cm,Cm][t]??(e=>ym.format(bm(e)))}function jm(e){return function(){return e}}const Am=Math.PI,Tm=2*Am,Rm=1e-6,Pm=Tm-Rm;function Mm(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class Dm{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?Mm:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Mm;const n=10**t;return function(e){this._+=e[0];for(let t=1,s=e.length;t<s;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,s){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(e,t,n,s,r,i){this._append`C${+e},${+t},${+n},${+s},${this._x1=+r},${this._y1=+i}`}arcTo(e,t,n,s,r){if(e=+e,t=+t,n=+n,s=+s,(r=+r)<0)throw new Error(`negative radius: ${r}`);let i=this._x1,o=this._y1,a=n-e,l=s-t,c=i-e,d=o-t,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>Rm)if(Math.abs(d*a-l*c)>Rm&&r){let h=n-i,m=s-o,p=a*a+l*l,f=h*h+m*m,g=Math.sqrt(p),x=Math.sqrt(u),v=r*Math.tan((Am-Math.acos((p+u-f)/(2*g*x)))/2),y=v/x,b=v/g;Math.abs(y-1)>Rm&&this._append`L${e+y*c},${t+y*d}`,this._append`A${r},${r},0,0,${+(d*h>c*m)},${this._x1=e+b*a},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,s,r,i){if(e=+e,t=+t,i=!!i,(n=+n)<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(s),a=n*Math.sin(s),l=e+o,c=t+a,d=1^i,u=i?s-r:r-s;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Rm||Math.abs(this._y1-c)>Rm)&&this._append`L${l},${c}`,n&&(u<0&&(u=u%Tm+Tm),u>Pm?this._append`A${n},${n},0,1,${d},${e-o},${t-a}A${n},${n},0,1,${d},${this._x1=l},${this._y1=c}`:u>Rm&&this._append`A${n},${n},0,${+(u>=Am)},${d},${this._x1=e+n*Math.cos(r)},${this._y1=t+n*Math.sin(r)}`)}rect(e,t,n,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function $m(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new Dm(t)}function Im(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Om(e){this._context=e}function Lm(e){return new Om(e)}function Bm(e){return e[0]}function Fm(e){return e[1]}function Um(e,t){var n=jm(!0),s=null,r=Lm,i=null,o=$m(a);function a(a){var l,c,d,u=(a=Im(a)).length,h=!1;for(null==s&&(i=r(d=o())),l=0;l<=u;++l)!(l<u&&n(c=a[l],l,a))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(c,l,a),+t(c,l,a));if(d)return i=null,d+""||null}return e="function"==typeof e?e:void 0===e?Bm:jm(e),t="function"==typeof t?t:void 0===t?Fm:jm(t),a.x=function(t){return arguments.length?(e="function"==typeof t?t:jm(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:jm(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:jm(!!e),a):n},a.curve=function(e){return arguments.length?(r=e,null!=s&&(i=r(s)),a):r},a.context=function(e){return arguments.length?(null==e?s=i=null:i=r(s=e),a):s},a}function Hm(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Vm(e,t){this._context=e,this._k=(1-t)/6}function Wm(e,t){this._context=e,this._alpha=t}Om.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},Vm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Hm(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Hm(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return new Vm(e,t)}return n.tension=function(t){return e(+t)},n}(0),Wm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(e,t,n){var s=e._x1,r=e._y1,i=e._x2,o=e._y2;if(e._l01_a>1e-12){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);s=(s*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>1e-12){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*c+e._x1*e._l23_2a-t*e._l12_2a)/d,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(s,r,i,o,e._x2,e._y2)}(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zm=function e(t){function n(e){return t?new Wm(e,t):new Vm(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Gm(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qm(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Km(e){let t,n,s;function r(e,s,r=0,i=e.length){if(r<i){if(0!==t(s,s))return i;do{const t=r+i>>>1;n(e[t],s)<0?r=t+1:i=t}while(r<i)}return r}return 2!==e.length?(t=Gm,n=(t,n)=>Gm(e(t),n),s=(t,n)=>e(t)-n):(t=e===Gm||e===qm?e:Ym,n=e,s=e),{left:r,center:function(e,t,n=0,i=e.length){const o=r(e,t,n,i-1);return o>n&&s(e[o-1],t)>-s(e[o],t)?o-1:o},right:function(e,s,r=0,i=e.length){if(r<i){if(0!==t(s,s))return i;do{const t=r+i>>>1;n(e[t],s)<=0?r=t+1:i=t}while(r<i)}return r}}}function Ym(){return 0}const Jm=Km(Gm).right;Km(function(e){return null===e?NaN:+e}).center;class Xm extends Map{constructor(e,t=Qm){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,s]of e)this.set(n,s)}get(e){return super.get(Zm(this,e))}has(e){return super.has(Zm(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const s=t(n);e.has(s)&&(n=e.get(s),e.delete(s));return n}(this,e))}}function Zm({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function Qm(e){return null!==e&&"object"==typeof e?e.valueOf():e}const ep=Math.sqrt(50),tp=Math.sqrt(10),np=Math.sqrt(2);function sp(e,t,n){const s=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(s)),i=s/Math.pow(10,r),o=i>=ep?10:i>=tp?5:i>=np?2:1;let a,l,c;return r<0?(c=Math.pow(10,-r)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,r)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?sp(e,t,2*n):[a,l,c]}function rp(e,t,n){return sp(e=+e,t=+t,n=+n)[2]}function ip(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}const op=Symbol("implicit");function ap(){var e=new Xm,t=[],n=[],s=op;function r(r){let i=e.get(r);if(void 0===i){if(s!==op)return s;e.set(r,i=t.push(r)-1)}return n[i%n.length]}return r.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Xm;for(const s of n)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(e){return arguments.length?(n=Array.from(e),r):n.slice()},r.unknown=function(e){return arguments.length?(s=e,r):s},r.copy=function(){return ap(t,n).unknown(s)},ip.apply(r,arguments),r}function lp(){var e,t,n=ap().unknown(void 0),s=n.domain,r=n.range,i=0,o=1,a=!1,l=0,c=0,d=.5;function u(){var n=s().length,u=o<i,h=u?o:i,m=u?i:o;e=(m-h)/Math.max(1,n-l+2*c),a&&(e=Math.floor(e)),h+=(m-h-e*(n-l))*d,t=e*(1-l),a&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var s=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),i=new Array(r);++s<r;)i[s]=e+s*n;return i}(n).map(function(t){return h+e*t});return r(u?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(s(e),u()):s()},n.range=function(e){return arguments.length?([i,o]=e,i=+i,o=+o,u()):[i,o]},n.rangeRound=function(e){return[i,o]=e,i=+i,o=+o,a=!0,u()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(a=!!e,u()):a},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},n.copy=function(){return lp(s(),[i,o]).round(a).paddingInner(l).paddingOuter(c).align(d)},ip.apply(u(),arguments)}function cp(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return cp(t())},e}function dp(){return cp(lp.apply(null,arguments).paddingInner(1))}function up(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function hp(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function mp(){}var pp=.7,fp=1/pp,gp="\\s*([+-]?\\d+)\\s*",xp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yp=/^#([0-9a-f]{3,8})$/,bp=new RegExp(`^rgb\\(${gp},${gp},${gp}\\)$`),wp=new RegExp(`^rgb\\(${vp},${vp},${vp}\\)$`),kp=new RegExp(`^rgba\\(${gp},${gp},${gp},${xp}\\)$`),Ep=new RegExp(`^rgba\\(${vp},${vp},${vp},${xp}\\)$`),Sp=new RegExp(`^hsl\\(${xp},${vp},${vp}\\)$`),Cp=new RegExp(`^hsla\\(${xp},${vp},${vp},${xp}\\)$`),Np={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _p(){return this.rgb().formatHex()}function jp(){return this.rgb().formatRgb()}function Ap(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yp.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Tp(t):3===n?new Mp(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Rp(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Rp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=bp.exec(e))?new Mp(t[1],t[2],t[3],1):(t=wp.exec(e))?new Mp(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=kp.exec(e))?Rp(t[1],t[2],t[3],t[4]):(t=Ep.exec(e))?Rp(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Sp.exec(e))?Bp(t[1],t[2]/100,t[3]/100,1):(t=Cp.exec(e))?Bp(t[1],t[2]/100,t[3]/100,t[4]):Np.hasOwnProperty(e)?Tp(Np[e]):"transparent"===e?new Mp(NaN,NaN,NaN,0):null}function Tp(e){return new Mp(e>>16&255,e>>8&255,255&e,1)}function Rp(e,t,n,s){return s<=0&&(e=t=n=NaN),new Mp(e,t,n,s)}function Pp(e,t,n,s){return 1===arguments.length?((r=e)instanceof mp||(r=Ap(r)),r?new Mp((r=r.rgb()).r,r.g,r.b,r.opacity):new Mp):new Mp(e,t,n,null==s?1:s);var r}function Mp(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}function Dp(){return`#${Lp(this.r)}${Lp(this.g)}${Lp(this.b)}`}function $p(){const e=Ip(this.opacity);return`${1===e?"rgb(":"rgba("}${Op(this.r)}, ${Op(this.g)}, ${Op(this.b)}${1===e?")":`, ${e})`}`}function Ip(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Op(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Lp(e){return((e=Op(e))<16?"0":"")+e.toString(16)}function Bp(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Up(e,t,n,s)}function Fp(e){if(e instanceof Up)return new Up(e.h,e.s,e.l,e.opacity);if(e instanceof mp||(e=Ap(e)),!e)return new Up;if(e instanceof Up)return e;var t=(e=e.rgb()).r/255,n=e.g/255,s=e.b/255,r=Math.min(t,n,s),i=Math.max(t,n,s),o=NaN,a=i-r,l=(i+r)/2;return a?(o=t===i?(n-s)/a+6*(n<s):n===i?(s-t)/a+2:(t-n)/a+4,a/=l<.5?i+r:2-i-r,o*=60):a=l>0&&l<1?0:o,new Up(o,a,l,e.opacity)}function Up(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}function Hp(e){return(e=(e||0)%360)<0?e+360:e}function Vp(e){return Math.max(0,Math.min(1,e||0))}function Wp(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}up(mp,Ap,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_p,formatHex:_p,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Fp(this).formatHsl()},formatRgb:jp,toString:jp}),up(Mp,Pp,hp(mp,{brighter(e){return e=null==e?fp:Math.pow(fp,e),new Mp(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?pp:Math.pow(pp,e),new Mp(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Mp(Op(this.r),Op(this.g),Op(this.b),Ip(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dp,formatHex:Dp,formatHex8:function(){return`#${Lp(this.r)}${Lp(this.g)}${Lp(this.b)}${Lp(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:$p,toString:$p})),up(Up,function(e,t,n,s){return 1===arguments.length?Fp(e):new Up(e,t,n,null==s?1:s)},hp(mp,{brighter(e){return e=null==e?fp:Math.pow(fp,e),new Up(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?pp:Math.pow(pp,e),new Up(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,r=2*n-s;return new Mp(Wp(e>=240?e-240:e+120,r,s),Wp(e,r,s),Wp(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new Up(Hp(this.h),Vp(this.s),Vp(this.l),Ip(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ip(this.opacity);return`${1===e?"hsl(":"hsla("}${Hp(this.h)}, ${100*Vp(this.s)}%, ${100*Vp(this.l)}%${1===e?")":`, ${e})`}`}}));const zp=e=>()=>e;function Gp(e){return 1===(e=+e)?qp:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}(t,n,e):zp(isNaN(t)?n:t)}}function qp(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):zp(isNaN(e)?t:e)}const Kp=function e(t){var n=Gp(t);function s(e,t){var s=n((e=Pp(e)).r,(t=Pp(t)).r),r=n(e.g,t.g),i=n(e.b,t.b),o=qp(e.opacity,t.opacity);return function(t){return e.r=s(t),e.g=r(t),e.b=i(t),e.opacity=o(t),e+""}}return s.gamma=e,s}(1);function Yp(e,t){t||(t=[]);var n,s=e?Math.min(t.length,e.length):0,r=t.slice();return function(i){for(n=0;n<s;++n)r[n]=e[n]*(1-i)+t[n]*i;return r}}function Jp(e,t){var n,s=t?t.length:0,r=e?Math.min(s,e.length):0,i=new Array(r),o=new Array(s);for(n=0;n<r;++n)i[n]=sf(e[n],t[n]);for(;n<s;++n)o[n]=t[n];return function(e){for(n=0;n<r;++n)o[n]=i[n](e);return o}}function Xp(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function Zp(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Qp(e,t){var n,s={},r={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?s[n]=sf(e[n],t[n]):r[n]=t[n];return function(e){for(n in s)r[n]=s[n](e);return r}}var ef=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tf=new RegExp(ef.source,"g");function nf(e,t){var n,s,r,i=ef.lastIndex=tf.lastIndex=0,o=-1,a=[],l=[];for(e+="",t+="";(n=ef.exec(e))&&(s=tf.exec(t));)(r=s.index)>i&&(r=t.slice(i,r),a[o]?a[o]+=r:a[++o]=r),(n=n[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:Zp(n,s)})),i=tf.lastIndex;return i<t.length&&(r=t.slice(i),a[o]?a[o]+=r:a[++o]=r),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,s=0;s<t;++s)a[(n=l[s]).i]=n.x(e);return a.join("")})}function sf(e,t){var n,s,r=typeof t;return null==t||"boolean"===r?zp(t):("number"===r?Zp:"string"===r?(n=Ap(t))?(t=n,Kp):nf:t instanceof Ap?Kp:t instanceof Date?Xp:(s=t,!ArrayBuffer.isView(s)||s instanceof DataView?Array.isArray(t)?Jp:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Qp:Zp:Yp))(e,t)}function rf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function of(e){return+e}var af=[0,1];function lf(e){return e}function cf(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function df(e,t,n){var s=e[0],r=e[1],i=t[0],o=t[1];return r<s?(s=cf(r,s),i=n(o,i)):(s=cf(s,r),i=n(i,o)),function(e){return i(s(e))}}function uf(e,t,n){var s=Math.min(e.length,t.length)-1,r=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)r[o]=cf(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(t){var n=Jm(e,t,1,s)-1;return i[n](r[n](t))}}function hf(){var e,t,n,s,r,i,o=af,a=af,l=sf,c=lf;function d(){var e,t,n,l=Math.min(o.length,a.length);return c!==lf&&(e=o[0],t=o[l-1],e>t&&(n=e,e=t,t=n),c=function(n){return Math.max(e,Math.min(t,n))}),s=l>2?uf:df,r=i=null,u}function u(t){return null==t||isNaN(t=+t)?n:(r||(r=s(o.map(e),a,l)))(e(c(t)))}return u.invert=function(n){return c(t((i||(i=s(a,o.map(e),Zp)))(n)))},u.domain=function(e){return arguments.length?(o=Array.from(e,of),d()):o.slice()},u.range=function(e){return arguments.length?(a=Array.from(e),d()):a.slice()},u.rangeRound=function(e){return a=Array.from(e),l=rf,d()},u.clamp=function(e){return arguments.length?(c=!!e||lf,d()):c!==lf},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(n=e,u):n},function(n,s){return e=n,t=s,d()}}function mf(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function pf(e){return(e=mf(Math.abs(e)))?e[1]:NaN}var ff,gf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xf(e){if(!(t=gf.exec(e)))throw new Error("invalid format: "+e);var t;return new vf({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function vf(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function yf(e,t){var n=mf(e,t);if(!n)return e+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}xf.prototype=vf.prototype,vf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const bf={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>yf(100*e,t),r:yf,s:function(e,t){var n=mf(e,t);if(!n)return e+"";var s=n[0],r=n[1],i=r-(ff=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+mf(e,Math.max(0,t+i-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function wf(e){return e}var kf,Ef,Sf,Cf=Array.prototype.map,Nf=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function _f(e){var t,n,s=void 0===e.grouping||void 0===e.thousands?wf:(t=Cf.call(e.grouping,Number),n=e.thousands+"",function(e,s){for(var r=e.length,i=[],o=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>s&&(a=Math.max(1,s-l)),i.push(e.substring(r-=a,r+a)),!((l+=a+1)>s));)a=t[o=(o+1)%t.length];return i.reverse().join(n)}),r=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",a=void 0===e.numerals?wf:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(Cf.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"âˆ’":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=xf(e)).fill,n=e.align,u=e.sign,h=e.symbol,m=e.zero,p=e.width,f=e.comma,g=e.precision,x=e.trim,v=e.type;"n"===v?(f=!0,v="g"):bf[v]||(void 0===g&&(g=12),x=!0,v="g"),(m||"0"===t&&"="===n)&&(m=!0,t="0",n="=");var y="$"===h?r:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===h?i:/[%p]/.test(v)?l:"",w=bf[v],k=/[defgprs%]/.test(v);function E(e){var r,i,l,h=y,E=b;if("c"===v)E=w(e)+E,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:w(Math.abs(e),g),x&&(e=function(e){e:for(var t,n=e.length,s=1,r=-1;s<n;++s)switch(e[s]){case".":r=t=s;break;case"0":0===r&&(r=s),t=s;break;default:if(!+e[s])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==u&&(S=!1),h=(S?"("===u?u:c:"-"===u||"("===u?"":u)+h,E=("s"===v?Nf[8+ff/3]:"")+E+(S&&"("===u?")":""),k)for(r=-1,i=e.length;++r<i;)if(48>(l=e.charCodeAt(r))||l>57){E=(46===l?o+e.slice(r+1):e.slice(r))+E,e=e.slice(0,r);break}}f&&!m&&(e=s(e,1/0));var C=h.length+e.length+E.length,N=C<p?new Array(p-C+1).join(t):"";switch(f&&m&&(e=s(N+e,N.length?p-E.length:1/0),N=""),n){case"<":e=h+e+E+N;break;case"=":e=h+N+e+E;break;case"^":e=N.slice(0,C=N.length>>1)+h+e+E+N.slice(C);break;default:e=N+h+e+E}return a(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),E.toString=function(){return e+""},E}return{format:u,formatPrefix:function(e,t){var n=u(((e=xf(e)).type="f",e)),s=3*Math.max(-8,Math.min(8,Math.floor(pf(t)/3))),r=Math.pow(10,-s),i=Nf[8+s/3];return function(e){return n(r*e)+i}}}}function jf(e,t,n,s){var r,i=function(e,t,n){n=+n;const s=(t=+t)<(e=+e),r=s?rp(t,e,n):rp(e,t,n);return(s?-1:1)*(r<0?1/-r:r)}(e,t,n);switch((s=xf(null==s?",f":s)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=s.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(pf(t)/3)))-pf(Math.abs(e)))}(i,o))||(s.precision=r),Sf(s,o);case"":case"e":case"g":case"p":case"r":null!=s.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,pf(t)-pf(e))+1}(i,Math.max(Math.abs(e),Math.abs(t))))||(s.precision=r-("e"===s.type));break;case"f":case"%":null!=s.precision||isNaN(r=function(e){return Math.max(0,-pf(Math.abs(e)))}(i))||(s.precision=r-2*("%"===s.type))}return Ef(s)}function Af(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const s=t<e,[r,i,o]=s?sp(t,e,n):sp(e,t,n);if(!(i>=r))return[];const a=i-r+1,l=new Array(a);if(s)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(r+c)/-o;else for(let c=0;c<a;++c)l[c]=(r+c)*o;return l}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var s=t();return jf(s[0],s[s.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var s,r,i=t(),o=0,a=i.length-1,l=i[o],c=i[a],d=10;for(c<l&&(r=l,l=c,c=r,r=o,o=a,a=r);d-- >0;){if((r=rp(l,c,n))===s)return i[o]=l,i[a]=c,t(i);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}s=r}return e},e}function Tf(){var e=hf()(lf,lf);return e.copy=function(){return t=e,Tf().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},ip.apply(e,arguments),Af(e)}kf=_f({thousands:",",grouping:[3],currency:["$",""]}),Ef=kf.format,Sf=kf.formatPrefix;const Rf=240,Pf=({data:e,color:t,range:s,formatter:r})=>{const i=n.useRef(null),[o,a]=n.useState(0),[l,c]=n.useState(null),d=n.useMemo(()=>`grad-${Math.random().toString(36).slice(2,10)}`,[]),u=n.useMemo(()=>"threeMonths"===s?{top:16,bottom:12,left:28,right:36}:"sixMonths"===s?{top:16,bottom:12,left:24,right:28}:{top:16,bottom:12,left:18,right:18},[s]);n.useEffect(()=>{const e=i.current;if(!e)return;const t=new ResizeObserver(e=>{const t=e[0];t&&a(t.contentRect.width)});return t.observe(e),()=>t.disconnect()},[]);const{areaPath:h,linePath:m,dots:p,ticks:f,yPosition:g,averageY:x,averageValue:v}=n.useMemo(()=>{if(!o||0===e.length)return{areaPath:"",linePath:"",dots:[],ticks:[],yPosition:e=>e,averageY:u.top,averageValue:0};const t=e.map(e=>e.y),n=Math.max(...t),r=Math.min(...t),i=0===n?1:1.12*n,a=.9*r,l=dp().domain(e.map((e,t)=>t)).range([u.left,o-u.right]).padding(1===e.length?1:.4),c=Tf().domain([a,i]).range([Rf-u.bottom,u.top]).nice(),d=Um().x((e,t)=>l(t)??u.left).y(e=>c(e.y)).curve(zm.alpha(.5)),h=function(e,t,n){var s=null,r=jm(!0),i=null,o=Lm,a=null,l=$m(c);function c(c){var d,u,h,m,p,f=(c=Im(c)).length,g=!1,x=new Array(f),v=new Array(f);for(null==i&&(a=o(p=l())),d=0;d<=f;++d){if(!(d<f&&r(m=c[d],d,c))===g)if(g=!g)u=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=d-1;h>=u;--h)a.point(x[h],v[h]);a.lineEnd(),a.areaEnd()}g&&(x[d]=+e(m,d,c),v[d]=+t(m,d,c),a.point(s?+s(m,d,c):x[d],n?+n(m,d,c):v[d]))}if(p)return a=null,p+""||null}function d(){return Um().defined(r).curve(o).context(i)}return e="function"==typeof e?e:void 0===e?Bm:jm(+e),t="function"==typeof t?t:jm(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?Fm:jm(+n),c.x=function(t){return arguments.length?(e="function"==typeof t?t:jm(+t),s=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:jm(+t),c):e},c.x1=function(e){return arguments.length?(s=null==e?null:"function"==typeof e?e:jm(+e),c):s},c.y=function(e){return arguments.length?(t="function"==typeof e?e:jm(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:jm(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:jm(+e),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(s).y(t)},c.defined=function(e){return arguments.length?(r="function"==typeof e?e:jm(!!e),c):r},c.curve=function(e){return arguments.length?(o=e,null!=i&&(a=o(i)),c):o},c.context=function(e){return arguments.length?(null==e?i=a=null:a=o(i=e),c):i},c}().x((e,t)=>l(t)??u.left).y0(Rf-u.bottom).y1(e=>c(e.y)).curve(zm.alpha(.5)),m=e.map((e,t)=>({cx:l(t)??u.left,cy:c(e.y),label:e.x})),p="week"===s?3:"threeMonths"===s?4:5,f=function(e,t){const[n,s]=e;if(n===s)return[Number(n.toFixed(2))];const r=(s-n)/Math.max(t-1,1);return Array.from({length:t},(e,t)=>Number((n+t*r).toFixed(2)))}(c.domain(),p),g=t.reduce((e,t)=>e+t,0)/t.length;return{areaPath:h(e)??"",linePath:d(e)??"",dots:m,ticks:f,yPosition:e=>c(e),averageY:c(g),averageValue:g}},[e,u.bottom,u.left,u.right,u.top,s,o]);return Y.jsx("div",{ref:i,className:"w-full",style:{height:Rf},onMouseLeave:()=>c(null),children:o>0&&e.length>0?Y.jsxs("svg",{width:o,height:Rf,role:"img","aria-label":"Progress trend",className:"transition-opacity duration-300",children:[Y.jsx("defs",{children:Y.jsxs("linearGradient",{id:d,x1:"0",y1:"0",x2:"0",y2:"1",children:[Y.jsx("stop",{offset:"0%",stopColor:t,stopOpacity:.18}),Y.jsx("stop",{offset:"100%",stopColor:t,stopOpacity:0})]})}),f.map(e=>Y.jsx("line",{x1:u.left,x2:o-u.right,y1:g(e),y2:g(e),stroke:"rgba(30,36,50,0.08)",strokeDasharray:"4 6"},`grid-${e}`)),Y.jsx("line",{x1:u.left,x2:o-u.right,y1:x,y2:x,stroke:t,strokeOpacity:.18,strokeWidth:2,strokeDasharray:"4 6"}),Y.jsx("path",{d:h,fill:`url(#${d})`}),Y.jsx("path",{d:m,fill:"none",stroke:t,strokeWidth:2.5,strokeLinecap:"round"}),p.map((e,n)=>Y.jsxs("g",{children:[Y.jsx("circle",{cx:e.cx,cy:e.cy,r:3.5,stroke:t,strokeWidth:1,fill:"#FFFFFF",style:{cursor:"pointer"},tabIndex:0,onMouseEnter:()=>c(n),onMouseLeave:()=>c(null),onFocus:()=>c(n),onBlur:()=>c(null)}),Y.jsx("rect",{x:e.cx-Math.max(20,(o-u.left-u.right)/Math.max(p.length,1)/2),width:Math.max(40,(o-u.left-u.right)/Math.max(p.length,1)),y:u.top,height:Rf-u.top-u.bottom,fill:"transparent",onMouseEnter:()=>c(n),onMouseLeave:()=>c(null)})]},e.label)),e.map((e,t)=>{var n,r;const i=Nm(s,e.x);if(!i)return null;const o="threeMonths"===s?220:236;return Y.jsx("text",{x:(null==(n=p[t])?void 0:n.cx)??u.left,y:o,textAnchor:"threeMonths"===s?"end":"middle",fontSize:"threeMonths"===s?9:10,fill:"rgba(30,36,50,0.4)",transform:"threeMonths"===s?`rotate(-35, ${(null==(r=p[t])?void 0:r.cx)??u.left}, ${o})`:void 0,children:i},`x-${e.x}`)}),p.length>0?Y.jsx("line",{x1:p[p.length-1].cx,x2:p[p.length-1].cx,y1:u.top,y2:Rf-u.bottom,stroke:"rgba(30,36,50,0.15)",strokeDasharray:"2 4"}):null,f.map(e=>{return Y.jsx("text",{x:o-u.right+6,y:g(e),textAnchor:"start",fontSize:11,fill:"rgba(30,36,50,0.25)",children:(t=e,Math.abs(t)>=1e6?`${(t/1e6).toFixed(1)}M`:Math.abs(t)>=1e3?`${(t/1e3).toFixed(1)}k`:t.toFixed(0))},`y-${e}`);var t}),null!==l&&p[l]?Y.jsxs("g",{transform:`translate(${p[l].cx},${p[l].cy})`,pointerEvents:"none",children:[Y.jsx("line",{x1:0,x2:0,y1:0,y2:Rf-p[l].cy-u.bottom,stroke:t,strokeOpacity:.18,strokeDasharray:"2 4"}),Y.jsx("circle",{r:6,fill:t,fillOpacity:.18}),Y.jsx("circle",{r:3.5,stroke:t,strokeWidth:1.5,fill:"#FFFFFF"}),Y.jsx("foreignObject",{x:-70,y:-60,width:140,height:52,children:Y.jsxs("div",{className:"rounded-2xl border bg-white px-3 py-2 text-[10px] font-semibold text-[#111111]",style:{borderColor:im,boxShadow:hm},children:[Y.jsx("p",{className:"text-[11px] font-semibold text-[#111111]",children:r(e[l].y)}),Y.jsx("p",{className:"text-[10px] font-medium",style:{color:rm},children:new Date(e[l].x).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]})})]}):null,Y.jsx("text",{x:o-u.right,y:x-8,textAnchor:"end",fontSize:10,fill:"rgba(30,36,50,0.45)",children:`Avg ${r(v)}`})]},`${s}-${e.length}-${t}`):Y.jsx("div",{className:"h-full w-full"})})};function Mf({domainLabel:e,rangeLabel:t,title:n,chipLabel:s,series:r,color:i,range:o,formatter:a}){return Y.jsxs("section",{className:"rounded-3xl border bg-white p-5",style:{borderColor:im,boxShadow:cm},children:[Y.jsxs("header",{className:"flex items-center justify-between gap-3",children:[Y.jsxs("div",{className:"space-y-1",children:[Y.jsx("div",{className:"text-xs font-semibold uppercase tracking-[0.14em]",style:{color:nm},children:e}),Y.jsx("h2",{className:"text-xl font-semibold text-[#111111]",children:n}),Y.jsxs("p",{className:"text-xs font-medium",style:{color:nm},children:[t," overview"]})]}),Y.jsx("div",{className:"rounded-full border bg-[#F7F6F3] px-3 py-1 text-xs font-semibold",style:{borderColor:om,color:sm},children:s})]}),Y.jsx(Pf,{data:r,color:i,range:o,formatter:a})]})}const Df=(...e)=>e.filter(Boolean).join(" "),$f={borderColor:im,boxShadow:cm},If={borderColor:om,backgroundColor:am},Of={backgroundColor:om},Lf={workouts:Xh,strength:Xh,cardio:em,hiit:em,mobility:em},Bf=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),Ff=new Intl.NumberFormat(void 0,{minimumFractionDigits:1,maximumFractionDigits:1});function Uf(e,t){const n=e.replace("#",""),s=Number.parseInt(n,16),r=3===n.length;return`rgba(${r?17*(s>>8&15):s>>16&255}, ${r?17*(s>>4&15):s>>8&255}, ${r?17*(15&s):255&s}, ${t})`}class Hf{constructor(e){var n;t(this,"id"),t(this,"type"),t(this,"name"),t(this,"duration"),t(this,"time"),t(this,"calories"),t(this,"distance"),t(this,"steps"),t(this,"exercises"),t(this,"sets"),t(this,"rounds"),t(this,"volume"),t(this,"personalRecords"),t(this,"accent"),this.id=e.id,this.type=e.type??"cardio",this.name=e.name,this.duration=e.duration,this.time=e.time,this.calories=e.calories,this.distance=e.distance,this.steps=e.steps,this.exercises=e.exercises,this.sets=e.sets,this.rounds=e.rounds,this.volume=e.volume,this.personalRecords=e.personalRecords,this.accent=(n=this.type,Lf[n??""]??Xh),le("ğŸ” DGB [CARDIO_WEEK_HISTORY] Workout data:",e),le("ğŸ” DGB [CARDIO_WEEK_HISTORY] Workout accent:",JSON.stringify(this,null,2))}static from(e){return new Hf(e)}get isStrength(){return"strength"===this.type||"workouts"===this.type||void 0!==this.sets||void 0!==this.exercises||void 0!==this.volume}formatMetric(e){return"number"==typeof e?e.toLocaleString():e??"â€”"}get metricTwo(){if(this.isStrength){if(void 0!==this.exercises)return{label:"Exercises",value:this.formatMetric(this.exercises)};if(void 0!==this.rounds)return{label:"Rounds",value:this.formatMetric(this.rounds)}}return void 0!==this.distance?{label:"Distance",value:this.formatMetric(this.distance)}:void 0!==this.volume?{label:"Volume",value:this.formatMetric(this.volume)}:void 0!==this.rounds?{label:"Rounds",value:this.formatMetric(this.rounds)}:{label:this.isStrength?"Exercises":"Distance",value:"â€”"}}get metricThree(){if(this.isStrength){if(void 0!==this.sets)return{label:"Sets",value:this.formatMetric(this.sets)};if(void 0!==this.rounds&&"Rounds"!==this.metricTwo.label)return{label:"Rounds",value:this.formatMetric(this.rounds)}}return void 0!==this.steps?{label:"Steps",value:this.formatMetric(this.steps)}:void 0!==this.rounds&&"Rounds"!==this.metricTwo.label?{label:"Rounds",value:this.formatMetric(this.rounds)}:{label:this.isStrength?"Sets":"Steps",value:"â€”"}}}function Vf(e){const t=Object.entries(e);if(0===t.length)return[];le("ğŸ” DGB [CARDIO_WEEK_HISTORY] Entries:",JSON.stringify(t,null,2));const n=function(e){const t=Kf(e);if(Number.isNaN(t.getTime()))return new Date(e);const n=t.getDay(),s=0===n?-6:1-n;return t.setDate(t.getDate()+s),t}(new Date),s=function(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}(n,7);le("ğŸ” DGB [CARDIO_WEEK_HISTORY] Start of current week:",n),le("ğŸ” DGB [CARDIO_WEEK_HISTORY] End of current week:",s);const r=t.reduce((e,[t,n])=>{if(le("ğŸ” DGB [CARDIO_WEEK_HISTORY] ISO Date:",t),le("ğŸ” DGB [CARDIO_WEEK_HISTORY] Workouts:",JSON.stringify(n,null,2)),!Array.isArray(n)||0===n.length)return e;const r=Kf(t),i=n[0]?Kf(n[0].start):new Date(NaN),o=Number.isNaN(r.getTime())?i:r;if(Number.isNaN(o.getTime()))return e;if(!function(e,t,n){return e.getTime()<n.getTime()}(o,0,s))return e;const a=o.toISOString().split("T")[0];e.has(a)||e.set(a,{date:o,workouts:[],historyEntries:[],totals:{},label:Yf(o)});const l=e.get(a),c=[...n].sort((e,t)=>new Date(t.start).getTime()-new Date(e.start).getTime());for(const s of c)l.historyEntries.push(s),l.workouts.push({id:s.id,type:"cardio",name:s.activity,duration:Wf(s.durationMinutes),distance:"number"==typeof s.distanceKm?`${Ff.format(Math.max(0,s.distanceKm))} km`:void 0,calories:"number"==typeof s.calories?`${Bf.format(Math.round(Math.max(0,s.calories)))} kcal`:void 0,time:zf(s.start),steps:Gf(s.steps)}),"number"==typeof s.calories&&Number.isFinite(s.calories)&&(l.totals.calories=(l.totals.calories??0)+s.calories),"number"==typeof s.distanceKm&&Number.isFinite(s.distanceKm)&&(l.totals.distance=(l.totals.distance??0)+s.distanceKm),"number"==typeof s.steps&&Number.isFinite(s.steps)&&(l.totals.steps=(l.totals.steps??0)+s.steps),"number"==typeof s.durationMinutes&&Number.isFinite(s.durationMinutes)&&(l.totals.time=(l.totals.time??0)+s.durationMinutes);return le("ğŸ” DGB [CARDIO_WEEK_HISTORY] Group:",JSON.stringify(e,null,2)),e},new Map);return Array.from(r.values()).sort((e,t)=>t.date.getTime()-e.date.getTime()).map(({date:e,workouts:t,historyEntries:n,totals:s,label:r})=>{const i=function(e){const t=e.getDay();return 0===t?6:t-1}(e),o={calories:"number"==typeof s.calories?Math.round(s.calories):s.calories,distance:"number"==typeof s.distance?`${s.distance.toFixed(1)} km`:s.distance,steps:"number"==typeof s.steps?Math.round(s.steps):s.steps,time:"number"==typeof s.time?qf(s.time):s.time};return{key:e.toISOString().split("T")[0],label:r,weekIndex:i,dateLabel:Jf(e),dailyTotals:o,workouts:t,historyEntries:n}})}function Wf(e){if(!Number.isFinite(e)||(e??0)<=0)return"00:00:00";const t=Math.max(0,Math.round(60*(e??0))),n=Math.floor(t/3600),s=Math.floor(t%3600/60),r=t%60;return`${String(n).padStart(2,"0")}:${String(s).padStart(2,"0")}:${String(r).padStart(2,"0")}`}function zf(e){if(!e)return;const t=new Date(e);return Number.isNaN(t.getTime())?void 0:t.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"})}function Gf(e){if("number"!=typeof e||!Number.isFinite(e))return;const t=Math.round(e);return t>=0?t:void 0}function qf(e){const t=Math.floor(e/60),n=Math.round(e%60);return t>0?`${t}h ${n}m`:`${n}m`}function Kf(e){if(!e)return new Date(NaN);const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?new Date(NaN):new Date(t.getFullYear(),t.getMonth(),t.getDate())}function Yf(e){return e.toLocaleDateString(void 0,{weekday:"short"}).slice(0,1).toUpperCase()}function Jf(e){return e.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}function Xf({value:e,days:t,onChange:s}){const r=n.useMemo(()=>t.reduce((e,t)=>(e[Math.min(Math.max(t.weekIndex??0,0),6)]=t,e),{}),[t]),i=Object.entries(r).find(([,t])=>t.key===e),o=i?Number(i[0]):void 0;return Y.jsx("div",{className:"rounded-2xl border px-3 py-2",style:If,children:Y.jsxs("div",{className:"flex items-center justify-between gap-3",children:[Y.jsx("span",{className:"text-xs font-semibold uppercase",style:{color:nm},children:"Week so far"}),Y.jsx("div",{className:"flex items-center gap-1",children:["M","T","W","T","F","S","S"].map((e,t)=>{const n=r[t],i=Boolean(n),a=o===t,l=(null==n?void 0:n.label)??e,c={borderColor:om,color:sm},d=a?{backgroundColor:Uf(Xh,.16),borderColor:Xh,color:Xh}:{};return Y.jsx("button",{type:"button",onClick:()=>n&&s(n.key),disabled:!i,className:Df("grid h-8 w-8 place-items-center rounded-full border text-sm font-semibold transition",i?"hover:bg-black/5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2":"cursor-default opacity-40"),style:{...c,...d},children:l},`${l}-${t}`)})})]})})}function Zf({days:e,dayKey:t,setDayKey:s}){const r=n.useMemo(()=>e.find(e=>e.key===t)??e[0],[t,e]);if(!r)return null;const i=[{Icon:b,label:"Calories",value:r.dailyTotals.calories},{Icon:w,label:"Duration",value:r.dailyTotals.time},{Icon:k,label:"Distance",value:r.dailyTotals.distance},{Icon:E,label:"Steps",value:r.dailyTotals.steps}].filter(e=>void 0!==e.value&&null!==e.value);return Y.jsx("section",{className:"w-full rounded-3xl border bg-white p-5",style:$f,children:Y.jsxs("div",{className:"flex flex-col gap-5",children:[Y.jsx(Xf,{value:r.key,days:e,onChange:s}),Y.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[Y.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",style:{color:tm},children:[Y.jsx(S,{className:"h-4 w-4",style:{color:Xh}}),Y.jsx("span",{children:r.dateLabel})]}),Y.jsx("div",{className:"grid gap-2 [grid-template-columns:repeat(auto-fit,minmax(60px,1fr))]",children:i.map(({Icon:e,label:t,value:n})=>Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx(e,{className:"h-3 w-3",style:{color:nm}}),Y.jsxs("div",{className:"flex flex-col",children:[Y.jsx("span",{className:"text-xs font-semibold",style:{color:tm},children:"number"==typeof n?n.toLocaleString():n}),Y.jsx("span",{className:"text-xs uppercase tracking-[0.01em]",style:{color:nm},children:t})]})]},t))})]}),Y.jsx("div",{className:"h-px",style:Of}),Y.jsxs("div",{className:"flex flex-col gap-3",children:[Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx(C,{className:"h-4 w-4",style:{color:nm}}),Y.jsx("h4",{className:"text-xs font-semibold uppercase tracking-[0.18em]",style:{color:sm},children:"Workouts"})]}),Y.jsx("div",{className:"space-y-3",children:r.workouts.map(e=>{const t=Hf.from(e),n={borderColor:Uf(t.accent,.28),backgroundColor:Uf(t.accent,.12),"--tw-ring-color":Uf(t.accent,.3)},s={borderColor:Uf(t.accent,.4),backgroundColor:Uf(t.accent,.2),color:t.accent},r={borderColor:Uf(t.accent,.35),backgroundColor:Uf(t.accent,.15),color:t.accent};return Y.jsx("article",{className:"w-full rounded-2xl border px-4 py-3 transition hover:shadow-sm",style:n,children:Y.jsxs("div",{className:"flex flex-col gap-3",children:[Y.jsxs("div",{className:"flex items-start gap-3",children:[Y.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full border",style:s,children:t.isStrength?Y.jsx(m,{className:"h-4 w-4"}):Y.jsx(C,{className:"h-4 w-4"})}),Y.jsxs("div",{className:"min-w-0 flex-1",children:[Y.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[Y.jsx("h5",{className:"text-sm font-semibold",style:{color:tm},children:t.name}),t.personalRecords?Y.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] font-medium",style:r,children:[Y.jsx(N,{className:"h-3 w-3"}),t.personalRecords]}):null]}),t.time?Y.jsx("p",{className:"text-xs",style:{color:nm},children:t.time}):null]})]}),Y.jsxs("div",{className:"flex text-center",style:{gap:"clamp(0.25rem, 2vw, 1rem)"},children:[Y.jsx("div",{className:"flex-1",children:Y.jsx(eg,{value:t.duration??"â€”",label:"Duration",align:"center"})}),Y.jsx("div",{className:"flex-1",children:Y.jsx(eg,{value:t.metricTwo.value,label:t.metricTwo.label,align:"center"})}),Y.jsx("div",{className:"flex-1",children:Y.jsx(eg,{value:t.metricThree.value,label:t.metricThree.label,align:"center"})}),Y.jsx("div",{className:"flex-1",children:Y.jsx(eg,{value:t.calories??"â€”",label:"Calories",align:"center"})})]})]})},t.id)})})]})]})})}const Qf={start:"items-start text-left",center:"items-center text-center",end:"items-end text-right"};function eg({icon:e,value:t,label:n,iconColor:s,align:r="center"}){return Y.jsxs("div",{className:Df("flex flex-col",Qf[r]),style:{gap:"clamp(0.125rem, 0.5vw, 0.5rem)"},children:[e&&Y.jsx(e,{className:"h-4 w-4",style:{color:s??nm,width:"clamp(0.75rem, 2vw, 1.25rem)",height:"clamp(0.75rem, 2vw, 1.25rem)"}}),Y.jsx("span",{className:"text-sm font-semibold",style:{color:tm,fontSize:"clamp(0.75rem, 1.5vw, 1rem)",fontWeight:"clamp(500, 1vw + 400, 700)"},children:"number"==typeof t?t.toLocaleString():t}),Y.jsx("span",{className:"text-[11px] uppercase tracking-[0.08em]",style:{color:nm,fontSize:"clamp(0.625rem, 1vw, 0.75rem)",letterSpacing:"clamp(0.06em, 0.1vw, 0.1em)"},children:n})]})}function tg({days:e,initialDayKey:t}){const[s,r]=n.useState(()=>{var n;return t??(null==(n=e[0])?void 0:n.key)??""});return n.useEffect(()=>{0!==e.length&&(e.some(e=>e.key===s)||r(t=>{var n;return e.some(e=>e.key===t)?t:(null==(n=e[0])?void 0:n.key)??""}))},[s,e]),0===e.length?null:Y.jsx(Zf,{days:e,dayKey:s,setDayKey:r})}const ng=(e,t)=>({backgroundColor:e?t:am,border:e?"none":`1px solid ${im}`});function sg({domain:e,kpis:t,selectedIndex:n,onSelect:s}){return t.length?Y.jsx("section",{className:"mt-8 grid grid-cols-2 gap-4",children:t.map((t,r)=>{const i=r===n,o=mm[r%mm.length]??mm[0],a=_m(e,r),l=t.previous??null,c=t.currentNumeric??null,d=function(e,t){if(null===e||null===t)return{icon:gm,color:"text-[rgba(34,49,63,0.55)]",colorActive:"text-[#22313F]",text:"No change",delta:0};const n=bm(e)-bm(t);return Math.abs(n)<.01?{icon:gm,color:"text-[rgba(34,49,63,0.45)]",colorActive:"text-[#22313F]",text:"Same as prior",delta:0}:n>0?{icon:pm,color:"text-[rgba(46,125,102,0.85)]",colorActive:"text-[rgba(46,125,102,1)]",text:"Up",delta:n}:{icon:fm,color:"text-[rgba(226,125,96,0.85)]",colorActive:"text-[rgba(226,125,96,1)]",text:"Down",delta:Math.abs(n)}}(c,l),u=t.unit&&"sessions"!==t.unit.toLowerCase()?t.unit:void 0;return Y.jsxs("button",{type:"button",onClick:()=>s(r),className:"rounded-2xl px-5 py-4 text-left shadow-[0_16px_28px_-18px_rgba(30,36,50,0.35)] transition focus:outline-none focus:ring-2 focus:ring-offset-2",style:ng(i,o),"aria-pressed":i,"aria-label":`${t.title} ${t.value}`,children:[Y.jsx("header",{className:"text-xs font-semibold uppercase tracking-wide "+(i?"text-[#22313F]":"text-[rgba(34,49,63,0.65)]"),children:u?`${t.title} (${u})`:t.title}),Y.jsx("div",{className:"mt-3 text-3xl font-semibold text-[#111111]",children:t.value}),null!==l&&null!==c?Y.jsxs("p",{className:`mt-2 flex items-center gap-1 text-xs font-medium ${i?d.colorActive:d.color}`,children:[Y.jsx("span",{children:d.icon}),Y.jsxs("span",{children:[d.text," ",a(Math.abs(d.delta))]})]}):null]},`${e}-${t.title}-${r}`)})}):null}const rg=[{value:"workouts",label:"Workouts"},{value:"measurement",label:"Measurement"}],ig=[{value:"week",label:"Week"},{value:"threeMonths",label:"3 Month"},{value:"sixMonths",label:"6 Month"}],og={workouts:"Workouts",measurement:"Measurement"},ag={week:"Week",threeMonths:"3 Month",sixMonths:"6 Month"},lg={backgroundColor:"transparent",border:`1px solid ${Xh}`,boxShadow:lm,color:Xh,"--tw-ring-color":Qh},cg={borderColor:im,boxShadow:cm};function dg({domain:e,onChange:t,options:s=rg,encouragement:r}){const[i,o]=n.useState(!1),a=n.useRef(null);n.useEffect(()=>{if(!i)return;const e=e=>{a.current&&!a.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[i]);const l=s.find(t=>t.value===e);return Y.jsxs("section",{className:"relative",ref:a,children:[Y.jsx("h1",{className:"mb-3 text-2xl font-semibold tracking-tight text-[#111111]",children:r}),Y.jsxs("button",{type:"button",onClick:()=>o(e=>!e),"aria-haspopup":"listbox","aria-expanded":i,className:"flex w-full items-center justify-between rounded-2xl px-5 py-3 text-sm font-semibold focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",style:lg,children:[Y.jsx("span",{children:(null==l?void 0:l.label)??"Select"}),Y.jsx("span",{className:"ml-3 text-base","aria-hidden":!0,children:i?"â–²":"â–¼"})]}),i?Y.jsx("ul",{role:"listbox",className:"absolute z-20 mt-2 w-full overflow-hidden rounded-2xl border bg-white",style:cg,children:s.map(n=>{const s=n.value===e;return Y.jsx("li",{children:Y.jsxs("button",{type:"button",role:"option","aria-selected":s,onClick:()=>{t(n.value),o(!1)},className:"flex w-full items-center justify-between px-5 py-3 text-sm font-semibold transition focus:outline-none "+(s?"":"hover:bg-[rgba(226,125,96,0.08)]"),style:{backgroundColor:s?Zh:"transparent",color:s?Xh:nm},children:[Y.jsx("span",{children:n.label}),s?Y.jsx("span",{"aria-hidden":!0,children:"âœ“"}):null]})},n.value)})}):null]})}const ug=e=>({backgroundColor:e?em:"transparent",color:e?"#ffffff":em,border:`1px solid ${em}`,boxShadow:e?um:dm,transform:e?"scale(1.05)":"scale(1)",transition:"all 0.28s cubic-bezier(0.22, 0.61, 0.36, 1)",minWidth:86});function hg({range:e,onChange:t,options:n=ig}){return Y.jsx("section",{className:"flex flex-wrap items-center justify-center gap-2 px-1 py-1",children:n.map(n=>{const s=n.value===e;return Y.jsx("button",{type:"button",onClick:()=>t(n.value),"aria-pressed":s,className:"rounded-full px-4 py-2 text-xs font-semibold transition focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[rgba(30,36,50,0.2)] sm:text-sm",style:ug(s),children:n.label},n.value)})})}const mg={"outdoor walk":"Outdoor Walk","indoor walk":"Indoor Walk","outdoor run":"Outdoor Run","indoor run":"Indoor Run",cycling:"Cycling",elliptical:"Elliptical",rowing:"Rowing","stair stepper":"Stair Stepper",swimming:"Swimming"},pg={activeMinutes:e=>e.totals.minutes,distance:e=>e.totals.distanceKm,calories:e=>e.totals.calories,steps:e=>e.totals.steps},fg=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),gg=new Intl.NumberFormat(void 0,{minimumFractionDigits:1,maximumFractionDigits:1}),xg=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),vg=new Intl.NumberFormat(void 0,{maximumFractionDigits:0});function yg(e){if(!e)return"Workout";const t=e.trim().toLowerCase();return mg[t]??e}function bg(e,t){return{start:e,end:t,iso:e.toISOString(),totals:{minutes:0,distanceKm:0,calories:0,steps:0,heartRateSum:0,heartRateCount:0},workouts:[]}}function wg(e,t){if("sixMonths"===e){const e=new Date(t.getFullYear(),t.getMonth(),1,0,0,0,0),n=new Date(e);n.setMonth(n.getMonth()-5);const s=[];for(let t=0;t<6;t+=1){const e=new Date(n.getFullYear(),n.getMonth()+t,1,0,0,0,0),r=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59,999);s.push(bg(e,r))}return s}const n="week"===e?7:12,s="week"===e?1:7,r=[],i=new Date(t.getTime());i.setHours(23,59,59,999);const o=new Date(i);o.setDate(i.getDate()-s*(n-1)),o.setHours(0,0,0,0);for(let a=0;a<n;a+=1){const e=new Date(o);e.setDate(o.getDate()+a*s);const t=new Date(e);t.setDate(e.getDate()+s-1),t.setHours(23,59,59,999),r.push(bg(e,t))}return r}function kg(e){const t=wg(e,new Date),n=t[0];if(!n)return{current:[],previous:[]};const s=new Date(n.start);s.setDate(s.getDate()-1),s.setHours(23,59,59,999);return{current:t,previous:wg(e,s)}}function Eg(e,t){for(const n of e)if(t>=n.start&&t<=n.end)return n}function Sg(e){if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e){const t=Number.parseFloat(e);return Number.isFinite(t)?t:0}return 0}function Cg(e){const t=Math.max(0,e),n=Math.floor(t/60),s=Math.round(t%60);return n>0?s>0?`${n}h ${s}m`:`${n}h`:`${fg.format(s)}m`}function Ng(e){return`${xg.format(Math.max(0,e))}`}function _g(e){return`${vg.format(Math.max(0,e))}`}const jg=["activeMinutes","distance","calories","steps"],Ag=new class{constructor(){t(this,"cache",new Map),t(this,"platformPromise")}async snapshot(e){var t;le("[cardio] CardioProgressProvider.snapshot: Called",{range:e});try{const n=await this.snapshotNative(e);return le("[cardio] CardioProgressProvider.snapshot: Success",{range:e,seriesKeys:Object.keys(n.series||{}),kpiCount:(null==(t=n.kpis)?void 0:t.length)||0,workoutDays:Object.keys(n.workouts||{}).length,workoutCount:Object.values(n.workouts||{}).reduce((e,t)=>e+t.length,0),hasTargetLine:!!n.targetLine}),n}catch(n){return le("[cardio] CardioProgressProvider.snapshot: Failed",{range:e,error:n}),this.snapshotUnavailable(e)}}seriesFromAggregated(e,t,n,s){const r=pg[n];le("[cardio] CardioProgressProvider.seriesFromAggregated: Data retrieved",{range:e,focus:n,currentBuckets:t.current.length,previousBuckets:t.previous.length,selector:n});const i=t.previous.map(e=>r(e)),o=i.length?Math.max(...i):0,a=!1!==(null==s?void 0:s.compare);le("[cardio] CardioProgressProvider.seriesFromAggregated: Historical analysis",{range:e,focus:n,previousValues:i.slice(0,5),historicalMax:o,includePrevious:a});const l=a&&t.previous.length?t.previous.map(e=>({iso:e.iso,value:r(e)})):void 0,c=t.current.map(e=>{const t=r(e),n=t>o&&t>0;return{iso:e.iso,value:t,isPersonalBest:n}}),d=Math.max(o,...c.map(e=>e.value));return le("[cardio] CardioProgressProvider.seriesFromAggregated: Series calculated",{range:e,focus:n,currentPoints:c.length,previousPoints:(null==l?void 0:l.length)||0,personalBest:d,currentValues:c.slice(0,3).map(e=>({iso:e.iso,value:e.value,isPersonalBest:e.isPersonalBest}))}),{focus:n,current:c,previous:l,personalBest:d>0?d:void 0}}kpisFromAggregated(e,t){const n=this.collectWorkouts(t).length;le("[cardio] CardioProgressProvider.kpisNative: Aggregated data totals",{range:e,currentBuckets:t.current.length,previousBuckets:t.previous.length,workoutCount:n,currentTotals:t.current.reduce((e,t)=>({minutes:e.minutes+t.totals.minutes,distanceKm:e.distanceKm+t.totals.distanceKm,calories:e.calories+t.totals.calories,steps:e.steps+t.totals.steps}),{minutes:0,distanceKm:0,calories:0,steps:0}),previousTotals:t.previous.reduce((e,t)=>({minutes:e.minutes+t.totals.minutes,distanceKm:e.distanceKm+t.totals.distanceKm,calories:e.calories+t.totals.calories,steps:e.steps+t.totals.steps}),{minutes:0,distanceKm:0,calories:0,steps:0})});const s=t.current.reduce((e,t)=>e+t.totals.minutes,0),r=t.previous.reduce((e,t)=>e+t.totals.minutes,0),i=t.current.reduce((e,t)=>e+t.totals.distanceKm,0),o=t.previous.reduce((e,t)=>e+t.totals.distanceKm,0),a=t.current.reduce((e,t)=>e+t.totals.calories,0),l=t.previous.reduce((e,t)=>e+t.totals.calories,0),c=t.current.reduce((e,t)=>e+t.totals.steps,0),d=t.previous.reduce((e,t)=>e+t.totals.steps,0),u=[{key:"activeMinutes",title:"Total Time",unit:"minutes",value:Cg(s),currentNumeric:s,previous:r},{key:"distance",title:"Distance",unit:"km",value:(h=i,`${gg.format(Math.max(0,h))} km`)+" km",currentNumeric:i,previous:o},{key:"calories",title:"Calories",unit:"kcal",value:`${Ng(a)} kcal`,currentNumeric:a,previous:l},{key:"steps",title:"Steps",value:`${_g(c)}`,currentNumeric:c,previous:d}];var h;return le("[cardio] CardioProgressProvider.kpisNative: Final KPIs",{range:e,kpis:u.map(e=>({key:e.key,title:e.title,value:e.value,currentNumeric:e.currentNumeric,previous:e.previous}))}),u}recentWorkoutsFromAggregated(e,t){var n,s;const r=this.collectWorkouts(t),i=(null==(n=t.current[0])?void 0:n.start)??new Date,o=(null==(s=t.current[t.current.length-1])?void 0:s.end)??new Date;le("[cardio] CardioProgressProvider.recentWorkoutsNative: Date range",{range:e,currentStart:i.toISOString(),currentEnd:o.toISOString(),totalWorkouts:r.length});const a=r.filter(e=>{const t=new Date(e.start);return t>=i&&t<=o});le("[cardio] CardioProgressProvider.recentWorkoutsNative: Filtered workouts",{range:e,totalWorkouts:r.length,filteredCount:a.length,sampleWorkouts:a.slice(0,3).map(e=>({id:e.id,activity:e.activity,start:e.start,durationMinutes:e.durationMinutes,distanceKm:e.distanceKm,calories:e.calories}))}),a.sort((e,t)=>new Date(t.start).getTime()-new Date(e.start).getTime());const l=a.slice(0,6);return le("[cardio] CardioProgressProvider.recentWorkoutsNative: Final result",{range:e,resultCount:l.length,workouts:l.map(e=>({id:e.id,activity:e.activity,start:e.start,durationMinutes:e.durationMinutes}))}),l}async targetLineNative(e,t){if(le("[cardio] CardioProgressProvider.targetLineNative: Starting",{range:e,focus:t}),"activeMinutes"!==t)return le("[cardio] CardioProgressProvider.targetLineNative: No target line for focus",{focus:t}),null;const n={focus:t,value:40,unit:"minutes"};return le("[cardio] CardioProgressProvider.targetLineNative: Target line created",{range:e,focus:t,targetLine:n}),n}async snapshotNative(e){var t,n,s,r;le("[cardio] CardioProgressProvider.snapshotNative: Starting",{range:e});const i=await this.ensure(e),o=this.seriesFromAggregated(e,i,"activeMinutes"),a=this.seriesFromAggregated(e,i,"distance"),l=this.seriesFromAggregated(e,i,"calories"),c=this.seriesFromAggregated(e,i,"steps"),d=this.kpisFromAggregated(e,i),u=this.recentWorkoutsFromAggregated(e,i),h=this.groupWorkoutsByDate(u),m=await this.targetLineNative(e,"activeMinutes");return le("[cardio] CardioProgressProvider.snapshotNative: Series data",{range:e,activeMinutes:{pointCount:(null==(t=o.current)?void 0:t.length)||0,personalBest:o.personalBest},distance:{pointCount:(null==(n=a.current)?void 0:n.length)||0,personalBest:a.personalBest},calories:{pointCount:(null==(s=l.current)?void 0:s.length)||0,personalBest:l.personalBest},steps:{pointCount:(null==(r=c.current)?void 0:r.length)||0,personalBest:c.personalBest}}),le("[cardio] CardioProgressProvider.snapshotNative: KPIs calculated",{range:e,kpis:d.map(e=>({key:e.key,title:e.title,value:e.value,currentNumeric:e.currentNumeric,previous:e.previous}))}),le("[cardio] CardioProgressProvider.snapshotNative: Workouts",{range:e,workoutDays:Object.keys(h).length,workoutCount:u.length,hasTargetLine:!!m}),{range:e,series:{activeMinutes:o,distance:a,calories:l,steps:c},kpis:d,workouts:h,targetLine:m}}seriesUnavailableFromBuckets(e,t,n){const s=!1!==(null==n?void 0:n.compare),r=e=>({iso:e.iso,value:0});return{focus:e,current:t.current.map(r),previous:s?t.previous.map(r):void 0}}kpisUnavailable(e){return[{key:"activeMinutes",title:"Total Time",unit:"minutes",value:"N/A"},{key:"distance",title:"Distance",unit:"km",value:"N/A"},{key:"calories",title:"Calories",unit:"kcal",value:"N/A"},{key:"steps",title:"Steps",value:"N/A"}]}targetLineUnavailable(e){return"activeMinutes"!==e?null:{focus:e,value:40,unit:"minutes"}}snapshotUnavailable(e){const t=kg(e);return{range:e,series:{activeMinutes:this.seriesUnavailableFromBuckets("activeMinutes",t),distance:this.seriesUnavailableFromBuckets("distance",t),calories:this.seriesUnavailableFromBuckets("calories",t),steps:this.seriesUnavailableFromBuckets("steps",t)},kpis:this.kpisUnavailable(e),workouts:{},targetLine:this.targetLineUnavailable("activeMinutes")}}getUnavailableSnapshot(e){return this.snapshotUnavailable(e)}collectWorkouts(e){return[...e.previous,...e.current].flatMap(e=>e.workouts)}groupWorkoutsByDate(e){const t={};for(const n of e){const e=new Date(n.start);if(Number.isNaN(e.getTime()))continue;const s=e.toISOString().slice(0,10);t[s]||(t[s]=[]),t[s].push(n)}for(const n of Object.keys(t))t[n].sort((e,t)=>new Date(t.start).getTime()-new Date(e.start).getTime());return t}async ensure(e){if(!this.cache.has(e)){const t=this.fetchAggregated(e).then(e=>e).catch(t=>{throw this.cache.delete(e),t});this.cache.set(e,t)}return this.cache.get(e)}async fetchAggregated(e){le("[cardio] CardioProgressProvider.fetchAggregated: Starting",{range:e});const{current:t,previous:n}=kg(e),s=[...n,...t];if(le("[cardio] CardioProgressProvider.fetchAggregated: Buckets created",{range:e,currentBucketCount:t.length,previousBucketCount:n.length,totalBucketCount:s.length,dateRange:s.length>0?{start:s[0].start.toISOString(),end:s[s.length-1].end.toISOString()}:null}),0===s.length)return le("[cardio] CardioProgressProvider.fetchAggregated: No buckets, returning empty data",{range:e}),{range:e,current:t,previous:n};const r=s[0].start,i=s[s.length-1].end,o=await this.getPlatform();if(le("[cardio] CardioProgressProvider.fetchAggregated: Platform detected",{range:e,platform:o,dateRange:{start:r.toISOString(),end:i.toISOString()}}),"ios"===o)await this.populateFromIos(s,r,i);else{if("android"!==o)throw new Error(`Unsupported platform for cardio provider: ${o}`);await this.populateFromAndroid(s,r,i)}return le("[cardio] CardioProgressProvider.fetchAggregated: Data populated",{range:e,platform:o,workoutCount:s.reduce((e,t)=>e+t.workouts.length,0),currentBucketTotals:t.map(e=>({iso:e.iso,totals:e.totals,workouts:e.workouts.length})),previousBucketTotals:n.map(e=>({iso:e.iso,totals:e.totals,workouts:e.workouts.length}))}),{range:e,current:t,previous:n}}async getPlatform(){return this.platformPromise||(this.platformPromise=(async()=>{try{const{Capacitor:e}=await De(async()=>{const{Capacitor:e}=await Promise.resolve().then(()=>oh);return{Capacitor:e}},void 0);return e.getPlatform()}catch(e){return le("[cardio] Unable to resolve platform, defaulting to web",e),"web"}})()),this.platformPromise}async populateFromIos(e,t,n){var s,r,i,o,a,l;try{const{Health:d}=await De(async()=>{const{Health:e}=await import("./index-BZG64wap.js");return{Health:e}},__vite__mapDeps([3,1,2])),u=t.toISOString(),h=n.toISOString();le("[cardio] iOS populateFromIos: Starting",{start:u,end:h,bucketCount:e.length,dateRange:`${u} to ${h}`}),le("[cardio] iOS request permissions",{start:u,end:h});const m=await d.requestHealthPermissions({permissions:["READ_WORKOUTS","READ_ACTIVE_CALORIES","READ_TOTAL_CALORIES","READ_DISTANCE","READ_HEART_RATE","READ_STEPS"]});le("[cardio] iOS permissions result",{permissions:m,granted:Object.values(m).every(Boolean)}),le("[cardio] iOS queryWorkouts: Request",{start:u,end:h,includeHeartRate:!0,includeRoute:!1,includeSteps:!0});const p=await d.queryWorkouts({startDate:u,endDate:h,includeHeartRate:!0,includeRoute:!1,includeSteps:!0});le("[cardio] iOS queryWorkouts: Response",{hasWorkouts:!!(null==p?void 0:p.workouts),workoutCount:Array.isArray(null==p?void 0:p.workouts)?p.workouts.length:0,responseKeys:Object.keys(p||{})});const f=Array.isArray(null==p?void 0:p.workouts)?p.workouts:[];le("[cardio] iOS queryWorkouts: Detailed workout breakdown",{totalWorkouts:f.length});const g=(e,t)=>{var n,s;le(`[cardio] iOS Workout #${t+1}/${f.length}`,{id:(null==e?void 0:e.id)||"N/A",workoutType:(null==e?void 0:e.workoutType)||"N/A",startDate:(null==e?void 0:e.startDate)||"N/A",endDate:(null==e?void 0:e.endDate)||"N/A",duration:(null==e?void 0:e.duration)||"N/A",distance:(null==e?void 0:e.distance)||"N/A",calories:(null==e?void 0:e.calories)||"N/A",steps:(null==e?void 0:e.steps)||"N/A",sourceName:(null==e?void 0:e.sourceName)||"N/A",heartRateCount:Array.isArray(null==e?void 0:e.heartRate)?e.heartRate.length:0,heartRateSample:Array.isArray(null==e?void 0:e.heartRate)&&e.heartRate.length>0?{firstBpm:(null==(n=e.heartRate[0])?void 0:n.bpm)||"N/A",lastBpm:(null==(s=e.heartRate[e.heartRate.length-1])?void 0:s.bpm)||"N/A",totalReadings:e.heartRate.length}:null,allKeys:Object.keys(e||{})})};le("[cardio] iOS workouts fetched",{count:f.length});const x=new Map,v=new Map,y=[];for(let t=0;t<f.length;t++){g(f[t],t);const n=f[t],s=new Date((null==n?void 0:n.startDate)??(null==n?void 0:n.startTime)??0),r=new Date((null==n?void 0:n.endDate)??(null==n?void 0:n.endTime)??0);if(Number.isNaN(s.getTime())||Number.isNaN(r.getTime()))continue;const i=Eg(e,s);if(!i)continue;const o=Sg(null==n?void 0:n.duration),a=o>0?o/60:Math.max(0,(r.getTime()-s.getTime())/6e4),l=Sg(null==n?void 0:n.distance),c=l>0?l/1e3:void 0,d=Sg(null==n?void 0:n.calories),u=Sg(null==n?void 0:n.steps);if(i.totals.minutes+=a,c&&(i.totals.distanceKm+=c),d){const e=x.get(i)??0;x.set(i,e+d)}if(u){const e=v.get(i)??0;v.set(i,e+u)}let h=0,m=0;if(Array.isArray(null==n?void 0:n.heartRate))for(const e of n.heartRate){const t=Sg(null==e?void 0:e.bpm);t>0&&(i.totals.heartRateSum+=t,i.totals.heartRateCount+=1,h+=t,m+=1)}const p={id:(null==n?void 0:n.id)??`ios-${s.getTime()}`,activity:yg(null==n?void 0:n.workoutType),start:s.toISOString(),end:r.toISOString(),durationMinutes:a,distanceKm:c,calories:d||void 0,steps:u||void 0,averageHeartRate:m>0?h/m:void 0,source:null==n?void 0:n.sourceName};i.workouts.push(p),y.push(p)}for(const e of y)le("ğŸ” DGB [CARDIO_PROGRESS] Workout:",JSON.stringify(e,null,2));try{le("[cardio] iOS queryAggregated steps: Request",{start:u,end:h,dataType:"steps",bucket:"day"});const t=await d.queryAggregated({startDate:u,endDate:h,dataType:"steps",bucket:"day"});le("[cardio] iOS queryAggregated steps: Response",{hasAggregatedData:!!(null==t?void 0:t.aggregatedData),dataCount:Array.isArray(null==t?void 0:t.aggregatedData)?t.aggregatedData.length:0,responseKeys:Object.keys(t||{}),sampleData:Array.isArray(null==t?void 0:t.aggregatedData)&&t.aggregatedData.length>0?{startDate:null==(s=t.aggregatedData[0])?void 0:s.startDate,date:null==(r=t.aggregatedData[0])?void 0:r.date,value:null==(i=t.aggregatedData[0])?void 0:i.value}:null});const n=Array.isArray(null==t?void 0:t.aggregatedData)?t.aggregatedData:[];let o=0,a=0;le("[cardio] iOS queryAggregated steps: Detailed step breakdown",{totalStepRows:n.length});const l=(e,t)=>{le(`[cardio] iOS Step Row #${t+1}/${n.length}`,{startDate:(null==e?void 0:e.startDate)||"N/A",date:(null==e?void 0:e.date)||"N/A",value:(null==e?void 0:e.value)||"N/A",allKeys:Object.keys(e||{})})};for(let s=0;s<n.length;s++){const t=n[s];l(t,s);const r=Eg(e,new Date((null==t?void 0:t.startDate)??(null==t?void 0:t.date)??0));if(!r)continue;const i=Sg(null==t?void 0:t.value);r.totals.steps+=i,a+=i,o++}le("[cardio] iOS steps processed",{processedRows:o,totalSteps:a,bucketsWithSteps:e.filter(e=>e.totals.steps>0).length})}catch(c){le("[cardio] iOS step aggregation failed",c)}try{le("[cardio] iOS queryAggregated active calories: Request",{start:u,end:h,dataType:"active-calories",bucket:"day"});const t=await d.queryAggregated({startDate:u,endDate:h,dataType:"active-calories",bucket:"day"});le("[cardio] iOS queryAggregated active calories: Response",{hasAggregatedData:!!(null==t?void 0:t.aggregatedData),dataCount:Array.isArray(null==t?void 0:t.aggregatedData)?t.aggregatedData.length:0,responseKeys:Object.keys(t||{}),sampleData:Array.isArray(null==t?void 0:t.aggregatedData)&&t.aggregatedData.length>0?{startDate:null==(o=t.aggregatedData[0])?void 0:o.startDate,date:null==(a=t.aggregatedData[0])?void 0:a.date,value:null==(l=t.aggregatedData[0])?void 0:l.value}:null});const n=Array.isArray(null==t?void 0:t.aggregatedData)?t.aggregatedData:[];let s=0,r=0;le("[cardio] iOS queryAggregated calories: Detailed calorie breakdown",{totalCalorieRows:n.length});const i=(e,t)=>{le(`[cardio] iOS Calorie Row #${t+1}/${n.length}`,{startDate:(null==e?void 0:e.startDate)||"N/A",date:(null==e?void 0:e.date)||"N/A",value:(null==e?void 0:e.value)||"N/A",allKeys:Object.keys(e||{})})};for(let o=0;o<n.length;o++){const t=n[o];i(t,o);const a=Eg(e,new Date((null==t?void 0:t.startDate)??(null==t?void 0:t.date)??0));if(!a)continue;const l=Sg(null==t?void 0:t.value);l>0&&(a.totals.calories+=l,r+=l,s++)}le("[cardio] iOS calories processed",{processedRows:s,totalCalories:r,bucketsWithCalories:e.filter(e=>e.totals.calories>0).length})}catch(c){le("[cardio] iOS calorie aggregation failed",c)}for(const t of e)t.totals.calories<=0&&x.has(t)&&(t.totals.calories=x.get(t)??0),t.totals.steps<=0&&v.has(t)&&(t.totals.steps=v.get(t)??0);le("[cardio] iOS populateFromIos: Final summary",{totalWorkouts:y.length,totalBuckets:e.length,bucketsWithData:e.filter(e=>e.totals.minutes>0||e.totals.distanceKm>0||e.totals.calories>0||e.totals.steps>0).length,totalMinutes:e.reduce((e,t)=>e+t.totals.minutes,0),totalDistance:e.reduce((e,t)=>e+t.totals.distanceKm,0),totalCalories:e.reduce((e,t)=>e+t.totals.calories,0),totalSteps:e.reduce((e,t)=>e+t.totals.steps,0),fallbackCaloriesUsed:x.size,fallbackStepsUsed:v.size})}catch(c){throw oe("[cardio] Failed to populate iOS cardio data",c),c}}async populateFromAndroid(e,t,n){var s,r,i,o,a;try{const{HealthConnect:l}=await De(async()=>{const{HealthConnect:e}=await import("./index-De-4xZM4.js");return{HealthConnect:e}},__vite__mapDeps([4,1,2]));le("[cardio] Android request permissions",{start:t.toISOString(),end:n.toISOString()}),await l.requestHealthPermissions({read:["Steps","Distance","ActiveCaloriesBurned","HeartRateSeries"],write:[]});const c={type:"between",startTime:t,endTime:n},d=async e=>{const t=[];let n;do{le("[cardio] Android readRecords",{type:e,pageToken:n});const s=await l.readRecords({type:e,timeRangeFilter:c,pageToken:n,pageSize:500});Array.isArray(null==s?void 0:s.records)&&t.push(...s.records),n=null==s?void 0:s.pageToken}while(n);return t},u=await d("Steps");for(const t of u){const n=Eg(e,new Date((null==t?void 0:t.startTime)??0));n&&(n.totals.steps+=Sg(null==t?void 0:t.count))}const h=await d("Distance"),m=[];for(const t of h){const n=new Date((null==t?void 0:t.startTime)??0),a=new Date((null==t?void 0:t.endTime)??0);if(Number.isNaN(n.getTime())||Number.isNaN(a.getTime()))continue;const l=Eg(e,n);if(!l)continue;const c=Math.max(0,(a.getTime()-n.getTime())/6e4),d=Sg(null==(s=null==t?void 0:t.distance)?void 0:s.value),u=((null==(r=null==t?void 0:t.distance)?void 0:r.unit)??"meter").toLowerCase();let h;"meter"===u?h=d/1e3:"kilometer"===u?h=d:"mile"===u&&(h=1.60934*d),h&&(l.totals.distanceKm+=h),l.totals.minutes+=c;const p={id:(null==(i=null==t?void 0:t.metadata)?void 0:i.id)??`android-distance-${n.getTime()}`,activity:yg("Distance"),start:n.toISOString(),end:a.toISOString(),durationMinutes:c,distanceKm:h,source:null==(o=null==t?void 0:t.metadata)?void 0:o.dataOrigin};l.workouts.push(p),m.push(p)}const p=await d("ActiveCaloriesBurned");for(const t of p){const n=Eg(e,new Date((null==t?void 0:t.startTime)??0));if(!n)continue;const s=Sg(null==(a=null==t?void 0:t.energy)?void 0:a.value);s>0&&(n.totals.calories+=s)}const f=await d("HeartRateSeries");for(const t of f){const n=Eg(e,new Date((null==t?void 0:t.startTime)??0));if(n&&Array.isArray(null==t?void 0:t.samples))for(const e of t.samples){const t=Sg(null==e?void 0:e.beatsPerMinute);t>0&&(n.totals.heartRateSum+=t,n.totals.heartRateCount+=1)}}le("[cardio] Android populateFromAndroid: Final summary",{totalWorkouts:m.length,totalBuckets:e.length,bucketsWithData:e.filter(e=>e.totals.minutes>0||e.totals.distanceKm>0||e.totals.calories>0||e.totals.steps>0).length,totalMinutes:e.reduce((e,t)=>e+t.totals.minutes,0),totalDistance:e.reduce((e,t)=>e+t.totals.distanceKm,0),totalCalories:e.reduce((e,t)=>e+t.totals.calories,0),totalSteps:e.reduce((e,t)=>e+t.totals.steps,0)})}catch(l){throw oe("[cardio] Failed to populate Android cardio data",l),l}}};function Tg(e){return{series:jg.map(t=>{const n=e.series[t];return n?n.current.map(e=>({x:e.iso,y:e.value,isPersonalBest:e.isPersonalBest})):[]}),kpis:e.kpis.map(({title:e,value:t,unit:n,previous:s,currentNumeric:r})=>({title:e,value:t,unit:n,previous:s,currentNumeric:r})),workouts:e.workouts??{}}}function Rg({bottomBar:e}){var t,s;const[r,i]=n.useState("workouts"),[o,a]=n.useState("week"),[l,c]=n.useState(0),{userToken:d}=bt(),u=function(e){const[t,s]=n.useState(null);return n.useEffect(()=>{let t=!1;return e?((async()=>{try{const e=await Ze.getMyProfile();t||s(function(e){var t,n;if(!e)return null;const s=null==(t=e.first_name)?void 0:t.trim();if(s)return s.split(/\s+/)[0];const r=null==(n=e.display_name)?void 0:n.trim();if(r){const[e]=r.split(/\s+/);if(e)return e}return null}(e))}catch(e){t||s(null)}})(),()=>{t=!0}):(s(null),()=>{t=!0})},[e]),t}(d),{snapshot:h,loading:m}=function(e){const[t,s]=n.useState(()=>Tg(Ag.getUnavailableSnapshot(e))),[r,i]=n.useState(!1);return n.useEffect(()=>{let t=!1;i(!0),le("[workouts] useWorkoutsProgressSnapshot: Hook initialized",{range:e});const n=Tg(Ag.getUnavailableSnapshot(e));return s(n),le("[workouts] useWorkoutsProgressSnapshot: Calling workoutsProvider.snapshot",{range:e}),Ag.snapshot(e).then(n=>{var r,i,o;if(t)return;le("[workouts] useWorkoutsProgressSnapshot: Raw snapshot received from provider",{range:e,seriesKeys:Object.keys(n.series||{}),kpiCount:(null==(r=n.kpis)?void 0:r.length)||0,workoutDays:n.workouts?Object.keys(n.workouts).length:0,workoutCount:n.workouts?Object.values(n.workouts).reduce((e,t)=>e+t.length,0):0,hasTargetLine:!!n.targetLine});const a=Tg(n);le("[workouts] useWorkoutsProgressSnapshot: Converted to Snapshot format",{range:e,seriesCount:(null==(i=a.series)?void 0:i.length)||0,kpiCount:(null==(o=a.kpis)?void 0:o.length)||0,workoutDayCount:Object.keys(a.workouts||{}).length,workoutCount:Object.values(a.workouts||{}).reduce((e,t)=>e+t.length,0)}),s(a)}).catch(r=>{t||(le("[workouts] useWorkoutsProgressSnapshot: Failed to load workouts snapshot",{range:e,error:r}),s(n))}).finally(()=>{t||i(!1)}),()=>{t=!0}},[e]),{snapshot:t,loading:r}}(o),p=n.useMemo(()=>h,[h,false,o]),f=m,g=n.useMemo(()=>"workouts"===r&&p?p:Kh[r][o],[r,o,p]),x=n.useMemo(()=>_m(r,l),[r,l]),v=g.series[l]??g.series[0]??[],y=n.useMemo(()=>"workouts"!==r?[]:Vf(g.workouts),[r,g.workouts]);n.useEffect(()=>{c(0)},[r,o]),n.useEffect(()=>{"workouts"===r&&le("[workouts] ProgressScreen: Workouts domain selected",{range:o,selectedKpiIndex:l,hasWorkoutsSnapshot:!!p,workoutsLoading:f})},[r,o,l,p,f]),n.useEffect(()=>{var e,t,n;"workouts"===r&&p&&le("[workouts] ProgressScreen: Workouts snapshot received",{range:o,kpiCount:(null==(e=p.kpis)?void 0:e.length)||0,seriesCount:(null==(t=p.series)?void 0:t.length)||0,workoutDayCount:Object.keys(p.workouts||{}).length,workoutCount:Object.values(p.workouts||{}).reduce((e,t)=>e+t.length,0),kpis:null==(n=p.kpis)?void 0:n.map(e=>({title:e.title,value:e.value,currentNumeric:e.currentNumeric,previous:e.previous}))})},[r,p]);const b=mm[l%mm.length],w=function(e){return"Youâ€™ve got this"+(e?`, ${e}`:"")}(u),k=og[r]??"Select",E=ag[o]??"",S=(null==(t=g.kpis[l])?void 0:t.title)??(null==(s=g.kpis[0])?void 0:s.title)??"";return Y.jsx(Lt,{header:null,bottomBar:e,bottomBarSticky:!0,showHeaderBorder:!1,showBottomBarBorder:!1,maxContent:"responsive",contentClassName:"",children:Y.jsxs(ds,{gap:"fluid",children:[Y.jsx(os,{y:"sm"}),Y.jsx(dg,{domain:r,onChange:i,encouragement:w,options:rg}),Y.jsx(hg,{range:o,onChange:a,options:ig}),Y.jsx(Mf,{domainLabel:k,rangeLabel:E,title:S,chipLabel:k,series:v,color:b,range:o,formatter:x}),Y.jsx(sg,{domain:r,kpis:g.kpis,selectedIndex:l,onSelect:c}),Y.jsx(os,{y:"sm"}),"workouts"===r?Y.jsx(tg,{days:y}):null]})})}function Pg({className:e,...t}){return Y.jsx("div",{"data-slot":"card",className:Kn("bg-card text-black flex flex-col gap-6 rounded-xl border",e),...t})}function Mg({className:e,...t}){return Y.jsx("div",{"data-slot":"card-header",className:Kn("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function Dg({className:e,...t}){return Y.jsx("div",{"data-slot":"card-content",className:Kn("px-6 [&:last-child]:pb-6",e),...t})}function $g(...e){const t=e[0];if(1===e.length)return t;const s=()=>{const s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=s.reduce((t,{useScope:n,scopeName:s})=>({...t,...n(e)[`__scope${s}`]}),{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return s.scopeName=t.scopeName,s}var Ig=(null==globalThis?void 0:globalThis.document)?n.useLayoutEffect:()=>{};function Og(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function Lg(e){const t=Bg(e),s=n.forwardRef((e,s)=>{const{children:r,...i}=e,o=n.Children.toArray(r),a=o.find(Ug);if(a){const e=a.props.children,r=o.map(t=>t===a?n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null:t);return Y.jsx(t,{...i,ref:s,children:n.isValidElement(e)?n.cloneElement(e,void 0,r):null})}return Y.jsx(t,{...i,ref:s,children:r})});return s.displayName=`${e}.Slot`,s}function Bg(e){const t=n.forwardRef((e,t)=>{const{children:s,...r}=e;if(n.isValidElement(s)){const e=function(e){var t,n;let s=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,r=s&&"isReactWarning"in s&&s.isReactWarning;if(r)return e.ref;if(s=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(s),i=function(e,t){const n={...t};for(const s in t){const r=e[s],i=t[s];/^on[A-Z]/.test(s)?r&&i?n[s]=(...e)=>{const t=i(...e);return r(...e),t}:r&&(n[s]=r):"style"===s?n[s]={...r,...i}:"className"===s&&(n[s]=[r,i].filter(Boolean).join(" "))}return{...e,...n}}(r,s.props);return s.type!==n.Fragment&&(i.ref=t?function(...e){return t=>{let n=!1;const s=e.map(e=>{const s=Og(e,t);return n||"function"!=typeof s||(n=!0),s});if(n)return()=>{for(let t=0;t<s.length;t++){const n=s[t];"function"==typeof n?n():Og(e[t],null)}}}}(t,e):e),n.cloneElement(s,i)}return n.Children.count(s)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Fg=Symbol("radix.slottable");function Ug(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Fg}var Hg=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const s=Lg(`Primitive.${t}`),r=n.forwardRef((e,n)=>{const{asChild:r,...i}=e,o=r?s:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Y.jsx(o,{...i,ref:n})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),Vg={exports:{}},Wg={},zg=n;var Gg="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},qg=zg.useState,Kg=zg.useEffect,Yg=zg.useLayoutEffect,Jg=zg.useDebugValue;function Xg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gg(e,n)}catch(s){return!0}}var Zg="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),s=qg({inst:{value:n,getSnapshot:t}}),r=s[0].inst,i=s[1];return Yg(function(){r.value=n,r.getSnapshot=t,Xg(r)&&i({inst:r})},[e,n,t]),Kg(function(){return Xg(r)&&i({inst:r}),e(function(){Xg(r)&&i({inst:r})})},[e]),Jg(n),n};Wg.useSyncExternalStore=void 0!==zg.useSyncExternalStore?zg.useSyncExternalStore:Zg,Vg.exports=Wg;var Qg=Vg.exports;function ex(){return()=>{}}var tx="Avatar",[nx,sx]=function(e,t=[]){let s=[];const r=()=>{const t=s.map(e=>n.createContext(e));return function(s){const r=(null==s?void 0:s[e])||t;return n.useMemo(()=>({[`__scope${e}`]:{...s,[e]:r}}),[s,r])}};return r.scopeName=e,[function(t,r){const i=n.createContext(r),o=s.length;s=[...s,r];const a=t=>{var s;const{scope:r,children:a,...l}=t,c=(null==(s=null==r?void 0:r[e])?void 0:s[o])||i,d=n.useMemo(()=>l,Object.values(l));return Y.jsx(c.Provider,{value:d,children:a})};return a.displayName=t+"Provider",[a,function(s,a){var l;const c=(null==(l=null==a?void 0:a[e])?void 0:l[o])||i,d=n.useContext(c);if(d)return d;if(void 0!==r)return r;throw new Error(`\`${s}\` must be used within \`${t}\``)}]},$g(r,...t)]}(tx),[rx,ix]=nx(tx),ox=n.forwardRef((e,t)=>{const{__scopeAvatar:s,...r}=e,[i,o]=n.useState("idle");return Y.jsx(rx,{scope:s,imageLoadingStatus:i,onImageLoadingStatusChange:o,children:Y.jsx(Hg.span,{...r,ref:t})})});ox.displayName=tx;var ax="AvatarImage";n.forwardRef((e,t)=>{const{__scopeAvatar:s,src:r,onLoadingStatusChange:i=()=>{},...o}=e,a=ix(ax,s),l=function(e,{referrerPolicy:t,crossOrigin:s}){const r=Qg.useSyncExternalStore(ex,()=>!0,()=>!1),i=n.useRef(null),o=r?(i.current||(i.current=new window.Image),i.current):null,[a,l]=n.useState(()=>dx(o,e));return Ig(()=>{l(dx(o,e))},[o,e]),Ig(()=>{const e=e=>()=>{l(e)};if(!o)return;const n=e("loaded"),r=e("error");return o.addEventListener("load",n),o.addEventListener("error",r),t&&(o.referrerPolicy=t),"string"==typeof s&&(o.crossOrigin=s),()=>{o.removeEventListener("load",n),o.removeEventListener("error",r)}},[o,s,t]),a}(r,o),c=function(e){const t=n.useRef(e);return n.useEffect(()=>{t.current=e}),n.useMemo(()=>(...e)=>{var n;return null==(n=t.current)?void 0:n.call(t,...e)},[])}(e=>{i(e),a.onImageLoadingStatusChange(e)});return Ig(()=>{"idle"!==l&&c(l)},[l,c]),"loaded"===l?Y.jsx(Hg.img,{...o,ref:t,src:r}):null}).displayName=ax;var lx="AvatarFallback",cx=n.forwardRef((e,t)=>{const{__scopeAvatar:s,delayMs:r,...i}=e,o=ix(lx,s),[a,l]=n.useState(void 0===r);return n.useEffect(()=>{if(void 0!==r){const e=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(e)}},[r]),a&&"loaded"!==o.imageLoadingStatus?Y.jsx(Hg.span,{...i,ref:t}):null});function dx(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}cx.displayName=lx;var ux=ox,hx=cx;function mx({className:e,...t}){return Y.jsx(ux,{"data-slot":"avatar",className:Kn("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...t})}function px({className:e,...t}){return Y.jsx(hx,{"data-slot":"avatar-fallback",className:Kn("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}function fx({bottomBar:e,onNavigateToMyAccount:t,onNavigateToDeviceSettings:s}){const{userToken:r,signOut:i}=bt(),[o,a]=n.useState(null),[l,c]=n.useState(!1),[d,u]=n.useState(!1),h=[{title:"Account & Settings",items:[{label:"My Account",description:"Profile details and connected services",icon:f,onPress:t},{label:"Device Settings",description:"Manage Health Connect and devices",icon:_,onPress:s},{label:"Notifications",description:"Choose reminders that keep you on track",icon:j},{label:"Privacy Settings",description:"Control data sharing and visibility",icon:A}]},{title:"Support",items:[{label:"Help & Support",description:"Get help or ask a question",icon:T},{label:"Tutorials",description:"Quick tips to learn the app",icon:R},{label:"About",description:"Our mission and release notes",icon:P},{label:"Getting Started",description:"Guided setup for new members",icon:M}]}];n.useEffect(()=>{(async()=>{if(r){c(!0);try{const e=await Ze.getMyProfile();a(e)}catch(e){ie("Failed to fetch profile:",e),e instanceof Error&&"UNAUTHORIZED"===e.message?dt.error("Session expired. Please sign in."):dt.error("Failed to load profile data.")}finally{c(!1)}}})()},[r]);const m=()=>(null==o?void 0:o.display_name)?o.display_name:(null==o?void 0:o.first_name)&&(null==o?void 0:o.last_name)?`${o.first_name} ${o.last_name}`:(null==o?void 0:o.first_name)?o.first_name:"User";return Y.jsx(Lt,{header:Y.jsx(Xn,{title:"Profile",showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold text-black"}),maxContent:"responsive",showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:e,bottomBarSticky:!0,headerInScrollArea:!0,children:Y.jsxs(ds,{gap:"fluid",children:[Y.jsx(rs,{variant:"plain",padding:"none",children:Y.jsx(Pg,{className:"border border-border bg-card/80 backdrop-blur-sm shadow-sm",children:Y.jsxs(Dg,{className:"p-6 text-center",children:[Y.jsx(mx,{className:"w-20 h-20 mx-auto mb-4 bg-primary text-black shadow-lg shadow-primary/30",children:Y.jsx(px,{className:"bg-primary text-black text-lg font-semibold",children:(()=>{const e=m(),t=e.split(" ");return t.length>=2?`${t[0][0]}${t[1][0]}`.toUpperCase():e.slice(0,2).toUpperCase()})()})}),l?Y.jsx("div",{className:"text-sm text-black/60",children:"Loading profile..."}):Y.jsxs(Y.Fragment,{children:[Y.jsx("h1",{className:"text-[clamp(20px,5vw,26px)] font-semibold text-black mb-1",children:m()}),Y.jsx("p",{className:"text-sm text-black/60",children:"Keep your profile up to date to personalize your plan."})]})]})})}),h.map(e=>Y.jsx(rs,{variant:"plain",padding:"none",children:Y.jsxs("div",{className:"rounded-3xl border border-border bg-card/80 backdrop-blur-sm p-5 shadow-sm",children:[Y.jsx("p",{className:"text-md font-bold uppercase tracking-[0.12em] text-black mb-4",children:e.title}),Y.jsx("div",{className:"space-y-3",children:e.items.map(e=>{const t=e.icon;return Y.jsx(Dg,{className:"px-0 pt-1 pb-1",children:Y.jsx("button",{type:"button",onClick:e.onPress,disabled:!e.onPress,className:"w-full rounded-2xl px-4 py-3 text-left transition hover:bg-black/5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-black/40 disabled:cursor-default disabled:opacity-60",children:Y.jsxs("div",{className:"flex items-start gap-3",children:[Y.jsx(t,{size:18,className:"mt-1 text-black"}),Y.jsxs("div",{className:"flex-1 leading-none",children:[Y.jsx("p",{className:"text-sm uppercase font-medium text-black leading-tight",children:e.label}),e.description&&Y.jsx("p",{className:"text-xs text-black/60 leading-tight m-0",children:e.description})]}),Y.jsx(D,{size:18,className:"text-black/30 self-center"})]})})},e.label)})})]})},e.title)),Y.jsx(rs,{variant:"plain",padding:"none",children:Y.jsxs("div",{className:"space-y-4",children:[Y.jsxs(ys,{variant:"secondary",className:"w-full flex items-center justify-center gap-2 rounded-2xl border-0 font-medium text-black",onClick:async()=>{if(!d){u(!0);try{await Ze.signOut(),i(),dt.success("Signed out successfully")}catch(e){ie("Sign out failed:",e),i(),dt.success("Signed out successfully")}finally{u(!1)}}},disabled:d,children:[d?Y.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-current border-t-transparent rounded-full"}):Y.jsx($,{size:16}),d?"Signing Out...":"Logout"]}),Y.jsx("div",{className:"text-center text-xs text-black/50",children:"App Version: 1.0.0 (Build 1234)"})]})})]})})}var gx=n.forwardRef((e,t)=>Y.jsx(Hg.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null==(n=e.onMouseDown)||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));gx.displayName="Label";var xx=gx;function vx({className:e,...t}){return Y.jsx(xx,{"data-slot":"label",className:Kn("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const yx="prefer_not_to_say",bx={cm:_h("cm").toUpperCase(),m:_h("m").toUpperCase()},wx={kg:jh("kg").toUpperCase(),lb:jh("lb").toUpperCase()},kx=e=>Object.entries(e).map(([e,t])=>({value:e,label:t})),Ex=kx(bx),Sx=kx(wx),Cx=()=>({displayName:"",firstName:"",lastName:"",height:"",weight:"",lengthUnit:mh,weightUnit:ph,gender:yx}),Nx=[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"non_binary",label:"Non-binary"},{value:"prefer_not_to_say",label:"Prefer not to say"}];function _x({onBack:e}){const t="my-account-form",[s,r]=n.useState(()=>Cx()),[i,o]=n.useState(()=>Cx()),[a,l]=n.useState(!1),[c,d]=n.useState(!1);n.useEffect(()=>{(async()=>{l(!0);try{const e=await Ze.getMyProfile();if(e){const t=Tx(e);r(t),o({...t})}else{const e=Cx();r(e),o({...e})}}catch(e){ie("Failed to load account profile:",e),dt.error("Unable to load your profile right now.")}finally{l(!1)}})()},[]);const u=n.useMemo(()=>{const e=s.displayName.trim();if(e)return e;return[s.firstName.trim(),s.lastName.trim()].filter(Boolean).join(" ")||"User"},[s.displayName,s.firstName,s.lastName]);n.useMemo(()=>{const e=u;if(!e)return"US";const t=e.split(" ").filter(Boolean);return t.length>=2?`${t[0][0]}${t[1][0]}`.toUpperCase():e.slice(0,2).toUpperCase()},[u]);const h=n.useMemo(()=>JSON.stringify(s)!==JSON.stringify(i),[s,i]),m=e=>t=>{const{value:n}=t.target;r(t=>"weight"!==e||vh(n)?{...t,[e]:n}:t)},p="m"===s.lengthUnit?.01:.1;return Y.jsx(Lt,{header:Y.jsx(Xn,{title:"My Account",onBack:e,showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold text-black"}),maxContent:"responsive",showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:Y.jsx(Ms,{children:Y.jsx(Ps,{type:"submit",form:t,disabled:!h||c||a,className:"min-w-[160px]",children:c?Y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[Y.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-current border-t-transparent rounded-full"}),"Saving..."]}):"Save Changes"})}),bottomBarSticky:!0,headerInScrollArea:!1,children:Y.jsx("form",{id:t,onSubmit:async e=>{if(e.preventDefault(),c||!h)return;const t=s.displayName.trim(),n=s.firstName.trim(),i=s.lastName.trim();if(!t)return void dt.error("Display name is required.");const a=Px(s.height),l=Px(s.weight);if(void 0!==a&&a<=0)return void dt.error("Height must be a positive number.");if(void 0!==l&&l<=0)return void dt.error("Weight must be a positive number.");const u=void 0!==a?kh(a,s.lengthUnit):void 0,m=void 0!==l?Eh(l,s.weightUnit):void 0;d(!0);try{const e=await Ze.upsertProfile({firstName:n,lastName:i,displayName:t,heightCm:u,weightKg:m,lengthUnit:s.lengthUnit,weightUnit:s.weightUnit,gender:s.gender}),a=e?Tx(e):{displayName:t,firstName:n,lastName:i,height:s.height,weight:s.weight,lengthUnit:s.lengthUnit,weightUnit:s.weightUnit,gender:s.gender};r(a),o({...a}),ae("[MyAccount] Saved profile preferences",{lengthUnit:a.lengthUnit,weightUnit:a.weightUnit,gender:a.gender}),dt.success("Profile updated successfully.")}catch(p){ie("Failed to update profile:",p),dt.error("Could not save your changes. Please try again.")}finally{d(!1)}},className:"h-full",children:Y.jsxs(ds,{gap:"fluid",children:[Y.jsx(rs,{variant:"plain",padding:"none",children:Y.jsxs("div",{className:"rounded-3xl border border-border bg-card/80 backdrop-blur-sm p-6 shadow-sm space-y-6",children:[Y.jsxs("div",{children:[Y.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-black/60",children:"Personal Information"}),Y.jsx("h2",{className:"mt-2 text-lg font-semibold text-black",children:"How should we address you?"}),Y.jsx("p",{className:"text-sm text-black/60 mt-1",children:"Update the details you'd like to share with the community."})]}),Y.jsxs("div",{className:"space-y-4",children:[Y.jsx(Ax,{label:"Display Name",value:s.displayName,onChange:m("displayName"),placeholder:"eg. Alex Johnson",required:!0,disabled:a||c}),Y.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[Y.jsx(Ax,{label:"First Name",value:s.firstName,onChange:m("firstName"),placeholder:"First name",disabled:a||c}),Y.jsx(Ax,{label:"Last Name",value:s.lastName,onChange:m("lastName"),placeholder:"Last name",disabled:a||c})]}),Y.jsx(jx,{value:s.gender,onChange:e=>{a||c||r(t=>t.gender===e?t:{...t,gender:e})},disabled:a||c})]})]})}),Y.jsx(rs,{variant:"plain",padding:"none",children:Y.jsxs("div",{className:"rounded-3xl border border-border bg-card/80 backdrop-blur-sm p-6 shadow-sm space-y-6",children:[Y.jsxs("div",{children:[Y.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-black/60",children:"Physical Information"}),Y.jsx("h2",{className:"mt-2 text-lg font-semibold text-black",children:"Fitness stats help tailor your plan"}),Y.jsx("p",{className:"text-sm text-black/60 mt-1",children:"Share optional stats to improve workout recommendations."})]}),Y.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[Y.jsx(Ax,{label:`Height (${_h(s.lengthUnit).toUpperCase()})`,value:s.height,onChange:m("height"),placeholder:"m"===s.lengthUnit?"eg. 1.75":"eg. 175",type:"number",inputMode:"decimal",min:0,step:p,disabled:a||c}),Y.jsx(Ax,{label:`Weight (${jh(s.weightUnit).toUpperCase()})`,value:s.weight,onChange:m("weight"),placeholder:"lb"===s.weightUnit?"eg. 154":"eg. 70",type:"number",inputMode:"decimal",min:0,step:.01,disabled:a||c})]})]})}),Y.jsx(rs,{variant:"plain",padding:"none",children:Y.jsxs("div",{className:"rounded-3xl border border-border bg-card/80 backdrop-blur-sm p-6 shadow-sm space-y-6",children:[Y.jsxs("div",{children:[Y.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-black/60",children:"Unit Preferences"}),Y.jsx("h2",{className:"mt-2 text-lg font-semibold text-black",children:"Choose how measurements are displayed"}),Y.jsx("p",{className:"text-sm text-black/60 mt-1",children:"Select your preferred units for length and weight."})]}),Y.jsxs("div",{className:"space-y-1",children:[Y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[Y.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.14em] text-black",children:"Length Units"}),Y.jsx(hs,{value:s.lengthUnit,onChange:e=>{a||c||r(t=>{if(t.lengthUnit===e)return t;ae(`[MyAccount] Length unit set to ${e.toUpperCase()}`);const n=Px(t.height),s=void 0!==n?kh(n,t.lengthUnit):void 0,r=void 0!==s?Sh(s,e):"";return{...t,lengthUnit:e,height:r}})},options:Ex,size:"md",variant:"filled",tone:"accent"})]}),Y.jsx("div",{className:"h-px bg-border/80"}),Y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[Y.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.14em] text-black",children:"Weight Units"}),Y.jsx(hs,{value:s.weightUnit,onChange:e=>{a||c||r(t=>{if(t.weightUnit===e)return t;ae(`[MyAccount] Weight unit set to ${e.toUpperCase()}`);const n=Px(t.weight),s=void 0!==n?Eh(n,t.weightUnit):void 0,r=void 0!==s?Ch(s,e):"";return{...t,weightUnit:e,weight:r}})},options:Sx,size:"md",variant:"filled",tone:"accent"})]})]})]})})]})})})}function jx({value:e,onChange:t,disabled:n}){return Y.jsxs("div",{className:"space-y-2",children:[Y.jsx(vx,{className:"text-xs font-semibold uppercase tracking-[0.18em] text-black/60",children:"Gender"}),Y.jsxs("div",{className:"relative",children:[Y.jsx("select",{className:"bg-input-background border border-border text-sm h-11 rounded-xl w-full px-4 pr-10 text-black transition-[color,box-shadow] focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none disabled:opacity-50 disabled:cursor-not-allowed appearance-none",value:e,onChange:e=>t(e.target.value),disabled:n,children:Nx.map(e=>Y.jsx("option",{value:e.value,className:"text-black",children:e.label},e.value))}),Y.jsx("svg",{"aria-hidden":"true",viewBox:"0 0 20 20",className:"pointer-events-none absolute right-4 top-1/2 h-4 w-4 -translate-y-1/2 text-black/60",children:Y.jsx("path",{fill:"currentColor",d:"M5.23 7.21a.75.75 0 0 1 1.06.02L10 11.204l3.71-3.973a.75.75 0 1 1 1.08 1.04l-4.24 4.54a.75.75 0 0 1-1.08 0l-4.25-4.54a.75.75 0 0 1 .02-1.06Z"})})]})]})}function Ax({label:e,className:t,...n}){return Y.jsxs("div",{className:"space-y-2",children:[Y.jsx(vx,{className:"text-xs font-semibold uppercase tracking-[0.18em] text-black/60",children:e}),Y.jsx(Ts,{className:`bg-input-background border-border text-sm h-11 rounded-xl ${t??""}`,...n})]})}function Tx(e){var t,n,s;const r=bh(e.length_unit),i=wh(e.weight_unit);return{displayName:(null==(t=e.display_name)?void 0:t.trim())??"",firstName:(null==(n=e.first_name)?void 0:n.trim())??"",lastName:(null==(s=e.last_name)?void 0:s.trim())??"",height:void 0!==e.height_cm&&null!==e.height_cm?Sh(e.height_cm,r):"",weight:void 0!==e.weight_kg&&null!==e.weight_kg?Ch(e.weight_kg,i):"",lengthUnit:r,weightUnit:i,gender:Rx(e.gender)}}function Rx(e){switch(e){case"male":case"female":case"non_binary":case"prefer_not_to_say":return e;default:return yx}}function Px(e){const t=e.trim();if(!t)return;const n=Number(t);return Number.isFinite(n)?n:void 0}function Mx({onBack:e}){const t=n.useMemo(()=>Object.keys(Q),[]),[s,r]=n.useState(()=>{try{return te()}catch{return"INFO"}}),i=n.useCallback(e=>{try{(e=>{void 0!==Q[e]?(localStorage.setItem("LOG_LEVEL",e),console.info(`[info ] - Log level set to: ${e}`)):console.error(`[error] - Invalid log level: ${e}`)})(e)}catch{}r(e)},[]);return Y.jsx(Lt,{header:Y.jsx(Xn,{title:"Device Settings",onBack:e,denseSmall:!0,titleClassName:"text-[17px] font-semibold text-black"}),showHeaderBorder:!1,showBottomBarBorder:!1,maxContent:"responsive",children:Y.jsxs(ds,{gap:"fluid",className:"py-6",children:[Y.jsx(rs,{variant:"plain",padding:"none",children:Y.jsxs("div",{className:"relative overflow-hidden rounded-[32px] border border-white/20 bg-gradient-to-br from-[var(--warm-coral)] via-[#f69a7f] to-[#c86a4a] p-6 text-white shadow-[0px_24px_48px_-18px_rgba(224,122,95,0.75)] sm:p-10",children:[Y.jsx("div",{className:"pointer-events-none absolute inset-x-10 -top-32 h-64 rounded-full bg-white/25 blur-3xl","aria-hidden":!0}),Y.jsx("div",{className:"pointer-events-none absolute -bottom-24 -right-10 h-60 w-60 rounded-full bg-white/10 blur-3xl","aria-hidden":!0}),Y.jsxs(ds,{gap:"xl",className:"relative text-white",children:[Y.jsxs(ds,{gap:"xs",children:[Y.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.4em] text-white/70",children:"WorkItOut"}),Y.jsx("h1",{className:"text-[clamp(24px,5vw,32px)] font-semibold leading-tight text-white",children:"Keep WorkItOut in sync with Apple Health"}),Y.jsx("p",{className:"max-w-2xl text-sm leading-relaxed text-white/80",children:"Connecting your Apple Health data â€” from sleep to steps â€” personalizes your WorkItOut experience and helps us build better guidance over time."})]}),Y.jsxs("div",{className:"rounded-3xl border border-white/60 bg-white/80 p-6 text-sm leading-relaxed text-black/75 shadow-md backdrop-blur-sm sm:p-8",children:[Y.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.32em] text-black/60",children:"Manage permissions"}),Y.jsx("p",{className:"mt-3",children:"You can review permissions any time in Settings. To keep WorkItOut in sync:"}),Y.jsxs("ol",{className:"mt-4 list-decimal space-y-2 pl-5",children:[Y.jsxs("li",{children:["Open ",Y.jsx("span",{className:"font-medium",children:"Settings"})," â†’ ",Y.jsx("span",{className:"font-medium",children:"Health"})," â†’"," ",Y.jsx("span",{className:"font-medium",children:"Data Access & Devices"}),"."]}),Y.jsxs("li",{children:["Choose ",Y.jsx("span",{className:"font-medium",children:"WorkItOut"}),"."]}),Y.jsx("li",{children:"Enable all categories you want to share with the app."})]}),Y.jsx("p",{className:"mt-4 text-xs text-black/60",children:"You're in control and can change these choices at any time."})]})]})]})}),Y.jsx(rs,{variant:"card",padding:"lg",className:"rounded-[28px] border border-black/5 bg-white/80 backdrop-blur-md shadow-[0px_20px_40px_-28px_rgba(15,23,42,0.45)]",title:"Debug logging",subtitle:"Choose the minimum level of detail you want to see in the console on this device.",children:Y.jsxs(ds,{gap:"md",children:[Y.jsx("p",{className:"text-sm leading-relaxed text-black/70",children:"Higher verbosity levels include all messages from the lower levels. The preference is saved locally, so you can tweak logging without affecting other devices."}),Y.jsx(ds,{direction:"x",gap:"sm",wrap:!0,align:"start",className:"items-center gap-y-3",children:t.map(e=>{const t=e===s;return Y.jsx(ys,{type:"button",size:"sm",variant:t?"primary":"secondary","aria-pressed":t,onClick:()=>i(e),className:"uppercase tracking-[0.22em] text-[11px]",children:e},e)})})]})})]})})}function Dx({onAuthSuccess:e,onNavigateToSignUp:t,onNavigateToWelcome:s,bottomBar:r}){const[i,o]=n.useState(""),[a,l]=n.useState(""),[c,d]=n.useState(!1),[u,h]=n.useState(!1);return Y.jsxs(Lt,{padHeader:!1,padBottomBar:!1,disableSafeArea:!0,backgroundImageSrc:"/Workout/Images/LandingPage.png",backgroundOverlayClassName:"bg-black/40",scrollAreaClassName:"flex flex-col",bottomBar:r,contentClassName:"",maxContent:"responsive",children:[Y.jsx("button",{onClick:s,className:"text-blue-500 text-2xl p-4 self-start",children:"< Back"}),Y.jsx("div",{className:"flex-1 flex items-center justify-center",children:Y.jsxs(Pg,{className:"\n            w-full\n            bg-card/80 backdrop-blur-sm border-border\n            shadow-soft\n          ",children:[Y.jsx(Mg,{className:"text-center pb-6",children:Y.jsxs(ds,{gap:"md",children:[Y.jsx("div",{className:"w-16 h-16 rounded-2xl gradient-primary flex items-center justify-center mx-auto",children:Y.jsx(m,{size:32,className:"text-black"})}),Y.jsxs("div",{children:[Y.jsx("h1",{className:"text-2xl font-medium text-black",children:"Welcome Back"}),Y.jsx("p",{className:"text-black",children:"Sign in to continue your fitness journey"})]})]})}),Y.jsx(Dg,{children:Y.jsxs(ds,{gap:"lg",children:[Y.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),i.trim()&&a.trim()){h(!0);try{const{access_token:t,refresh_token:n}=await Ze.signIn(i,a);e(t,n),dt.success("Welcome back!")}catch(n){ie("Sign in failed:",n),n instanceof Error?n.message.includes("UNAUTHORIZED")||n.message.includes("Invalid")?dt.error("Invalid email or password. Please check your credentials."):n.message.includes("RATE_LIMIT")?dt.error("Too many attempts. Please try again in a few minutes."):dt.error(n.message||"Sign in failed. Please try again."):dt.error("Sign in failed. Please try again.")}finally{h(!1)}}else dt.error("Please enter both email and password")},className:"space-y-4",children:[Y.jsxs("div",{className:"space-y-2",children:[Y.jsx(vx,{htmlFor:"email",className:"text-black",children:"Email"}),Y.jsx(Ts,{id:"email",type:"email",value:i,onChange:e=>o(e.target.value),placeholder:"Enter your email",className:"bg-input-background border-border",disabled:u,required:!0})]}),Y.jsxs("div",{className:"space-y-2",children:[Y.jsx(vx,{htmlFor:"password",className:"text-black",children:"Password"}),Y.jsxs("div",{className:"relative",children:[Y.jsx(Ts,{id:"password",type:c?"text":"password",value:a,onChange:e=>l(e.target.value),placeholder:"Enter your password",className:"bg-input-background border-border pr-10",disabled:u,required:!0}),Y.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-black hover:text-black transition-colors",disabled:u,"aria-label":c?"Hide password":"Show password",children:c?Y.jsx(I,{size:16}):Y.jsx(O,{size:16})})]})]}),Y.jsx(ys,{type:"submit",className:"w-full bg-gradient-to-r from-warm-coral to-warm-peach text-black rounded-xl border-0 font-medium",disabled:u,children:u?Y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[Y.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-black border-t-transparent rounded-full"}),"Signing In..."]}):"Sign In"})]}),Y.jsxs(ds,{gap:"md",className:"text-center",children:[Y.jsx("button",{onClick:()=>dt.info("Password reset coming soon!"),className:"text-sm text-black hover:text-black transition-colors",disabled:u,children:"Forgot your password?"}),Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx("div",{className:"flex-1 h-px bg-border"}),Y.jsx("span",{className:"text-sm text-black",children:"or"}),Y.jsx("div",{className:"flex-1 h-px bg-border"})]}),Y.jsxs("div",{className:"text-sm text-black",children:["Don't have an account?"," ",Y.jsx("button",{onClick:t,className:"text-black hover:text-black transition-colors font-medium",disabled:u,children:"Sign up"})]})]}),Y.jsx(os,{y:"xs"})]})})]})})]})}function $x({onAuthSuccess:e,onNavigateToSignIn:t,onNavigateToWelcome:s,bottomBar:r}){const[i,o]=n.useState(""),[a,l]=n.useState(""),[c,d]=n.useState(""),[u,h]=n.useState(""),[m,p]=n.useState(""),[f,g]=n.useState(""),[x,v]=n.useState(""),[y,b]=n.useState(!1),w=y||!i||!a||!c||!f||!x;return Y.jsxs(Lt,{padHeader:!1,padBottomBar:!1,disableSafeArea:!0,backgroundImageSrc:"/Workout/Images/LandingPage.png",backgroundOverlayClassName:"bg-black/40",scrollAreaClassName:"flex flex-col",maxContent:"responsive",bottomBar:r,contentClassName:"",children:[Y.jsx("button",{onClick:s,className:"text-blue-500 text-2xl p-4 self-start",children:"< Back"}),Y.jsx("div",{className:"flex-1 flex items-center justify-center",children:Y.jsxs(Pg,{className:"\n            w-full max-w-md\n            bg-card/90 backdrop-blur-sm border-border\n            shadow-soft\n            max-h-[100svh] overflow-y-auto\n            pt-safe pb-safe kb-aware\n          ",children:[Y.jsx(Mg,{className:"text-center",children:Y.jsxs(ds,{gap:"xs",children:[Y.jsx("h1",{className:"text-2xl font-medium text-black",children:"Create Account"}),Y.jsx("p",{className:"text-black",children:"Join and start tracking your workouts"})]})}),Y.jsx(Dg,{children:Y.jsxs(ds,{gap:"md",children:[Y.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),i.trim()?a.trim()?c.trim()?f.trim()?x.trim()?x.length<6?(dt.error("Password must be at least 6 characters"),0):u&&(isNaN(Number(u))||Number(u)<=0)?(dt.error("Height must be a valid number"),0):!m||!(isNaN(Number(m))||Number(m)<=0)||(dt.error("Weight must be a valid number"),0):(dt.error("Password is required"),0):(dt.error("Email is required"),0):(dt.error("Display name is required"),0):(dt.error("Last name is required"),0):(dt.error("First name is required"),0)){b(!0);try{const t=await Ze.signUp(f,x);let n,s;if(t.token&&t.refresh_token)n=t.token,s=t.refresh_token;else{if(!t.needsSignIn)throw new Error("No token received from sign up or sign in");{const e=await Ze.signIn(f,x);n=e.access_token,s=e.refresh_token}}Ze.setToken(n);const r=u?Number(u):void 0,o=m?Number(m):void 0;await Ze.upsertProfile({firstName:i,lastName:a,displayName:c,heightCm:r,weightKg:o}),e(n,s),dt.success("Account created successfully!")}catch(n){n instanceof Error?"RATE_LIMIT"===n.message?dt.error("Too many requests. Please wait a few minutes and try again."):n.message.toLowerCase().includes("email")?dt.error("Invalid email address or email already exists"):n.message.toLowerCase().includes("password")?dt.error("Password must be at least 6 characters"):n.message.includes("429")?dt.error("Server is busy. Please wait a moment and try again."):dt.error(n.message||"Sign up failed"):dt.error("Sign up failed")}finally{b(!1)}}},className:"space-y-4",children:[Y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Y.jsx("div",{children:Y.jsx("input",{type:"text",placeholder:"First Name",value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:y,autoComplete:"given-name",required:!0})}),Y.jsx("div",{children:Y.jsx("input",{type:"text",placeholder:"Last Name",value:a,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:y,autoComplete:"family-name",required:!0})})]}),Y.jsx("div",{children:Y.jsx("input",{type:"text",placeholder:"Display Name",value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:y,autoComplete:"nickname",required:!0})}),Y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Y.jsx("div",{children:Y.jsx("input",{type:"number",placeholder:"Height (cm)",value:u,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:y,min:"1"})}),Y.jsx("div",{children:Y.jsx("input",{type:"number",placeholder:"Weight (kg)",value:m,onChange:e=>p(t=>vh(e.target.value)?e.target.value:t),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:y,min:"1"})})]}),Y.jsx("div",{children:Y.jsx("input",{type:"email",placeholder:"Email",value:f,onChange:e=>g(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:y,autoComplete:"email",required:!0})}),Y.jsx("div",{children:Y.jsx("input",{type:"password",placeholder:"Password (min 6 characters)",value:x,onChange:e=>v(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:y,autoComplete:"new-password",required:!0})}),Y.jsx(ys,{type:"submit",disabled:w,className:"w-full bg-gradient-to-r from-warm-coral to-warm-peach text-black rounded-xl border-0 font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:y?Y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[Y.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-black border-t-transparent rounded-full"}),"Creating Account..."]}):"Create Account"})]}),Y.jsx(os,{y:"xs"}),Y.jsx("div",{className:"text-center",children:Y.jsxs("div",{className:"text-sm text-black",children:["Already have an account?"," ",Y.jsx("button",{onClick:t,className:"text-black hover:text-black transition-colors font-medium",disabled:y,children:"Sign in"})]})})]})})]})})]})}function Ix(e){return Y.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":!0,focusable:"false",...e,children:[Y.jsx("path",{d:"M12 6.528V3a1 1 0 0 1 1-1",stroke:"currentColor",strokeWidth:1.8,strokeLinecap:"round"}),Y.jsx("path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",fill:"currentColor"})]})}function Ox(e){return Y.jsxs("svg",{viewBox:"0 0 18 18","aria-hidden":!0,focusable:"false",...e,children:[Y.jsx("path",{fill:"#4285F4",d:"M17.64 9.2045c0-.6395-.0573-1.2518-.1641-1.8386H9v3.4791h4.8436c-.2092 1.125-.8454 2.0795-1.799 2.7173v2.258h2.9087c1.7028-1.5691 2.6877-3.8818 2.6877-6.6158z"}),Y.jsx("path",{fill:"#34A853",d:"M9 18c2.43 0 4.4668-.8064 5.9559-2.1932l-2.9087-2.258c-.8077.54-1.84.8614-3.0472.8614-2.3442 0-4.3274-1.5831-5.0368-3.7119H.9055v2.3327C2.3846 15.7959 5.4446 18 9 18z"}),Y.jsx("path",{fill:"#FBBC05",d:"M3.9632 10.6983A5.4082 5.4082 0 0 1 3.683 9c0-.5894.1019-1.1591.2802-1.6983V4.969h-2.39C.582 6.0977 0 7.495 0 9s.582 2.9023 1.5732 4.031l2.39-2.3327z"}),Y.jsx("path",{fill:"#EA4335",d:"M9 3.5795c1.3214 0 2.5104.454 3.4447 1.3478l2.583-2.583C13.4636.9268 11.427 0 9 0 5.4446 0 2.3846 2.2041.9055 5.2018l2.3777 2.3327C4.6726 5.1623 6.6558 3.5795 9 3.5795z"})]})}function Lx({variant:e,onClick:t,disabled:n=!1}){const s={Apple:{label:"Sign in with Apple",className:"bg-black text-white hover:bg-neutral-900 focus-visible:ring-offset-black shadow-[0_12px_24px_rgba(0,0,0,0.35)]",icon:Y.jsx(Ix,{className:"h-5 w-5"})},Google:{label:"Sign in with Google",className:"bg-white text-[#3C4043] border border-[#E0E0E0] hover:bg-white/90 hover:border-[#CACACA] focus-visible:ring-offset-white shadow-[0_12px_24px_rgba(32,33,36,0.18)]",icon:Y.jsx(Ox,{className:"h-5 w-5"})}},{label:r,className:i,icon:o}=s[e];return Y.jsxs("button",{type:"button",onClick:t,disabled:n,"aria-label":r,"aria-disabled":n,className:Kn("w-full h-12 sm:h-14 rounded-2xl font-semibold flex items-center justify-center gap-3 transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-warm-peach focus-visible:ring-offset-2","active:translate-y-px disabled:cursor-not-allowed disabled:opacity-70",i),children:[Y.jsx("span",{className:"flex items-center justify-center","aria-hidden":!0,children:o}),Y.jsx("span",{children:r})]})}function Bx(){return Y.jsxs("div",{className:"flex items-center gap-3 text-white/60 text-xs uppercase tracking-[0.3em]",children:[Y.jsx("span",{className:"h-px flex-1 bg-white/20","aria-hidden":!0}),Y.jsx("span",{children:"or"}),Y.jsx("span",{className:"h-px flex-1 bg-white/20","aria-hidden":!0})]})}function Fx({onNavigateToSignUp:e,onNavigateToSignIn:t,onAuthSuccess:s,bottomBar:r}){const[i,o]=n.useState(null),a=async e=>{if(!i)try{o(e),await Ze.signInWithOAuth(e)}catch(t){o(null);const e=t instanceof Error?t.message:"We couldn't start the sign-in flow. Please try again.";dt.error(e)}};return n.useEffect(()=>{const e=e=>{const t=e.detail;o(null),(null==t?void 0:t.token)&&t.refreshToken?(s(t.token,t.refreshToken),t.provider?dt.success(`Signed in with ${t.provider}`):dt.success("Welcome back!")):dt.error("We couldn't complete the sign-in. Please try again.")};return window.addEventListener("auth-success",e),()=>{window.removeEventListener("auth-success",e)}},[s]),Y.jsx(Lt,{padHeader:!1,padBottomBar:!1,disableSafeArea:!0,backgroundImageSrc:"/Workout/Images/LandingPage.png",backgroundOverlayClassName:"bg-black/60",scrollAreaClassName:"flex flex-col",contentClassName:"flex-1 flex flex-col",bottomBar:r,maxContent:"responsive",children:Y.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6 py-12 text-white",children:Y.jsxs("div",{className:"w-full max-w-md flex flex-col items-center gap-10 sm:gap-12 text-center",children:[Y.jsxs(ds,{align:"center",gap:"md",className:"text-balance",children:[Y.jsx("div",{className:"w-16 h-16 rounded-2xl gradient-primary flex items-center justify-center shadow-glow",children:Y.jsx(m,{className:"h-9 w-9 text-black","aria-hidden":!0})}),Y.jsxs(ds,{align:"center",gap:"sm",className:"text-white",children:[Y.jsx("h1",{className:"text-3xl sm:text-4xl font-semibold tracking-tight leading-tight",children:"Start your personalized workout plan."}),Y.jsx("p",{className:"text-base sm:text-lg text-white/80",children:"Sign in to sync your workouts across devices and stay motivated every day."})]})]}),Y.jsxs("div",{className:"w-full flex flex-col gap-4",children:[Y.jsx(Lx,{variant:"Apple",onClick:()=>a("Apple"),disabled:null!==i}),Y.jsx(Lx,{variant:"Google",onClick:()=>a("Google"),disabled:null!==i}),Y.jsx(Bx,{}),Y.jsx(ys,{type:"button",className:"w-full rounded-2xl border-0 font-semibold text-black",onClick:e,children:"Continue with email"}),Y.jsxs("button",{type:"button",onClick:t,className:"text-sm text-white/80 hover:text-white transition-colors",children:["Already have an account? ",Y.jsx("span",{className:"font-semibold text-white",children:"Sign in"})]})]}),Y.jsxs("p",{className:"text-xs text-white/70 leading-relaxed",children:["By continuing, you agree to our"," ",Y.jsx("a",{href:"/terms",className:"font-medium text-white hover:underline",children:"Terms"})," ","and"," ",Y.jsx("a",{href:"/privacy",className:"font-medium text-white hover:underline",children:"Privacy Policy"}),"."]})]})})})}function Ux(e){switch(e){case"left":return{x:"-100%"};case"right":return{x:"100%"};case"up":return{y:"-100%"};case"down":return{y:"100%"};case"center":return{x:0,y:0};default:return{x:0}}}function Hx({show:e,enterFrom:t="right",exitTo:n=t,duration:s=.3,children:r}){return Y.jsx(Wa,{mode:"wait",children:e&&Y.jsx(Uu.div,{initial:Ux(t),animate:{x:0,y:0},exit:Ux(n),transition:{type:"tween",ease:"easeInOut",duration:s},style:{position:"absolute",inset:0},children:r},"slide")})}function Vx({currentView:e,currentRoutineId:t,currentRoutineName:n,routineAccess:s,exerciseSetupMode:r,setExerciseSetupMode:i,selectedExercisesForSetup:o,setSelectedExercisesForSetup:a,isAuthenticated:l,onAuthSuccess:c,onNavigateToSignUp:d,onNavigateToSignIn:u,onNavigateToWelcome:h,onCreateRoutine:m,onEditMeasurements:p,onRoutineCreated:f,onCloseCreateRoutine:g,onCloseEditMeasurements:x,onCompleteRoutineCreation:v,onExerciseSelected:y,onCloseExerciseSetup:b,onCloseAddExercises:w,onExerciseSetupComplete:k,onSelectRoutine:E,onCloseExerciseSetupToRoutines:S,bottomBar:C,onOverlayChange:N,onNavigateToMyAccount:_,onCloseMyAccount:j,onNavigateToDeviceSettings:A,onCloseDeviceSettings:T}){return le(`ğŸ” [DBG] CURRENT SCREEN: ${e.toUpperCase()}`),l&&"signin"!==e&&"signup"!==e&&"welcome"!==e?Y.jsxs("div",{className:"min-h-[100dvh] bg-gradient-to-br from-[var(--soft-gray)] via-[var(--background)] to-[var(--warm-cream)]/30",children:["workouts"===e&&Y.jsx(As,{onCreateRoutine:m,onEditMeasurements:p,onSelectRoutine:E,onOverlayChange:N,bottomBar:C}),Y.jsx(Hx,{show:"create-routine"===e,enterFrom:"down",exitTo:"down",children:Y.jsx(Rs,{onBack:g,onRoutineCreated:f})}),Y.jsx(Hx,{show:"edit-measurements"===e,enterFrom:"down",exitTo:"down",children:Y.jsx(Wh,{onBack:x})}),Y.jsx(Hx,{show:"add-exercises-to-routine"===e&&!!n,enterFrom:"center",exitTo:"center",children:Y.jsx(Ls,{routineId:t||void 0,routineName:n,onBack:t?w:g,onExerciseSelected:e=>y(e),isFromExerciseSetup:!!t})}),Y.jsx(Hx,{show:"exercise-setup"===e&&null!==t&&!!n,enterFrom:"left",exitTo:"left",children:Y.jsx(Fh,{routineId:t,routineName:n,selectedExercisesForSetup:o,setSelectedExercisesForSetup:a,onBack:S,onSave:k,onAddMoreExercises:b,isEditingExistingRoutine:!0,onShowExerciseSelector:b,access:s,initialMode:r,onModeChange:i})}),"progress"===e&&Y.jsx(Rg,{bottomBar:C}),"profile"===e&&Y.jsx(fx,{bottomBar:C,onNavigateToMyAccount:_,onNavigateToDeviceSettings:A}),Y.jsx(Hx,{show:"profile-my-account"===e,enterFrom:"right",exitTo:"right",children:Y.jsx(_x,{onBack:j})}),Y.jsx(Hx,{show:"profile-device-settings"===e,enterFrom:"right",exitTo:"right",children:Y.jsx(Mx,{onBack:T})})]}):"signup"===e?Y.jsx($x,{onAuthSuccess:c,onNavigateToSignIn:u,onNavigateToWelcome:h,bottomBar:C}):"signin"===e?Y.jsx(Dx,{onAuthSuccess:c,onNavigateToSignUp:d,onNavigateToWelcome:h,bottomBar:C}):Y.jsx(Fx,{onNavigateToSignUp:d,onNavigateToSignIn:u,onAuthSuccess:c,bottomBar:C})}function Wx(){const e=document.createElement("div");e.style.paddingBottom="env(safe-area-inset-bottom, 999px)",document.body.appendChild(e);const t="999px"!==window.getComputedStyle(e).paddingBottom;document.body.removeChild(e),document.documentElement.setAttribute("data-safe-area-supported",t.toString()),t||function(){const e=/iPhone/i.test(navigator.userAgent),t=!0===window.navigator.standalone,n=window.matchMedia("(display-mode: standalone)").matches;if(e&&(t||n)){let e="0px",t="0px";window.screen.height>=812&&(e="34px",t="44px"),document.documentElement.style.setProperty("--manual-safe-area-top",t),document.documentElement.style.setProperty("--manual-safe-area-bottom",e),document.documentElement.setAttribute("data-manual-safe-area","true")}}()}function zx(){n.useEffect(()=>{!function(){let e=document.querySelector('meta[name="viewport"]');e||(e=document.createElement("meta"),e.setAttribute("name","viewport"),document.head.appendChild(e));const t="width=device-width, initial-scale=1.0, viewport-fit=cover";e.getAttribute("content")!==t&&e.setAttribute("content",t)}(),document.documentElement.style.setProperty("--safe-area-inset-top","env(safe-area-inset-top, 0px)"),document.documentElement.style.setProperty("--safe-area-inset-bottom","env(safe-area-inset-bottom, 0px)"),document.documentElement.style.setProperty("--safe-area-inset-left","env(safe-area-inset-left, 0px)"),document.documentElement.style.setProperty("--safe-area-inset-right","env(safe-area-inset-right, 0px)");const e=setTimeout(Wx,100);return()=>clearTimeout(e)},[])}const Gx=({...e})=>{const[t,s]=n.useState(()=>document.documentElement.classList.contains("dark")?"dark":"light");return n.useEffect(()=>{const e=()=>s(document.documentElement.classList.contains("dark")?"dark":"light");return window.addEventListener("themechange",e),()=>window.removeEventListener("themechange",e)},[]),Y.jsx(vt,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function qx({className:e}){const[t,s]=n.useState(()=>"undefined"!=typeof window&&document.documentElement.classList.contains("dark"));return n.useEffect(()=>{const e=document.documentElement;t?e.classList.add("dark"):e.classList.remove("dark"),window.dispatchEvent(new CustomEvent("themechange",{detail:{isDark:t}}))},[t]),Y.jsx("button",{"aria-label":"Toggle theme",onClick:()=>s(e=>!e),className:`p-2 rounded-md border transition-colors ${e??""}`,children:t?Y.jsx(L,{className:"h-4 w-4"}):Y.jsx(B,{className:"h-4 w-4"})})}const Kx=["welcome","signin","signup","create-routine","add-exercises-to-routine","exercise-setup","edit-measurements","profile-my-account","profile-device-settings"];class Yx extends n.Component{constructor(){super(...arguments),t(this,"state",{hasError:!1})}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){ie("[ErrorBoundary]",e,t)}render(){return this.state.hasError?this.props.fallback??Y.jsx("div",{className:"p-4 text-black",children:"Something went wrong."}):this.props.children}}function Jx(){const{setUserToken:e}=bt();zx();const{currentView:t,setCurrentView:s,activeTab:r,currentRoutineId:i,currentRoutineName:o,selectedExercisesForSetup:a,setSelectedExercisesForSetup:l,routineAccess:c,exerciseSetupMode:d,setExerciseSetupMode:u,handleAuthSuccess:h,navigateToSignUp:m,navigateToSignIn:p,navigateToWelcome:f,handleTabChange:g,showCreateRoutine:x,showEditMeasurements:v,handleRoutineCreated:y,closeCreateRoutine:b,closeEditMeasurements:w,completeRoutineCreation:k,handleExercisesSelected:E,closeExerciseSetup:S,closeAddExercises:C,handleExerciseSetupComplete:N,onRoutineSelection:_,closeExerciseSetupToRoutines:j,showProfileAccount:A,closeProfileAccount:T,showProfileDeviceSettings:R,closeProfileDeviceSettings:P}=function(){const[e,t]=n.useState("workouts"),[s,r]=n.useState("workouts"),[i,o]=n.useState(null),[a,l]=n.useState(""),[c,d]=n.useState(0),[u,h]=n.useState([]),[m,p]=n.useState("editable"),[f,g]=n.useState("plan"),x=e=>"UNAUTHORIZED"===e.message&&(dt.error("Session expired. Please sign in."),t("welcome"),!0);return{currentView:e,setCurrentView:t,activeTab:s,currentRoutineId:i,currentRoutineName:a,refreshTrigger:c,selectedExercisesForSetup:u,setSelectedExercisesForSetup:h,routineAccess:m,setRoutineAccess:p,exerciseSetupMode:f,setExerciseSetupMode:g,handleAuthSuccess:(e,n,s)=>{s(e,n),t("workouts"),r("workouts")},navigateToSignUp:()=>t("signup"),navigateToSignIn:()=>t("signin"),navigateToWelcome:()=>t("welcome"),handleTabChange:e=>{switch(r(e),e){case"workouts":t("workouts");break;case"progress":t("progress");break;case"profile":t("profile")}},showCreateRoutine:()=>t("create-routine"),showEditMeasurements:()=>t("edit-measurements"),handleRoutineCreated:(e,n)=>{l(e),n&&o(n),h([]),p("editable"),g("plan"),t("exercise-setup")},closeCreateRoutine:()=>t("workouts"),closeEditMeasurements:()=>t("workouts"),completeRoutineCreation:()=>{o(null),l(""),h([]),g("plan"),t("workouts"),d(e=>e+1)},handleExercisesSelected:e=>{h(e),t("exercise-setup")},closeExerciseSetup:()=>{t("add-exercises-to-routine")},closeAddExercises:()=>{t("exercise-setup")},handleExerciseSetupComplete:()=>{},onRoutineSelection:(e,n,s)=>{o(e),l(n),h([]),p(s||"editable"),g("plan"),t("exercise-setup")},closeExerciseSetupToRoutines:()=>{o(null),l(""),h([]),g("plan"),t("workouts")},handleUnauthorizedError:x,safeNavigate:async(e,n)=>{try{await e()}catch(s){ie("Navigation action failed:",s),s instanceof Error&&!x(s)&&(dt.error("Something went wrong. Please try again."),n&&t(n))}},showProfileAccount:()=>{r("profile"),t("profile-my-account")},closeProfileAccount:()=>{r("profile"),t("profile")},showProfileDeviceSettings:()=>{r("profile"),t("profile-device-settings")},closeProfileDeviceSettings:()=>{r("profile"),t("profile")}}}(),{isAuthenticated:M,authReady:D}=function({currentView:e,setCurrentView:t}){const{isAuthenticated:s,userToken:r,signOut:i}=bt(),[o,a]=n.useState(!1);return n.useEffect(()=>{Ze.setToken(r)},[r]),n.useEffect(()=>{let e=!1;return(async()=>{try{await Promise.resolve()}finally{e||a(!0)}})(),()=>{e=!0}},[]),n.useEffect(()=>{o&&(s?"signin"!==e&&"signup"!==e&&"welcome"!==e||t("workouts"):"signin"!==e&&"signup"!==e&&"welcome"!==e&&t("welcome"))},[o,s,e,t]),n.useEffect(()=>{const e=e=>{"UNAUTHORIZED"===e.message&&(dt.error("Session expired. Please sign in."),i())},t=t=>{t.reason instanceof Error&&e(t.reason)};window.addEventListener("unhandledrejection",t);const n=window.fetch;return window.fetch=async(...t)=>{const s=await n(...t);if((401===s.status||403===s.status)&&r){const n=String(t[0]);(n.includes("/rest/v1/")||n.includes("/auth/v1/")||n.includes("/api/"))&&e(new Error("UNAUTHORIZED"))}return s},()=>{window.removeEventListener("unhandledrejection",t),window.fetch=n}},[i,r]),{isAuthenticated:s,authReady:o}}({currentView:t,setCurrentView:s}),$=!Kx.includes(t),[I,O]=n.useState(!1),L=It(),B=M&&$&&!I&&!L?Y.jsx(Ms,{activeTab:r,onTabChange:g}):null;return D?Y.jsxs("div",{id:"app",className:"relative h-dvh flex flex-col overflow-hidden",children:[Y.jsx(qx,{className:"absolute top-2 right-2"}),Y.jsx("main",{className:"flex-1 min-h-0 overflow-hidden",children:Y.jsx(Vx,{currentView:t,currentRoutineId:i,currentRoutineName:o,routineAccess:c,selectedExercisesForSetup:a,setSelectedExercisesForSetup:l,isAuthenticated:M,onAuthSuccess:(t,n)=>h(t,n,e),onNavigateToSignUp:m,onNavigateToSignIn:p,onNavigateToWelcome:f,onCreateRoutine:x,onEditMeasurements:v,onRoutineCreated:y,onCloseCreateRoutine:b,onCloseEditMeasurements:w,onCompleteRoutineCreation:k,onExerciseSelected:E,onCloseExerciseSetup:S,onCloseAddExercises:C,onExerciseSetupComplete:N,exerciseSetupMode:d,setExerciseSetupMode:u,onSelectRoutine:_,onCloseExerciseSetupToRoutines:j,bottomBar:B,onOverlayChange:O,onNavigateToMyAccount:A,onCloseMyAccount:T,onNavigateToDeviceSettings:R,onCloseDeviceSettings:P})})]}):Y.jsx("div",{className:"h-dvh grid place-items-center",children:Y.jsx("div",{className:"w-5 h-5 animate-spin border-2 border-current border-t-transparent rounded-full"})})}function Xx(){return Y.jsxs(Y.Fragment,{children:[Y.jsx(Yx,{children:Y.jsx(Jx,{})}),Y.jsx(Gx,{})]})}function Zx(){return Y.jsx(Et,{children:Y.jsx(Ct,{children:Y.jsx(Xx,{})})})}"undefined"!=typeof localStorage&&null===localStorage.getItem("USE_HARD_DELETE")&&localStorage.setItem("USE_HARD_DELETE","true"),J.createRoot(document.getElementById("root")).render(Y.jsx(r.StrictMode,{children:Y.jsx(Zx,{})}));export{eh as W,De as _,Qu as r};
