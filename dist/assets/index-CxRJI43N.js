const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DTSM208o.js","assets/vendor-w47DzTbS.js","assets/ui-BL9zYXLc.js","assets/index-n-wgxVyt.js","assets/index-BqxhFotm.js","assets/index-LYrKqyVp.js","assets/web-fYH-l6rB.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,s,n)=>((t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n)(t,"symbol"!=typeof s?s+"":s,n);import{r as s,a as n,R as r,b as a}from"./vendor-w47DzTbS.js";import{A as i,P as o,E as l,C as c,a as d,b as u,T as h,D as m,R as p,U as f,S as g,X as x,c as v,M as y,F as b,d as w,e as k,f as E,g as S,h as j,i as N,B as C,j as T,L as A,k as _,I as R,l as P,m as M,n as D,o as I,p as $,q as B}from"./ui-BL9zYXLc.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var L={exports:{}},O={},U=s,F=Symbol.for("react.element"),V=Symbol.for("react.fragment"),H=Object.prototype.hasOwnProperty,W=U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,z={key:!0,ref:!0,__self:!0,__source:!0};function G(e,t,s){var n,r={},a=null,i=null;for(n in void 0!==s&&(a=""+s),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(i=t.ref),t)H.call(t,n)&&!z.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===r[n]&&(r[n]=t[n]);return{$$typeof:F,type:e,key:a,ref:i,props:r,_owner:W.current}}O.Fragment=V,O.jsx=G,O.jsxs=G,L.exports=O;var q=L.exports,Y={},J=n;Y.createRoot=J.createRoot,Y.hydrateRoot=J.hydrateRoot;var K={};const X={ERROR:0,WARN:1,DB:2,PERF:3,INFO:4,DEBUG:5},Z={level:"debug"},Q=e=>{const t=(()=>{const e=localStorage.getItem("LOG_LEVEL");if(e&&void 0!==X[e])return e;if("undefined"!=typeof process&&(null==K?void 0:K.LOG_LEVEL)){const e=String(K.LOG_LEVEL).toUpperCase();if(void 0!==X[e])return e}return Z.level})();return X[e]<=X[t]};Math.max(...Object.values({ERROR:"error",WARN:"warn",INFO:"info",DEBUG:"debug",DB:"db",PERF:"perf",LOG:"log"}).map(e=>e.length));const ee=[],te=e=>{const t=[];return t.push((()=>{const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`})()),t.join(" ")},se=(e,t,s,n)=>{if("DEBUG"===e)return;if(!Q("LOG"===e?"DEBUG":e))return;t(`${te()} ${s}`,...n),((e,t,s)=>{const n={level:e,ts:new Date,message:t,args:s};for(const r of ee)try{r(n)}catch{}})(e,s,n)},ne=(e,...t)=>se("ERROR",console.error,e,t),re=(e,...t)=>se("WARN",console.warn,e,t),ae=(e,...t)=>se("INFO",console.info,e,t),ie=(e,...t)=>se("DEBUG",console.debug,e,t),oe=(e,...t)=>se("DB",console.info,e,t),le=(e,...t)=>se("PERF",console.info,e,t);const ce=new class{constructor(e="appcache",t=!1){this.prefix=e,this.debug=t}setDebug(e){this.debug=e}prefixedKey(e){return`${this.prefix}:${e}`}get(e,t){try{const s=this.prefixedKey(e),n=localStorage.getItem(s);if(!n)return oe("🔍 [CACHE GET] [miss]",s),null;const r=JSON.parse(n),a=Date.now()-r.storedAtMs;return a>t?(oe("🔍 [CACHE GET] [stale]",s,{ageMs:a,maxAgeMs:t}),null):(oe("🔍 [CACHE GET] [hit]",s,{ageMs:a,maxAgeMs:t}),r.value)}catch{return oe("🔍 [CACHE GET] [error parsing]",e),null}}set(e,t,s){try{const n=this.prefixedKey(e),r={storedAtMs:Date.now(),value:t,hintTtlMs:s},a=JSON.stringify(r);localStorage.setItem(n,a),oe("🔍 [CACHE SET]",n,{bytes:a.length,hasTTL:!!s})}catch{oe("🔍 [CACHE SET] [failed]",e)}}remove(e){const t=this.prefixedKey(e);try{localStorage.removeItem(t),oe("🔍 [CACHE REMOVE]",t)}catch{oe("🔍 [CACHE REMOVE] [failed]",t)}}snapshot(e=!1){const t={},s=`${this.prefix}:`;try{for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n)??"";if(!r.startsWith(s))continue;const a=localStorage.getItem(r)??"";try{const{storedAtMs:s,hintTtlMs:n,value:i}=JSON.parse(a);t[r]={storedAtMs:s,hintTtlMs:n,ageMs:"number"==typeof s?Date.now()-s:void 0,bytes:a.length,...e?{value:i}:{}}}catch{t[r]={parseError:!0,bytes:a.length}}}}catch{}return t}peek(e,t=400){const s=this.prefixedKey(e),n=localStorage.getItem(s);if(!n)return oe("🔍 [CACHE PEEK] [miss]",s),null;try{const{value:e}=JSON.parse(n),r=JSON.stringify(e),a=r.length>t?r.slice(0,t)+"…(truncated)":r;return oe("🔍 [CACHE PEEK]",s,a),e}catch{const e=n.length>t?n.slice(0,t)+"…(truncated)":n;return oe("🔍 [CACHE PEEK RAW]",s,e),n}}logChunks(e,t,s=8e3){let n;try{n="string"==typeof t?t:JSON.stringify(t)}catch{n=String(t)}for(let r=0;r<n.length;r+=s){const t=Math.min(r+s,n.length);oe(`    [${e}] [${r}-${t}/${n.length}]`,n.slice(r,t))}}debugDumpValuesChunked(e=8e3){const t=this.snapshot(!0);for(const[s,n]of Object.entries(t)){const t=n.value;oe("🔍 [CACHE ENTRY]",s,{storedAtMs:n.storedAtMs,ageMs:n.ageMs,bytes:n.bytes}),this.logChunks("📦 value",t,e)}}debugDump(e=!1){const t=this.snapshot(e),s=Object.keys(t);oe("🔍 [CACHE SNAPSHOT]",{prefix:this.prefix,count:s.length,entries:t})}clearPrefix(e){try{const t=e?`${this.prefix}:${e}`:`${this.prefix}:`;let s=0;for(let e=localStorage.length-1;e>=0;e--){const n=localStorage.key(e)??"";n.startsWith(t)&&(localStorage.removeItem(n),s++)}oe("🔍 [CACHE CLEAR_PREFIX]",t,{removed:s})}catch{oe("🔍 [CACHE CLEAR_PREFIX] [failed]",e??"")}}}("workit",!0),de=e=>`supabase:${e}:routines`,ue=(e,t)=>`supabase:${e}:routine:${t}:exercises`,he=(e,t)=>`supabase:${e}:routine:${t}:exercises+details`,me=(e,t)=>`supabase:${e}:rtex:${t}:sets`,pe=e=>`supabase:${e}:profile`,fe=e=>`supabase:${e}:steps`,ge=e=>`supabase:${e}:bodyMeasurements`,xe="https://lledulwstlcejiholstu.supabase.co",ve=864e5,ye=864e5,be=864e5,we=36e5,ke=36e5,Ee=36e5,Se=36e5,je=36e5,Ne=36e5,Ce=36e5;var Te=(e=>(e.CACHE_HIT="CACHE_HIT",e.FRESH_FETCH="FRESH_FETCH",e))(Te||{});class Ae{constructor(){t(this,"userToken",null),t(this,"cachedUser",null),t(this,"keyExercisesPage",(e,t)=>((e,t)=>`supabase:exercises:${e}:${t}`)(e,t)),t(this,"keyExercisesMuscleGroup",(e,t,s)=>((e,t,s)=>`supabase:exercises:muscle_group:${e}:${t}:${s}`)(e,t,s)),t(this,"keyExerciseMuscleGroups",()=>"supabase:exercises:muscle_groups"),t(this,"keyExercise",e=>`supabase:exercise:${e}`),t(this,"keyUserRoutines",e=>de(e)),t(this,"keyRoutineExercises",(e,t)=>ue(e,t)),t(this,"keyRoutineExercisesWithDetails",(e,t)=>he(e,t)),t(this,"keyRoutineSets",(e,t)=>me(e,t)),t(this,"keyProfile",e=>pe(e)),t(this,"keySteps",e=>fe(e)),t(this,"keyBodyMeasurements",e=>ge(e))}setToken(e){const t=this.userToken,s=null!==t,n=null!==e;e!==t&&(this.cachedUser=null),this.userToken=e,n!==s&&(oe(n?"🔐 [DBG] Token set - Clearing cache for fresh user session":"🔐 [DBG] Token cleared - Clearing cache on sign out"),ce.clearPrefix())}getHeaders(e=!1,t=!1,s="return=representation"){const n={apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxsZWR1bHdzdGxjZWppaG9sc3R1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4NzYyNjQsImV4cCI6MjA3MDQ1MjI2NH0.c8-ZOMk76dUOhWiekUks04KFAn52F3_OOvNM28ZmjdU","Content-Type":"application/json"};return e&&this.userToken&&(n.Authorization=`Bearer ${this.userToken}`),t&&(n.Prefer=s),n}async fetchJson(e,t=!0,s="GET",n,r){const a=await fetch(e,{method:s,headers:this.getHeaders(t,!!r,r??"return=representation"),body:n?JSON.stringify(n):void 0}),i=204===a.status?"":await a.text();if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}${i?` — ${i}`:""}`);if(i)try{return JSON.parse(i)}catch{return i}}async getOrFetchAndCache(e,t,s,n=!0,r){const a=ce.get(t,s);if(null!=a){if(oe("🔍 [CACHE ACCESS] Cache hit",t," TTL:",s,"ms"),r){const e=r(a);return oe("🔍 [CACHE ACCESS] Post-filter applied to cache hit - Original:",a.length,"Filtered:",e.length),{data:e,status:"CACHE_HIT"}}return{data:a,status:"CACHE_HIT"}}oe("🔍 [CACHE ACCESS] Cache miss - fetching from:",e);const i=await this.fetchJson(e,n);if(r){const e=r(i);return oe("🔍 [CACHE ACCESS] Post-filter applied to fresh data - Original:",i.length,"Filtered:",e.length),ce.set(t,e,s),{data:e,status:"FRESH_FETCH"}}return ce.set(t,i,s),{data:i,status:"FRESH_FETCH"}}async getCurrentUser(){var e;if(this.cachedUser)return this.cachedUser;const t=await fetch(`${xe}/auth/v1/user`,{headers:this.getHeaders(!0)});if(!t.ok)throw new Error(`Failed to get current user: ${t.statusText}`);const s=await t.json(),n=(s&&"object"==typeof s&&"object"==typeof s.user_metadata&&null!==s.user_metadata?s.user_metadata:void 0)??(Array.isArray(null==s?void 0:s.identities)?null==(e=s.identities.find(e=>e&&"object"==typeof e.identity_data))?void 0:e.identity_data:void 0),r=n&&"object"==typeof n?n:void 0;return this.cachedUser={id:s.id,email:"string"==typeof s.email?s.email:null,user_metadata:r},this.cachedUser}async getUserId(){return(await this.getCurrentUser()).id}async refreshRoutines(e){try{const t=(new Error).stack;oe("🔍 [CACHE REFRESH TRIGGER] refreshRoutines called by:",t),oe("🔍 [CACHE REFRESH TRIGGER] User ID:",e);const s=`${xe}/rest/v1/user_routines?user_id=eq.${encodeURIComponent(e)}&is_active=is.true&select=*`,n=de(e);oe("🔍 [CACHE REFRESH TRIGGER] Cache key:",n),oe("🔍 [CACHE REFRESH TRIGGER] URL:",s);const r=await this.fetchJson(s,!0);ce.set(n,r),oe("🔍 [CACHE REFRESH] routines",n),oe("🔍 [CACHE REFRESH COMPLETE] Routines refreshed, count:",r.length)}catch(t){oe("🔍 [CACHE REFRESH routines] skipped due to error:",t),oe("🔍 [CACHE REFRESH ERROR] Stack trace:",(new Error).stack)}}async refreshRoutineExercises(e,t){const s=(new Error).stack;oe("🔍 [CACHE REFRESH TRIGGER] refreshRoutineExercises called by:",s),oe("🔍 [CACHE REFRESH TRIGGER] User ID:",e,"Routine ID:",t);const n=`${xe}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${t}&is_active=is.true&select=*`,r=ue(e,t);oe("🔍 [CACHE REFRESH TRIGGER] Cache key:",r),oe("🔍 [CACHE REFRESH TRIGGER] URL:",n);const a=await this.fetchJson(n,!0);ce.set(r,a),oe("🔍 [CACHE REFRESH] routine exercises",r),oe("🔍 [CACHE REFRESH COMPLETE] Routine exercises refreshed, count:",a.length)}async refreshRoutineExercisesWithDetails(e,t){const s=(new Error).stack;oe("🔍 [CACHE REFRESH TRIGGER] refreshRoutineExercisesWithDetails called by:",s),oe("🔍 [CACHE REFRESH TRIGGER] User ID:",e,"Routine ID:",t);const n=`${xe}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${t}&is_active=is.true&select=*,exercises(name,category)`,r=he(e,t);oe("🔍 [CACHE REFRESH TRIGGER] Cache key:",r),oe("🔍 [CACHE REFRESH TRIGGER] URL:",n);const a=(await this.fetchJson(n,!0)).map(e=>{var t,s;return{...e,exercise_name:(null==(t=e.exercises)?void 0:t.name)||"Unknown Exercise",category:(null==(s=e.exercises)?void 0:s.category)||"Unknown"}});ce.set(r,a),oe("🔍 [CACHE REFRESH] routine exercises+details",r),oe("🔍 [CACHE REFRESH COMPLETE] Routine exercises+details refreshed, count:",a.length)}async refreshRoutineSets(e,t){const s=(new Error).stack;oe("🔍 [CACHE REFRESH TRIGGER] refreshRoutineSets called by:",s),oe("🔍 [CACHE REFRESH TRIGGER] User ID:",e,"Routine Exercise ID:",t);const n=`${xe}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_id=eq.${t}&is_active=eq.true&order=set_order`,r=me(e,t);oe("🔍 [CACHE REFRESH TRIGGER] Cache key:",r),oe("🔍 [CACHE REFRESH TRIGGER] URL:",n);const a=await this.fetchJson(n,!0);ce.set(r,a),oe("🔍 [CACHE REFRESH] routine sets",r),oe("🔍 [CACHE REFRESH COMPLETE] Routine sets refreshed, count:",a.length)}async refreshProfile(e){const t=(new Error).stack;oe("🔍 [CACHE REFRESH TRIGGER] refreshProfile called by:",t),oe("🔍 [CACHE REFRESH TRIGGER] User ID:",e);const s=`${xe}/rest/v1/profiles?user_id=eq.${e}&select=*`,n=pe(e);oe("🔍 [CACHE REFRESH TRIGGER] Cache key:",n),oe("🔍 [CACHE REFRESH TRIGGER] URL:",s);const r=await this.fetchJson(s,!0);ce.set(n,r),oe("🔍 [CACHE REFRESH] profile",n),oe("🔍 [CACHE REFRESH COMPLETE] Profile refreshed, count:",r.length)}async refreshSteps(e){const t=(new Error).stack;oe("🔍 [CACHE REFRESH TRIGGER] refreshSteps called by:",t),oe("🔍 [CACHE REFRESH TRIGGER] User ID:",e);const s=`${xe}/rest/v1/user_steps?user_id=eq.${e}&select=goal`,n=fe(e);oe("🔍 [CACHE REFRESH TRIGGER] Cache key:",n),oe("🔍 [CACHE REFRESH TRIGGER] URL:",s);const r=await this.fetchJson(s,!0);ce.set(n,r),oe("🔍 [CACHE REFRESH] steps",n),oe("🔍 [CACHE REFRESH COMPLETE] Steps refreshed, count:",r.length)}async refreshBodyMeasurements(e){const t=(new Error).stack;oe("🔍 [CACHE REFRESH TRIGGER] refreshBodyMeasurements called by:",t),oe("🔍 [CACHE REFRESH TRIGGER] User ID:",e);const s=`${xe}/rest/v1/user_body_measurements?user_id=eq.${e}&select=*&order=measured_on.desc`,n=ge(e);oe("🔍 [CACHE REFRESH TRIGGER] Cache key:",n),oe("🔍 [CACHE REFRESH TRIGGER] URL:",s);const r=await this.fetchJson(s,!0);ce.set(n,r),oe("🔍 [CACHE REFRESH] body measurements",n),oe("🔍 [CACHE REFRESH COMPLETE] Body measurements refreshed, count:",r.length)}}const _e={},Re=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in _e)return;_e[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,s&&r.setAttribute("nonce",s),document.head.appendChild(r),t?new Promise((t,s)=>{r.addEventListener("load",t),r.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};class Pe{constructor(e){t(this,"startTime"),t(this,"label"),this.label=e,this.startTime=performance.now()}end(){const e=performance.now(),t=e-this.startTime;return{label:this.label,duration:t,startTime:this.startTime,endTime:e}}endWithLog(){const e=this.end();return le(`⏱️ [TIMER] ${this.label}: ${e.duration.toFixed(0)}ms`),e}getElapsed(){return performance.now()-this.startTime}}const Me={start:e=>new Pe(e),timeSync:(e,t)=>{const s=Me.start(e);try{const e=t();return s.endWithLog(),e}catch(n){throw s.endWithLog(),n}},timeAsync:async(e,t)=>{const s=Me.start(e);try{const e=await t();return s.endWithLog(),e}catch(n){throw s.endWithLog(),n}},timeBatch:async(e,t)=>{const s=Me.start(e),n=[],r=[];for(const{name:c,operation:d}of t){const t=Me.start(`${e} - ${c}`);try{const e=await d(),s=t.end();n.push(e),r.push({name:c,duration:s.duration})}catch(l){throw t.endWithLog(),l}}const a=s.end().duration,i=a/t.length,o=`⏱️ [TIMER] ${e} - Total: ${a.toFixed(0)}ms, Avg: ${i.toFixed(0)}ms, Count: ${t.length}`;return le(o),n}};Me.timeSync,Me.timeAsync,Me.timeBatch;const De={};var Ie={};const $e=new Set(["apple","google"]),Be={google:{queryParams:{access_type:"offline",prompt:"consent"}},apple:{queryParams:{scope:"name email",scopes:"name email"}}},Le=new Set(["capacitor:","ionic:","ms-appx:","ms-appx-web:"]),Oe=new Set(["javascript:","vbscript:","data:"]),Ue=/^[a-z][a-z0-9+\-.]*:$/i,Fe=e=>{if("string"!=typeof e)return null;const t=e.trim();return t.length>0?t:null},Ve=(e,t)=>{var s;try{const t=new URL(e),n=null==(s=t.protocol)?void 0:s.toLowerCase();if(!n||!Ue.test(n))throw new Error;if(Oe.has(n))throw new Error;return t.hash="",t.toString()}catch{throw new Error(`${t} must be an absolute URL that uses http(s) or a custom app scheme like myapp://auth. Update it before retrying.`)}},He=e=>{const t=Fe(e);if(t)return t;const s=(()=>{if(void 0!==import.meta){const e=Fe(null==De?void 0:De.VITE_SUPABASE_OAUTH_REDIRECT);if(e)return e}if("undefined"!=typeof process){const e=Fe(Ie.VITE_SUPABASE_OAUTH_REDIRECT);if(e)return e}if("undefined"!=typeof globalThis){const e=Fe(globalThis.VITE_SUPABASE_OAUTH_REDIRECT);if(e)return e}return null})();if(s)return Ve(s,"VITE_SUPABASE_OAUTH_REDIRECT");if("undefined"==typeof window)throw new Error("Supabase OAuth needs a browser context to determine redirect_to. Set VITE_SUPABASE_OAUTH_REDIRECT to a web URL that you've whitelisted under Authentication → URL Configuration in Supabase.");const{protocol:n,origin:r,pathname:a,search:i}=window.location,o=(null==n?void 0:n.toLowerCase())??"",l=`${r}${a}${i}`;try{return Ve(l,"window.location")}catch(c){if(Le.has(o))throw new Error("Set VITE_SUPABASE_OAUTH_REDIRECT to your app's deep link (for example capacitor://localhost/auth/callback) and whitelist it under Supabase Authentication → URL Configuration so native builds can complete the OAuth hand-off.");throw c instanceof Error?c:new Error(String(c))}};class We extends Ae{async signInWithOAuth(e,t){if("undefined"==typeof window)throw new Error("Social sign-in can only be initiated in a browser environment.");const s=e.toLowerCase();if(!$e.has(s))throw new Error(`Unsupported OAuth provider: ${e}`);const n=window.Capacitor,r=!!n&&"function"==typeof n.isNativePlatform&&n.isNativePlatform(),a="undefined"!=typeof navigator?navigator.userAgent:"",i=/iphone/i.test(a)&&/safari/i.test(a)&&!r,o=r||i,l=o?"workouttracker://auth/callback":He(t),c=new URLSearchParams({provider:s,redirect_to:l}),d=Be[s];if(null==d?void 0:d.queryParams)for(const[m,p]of Object.entries(d.queryParams))"string"==typeof p&&p.length>0&&c.set(m,p);const u=`${xe}/auth/v1/authorize?${c.toString()}`;if(console.log("Platform check:",{hasCapacitor:!!window.Capacitor,isNativePlatform:r,isIOSSimulator:i,shouldUseMobileFlow:o,redirectUrl:l,queryParams:(null==d?void 0:d.queryParams)??null}),o)try{const{Browser:e}=await Re(async()=>{const{Browser:e}=await import("./index-DTSM208o.js");return{Browser:e}},__vite__mapDeps([0,1,2])),{App:t}=await Re(async()=>{const{App:e}=await Promise.resolve().then(()=>ih);return{App:e}},void 0),s=await t.addListener("appUrlOpen",async t=>{if(console.log("Deep link received:",t.url),t.url.startsWith("workouttracker://auth/callback"))try{const r=new URL(t.url).hash.substring(1),a=new URLSearchParams(r),i=a.get("access_token"),o=a.get("refresh_token"),l=a.get("error");if(l)return void console.error("OAuth error:",l);if(i){console.log("OAuth success! Access token received"),this.setToken(i);try{await e.close()}catch(n){console.warn("Failed to close browser:",n)}window.dispatchEvent(new CustomEvent("auth-success",{detail:{token:i,refreshToken:o}})),s.remove()}}catch(n){console.error("Error parsing OAuth response:",n)}});await e.open({url:u})}catch(h){console.warn("Capacitor plugins not available, falling back to window.location:",h),window.location.assign(u)}else window.location.assign(u)}async exchangeCodeForSession(e){try{const t=await fetch(`${xe}/auth/v1/token?grant_type=pkce`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({code:e,code_verifier:"your-code-verifier"})});if(!t.ok)throw new Error("Failed to exchange code for session");const s=await t.json();s.access_token&&(this.setToken(s.access_token),window.dispatchEvent(new CustomEvent("auth-success",{detail:{provider:"Google",providerSlug:"google",token:s.access_token,refreshToken:s.refresh_token}})))}catch(t){throw console.error("Error exchanging code for session:",t),t}}async signUp(e,t){return Me.timeAsync(`[SUPABASE] signUp(${e})`,async()=>{var s,n;const r=await this.fetchJson(`${xe}/auth/v1/signup`,!1,"POST",{email:e,password:t});if(r.error)throw new Error(r.error.message);return r.access_token||(null==(s=r.session)?void 0:s.access_token)?{token:r.access_token||r.session.access_token,refresh_token:r.refresh_token||(null==(n=r.session)?void 0:n.refresh_token)}:{needsSignIn:!0}})}async signIn(e,t){return Me.timeAsync(`[SUPABASE] signIn(${e})`,async()=>{const s=await this.fetchJson(`${xe}/auth/v1/token?grant_type=password`,!1,"POST",{email:e,password:t});if(s.error)throw new Error(s.error.message);if(!s.access_token)throw new Error("No access token received");if(!s.refresh_token)throw new Error("No refresh token received");return{access_token:s.access_token,refresh_token:s.refresh_token}})}async refreshToken(e){return Me.timeAsync("[SUPABASE] refreshToken",async()=>{const t=await this.fetchJson(`${xe}/auth/v1/token?grant_type=refresh_token`,!1,"POST",{refresh_token:e});if(t.error)throw new Error(t.error.message);if(!t.access_token)throw new Error("No access token received");return t.access_token})}async signOut(){return Me.timeAsync("[SUPABASE] signOut",async()=>{try{this.userToken&&await this.fetchJson(`${xe}/auth/v1/logout`,!0,"POST")}catch(e){re("Supabase logout failed, but continuing with local sign out:",e)}finally{this.setToken(null)}})}async createUserRoutine(e){return Me.timeAsync(`[SUPABASE] createUserRoutine(${e})`,async()=>{const t=await this.getUserId(),s=await this.fetchJson(`${xe}/rest/v1/user_routines`,!0,"POST",{user_id:t,name:e.trim(),version:1,is_active:!0},"return=representation");return await this.refreshRoutines(t),s[0]??null})}async renameRoutine(e,t){return Me.timeAsync(`[SUPABASE] renameRoutine(${e}, ${t})`,async()=>{const s=await this.getUserId();await this.fetchJson(`${xe}/rest/v1/user_routines?routine_template_id=eq.${e}`,!0,"PATCH",{name:t.trim()},"return=representation"),await this.refreshRoutines(s)})}async deleteRoutine(e){return Me.timeAsync(`[SUPABASE] deleteRoutine(${e})`,async()=>{const t=await this.getUserId();await this.fetchJson(`${xe}/rest/v1/user_routines?routine_template_id=eq.${e}`,!0,"PATCH",{is_active:!1},"return=representation"),await this.refreshRoutines(t)})}async hardDeleteRoutine(e){return Me.timeAsync(`[SUPABASE] hardDeleteRoutine(${e})`,async()=>{const t=await this.getUserId(),s=`${xe}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${e}&is_active=is.true&select=routine_template_exercise_id`,n=this.keyRoutineExercises(t,e);oe("🔍 [DELETE ROUTINE] Cache key:",n);const{data:r}=await this.getOrFetchAndCache(s,n,ke,!0);for(const{routine_template_exercise_id:e}of r)await this.hardDeleteRoutineExercise(e);await this.fetchJson(`${xe}/rest/v1/user_routines?routine_template_id=eq.${e}`,!0,"DELETE"),await Promise.all([this.refreshRoutines(t),this.refreshRoutineExercises(t,e),this.refreshRoutineExercisesWithDetails(t,e)])})}async addExerciseToRoutine(e,t,s){return Me.timeAsync(`[SUPABASE] addExerciseToRoutine(${e}, ${t}, ${s})`,async()=>{const n=await this.getUserId(),r=await this.fetchJson(`${xe}/rest/v1/user_routine_exercises_data`,!0,"POST",{routine_template_id:e,exercise_id:t,exercise_order:s,is_active:!0},"return=representation");return await Promise.all([this.refreshRoutineExercises(n,e),this.refreshRoutineExercisesWithDetails(n,e)]),r[0]??null})}async addExerciseSetsToRoutine(e,t,s){return Me.timeAsync(`[SUPABASE] addExerciseSetsToRoutine(${e}, ${t}, ${s.length} sets)`,async()=>{const n=await this.getUserId(),r=s.map((s,n)=>({routine_template_exercise_id:e,exercise_id:t,set_order:s.set_order??n+1,is_active:!0,planned_reps:s.reps>0?s.reps:null,planned_weight_kg:s.weight>0?s.weight:null})),a=await this.fetchJson(`${xe}/rest/v1/user_routine_exercises_set_data`,!0,"POST",r,"return=representation");return await this.refreshRoutineSets(n,e),a})}async findRoutineIdForExercise(e){var t;const s=`${xe}/rest/v1/user_routine_exercises_data?routine_template_exercise_id=eq.${e}&select=routine_template_id`,n=`rtex:${e}:routine`,{data:r}=await this.getOrFetchAndCache(s,n,ke,!0),a=null==(t=r[0])?void 0:t.routine_template_id;if(!a)throw new Error(`Could not find routine ID for exercise ${e}`);return a}async deleteRoutineExercise(e){return Me.timeAsync(`[SUPABASE] deleteRoutineExercise(${e})`,async()=>{const t=await this.getUserId();await this.fetchJson(`${xe}/rest/v1/user_routine_exercises_data?routine_template_exercise_id=eq.${e}`,!0,"PATCH",{is_active:!1},"return=minimal"),await this.fetchJson(`${xe}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_id=eq.${e}`,!0,"PATCH",{is_active:!1},"return=minimal");const s=await this.findRoutineIdForExercise(e);await Promise.all([this.refreshRoutineExercises(t,s),this.refreshRoutineExercisesWithDetails(t,s)])})}async hardDeleteRoutineExercise(e){return Me.timeAsync(`[SUPABASE] hardDeleteRoutineExercise(${e})`,async()=>{const t=await this.getUserId(),s=await this.findRoutineIdForExercise(e),n=`${xe}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_id=eq.${e}&is_active=is.true&select=routine_template_exercise_set_id`,r=this.keyRoutineSets(t,e),{data:a}=await this.getOrFetchAndCache(n,r,Se,!0);for(const{routine_template_exercise_set_id:i}of a)await this.hardDeleteExerciseSet(i,e);await this.fetchJson(`${xe}/rest/v1/user_routine_exercises_data?routine_template_exercise_id=eq.${e}`,!0,"DELETE"),await Promise.all([this.refreshRoutineExercises(t,s),this.refreshRoutineExercisesWithDetails(t,s)])})}async startWorkout(e){return Me.timeAsync(`[SUPABASE] startWorkout(${e})`,async()=>{const t=await this.getUserId();return(await this.fetchJson(`${xe}/rest/v1/workouts`,!0,"POST",{template_id:e,started_at:(new Date).toISOString(),user_id:t},"return=representation"))[0]})}async endWorkout(e){return Me.timeAsync(`[SUPABASE] endWorkout(${e})`,async()=>{await this.fetchJson(`${xe}/rest/v1/workouts?id=eq.${e}`,!0,"PATCH",{ended_at:(new Date).toISOString()},"return=minimal")})}async addWorkoutExercise(e,t,s){return Me.timeAsync(`[SUPABASE] addWorkoutExercise(${e}, ${t}, ${s})`,async()=>(await this.fetchJson(`${xe}/rest/v1/workout_exercises`,!0,"POST",{workout_id:e,exercise_id:t,order_index:s},"return=representation"))[0])}async addWorkoutSet(e,t,s,n,r){return Me.timeAsync(`[SUPABASE] addWorkoutSet(${e}, ${t}, ${s}, ${n})`,async()=>(await this.fetchJson(`${xe}/rest/v1/sets`,!0,"POST",{workout_exercise_id:e,set_index:t,reps:s,weight:n,completed_at:r},"return=representation"))[0])}async updateWorkoutSet(e,t){return Me.timeAsync(`[SUPABASE] updateWorkoutSet(${e})`,async()=>(await this.fetchJson(`${xe}/rest/v1/sets?id=eq.${e}`,!0,"PATCH",t,"return=representation"))[0])}async updateExerciseSet(e,t,s){return Me.timeAsync(`[SUPABASE] updateExerciseSet(${e})`,async()=>{var n;const r=await this.getUserId(),a=null==(n=(await this.fetchJson(`${xe}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}&select=routine_template_exercise_id`,!0))[0])?void 0:n.routine_template_exercise_id,i=await this.fetchJson(`${xe}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}`,!0,"PATCH",{planned_reps:t&&t>0?t:null,planned_weight_kg:s&&s>0?s:null},"return=representation");return a&&await this.refreshRoutineSets(r,a),i[0]??null})}async updateExerciseSetOrder(e,t){return Me.timeAsync(`[SUPABASE] updateExerciseSetOrder(${e}, ${t})`,async()=>{var s;const n=await this.getUserId(),r=null==(s=(await this.fetchJson(`${xe}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}&select=routine_template_exercise_id`,!0))[0])?void 0:s.routine_template_exercise_id;await this.fetchJson(`${xe}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}`,!0,"PATCH",{set_order:t},"return=minimal"),r&&await this.refreshRoutineSets(n,r)})}async deleteExerciseSet(e){return Me.timeAsync(`[SUPABASE] deleteExerciseSet(${e})`,async()=>{var t;const s=await this.getUserId(),n=null==(t=(await this.fetchJson(`${xe}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}&select=routine_template_exercise_id`,!0))[0])?void 0:t.routine_template_exercise_id;await this.fetchJson(`${xe}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}`,!0,"PATCH",{is_active:!1},"return=minimal"),n&&await this.refreshRoutineSets(s,n)})}async hardDeleteExerciseSet(e,t){return Me.timeAsync(`[SUPABASE] hardDeleteExerciseSet(${e})`,async()=>{var s;const n=await this.getUserId();let r=t;if(!r){const t=`${xe}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}&select=routine_template_exercise_id`,n=`rtexset:${e}:parent`,{data:a}=await this.getOrFetchAndCache(t,n,Se,!0);r=null==(s=a[0])?void 0:s.routine_template_exercise_id}await this.fetchJson(`${xe}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_set_id=eq.${e}`,!0,"DELETE"),r&&await this.refreshRoutineSets(n,r)})}async upsertProfile({firstName:e,lastName:t,displayName:s,heightCm:n,weightKg:r,lengthUnit:a="cm",weightUnit:i="kg",gender:o="prefer_not_to_say",userId:l}){return Me.timeAsync(`[SUPABASE] upsertProfile(${s})`,async()=>{const c=l??await this.getUserId(),d=await this.fetchJson(`${xe}/rest/v1/profiles`,!0,"POST",{user_id:c,first_name:e,last_name:t,display_name:s,height_cm:n,weight_kg:r,length_unit:a,weight_unit:i,gender:o},"resolution=merge-duplicates, return=representation");return await this.refreshProfile(c),d.length>0?d[0]:null})}async createUserStepGoal(e=1e4){return Me.timeAsync(`[SUPABASE] createUserStepGoal(${e})`,async()=>{var t;const s=await this.getUserId(),n=await this.fetchJson(`${xe}/rest/v1/user_steps`,!0,"POST",{user_id:s,goal:e},"return=representation");return await this.refreshSteps(s),(null==(t=n[0])?void 0:t.goal)??e})}async upsertBodyMeasurement(e){return Me.timeAsync(`[SUPABASE] upsertBodyMeasurement(${e.measured_on})`,async()=>{const t=await this.getUserId(),s=[{...e,user_id:t}],n=await this.fetchJson(`${xe}/rest/v1/user_body_measurements?on_conflict=user_id,measured_on`,!0,"POST",s,"resolution=merge-duplicates, return=representation");return await this.refreshBodyMeasurements(t),n[0]??null})}async deleteBodyMeasurement(e){return Me.timeAsync(`[SUPABASE] deleteBodyMeasurement(${e})`,async()=>{const t=await this.getUserId();await this.fetchJson(`${xe}/rest/v1/user_body_measurements?user_id=eq.${t}&measured_on=eq.${e}`,!0,"DELETE"),await this.refreshBodyMeasurements(t)})}async recomputeAndSaveRoutineMuscleSummary(e){return Me.timeAsync(`[SUPABASE] recomputeAndSaveRoutineMuscleSummary(${e})`,async()=>{oe("🔍 DGB [MUSCLE SUMMARY] Starting recompute for routine:",e);const t=`${xe}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${e}&is_active=eq.true&select=exercises(muscle_group)`;oe("🔍 DGB [MUSCLE SUMMARY] Fetching exercises from URL:",t);const s=await this.fetchJson(t,!0);if(oe("🔍 DGB [MUSCLE SUMMARY] Found exercises:",s.length),0===s.length)return oe("🔍 DGB [MUSCLE SUMMARY] No active exercises found, skipping recomputation"),void oe("🔍 DGB [MUSCLE SUMMARY] No database update or cache refresh needed");const n=new Map;s.forEach(e=>{var t;const s=((null==(t=e.exercises)?void 0:t.muscle_group)??"").trim();s&&n.set(s,(n.get(s)||0)+1)}),oe("🔍 DGB [MUSCLE SUMMARY] Muscle group counts:",Object.fromEntries(n));const r=Array.from(n.entries()).sort(([,e],[,t])=>t-e).slice(0,3).map(([e])=>e);oe("🔍 DGB [MUSCLE SUMMARY] Top 3 muscle groups:",r);const a=r.length?r.join(" • "):null;oe("🔍 DGB [MUSCLE SUMMARY] Final summary:",a);const i=`${xe}/rest/v1/user_routines?routine_template_id=eq.${e}`;oe("🔍 DGB [MUSCLE SUMMARY] Patching routine with URL:",i),await this.fetchJson(i,!0,"PATCH",[{muscle_group_summary:a}],"return=representation"),oe("🔍 DGB [MUSCLE SUMMARY] Refreshing routines cache...");const o=await this.getUserId();oe("🔍 DGB [MUSCLE SUMMARY] User ID for cache refresh:",o),await this.refreshRoutines(o),oe("🔍 DGB [MUSCLE SUMMARY] Cache refresh completed")})}async deleteProfile(e){const t=e??await this.getUserId();await this.fetchJson(`${xe}/rest/v1/profiles?user_id=eq.${t}`,!0,"DELETE"),await this.refreshProfile(t)}async logToDatabase(e,t,s=[]){return Me.timeAsync(`[SUPABASE] logToDatabase(${e})`,async()=>{try{const n=await this.getUserId(),r={level:e,message:t,args:s.length>0?JSON.stringify(s):null,timestamp:(new Date).toISOString(),user_id:n},a=`${xe}/rest/v1/logger`;await this.fetchJson(a,!0,"POST",[r],"return=minimal")}catch(n){ne("Failed to log to database:",n)}})}}var ze={};const Ge=()=>{if("undefined"!=typeof localStorage){const e=localStorage.getItem("USE_HARD_DELETE");if(null!==e)return"true"===e}if("undefined"!=typeof process&&(null==ze?void 0:ze.USE_HARD_DELETE)){const e=String(ze.USE_HARD_DELETE).toLowerCase();return"true"===e||"1"===e}return!1};class qe extends We{async deleteRoutine(e){return Ge()?this.hardDeleteRoutine(e):super.deleteRoutine(e)}async deleteRoutineExercise(e){return Ge()?this.hardDeleteRoutineExercise(e):super.deleteRoutineExercise(e)}async deleteExerciseSet(e){return Ge()?this.hardDeleteExerciseSet(e):super.deleteExerciseSet(e)}}var Ye;Ye=qe,[class extends Ae{async getExercises(e={}){const{limit:t,offset:s,muscleGroup:n,search:r,other:a}=e;let i=`${xe}/rest/v1/exercises?select=exercise_id,name,muscle_group`;n?i+=`&muscle_group=eq.${encodeURIComponent(n)}`:a&&(i+="&or=(muscle_group.is.null,muscle_group.eq.)"),r&&(i+=`&name=ilike.*${encodeURIComponent(r)}*`),null!=t&&(i+=`&limit=${t}`),null!=s&&(i+=`&offset=${s}`);const o=t??0,l=s??0,c=n?this.keyExercisesMuscleGroup(n,o,l):a?this.keyExercisesMuscleGroup("other",o,l):this.keyExercisesPage(o,l),{data:d,status:u}=await this.getOrFetchAndCache(i,c,ye,!0);return u===Te.FRESH_FETCH&&d.forEach(e=>{const t=this.keyExercise(e.exercise_id);ce.set(t,e,ve)}),d}async getMuscleGroups(){const e=`${xe}/rest/v1/exercises?select=muscle_group&order=muscle_group`,{data:t}=await this.getOrFetchAndCache(e,this.keyExerciseMuscleGroups(),be,!0),s=new Set;let n=!1;for(const a of t){const e=(a.muscle_group||"").trim();e?s.add(e):n=!0}const r=Array.from(s).sort((e,t)=>e.localeCompare(t));return n&&r.push("Other"),r}async getExercise(e){const t=`${xe}/rest/v1/exercises?exercise_id=eq.${e}&select=exercise_id,name,muscle_group&limit=1`,s=this.keyExercise(e),{data:n}=await this.getOrFetchAndCache(t,s,ve,!0);return(Array.isArray(n)?n[0]:n)??null}async getUserRoutines(){const e=await this.getUserId(),t=`${xe}/rest/v1/user_routines?user_id=eq.${e}&is_active=eq.true&select=*&order=created_at.asc`,s=this.keyUserRoutines(e),{data:n}=await this.getOrFetchAndCache(t,s,we,!0,e=>e.filter(e=>!0===e.is_active));return n}async getSampleRoutines(){const e="58b39a78-0284-445f-8c88-4fed2944c8be",t=`${xe}/rest/v1/user_routines?user_id=eq.${e}&is_active=eq.true&select=*&order=created_at.asc`,s=this.keyUserRoutines(e),{data:n}=await this.getOrFetchAndCache(t,s,we,!0);return n}async getUserRoutineExercises(e){const t=await this.getUserId(),s=`${xe}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${e}&is_active=is.true&select=*`,n=this.keyRoutineExercises(t,e),{data:r}=await this.getOrFetchAndCache(s,n,ke,!0,e=>e.filter(e=>!0===e.is_active));return r}async getUserRoutineExercisesWithDetails(e){const t=await this.getUserId(),s=`${xe}/rest/v1/user_routine_exercises_data?routine_template_id=eq.${e}&select=*,exercises(name,category)`,n=this.keyRoutineExercisesWithDetails(t,e),{data:r}=await this.getOrFetchAndCache(s,n,Ee,!0,e=>e.filter(e=>!0===e.is_active));return r.map(e=>{var t,s,n;return{...e,exercise_name:(null==(t=e.exercises)?void 0:t.name)||"Unknown Exercise",category:(null==(s=e.exercises)?void 0:s.category)||"Unknown",muscle_group:(null==(n=e.exercises)?void 0:n.muscle_group)||"Unknown"}})}async getExerciseSetsForRoutine(e){const t=await this.getUserId(),s=`${xe}/rest/v1/user_routine_exercises_set_data?routine_template_exercise_id=eq.${e}&is_active=eq.true&order=set_order`,n=this.keyRoutineSets(t,e),{data:r}=await this.getOrFetchAndCache(s,n,Se,!0);return r}async getMyProfile(){const e=await this.getUserId(),t=`${xe}/rest/v1/profiles?user_id=eq.${e}&select=*`,s=this.keyProfile(e),{data:n}=await this.getOrFetchAndCache(t,s,je,!0);return n[0]??null}async getBodyMeasurements(e=4){const t=await this.getUserId(),s=`${xe}/rest/v1/user_body_measurements?user_id=eq.${t}&select=*&order=measured_on.desc&limit=${e}`,n=this.keyBodyMeasurements(t),{data:r}=await this.getOrFetchAndCache(s,n,Ce,!0);return r}async getUserStepGoal(){var e;const t=await this.getUserId(),s=`${xe}/rest/v1/user_steps?user_id=eq.${t}&select=goal`,n=this.keySteps(t),{data:r}=await this.getOrFetchAndCache(s,n,Ne,!0);if(r.length>0)return r[0].goal;const a=await this.fetchJson(`${xe}/rest/v1/user_steps`,!0,"POST",{user_id:t,goal:1e4},"return=representation");return await this.refreshSteps(t),(null==(e=a[0])?void 0:e.goal)??1e4}}].forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(t=>{"constructor"!==t&&Object.defineProperty(Ye.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t)||Object.create(null))})});const Je=new qe;const Ke=Array(12).fill(0),Xe=({visible:e,className:t})=>r.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},r.createElement("div",{className:"sonner-spinner"},Ke.map((e,t)=>r.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),Ze=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},r.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Qe=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},r.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),et=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},r.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),tt=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},r.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),st=r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},r.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let nt=1;const rt=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s,...n}=e,r="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:nt++,a=this.toasts.find(e=>e.id===r),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),a?this.toasts=this.toasts.map(t=>t.id===r?(this.publish({...t,...e,id:r,title:s}),{...t,...e,id:r,dismissible:i,title:s}):t):this.addToast({title:s,...n,dismissible:i,id:r}),r},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;void 0!==t.loading&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));const n=Promise.resolve(e instanceof Function?e():e);let a,i=void 0!==s;const o=n.then(async e=>{a=["resolve",e];if(r.isValidElement(e))i=!1,this.create({id:s,type:"default",message:e});else if(at(e)&&!e.ok){i=!1;const n="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,a="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,o="object"==typeof n&&!r.isValidElement(n)?n:{message:n};this.create({id:s,type:"error",description:a,...o})}else if(e instanceof Error){i=!1;const n="function"==typeof t.error?await t.error(e):t.error,a="function"==typeof t.description?await t.description(e):t.description,o="object"==typeof n&&!r.isValidElement(n)?n:{message:n};this.create({id:s,type:"error",description:a,...o})}else if(void 0!==t.success){i=!1;const n="function"==typeof t.success?await t.success(e):t.success,a="function"==typeof t.description?await t.description(e):t.description,o="object"==typeof n&&!r.isValidElement(n)?n:{message:n};this.create({id:s,type:"success",description:a,...o})}}).catch(async e=>{if(a=["reject",e],void 0!==t.error){i=!1;const n="function"==typeof t.error?await t.error(e):t.error,a="function"==typeof t.description?await t.description(e):t.description,o="object"==typeof n&&!r.isValidElement(n)?n:{message:n};this.create({id:s,type:"error",description:a,...o})}}).finally(()=>{i&&(this.dismiss(s),s=void 0),null==t.finally||t.finally.call(t)}),l=()=>new Promise((e,t)=>o.then(()=>"reject"===a[0]?t(a[1]):e(a[1])).catch(t));return"string"!=typeof s&&"number"!=typeof s?{unwrap:l}:Object.assign(s,{unwrap:l})},this.custom=(e,t)=>{const s=(null==t?void 0:t.id)||nt++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},at=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,it=(e,t)=>{const s=(null==t?void 0:t.id)||nt++;return rt.addToast({title:e,...t,id:s}),s},ot=Object.assign(it,{success:rt.success,info:rt.info,warning:rt.warning,error:rt.error,custom:rt.custom,message:rt.message,promise:rt.promise,dismiss:rt.dismiss,loading:rt.loading},{getHistory:()=>rt.toasts,getToasts:()=>rt.getActiveToasts()});function lt(e){return void 0!==e.label}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const ct=3,dt=14;function ut(...e){return e.filter(Boolean).join(" ")}const ht=e=>{var t,s,n,a,i,o,l,c,d;const{invert:u,toast:h,unstyled:m,interacting:p,setHeights:f,visibleToasts:g,heights:x,index:v,toasts:y,expanded:b,removeToast:w,defaultRichColors:k,closeButton:E,style:S,cancelButtonStyle:j,actionButtonStyle:N,className:C="",descriptionClassName:T="",duration:A,position:_,gap:R,expandByDefault:P,classNames:M,icons:D,closeButtonAriaLabel:I="Close toast"}=e,[$,B]=r.useState(null),[L,O]=r.useState(null),[U,F]=r.useState(!1),[V,H]=r.useState(!1),[W,z]=r.useState(!1),[G,q]=r.useState(!1),[Y,J]=r.useState(!1),[K,X]=r.useState(0),[Z,Q]=r.useState(0),ee=r.useRef(h.duration||A||4e3),te=r.useRef(null),se=r.useRef(null),ne=0===v,re=v+1<=g,ae=h.type,ie=!1!==h.dismissible,oe=h.className||"",le=h.descriptionClassName||"",ce=r.useMemo(()=>x.findIndex(e=>e.toastId===h.id)||0,[x,h.id]),de=r.useMemo(()=>{var e;return null!=(e=h.closeButton)?e:E},[h.closeButton,E]),ue=r.useMemo(()=>h.duration||A||4e3,[h.duration,A]),he=r.useRef(0),me=r.useRef(0),pe=r.useRef(0),fe=r.useRef(null),[ge,xe]=_.split("-"),ve=r.useMemo(()=>x.reduce((e,t,s)=>s>=ce?e:e+t.height,0),[x,ce]),ye=(()=>{const[e,t]=r.useState(document.hidden);return r.useEffect(()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),be=h.invert||u,we="loading"===ae;me.current=r.useMemo(()=>ce*R+ve,[ce,ve]),r.useEffect(()=>{ee.current=ue},[ue]),r.useEffect(()=>{F(!0)},[]),r.useEffect(()=>{const e=se.current;if(e){const t=e.getBoundingClientRect().height;return Q(t),f(e=>[{toastId:h.id,height:t,position:h.position},...e]),()=>f(e=>e.filter(e=>e.toastId!==h.id))}},[f,h.id]),r.useLayoutEffect(()=>{if(!U)return;const e=se.current,t=e.style.height;e.style.height="auto";const s=e.getBoundingClientRect().height;e.style.height=t,Q(s),f(e=>e.find(e=>e.toastId===h.id)?e.map(e=>e.toastId===h.id?{...e,height:s}:e):[{toastId:h.id,height:s,position:h.position},...e])},[U,h.title,h.description,f,h.id,h.jsx,h.action,h.cancel]);const ke=r.useCallback(()=>{H(!0),X(me.current),f(e=>e.filter(e=>e.toastId!==h.id)),setTimeout(()=>{w(h)},200)},[h,w,f,me]);r.useEffect(()=>{if(h.promise&&"loading"===ae||h.duration===1/0||"loading"===h.type)return;let e;return b||p||ye?(()=>{if(pe.current<he.current){const e=(new Date).getTime()-he.current;ee.current=ee.current-e}pe.current=(new Date).getTime()})():ee.current!==1/0&&(he.current=(new Date).getTime(),e=setTimeout(()=>{null==h.onAutoClose||h.onAutoClose.call(h,h),ke()},ee.current)),()=>clearTimeout(e)},[b,p,h,ae,ye,ke]),r.useEffect(()=>{h.delete&&(ke(),null==h.onDismiss||h.onDismiss.call(h,h))},[ke,h.delete]);const Ee=h.icon||(null==D?void 0:D[ae])||(e=>{switch(e){case"success":return Ze;case"info":return et;case"warning":return Qe;case"error":return tt;default:return null}})(ae);var Se,je,Ne,Ce;return r.createElement("li",{tabIndex:0,ref:se,className:ut(C,oe,null==M?void 0:M.toast,null==h||null==(t=h.classNames)?void 0:t.toast,null==M?void 0:M.default,null==M?void 0:M[ae],null==h||null==(s=h.classNames)?void 0:s[ae]),"data-sonner-toast":"","data-rich-colors":null!=(Se=h.richColors)?Se:k,"data-styled":!Boolean(h.jsx||h.unstyled||m),"data-mounted":U,"data-promise":Boolean(h.promise),"data-swiped":Y,"data-removed":V,"data-visible":re,"data-y-position":ge,"data-x-position":xe,"data-index":v,"data-front":ne,"data-swiping":W,"data-dismissible":ie,"data-type":ae,"data-invert":be,"data-swipe-out":G,"data-swipe-direction":L,"data-expanded":Boolean(b||P&&U),"data-testid":h.testId,style:{"--index":v,"--toasts-before":v,"--z-index":y.length-v,"--offset":`${V?K:me.current}px`,"--initial-height":P?"auto":`${Z}px`,...S,...h.style},onDragEnd:()=>{z(!1),B(null),fe.current=null},onPointerDown:e=>{2!==e.button&&!we&&ie&&(te.current=new Date,X(me.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(z(!0),fe.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,s;if(G||!ie)return;fe.current=null;const n=Number((null==(e=se.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),r=Number((null==(t=se.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),a=(new Date).getTime()-(null==(s=te.current)?void 0:s.getTime()),i="x"===$?n:r,o=Math.abs(i)/a;if(Math.abs(i)>=45||o>.11)return X(me.current),null==h.onDismiss||h.onDismiss.call(h,h),O("x"===$?n>0?"right":"left":r>0?"down":"up"),ke(),void q(!0);var l,c;null==(l=se.current)||l.style.setProperty("--swipe-amount-x","0px"),null==(c=se.current)||c.style.setProperty("--swipe-amount-y","0px"),J(!1),z(!1),B(null)},onPointerMove:t=>{var s,n,r;if(!fe.current||!ie)return;if((null==(s=window.getSelection())?void 0:s.toString().length)>0)return;const a=t.clientY-fe.current.y,i=t.clientX-fe.current.x;var o;const l=null!=(o=e.swipeDirections)?o:function(e){const[t,s]=e.split("-"),n=[];return t&&n.push(t),s&&n.push(s),n}(_);!$&&(Math.abs(i)>1||Math.abs(a)>1)&&B(Math.abs(i)>Math.abs(a)?"x":"y");let c={x:0,y:0};const d=e=>1/(1.5+Math.abs(e)/20);if("y"===$){if(l.includes("top")||l.includes("bottom"))if(l.includes("top")&&a<0||l.includes("bottom")&&a>0)c.y=a;else{const e=a*d(a);c.y=Math.abs(e)<Math.abs(a)?e:a}}else if("x"===$&&(l.includes("left")||l.includes("right")))if(l.includes("left")&&i<0||l.includes("right")&&i>0)c.x=i;else{const e=i*d(i);c.x=Math.abs(e)<Math.abs(i)?e:i}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&J(!0),null==(n=se.current)||n.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(r=se.current)||r.style.setProperty("--swipe-amount-y",`${c.y}px`)}},de&&!h.jsx&&"loading"!==ae?r.createElement("button",{"aria-label":I,"data-disabled":we,"data-close-button":!0,onClick:we||!ie?()=>{}:()=>{ke(),null==h.onDismiss||h.onDismiss.call(h,h)},className:ut(null==M?void 0:M.closeButton,null==h||null==(n=h.classNames)?void 0:n.closeButton)},null!=(je=null==D?void 0:D.close)?je:st):null,(ae||h.icon||h.promise)&&null!==h.icon&&(null!==(null==D?void 0:D[ae])||h.icon)?r.createElement("div",{"data-icon":"",className:ut(null==M?void 0:M.icon,null==h||null==(a=h.classNames)?void 0:a.icon)},h.promise||"loading"===h.type&&!h.icon?h.icon||((null==D?void 0:D.loading)?r.createElement("div",{className:ut(null==M?void 0:M.loader,null==h||null==(Ce=h.classNames)?void 0:Ce.loader,"sonner-loader"),"data-visible":"loading"===ae},D.loading):r.createElement(Xe,{className:ut(null==M?void 0:M.loader,null==h||null==(Ne=h.classNames)?void 0:Ne.loader),visible:"loading"===ae})):null,"loading"!==h.type?Ee:null):null,r.createElement("div",{"data-content":"",className:ut(null==M?void 0:M.content,null==h||null==(i=h.classNames)?void 0:i.content)},r.createElement("div",{"data-title":"",className:ut(null==M?void 0:M.title,null==h||null==(o=h.classNames)?void 0:o.title)},h.jsx?h.jsx:"function"==typeof h.title?h.title():h.title),h.description?r.createElement("div",{"data-description":"",className:ut(T,le,null==M?void 0:M.description,null==h||null==(l=h.classNames)?void 0:l.description)},"function"==typeof h.description?h.description():h.description):null),r.isValidElement(h.cancel)?h.cancel:h.cancel&&lt(h.cancel)?r.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||j,onClick:e=>{lt(h.cancel)&&ie&&(null==h.cancel.onClick||h.cancel.onClick.call(h.cancel,e),ke())},className:ut(null==M?void 0:M.cancelButton,null==h||null==(c=h.classNames)?void 0:c.cancelButton)},h.cancel.label):null,r.isValidElement(h.action)?h.action:h.action&&lt(h.action)?r.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||N,onClick:e=>{lt(h.action)&&(null==h.action.onClick||h.action.onClick.call(h.action,e),e.defaultPrevented||ke())},className:ut(null==M?void 0:M.actionButton,null==h||null==(d=h.classNames)?void 0:d.actionButton)},h.action.label):null)};function mt(){if("undefined"==typeof window)return"ltr";if("undefined"==typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function pt(e,t){const s={};return[e,t].forEach((e,t)=>{const n=1===t,r=n?"--mobile-offset":"--offset",a=n?"16px":"24px";function i(e){["top","right","bottom","left"].forEach(t=>{s[`${r}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?i(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?s[`${r}-${t}`]=a:s[`${r}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):i(a)}),s}const ft=r.forwardRef(function(e,t){const{id:s,invert:n,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:c,className:d,offset:u,mobileOffset:h,theme:m="light",richColors:p,duration:f,style:g,visibleToasts:x=ct,toastOptions:v,dir:y=mt(),gap:b=dt,icons:w,containerAriaLabel:k="Notifications"}=e,[E,S]=r.useState([]),j=r.useMemo(()=>s?E.filter(e=>e.toasterId===s):E.filter(e=>!e.toasterId),[E,s]),N=r.useMemo(()=>Array.from(new Set([i].concat(j.filter(e=>e.position).map(e=>e.position)))),[j,i]),[C,T]=r.useState([]),[A,_]=r.useState(!1),[R,P]=r.useState(!1),[M,D]=r.useState("system"!==m?m:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),I=r.useRef(null),$=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),B=r.useRef(null),L=r.useRef(!1),O=r.useCallback(e=>{S(t=>{var s;return(null==(s=t.find(t=>t.id===e.id))?void 0:s.delete)||rt.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return r.useEffect(()=>rt.subscribe(e=>{e.dismiss?requestAnimationFrame(()=>{S(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t))}):setTimeout(()=>{a.flushSync(()=>{S(t=>{const s=t.findIndex(t=>t.id===e.id);return-1!==s?[...t.slice(0,s),{...t[s],...e},...t.slice(s+1)]:[e,...t]})})})}),[E]),r.useEffect(()=>{if("system"!==m)return void D(m);if("system"===m&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?D("dark"):D("light")),"undefined"==typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{D(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{D(e?"dark":"light")}catch(t){console.error(t)}})}},[m]),r.useEffect(()=>{E.length<=1&&_(!1)},[E]),r.useEffect(()=>{const e=e=>{var t;var s;o.every(t=>e[t]||e.code===t)&&(_(!0),null==(s=I.current)||s.focus());"Escape"!==e.code||document.activeElement!==I.current&&!(null==(t=I.current)?void 0:t.contains(document.activeElement))||_(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o]),r.useEffect(()=>{if(I.current)return()=>{B.current&&(B.current.focus({preventScroll:!0}),B.current=null,L.current=!1)}},[I.current]),r.createElement("section",{ref:t,"aria-label":`${k} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((t,s)=>{var a;const[i,o]=t.split("-");return j.length?r.createElement("ol",{key:t,dir:"auto"===y?mt():y,tabIndex:-1,ref:I,className:d,"data-sonner-toaster":!0,"data-sonner-theme":M,"data-y-position":i,"data-x-position":o,style:{"--front-toast-height":`${(null==(a=C[0])?void 0:a.height)||0}px`,"--width":"356px","--gap":`${b}px`,...g,...pt(u,h)},onBlur:e=>{L.current&&!e.currentTarget.contains(e.relatedTarget)&&(L.current=!1,B.current&&(B.current.focus({preventScroll:!0}),B.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||L.current||(L.current=!0,B.current=e.relatedTarget)},onMouseEnter:()=>_(!0),onMouseMove:()=>_(!0),onMouseLeave:()=>{R||_(!1)},onDragEnd:()=>_(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||P(!0)},onPointerUp:()=>P(!1)},j.filter(e=>!e.position&&0===s||e.position===t).map((s,a)=>{var i,o;return r.createElement(ht,{key:s.id,icons:w,index:a,toast:s,defaultRichColors:p,duration:null!=(i=null==v?void 0:v.duration)?i:f,className:null==v?void 0:v.className,descriptionClassName:null==v?void 0:v.descriptionClassName,invert:n,visibleToasts:x,closeButton:null!=(o=null==v?void 0:v.closeButton)?o:c,interacting:R,position:t,style:null==v?void 0:v.style,unstyled:null==v?void 0:v.unstyled,classNames:null==v?void 0:v.classNames,cancelButtonStyle:null==v?void 0:v.cancelButtonStyle,actionButtonStyle:null==v?void 0:v.actionButtonStyle,closeButtonAriaLabel:null==v?void 0:v.closeButtonAriaLabel,removeToast:O,toasts:j.filter(e=>e.position==s.position),heights:C.filter(e=>e.position==s.position),setHeights:T,expandByDefault:l,gap:b,expanded:A,swipeDirections:e.swipeDirections})})):null}))}),gt=s.createContext(void 0);function xt(){const e=s.useContext(gt);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}const vt=e=>e&&e.length?e.charAt(0).toUpperCase()+e.slice(1):null,yt=(...e)=>{for(const t of e){if("string"!=typeof t)continue;const e=t.trim();if(e.length>0)return e}return null};function bt({children:e}){const[t,n]=s.useState(null),[r,a]=s.useState(null),[i,o]=s.useState(!1),l=s.useCallback((e,t)=>{n(e),t&&a(t),e?(localStorage.setItem("USER_TOKEN",e),t&&localStorage.setItem("REFRESH_TOKEN",t),Je.setToken(e)):(localStorage.removeItem("USER_TOKEN"),localStorage.removeItem("REFRESH_TOKEN"),a(null),Je.setToken(null))},[]),c=s.useCallback(async e=>{try{const t=await Je.refreshToken(e);l(t,e)}catch(t){ne("Token refresh failed on app start:",t),l(null,null)}},[l]),d=s.useCallback(async()=>{let e=null;try{e=await Je.getMyProfile()}catch(t){ne("Failed to load profile after sign-in:",t)}if(e)return!0;try{const e=await Je.getCurrentUser(),{firstName:t,lastName:s,displayName:n}=((e,t)=>{const s=(()=>{if("string"!=typeof t)return null;const[e]=t.split("@");if(!e)return null;const s=e.trim();return s.length>0?s:null})()??"New member",n=yt(null==e?void 0:e.full_name,null==e?void 0:e.name,null==e?void 0:e.display_name),r=yt(null==e?void 0:e.preferred_username,null==e?void 0:e.nickname),a=yt(null==e?void 0:e.given_name,null==e?void 0:e.first_name,n?n.split(/\s+/)[0]:null)??s,i=yt(null==e?void 0:e.family_name,null==e?void 0:e.last_name,n?n.split(/\s+/).slice(1).join(" "):null)??"",o=yt(r,n,[a,i].filter(Boolean).join(" "),s)??s;return{firstName:a,lastName:i,displayName:o}})(e.user_metadata,e.email);return await Je.upsertProfile({firstName:t,lastName:s,displayName:n}),!0}catch(t){return ne("Failed to finish profile setup after OAuth sign-in:",t),ot.error("We couldn't finish setting up your profile. Please try signing in again."),!1}},[]),u=s.useCallback(()=>{if("undefined"==typeof window)return!1;const{hash:e}=window.location;if(!e||e.length<=1)return!1;const t=new URLSearchParams(e.slice(1)),s=t.get("access_token"),n=t.get("refresh_token"),r=t.get("error_description")||t.get("error"),a=t.get("provider"),i=vt(a);if(!s&&!r)return!1;if(r){const e=((e,t)=>{if(e.toLowerCase().includes("provider is not enabled")){const e=vt(t);return e?`${e} sign-in isn't configured yet. Enable it for your Supabase project and try again.`:"This sign-in provider isn't configured yet. Enable it for your Supabase project and try again."}return e})(r,a);ot.error(e),ne("OAuth sign-in failed:",r)}else s&&(l(s,n),ot.success(i?`Signed in with ${i}`:"Signed in successfully"),d());const o=`${window.location.origin}${window.location.pathname}${window.location.search}`;return window.history.replaceState({},document.title,o),!0},[d,l]);s.useEffect(()=>{(async()=>{if(u())return void o(!0);const e=localStorage.getItem("USER_TOKEN"),t=localStorage.getItem("REFRESH_TOKEN");if(e&&t){(e=>{try{const t=1e3*JSON.parse(atob(e.split(".")[1])).iat;return Date.now()-t}catch{return 1/0}})(e)>36e5?await c(t):l(e,t)}o(!0)})()},[u,c,l]),s.useEffect(()=>{t&&d()},[d,t]);s.useEffect(()=>{if(!t||!r)return;const e=setInterval(async()=>{if("visible"===document.visibilityState)try{const e=await Je.refreshToken(r);l(e,r)}catch(e){ne("Active token refresh failed:",e),l(null,null)}},27e5);return()=>clearInterval(e)},[t,r,l]),s.useEffect(()=>{if(!t||!r)return;const e=()=>{"visible"===document.visibilityState&&(async()=>{try{const e=await Je.refreshToken(r);l(e,r)}catch(e){ne("Token refresh failed on resume:",e),l(null,null)}})()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[t,r,l]);const h=!!t;return i?q.jsx(gt.Provider,{value:{userToken:t,setUserToken:l,isAuthenticated:h,signOut:async()=>{await Je.signOut(),l(null,null)}},children:e}):q.jsx("div",{className:"bg-gradient-to-br from-[var(--soft-gray)] via-[var(--background)] to-[var(--warm-cream)]/30 flex items-center justify-center",children:q.jsx("div",{className:"text-black",children:"Loading..."})})}const wt=s.createContext(void 0);function kt({children:e}){const[t,n]=s.useState(!1),[r,a]=s.useState(5);return q.jsx(wt.Provider,{value:{hasWorkedOutToday:t,todaysWorkout:{name:"Upper Push",exercises:["Bench Press","Overhead Press","Dips","Tricep Pushdown"],estimatedTime:"60-75 min"},workoutStreak:r,completeWorkout:()=>{n(!0),a(e=>e+1)}},children:e})}async function Et(){try{const{Capacitor:t}=await Re(async()=>{const{Capacitor:e}=await Promise.resolve().then(()=>rh);return{Capacitor:e}},void 0),s=t.getPlatform();if("ios"!==s&&"android"!==s)return 0;const{start:n,end:r}=function(){const e=new Date;return{start:new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),end:e}}();if("ios"===s)try{const{Health:e}=await Re(async()=>{const{Health:e}=await import("./index-n-wgxVyt.js");return{Health:e}},__vite__mapDeps([3,1,2])),t=await e.isHealthAvailable();if(!(null==t?void 0:t.available))return 0;await e.requestHealthPermissions({permissions:["READ_STEPS"]}),ie("[steps] Sending to HealthKit:",{startDate:n.toISOString(),endDate:r.toISOString(),startLocal:n.toLocaleString(),endLocal:r.toLocaleString()});const s=await e.queryAggregated({startDate:n.toISOString(),endDate:r.toISOString(),dataType:"steps",bucket:"day"});ie("[steps] HealthKit response:",s);const a=Array.isArray(null==s?void 0:s.aggregatedData)?s.aggregatedData:[],i=Intl.DateTimeFormat().resolvedOptions().timeZone,o=e=>new Date(e).toLocaleString("en-GB",{timeZone:i,hour12:!1});a.forEach((e,t)=>{ie(`[steps] Row ${t}:`,o(e.startDate),"→",o(e.endDate),"Steps:",e.value,"tz:",i)});const l=a.reduce((e,t)=>e+(Number(null==t?void 0:t.value)||0),0);return Math.round(l)}catch(e){return re("[steps] iOS Health read failed:",e),0}if("android"===s)try{const{HealthConnect:e}=await Re(async()=>{const{HealthConnect:e}=await import("./index-BqxhFotm.js");return{HealthConnect:e}},__vite__mapDeps([4,1,2])),t=await e.checkAvailability();if("Available"!==(null==t?void 0:t.availability))return 0;const s=await e.requestHealthPermissions({read:["Steps"],write:[]});if(!(null==s?void 0:s.hasAllPermissions))return 0;const a=await e.readRecords({type:"Steps",timeRangeFilter:{type:"between",startTime:n,endTime:r}});ie("[steps] Health Connect response:",a);const i=Array.isArray(null==a?void 0:a.records)?a.records:[];i.forEach((e,t)=>{ie(`[steps] Record ${t}:`,"Steps:",null==e?void 0:e.count,"Time:",null==e?void 0:e.startTime)});const o=i.reduce((e,t)=>e+(Number(null==t?void 0:t.count)||0),0);return Math.round(o)}catch(e){return re("[steps] Android Health Connect read failed:",e),0}return 0}catch(t){return re("[steps] readTodayStepsNative fallback to 0:",t),0}}function St(){const[e,t]=s.useState({steps:0,lastUpdated:0,goal:1e4}),[n,r]=s.useState(!1),a=s.useRef(null),i=s.useRef(0),{userToken:o}=xt(),l=s.useCallback(()=>!document.hidden,[]),c=s.useCallback(()=>Date.now()-i.current>=6e5,[]),d=s.useCallback(async()=>{if(o)try{const e=await Je.getUserStepGoal();t(t=>({...t,goal:e}))}catch(e){ne("❌ [steps] Error loading step goal:",e)}},[o]),u=s.useCallback(async(e=!1)=>{if(e||l()&&c()){r(!0),i.current=Date.now();try{const e=await Et();t(t=>({steps:e,lastUpdated:Date.now(),goal:t.goal}))}catch(s){ne("❌ [steps] Error during read:",s),t(e=>({steps:0,lastUpdated:Date.now(),goal:e.goal}))}finally{r(!1)}}},[l,c]),h=s.useCallback(async()=>{await u(!0)},[u]);s.useEffect(()=>{o&&d()},[o,d]),s.useEffect(()=>(o&&(u(),a.current=setInterval(()=>u(),6e4)),()=>{a.current&&clearInterval(a.current)}),[o,u]);const m=e.goal>0?e.steps/e.goal*100:0,p=Math.min(Math.max(m,0),100);return{steps:e.steps,goal:e.goal,progressPercentage:p,isLoading:n,refreshStepGoal:d,forceRefreshStepData:h}}function jt(){const e="undefined"!=typeof window&&"undefined"!=typeof document?getComputedStyle(document.documentElement):null,t=t=>{var s;return(null==(s=null==e?void 0:e.getPropertyValue(t))?void 0:s.trim())||""};return{warmBrown:t("--foreground"),warmCoral:t("--primary"),accentBlue:t("--accent-blue"),trackGray:t("--ring-track-gray"),recoveryYellow:t("--recovery-yellow")}}function Nt({value:e,max:t=100,label:s,unit:n="%",size:r=112,strokeWidth:a=10,decimals:i=0,trackColor:o,progressColor:l,textColor:c,primaryTextOverride:d,secondaryTextOverride:u}){const{warmBrown:h,warmCoral:m,trackGray:p}=jt(),f=o??p,g=l??m,x=c??h,v="number"==typeof e&&isFinite(e)?Math.max(0,Math.min(e,t)):null,y=(r-a)/2,b=2*Math.PI*y,w=b*(1-(null==v?0:v/t)),k=`grad-${String(s).replace(/[^a-zA-Z0-9_-]/g,"")}`;return q.jsxs("div",{className:"flex flex-col items-center select-none",role:"group","aria-label":`${s} progress`,children:[q.jsxs("svg",{width:r,height:r,viewBox:`0 0 ${r} ${r}`,className:"block",children:[q.jsx("defs",{children:q.jsxs("linearGradient",{id:k,x1:"0",y1:"0",x2:"1",y2:"1",children:[q.jsx("stop",{offset:"0%",stopColor:g}),q.jsx("stop",{offset:"100%",stopColor:g})]})}),q.jsx("circle",{cx:r/2,cy:r/2,r:y,stroke:f,strokeWidth:a,fill:"none",strokeLinecap:"round",style:{opacity:.25}}),q.jsx("circle",{cx:r/2,cy:r/2,r:y,stroke:`url(#${k})`,strokeWidth:a,fill:"none",strokeDasharray:`${b} ${b}`,strokeDashoffset:w,strokeLinecap:"round",transform:`rotate(-90 ${r/2} ${r/2})`,role:"progressbar","aria-valuemin":0,"aria-valuemax":t,"aria-valuenow":v??void 0,"aria-valuetext":d&&u?`${d} of ${u} ${n||""}`.trim():void 0}),q.jsxs("g",{transform:`translate(${r/2}, ${r/2})`,children:[q.jsx("text",{textAnchor:"middle",dominantBaseline:"central",style:{fontSize:.24*r,fontWeight:700,fill:x},children:d??(null==v?"—":v.toFixed(i))}),q.jsx("text",{y:.18*r,textAnchor:"middle",dominantBaseline:"hanging",style:{fontSize:.14*r,fontWeight:600,fill:x,opacity:.5},children:u??n})]})]}),q.jsx("div",{className:"mt-2 text-xs",style:{color:x,opacity:.75},children:s})]})}const Ct=(e,t,s)=>Math.min(s,Math.max(t,e)),Tt=e=>null==e?"—":Math.round(e).toLocaleString();function At({steps:e,goal:t,recoveryPercent:n,strain:r,onStepsClick:a,onRecoveryClick:i,onStrainClick:o}){const{warmBrown:l,warmCoral:c,accentBlue:d,trackGray:u,recoveryYellow:h}=jt(),m=function(){const[e,t]=s.useState(()=>"undefined"!=typeof window?window.innerWidth:390);return s.useEffect(()=>{const e=()=>t(window.innerWidth);window.addEventListener("resize",e),window.addEventListener("orientationchange",e),window.addEventListener("pageshow",e);const s=setTimeout(e,100);return()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e),window.removeEventListener("pageshow",e),clearTimeout(s)}},[]),e}(),p=s.useMemo(()=>{const e=.28*m;return Math.round(Ct(e,96,140))},[m]),f=s.useMemo(()=>{const e=Math.round(p*(10/108));return Ct(e,8,14)},[p]),g=[{key:"steps",onClick:a,node:q.jsx(Nt,{value:(x=e,v=t,null==x||null==v||!isFinite(x)||!isFinite(v)||v<=0?null:Ct(Math.round(x/v*100),0,100)),max:100,label:"Steps",unit:"%",size:p,strokeWidth:f,textColor:l,progressColor:d,trackColor:u,primaryTextOverride:Tt(e),secondaryTextOverride:Tt(t)})},{key:"recovery",onClick:i,node:q.jsx(Nt,{value:n??null,max:100,label:"Recovery",unit:"%",size:p,strokeWidth:f,textColor:l,progressColor:h,trackColor:u})},{key:"strain",onClick:o,node:q.jsx(Nt,{value:r??null,max:10,label:"Strain",unit:"",size:p,strokeWidth:f,decimals:1,textColor:l,progressColor:c,trackColor:u})}];var x,v;return q.jsxs("div",{className:"w-full",children:[q.jsx("div",{className:"flex justify-center gap-4 sm:gap-6 px-2",children:g.map(({key:e,onClick:t,node:s})=>q.jsx("button",{className:"touch-manipulation inline-flex shrink-0",onClick:t,"aria-label":`${e} progress`,children:s},e))}),q.jsx("div",{className:"mt-3 h-px bg-foreground/5"})]})}const _t={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl"};let Rt=0,Pt=null;function Mt(){s.useLayoutEffect(()=>{if(Rt+=1,!Pt){const e=document.documentElement;let t=0;const s=()=>{t=0;const s=window.visualViewport;if(!s)return e.style.setProperty("--kb-inset","0px"),e.style.setProperty("--keyboard-inset","0px"),void e.style.setProperty("--app-kb-inset","0px");const n=Math.max(0,window.innerHeight-s.height-(s.offsetTop||0)),r=`${Math.round(n)}px`;e.style.setProperty("--kb-inset",r),e.style.setProperty("--keyboard-inset",r),e.style.setProperty("--app-kb-inset",r)},n=()=>{t&&cancelAnimationFrame(t),t=requestAnimationFrame(s)};let r=null;(async()=>{s();try{const{Capacitor:t}=await Re(async()=>{const{Capacitor:e}=await Promise.resolve().then(()=>rh);return{Capacitor:e}},void 0),{Keyboard:s}=await Re(async()=>{const{Keyboard:e}=await import("./index-LYrKqyVp.js");return{Keyboard:e}},__vite__mapDeps([5,1,2]));if(t.isNativePlatform()){const t=await s.addListener("keyboardWillShow",t=>{const s=(null==t?void 0:t.keyboardHeight)||0,n=`${Math.round(s)}px`;e.style.setProperty("--kb-inset",n),e.style.setProperty("--keyboard-inset",n),e.style.setProperty("--app-kb-inset",n)}),n=await s.addListener("keyboardWillHide",()=>{e.style.setProperty("--kb-inset","0px"),e.style.setProperty("--keyboard-inset","0px"),e.style.setProperty("--app-kb-inset","0px")});return void(r=()=>{t.remove(),n.remove()})}}catch{}window.visualViewport?(window.visualViewport.addEventListener("resize",n),window.visualViewport.addEventListener("scroll",n)):window.addEventListener("resize",n),r=()=>{window.visualViewport?(window.visualViewport.removeEventListener("resize",n),window.visualViewport.removeEventListener("scroll",n)):window.removeEventListener("resize",n)}})(),Pt=()=>{t&&cancelAnimationFrame(t),null==r||r(),e.style.removeProperty("--kb-inset"),e.style.removeProperty("--keyboard-inset"),e.style.removeProperty("--app-kb-inset"),Pt=null}}return()=>{Rt-=1,Rt<=0&&Pt&&Pt()}},[])}function Dt(){const[e,t]=s.useState(!1);return Mt(),s.useEffect(()=>{const e=document.documentElement,s=()=>{const s=parseInt(getComputedStyle(e).getPropertyValue("--kb-inset")||"0",10);t(s>0)};s();const n=new MutationObserver(s);n.observe(e,{attributes:!0,attributeFilter:["style"]});const r=window.visualViewport;return r?(r.addEventListener("resize",s),r.addEventListener("scroll",s)):window.addEventListener("resize",s),()=>{n.disconnect(),r?(r.removeEventListener("resize",s),r.removeEventListener("scroll",s)):window.removeEventListener("resize",s)}},[]),e}const It=(...e)=>e.filter(Boolean).join(" ");function $t({header:e,stickyHeader:t=!1,bottomBar:n,bottomBarSticky:r=!0,hideBottomBarOnKeyboard:a=!0,showHeaderBorder:i=!0,showBottomBarBorder:o=!0,maxContent:l="md",maxContentPx:c,maxContentClassName:d,padContent:u=!0,padHeader:h=!0,padBottomBar:m=!1,keyboardInsetVarName:p="--app-kb-inset",className:f="",contentClassName:g="",scrollAreaClassName:x="",headerShellClassName:v="",bottomBarShellClassName:y="",padHeaderSafeArea:b=!1,contentGuttersPreset:w="responsive",contentBottomPaddingClassName:k="",children:E,headerInScrollArea:S=!1,onScroll:j,backgroundImageSrc:N,backgroundOverlayClassName:C,disableSafeArea:T=!1}){Mt();const A=Dt(),_=function(){const[e,t]=s.useState(!1);return s.useEffect(()=>{const e=()=>{const e=document.activeElement,s=e instanceof HTMLInputElement&&("number"===e.type||"numeric"===e.inputMode);t(s)};return document.addEventListener("focusin",e),document.addEventListener("focusout",e),e(),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}},[]),e}(),R=s.useRef(null),P=s.useRef(null),M=s.useRef(null),D=A&&_,I=D?q.jsx("div",{className:"w-full flex justify-end",children:q.jsx("button",{className:"px-3 py-2 text-black text-lg bg-transparent border-0",onClick:()=>{var e;return null==(e=document.activeElement)?void 0:e.blur()},type:"button",children:"Done"})}):!n||a&&A?null:n;s.useLayoutEffect(()=>{if(!R.current)return;const t=()=>{var t,s;const n=(null==(t=P.current)?void 0:t.offsetHeight)??0,r=(null==(s=M.current)?void 0:s.offsetHeight)??0;R.current.style.setProperty("--app-header-h",`${e?n:0}px`),R.current.style.setProperty("--app-bottom-h",`${I?r:0}px`)},s=new ResizeObserver(t);return P.current&&s.observe(P.current),M.current&&s.observe(M.current),t(),()=>s.disconnect()},[e,I]);const $="number"==typeof c?"":"none"===(B=l)?"":"responsive"===B?"max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl xl:max-w-3xl 2xl:max-w-4xl":_t[B]??"";var B;const L=It("w-full",("none"!==l||"number"==typeof c)&&"mx-auto",$,d),O=s.useMemo(()=>"number"==typeof c?{maxWidth:c}:void 0,[c]),U=`var(${p}, var(--kb-inset, var(--keyboard-inset, 0px)))`,F="responsive"===w?"px-4 py-6 sm:px-6 md:px-8 md:py-8":"compact"===w?"px-4 py-4":u?"px-4":"",V=()=>q.jsx("div",{ref:P,className:It("shrink-0",t&&"sticky top-0 z-30","bg-background",i&&"border-b border-border",v),style:{paddingTop:b?"max(env(safe-area-inset-top), 0px)":void 0},children:q.jsx("div",{className:It(L,h&&"px-4"),style:O,children:e})});return q.jsxs("div",{ref:R,className:It("fixed inset-0 flex flex-col overflow-hidden overscroll-contain bg-background",f),style:{paddingLeft:"max(env(safe-area-inset-left), 0px)",paddingRight:"max(env(safe-area-inset-right), 0px)",paddingTop:T?0:void 0,paddingBottom:T?0:void 0},children:[N&&q.jsxs("div",{className:"absolute inset-0 -z-10",children:[q.jsx("img",{src:N,alt:"",className:"w-full h-full object-cover"}),C&&q.jsx("div",{className:It("absolute inset-0",C)})]}),e&&!S?V():null,q.jsxs("div",{className:It("flex-1 min-h-0 overflow-y-auto w-full",N?"bg-transparent":"bg-background",x),onScroll:j,children:[e&&S?V():null,q.jsx("div",{className:It(L,F,k,g),style:{...O,paddingBottom:I?"var(--app-bottom-h, 0px)":T?U:`calc(env(safe-area-inset-bottom) + ${U})`},children:E})]}),I?q.jsx("div",{ref:M,className:It("shrink-0",r&&"sticky bottom-0 z-30","bg-background",o&&"border-t border-border",y),style:D?{marginBottom:`calc(${U} - env(safe-area-inset-bottom))`}:{paddingBottom:U},children:q.jsx("div",{className:It(L,m&&"px-4 py-2"),style:O,children:I})}):null]})}function Bt(e){var t,s,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(s=Bt(e[t]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function Lt(){for(var e,t,s=0,n="",r=arguments.length;s<r;s++)(e=arguments[s])&&(t=Bt(e))&&(n&&(n+=" "),n+=t);return n}const Ot=e=>{const t=Ht(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{const s=e.split("-");return""===s[0]&&1!==s.length&&s.shift(),Ut(s,t)||Vt(e)},getConflictingClassGroupIds:(e,t)=>{const r=s[e]||[];return t&&n[e]?[...r,...n[e]]:r}}},Ut=(e,t)=>{var s;if(0===e.length)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?Ut(e.slice(1),r):void 0;if(a)return a;if(0===t.validators.length)return;const i=e.join("-");return null==(s=t.validators.find(({validator:e})=>e(i)))?void 0:s.classGroupId},Ft=/^\[(.+)\]$/,Vt=e=>{if(Ft.test(e)){const t=Ft.exec(e)[1],s=null==t?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},Ht=e=>{const{theme:t,classGroups:s}=e,n={nextPart:new Map,validators:[]};for(const r in s)Wt(s[r],n,r,t);return n},Wt=(e,t,s,n)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:zt(t,e)).classGroupId=s)}if("function"==typeof e)return Gt(e)?void Wt(e(n),t,s,n):void t.validators.push({validator:e,classGroupId:s});Object.entries(e).forEach(([e,r])=>{Wt(r,zt(t,e),s,n)})})},zt=(e,t)=>{let s=e;return t.split("-").forEach(e=>{s.nextPart.has(e)||s.nextPart.set(e,{nextPart:new Map,validators:[]}),s=s.nextPart.get(e)}),s},Gt=e=>e.isThemeGetter,qt=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,n=new Map;const r=(r,a)=>{s.set(r,a),t++,t>e&&(t=0,n=s,s=new Map)};return{get(e){let t=s.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(r(e,t),t):void 0},set(e,t){s.has(e)?s.set(e,t):r(e,t)}}},Yt=e=>{const{prefix:t,experimentalParseClassName:s}=e;let n=e=>{const t=[];let s,n=0,r=0,a=0;for(let l=0;l<e.length;l++){let i=e[l];if(0===n&&0===r){if(":"===i){t.push(e.slice(a,l)),a=l+1;continue}if("/"===i){s=l;continue}}"["===i?n++:"]"===i?n--:"("===i?r++:")"===i&&r--}const i=0===t.length?e:e.substring(a),o=Jt(i);return{modifiers:t,hasImportantModifier:o!==i,baseClassName:o,maybePostfixModifierPosition:s&&s>a?s-a:void 0}};if(t){const e=t+":",s=n;n=t=>t.startsWith(e)?s(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(s){const e=n;n=t=>s({className:t,parseClassName:e})}return n},Jt=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,Kt=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;const s=[];let n=[];return e.forEach(e=>{"["===e[0]||t[e]?(s.push(...n.sort(),e),n=[]):n.push(e)}),s.push(...n.sort()),s}},Xt=/\s+/;function Zt(){let e,t,s=0,n="";for(;s<arguments.length;)(e=arguments[s++])&&(t=Qt(e))&&(n&&(n+=" "),n+=t);return n}const Qt=e=>{if("string"==typeof e)return e;let t,s="";for(let n=0;n<e.length;n++)e[n]&&(t=Qt(e[n]))&&(s&&(s+=" "),s+=t);return s};function es(e,...t){let s,n,r,a=function(o){const l=t.reduce((e,t)=>t(e),e());return s=(e=>({cache:qt(e.cacheSize),parseClassName:Yt(e),sortModifiers:Kt(e),...Ot(e)}))(l),n=s.cache.get,r=s.cache.set,a=i,i(o)};function i(e){const t=n(e);if(t)return t;const a=((e,t)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:r,sortModifiers:a}=t,i=[],o=e.trim().split(Xt);let l="";for(let c=o.length-1;c>=0;c-=1){const e=o[c],{isExternal:t,modifiers:d,hasImportantModifier:u,baseClassName:h,maybePostfixModifierPosition:m}=s(e);if(t){l=e+(l.length>0?" "+l:l);continue}let p=!!m,f=n(p?h.substring(0,m):h);if(!f){if(!p){l=e+(l.length>0?" "+l:l);continue}if(f=n(h),!f){l=e+(l.length>0?" "+l:l);continue}p=!1}const g=a(d).join(":"),x=u?g+"!":g,v=x+f;if(i.includes(v))continue;i.push(v);const y=r(f,p);for(let s=0;s<y.length;++s){const e=y[s];i.push(x+e)}l=e+(l.length>0?" "+l:l)}return l})(e,s);return r(e,a),a}return function(){return a(Zt.apply(null,arguments))}}const ts=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},ss=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ns=/^\((?:(\w[\w-]*):)?(.+)\)$/i,rs=/^\d+\/\d+$/,as=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,is=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,os=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,ls=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,cs=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ds=e=>rs.test(e),us=e=>!!e&&!Number.isNaN(Number(e)),hs=e=>!!e&&Number.isInteger(Number(e)),ms=e=>e.endsWith("%")&&us(e.slice(0,-1)),ps=e=>as.test(e),fs=()=>!0,gs=e=>is.test(e)&&!os.test(e),xs=()=>!1,vs=e=>ls.test(e),ys=e=>cs.test(e),bs=e=>!ks(e)&&!Ts(e),ws=e=>Is(e,Os,xs),ks=e=>ss.test(e),Es=e=>Is(e,Us,gs),Ss=e=>Is(e,Fs,us),js=e=>Is(e,Bs,xs),Ns=e=>Is(e,Ls,ys),Cs=e=>Is(e,Hs,vs),Ts=e=>ns.test(e),As=e=>$s(e,Us),_s=e=>$s(e,Vs),Rs=e=>$s(e,Bs),Ps=e=>$s(e,Os),Ms=e=>$s(e,Ls),Ds=e=>$s(e,Hs,!0),Is=(e,t,s)=>{const n=ss.exec(e);return!!n&&(n[1]?t(n[1]):s(n[2]))},$s=(e,t,s=!1)=>{const n=ns.exec(e);return!!n&&(n[1]?t(n[1]):s)},Bs=e=>"position"===e||"percentage"===e,Ls=e=>"image"===e||"url"===e,Os=e=>"length"===e||"size"===e||"bg-size"===e,Us=e=>"length"===e,Fs=e=>"number"===e,Vs=e=>"family-name"===e,Hs=e=>"shadow"===e,Ws=es(()=>{const e=ts("color"),t=ts("font"),s=ts("text"),n=ts("font-weight"),r=ts("tracking"),a=ts("leading"),i=ts("breakpoint"),o=ts("container"),l=ts("spacing"),c=ts("radius"),d=ts("shadow"),u=ts("inset-shadow"),h=ts("text-shadow"),m=ts("drop-shadow"),p=ts("blur"),f=ts("perspective"),g=ts("aspect"),x=ts("ease"),v=ts("animate"),y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Ts,ks],b=()=>[Ts,ks,l],w=()=>[ds,"full","auto",...b()],k=()=>[hs,"none","subgrid",Ts,ks],E=()=>["auto",{span:["full",hs,Ts,ks]},hs,Ts,ks],S=()=>[hs,"auto",Ts,ks],j=()=>["auto","min","max","fr",Ts,ks],N=()=>["auto",...b()],C=()=>[ds,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...b()],T=()=>[e,Ts,ks],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Rs,js,{position:[Ts,ks]}],_=()=>["auto","cover","contain",Ps,ws,{size:[Ts,ks]}],R=()=>[ms,As,Es],P=()=>["","none","full",c,Ts,ks],M=()=>["",us,As,Es],D=()=>[us,ms,Rs,js],I=()=>["","none",p,Ts,ks],$=()=>["none",us,Ts,ks],B=()=>["none",us,Ts,ks],L=()=>[us,Ts,ks],O=()=>[ds,"full",...b()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ps],breakpoint:[ps],color:[fs],container:[ps],"drop-shadow":[ps],ease:["in","out","in-out"],font:[bs],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ps],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ps],shadow:[ps],spacing:["px",us],text:[ps],"text-shadow":[ps],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ds,ks,Ts,g]}],container:["container"],columns:[{columns:[us,ks,Ts,o]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:y()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[hs,"auto",Ts,ks]}],basis:[{basis:[ds,"full","auto",o,...b()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[us,ds,"auto","initial","none",ks]}],grow:[{grow:["",us,Ts,ks]}],shrink:[{shrink:["",us,Ts,ks]}],order:[{order:[hs,"first","last","none",Ts,ks]}],"grid-cols":[{"grid-cols":k()}],"col-start-end":[{col:E()}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":k()}],"row-start-end":[{row:E()}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":j()}],"auto-rows":[{"auto-rows":j()}],gap:[{gap:b()}],"gap-x":[{"gap-x":b()}],"gap-y":[{"gap-y":b()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:b()}],px:[{px:b()}],py:[{py:b()}],ps:[{ps:b()}],pe:[{pe:b()}],pt:[{pt:b()}],pr:[{pr:b()}],pb:[{pb:b()}],pl:[{pl:b()}],m:[{m:N()}],mx:[{mx:N()}],my:[{my:N()}],ms:[{ms:N()}],me:[{me:N()}],mt:[{mt:N()}],mr:[{mr:N()}],mb:[{mb:N()}],ml:[{ml:N()}],"space-x":[{"space-x":b()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":b()}],"space-y-reverse":["space-y-reverse"],size:[{size:C()}],w:[{w:[o,"screen",...C()]}],"min-w":[{"min-w":[o,"screen","none",...C()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[i]},...C()]}],h:[{h:["screen","lh",...C()]}],"min-h":[{"min-h":["screen","lh","none",...C()]}],"max-h":[{"max-h":["screen","lh",...C()]}],"font-size":[{text:["base",s,As,Es]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Ts,Ss]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ms,ks]}],"font-family":[{font:[_s,ks,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Ts,ks]}],"line-clamp":[{"line-clamp":[us,"none",Ts,Ss]}],leading:[{leading:[a,...b()]}],"list-image":[{"list-image":["none",Ts,ks]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ts,ks]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:T()}],"text-color":[{text:T()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[us,"from-font","auto",Ts,Es]}],"text-decoration-color":[{decoration:T()}],"underline-offset":[{"underline-offset":[us,"auto",Ts,ks]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:b()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ts,ks]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ts,ks]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:A()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:_()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},hs,Ts,ks],radial:["",Ts,ks],conic:[hs,Ts,ks]},Ms,Ns]}],"bg-color":[{bg:T()}],"gradient-from-pos":[{from:R()}],"gradient-via-pos":[{via:R()}],"gradient-to-pos":[{to:R()}],"gradient-from":[{from:T()}],"gradient-via":[{via:T()}],"gradient-to":[{to:T()}],rounded:[{rounded:P()}],"rounded-s":[{"rounded-s":P()}],"rounded-e":[{"rounded-e":P()}],"rounded-t":[{"rounded-t":P()}],"rounded-r":[{"rounded-r":P()}],"rounded-b":[{"rounded-b":P()}],"rounded-l":[{"rounded-l":P()}],"rounded-ss":[{"rounded-ss":P()}],"rounded-se":[{"rounded-se":P()}],"rounded-ee":[{"rounded-ee":P()}],"rounded-es":[{"rounded-es":P()}],"rounded-tl":[{"rounded-tl":P()}],"rounded-tr":[{"rounded-tr":P()}],"rounded-br":[{"rounded-br":P()}],"rounded-bl":[{"rounded-bl":P()}],"border-w":[{border:M()}],"border-w-x":[{"border-x":M()}],"border-w-y":[{"border-y":M()}],"border-w-s":[{"border-s":M()}],"border-w-e":[{"border-e":M()}],"border-w-t":[{"border-t":M()}],"border-w-r":[{"border-r":M()}],"border-w-b":[{"border-b":M()}],"border-w-l":[{"border-l":M()}],"divide-x":[{"divide-x":M()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":M()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:T()}],"border-color-x":[{"border-x":T()}],"border-color-y":[{"border-y":T()}],"border-color-s":[{"border-s":T()}],"border-color-e":[{"border-e":T()}],"border-color-t":[{"border-t":T()}],"border-color-r":[{"border-r":T()}],"border-color-b":[{"border-b":T()}],"border-color-l":[{"border-l":T()}],"divide-color":[{divide:T()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[us,Ts,ks]}],"outline-w":[{outline:["",us,As,Es]}],"outline-color":[{outline:T()}],shadow:[{shadow:["","none",d,Ds,Cs]}],"shadow-color":[{shadow:T()}],"inset-shadow":[{"inset-shadow":["none",u,Ds,Cs]}],"inset-shadow-color":[{"inset-shadow":T()}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:T()}],"ring-offset-w":[{"ring-offset":[us,Es]}],"ring-offset-color":[{"ring-offset":T()}],"inset-ring-w":[{"inset-ring":M()}],"inset-ring-color":[{"inset-ring":T()}],"text-shadow":[{"text-shadow":["none",h,Ds,Cs]}],"text-shadow-color":[{"text-shadow":T()}],opacity:[{opacity:[us,Ts,ks]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[us]}],"mask-image-linear-from-pos":[{"mask-linear-from":D()}],"mask-image-linear-to-pos":[{"mask-linear-to":D()}],"mask-image-linear-from-color":[{"mask-linear-from":T()}],"mask-image-linear-to-color":[{"mask-linear-to":T()}],"mask-image-t-from-pos":[{"mask-t-from":D()}],"mask-image-t-to-pos":[{"mask-t-to":D()}],"mask-image-t-from-color":[{"mask-t-from":T()}],"mask-image-t-to-color":[{"mask-t-to":T()}],"mask-image-r-from-pos":[{"mask-r-from":D()}],"mask-image-r-to-pos":[{"mask-r-to":D()}],"mask-image-r-from-color":[{"mask-r-from":T()}],"mask-image-r-to-color":[{"mask-r-to":T()}],"mask-image-b-from-pos":[{"mask-b-from":D()}],"mask-image-b-to-pos":[{"mask-b-to":D()}],"mask-image-b-from-color":[{"mask-b-from":T()}],"mask-image-b-to-color":[{"mask-b-to":T()}],"mask-image-l-from-pos":[{"mask-l-from":D()}],"mask-image-l-to-pos":[{"mask-l-to":D()}],"mask-image-l-from-color":[{"mask-l-from":T()}],"mask-image-l-to-color":[{"mask-l-to":T()}],"mask-image-x-from-pos":[{"mask-x-from":D()}],"mask-image-x-to-pos":[{"mask-x-to":D()}],"mask-image-x-from-color":[{"mask-x-from":T()}],"mask-image-x-to-color":[{"mask-x-to":T()}],"mask-image-y-from-pos":[{"mask-y-from":D()}],"mask-image-y-to-pos":[{"mask-y-to":D()}],"mask-image-y-from-color":[{"mask-y-from":T()}],"mask-image-y-to-color":[{"mask-y-to":T()}],"mask-image-radial":[{"mask-radial":[Ts,ks]}],"mask-image-radial-from-pos":[{"mask-radial-from":D()}],"mask-image-radial-to-pos":[{"mask-radial-to":D()}],"mask-image-radial-from-color":[{"mask-radial-from":T()}],"mask-image-radial-to-color":[{"mask-radial-to":T()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[us]}],"mask-image-conic-from-pos":[{"mask-conic-from":D()}],"mask-image-conic-to-pos":[{"mask-conic-to":D()}],"mask-image-conic-from-color":[{"mask-conic-from":T()}],"mask-image-conic-to-color":[{"mask-conic-to":T()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:A()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:_()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ts,ks]}],filter:[{filter:["","none",Ts,ks]}],blur:[{blur:I()}],brightness:[{brightness:[us,Ts,ks]}],contrast:[{contrast:[us,Ts,ks]}],"drop-shadow":[{"drop-shadow":["","none",m,Ds,Cs]}],"drop-shadow-color":[{"drop-shadow":T()}],grayscale:[{grayscale:["",us,Ts,ks]}],"hue-rotate":[{"hue-rotate":[us,Ts,ks]}],invert:[{invert:["",us,Ts,ks]}],saturate:[{saturate:[us,Ts,ks]}],sepia:[{sepia:["",us,Ts,ks]}],"backdrop-filter":[{"backdrop-filter":["","none",Ts,ks]}],"backdrop-blur":[{"backdrop-blur":I()}],"backdrop-brightness":[{"backdrop-brightness":[us,Ts,ks]}],"backdrop-contrast":[{"backdrop-contrast":[us,Ts,ks]}],"backdrop-grayscale":[{"backdrop-grayscale":["",us,Ts,ks]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[us,Ts,ks]}],"backdrop-invert":[{"backdrop-invert":["",us,Ts,ks]}],"backdrop-opacity":[{"backdrop-opacity":[us,Ts,ks]}],"backdrop-saturate":[{"backdrop-saturate":[us,Ts,ks]}],"backdrop-sepia":[{"backdrop-sepia":["",us,Ts,ks]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":b()}],"border-spacing-x":[{"border-spacing-x":b()}],"border-spacing-y":[{"border-spacing-y":b()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ts,ks]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[us,"initial",Ts,ks]}],ease:[{ease:["linear","initial",x,Ts,ks]}],delay:[{delay:[us,Ts,ks]}],animate:[{animate:["none",v,Ts,ks]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[f,Ts,ks]}],"perspective-origin":[{"perspective-origin":y()}],rotate:[{rotate:$()}],"rotate-x":[{"rotate-x":$()}],"rotate-y":[{"rotate-y":$()}],"rotate-z":[{"rotate-z":$()}],scale:[{scale:B()}],"scale-x":[{"scale-x":B()}],"scale-y":[{"scale-y":B()}],"scale-z":[{"scale-z":B()}],"scale-3d":["scale-3d"],skew:[{skew:L()}],"skew-x":[{"skew-x":L()}],"skew-y":[{"skew-y":L()}],transform:[{transform:[Ts,ks,"","none","gpu","cpu"]}],"transform-origin":[{origin:y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:O()}],"translate-x":[{"translate-x":O()}],"translate-y":[{"translate-y":O()}],"translate-z":[{"translate-z":O()}],"translate-none":["translate-none"],accent:[{accent:T()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:T()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ts,ks]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ts,ks]}],fill:[{fill:["none",...T()]}],"stroke-w":[{stroke:[us,As,Es,Ss]}],stroke:[{stroke:["none",...T()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function zs(...e){return Ws(Lt(e))}function Gs({onClick:e,className:t,iconSize:s=24,ariaLabel:n="Go back"}){return q.jsx("button",{onClick:e,"aria-label":n,className:zs("p-0 m-0 bg-transparent border-0 text-black",t),children:q.jsx(i,{size:s})})}const qs={className:"p-0 m-0 bg-transparent border-0 text-black"};function Ys({title:e,subtitle:t,onBack:s,right:n,onAdd:r,sticky:a=!1,dense:i=!1,denseSmall:l=!0,showBorder:c=!1,className:d="",reserveLeftPx:u=44,reserveRightPx:h=44,padSafeArea:m=!1,contentHeightPx:p=0,titleClassName:f="",subtitleClassName:g=""}){const x=l?"compactTiny":i?"compact":"comfortable",{py:v,minH:y}={compactTiny:{py:"py-1.5",minH:"min-h-[44px]"},compact:{py:"py-2",minH:"min-h-[52px]"},comfortable:{py:"py-3",minH:"min-h-[64px]"}}[x],b=0!==p,w=Lt(a&&"sticky top-0 z-30","relative w-full bg-background",m&&"pt-safe",c&&"border-b border-border",d),k=Lt("relative flex items-center w-full",!b&&y,!b&&v),E=`calc(100% - ${u+h}px)`;return q.jsx("header",{className:w,children:q.jsxs("div",{className:k,style:b?{height:p}:void 0,children:[q.jsx("div",{className:"shrink-0 flex items-center",style:{width:u},children:s?q.jsx(Gs,{onClick:s,...qs,iconSize:28}):null}),q.jsxs("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center m-0 pt-2 pb-2",style:{maxWidth:E},children:[q.jsx("h1",{className:Lt("font-medium leading-1.5 text-black truncate text-[clamp(16px,4.2vw,28px)]",f),children:e}),t?q.jsx("p",{className:Lt("mt-1",g??"text-xs text-black"),children:t}):null]}),q.jsx("div",{className:"ml-auto shrink-0 flex items-center justify-end",style:{width:h},children:n??(r?q.jsx("button",{onClick:r,"aria-label":"Add",...qs,children:q.jsx(o,{size:28})}):null)})]})})}const Js={none:"p-0",xs:"p-2",sm:"p-3",md:"p-4",lg:"p-6"},Ks={none:"rounded-none",sm:"rounded-md",md:"rounded-lg",lg:"rounded-xl",xl:"rounded-2xl","2xl":"rounded-2xl"},Xs={none:"shadow-none",sm:"shadow-sm",md:"shadow-md"},Zs={transparent:"bg-transparent",card:"bg-card",muted:"bg-soft-gray/30",translucent:"bg-card/80 backdrop-blur-sm"},Qs={none:"",top:"border-t border-border",bottom:"border-b border-border",both:"border-y border-border"},en={plain:"bg-transparent shadow-none rounded-none",card:"bg-card shadow-sm rounded-2xl",panel:"bg-card shadow-md rounded-2xl border border-border",translucent:"bg-card/80 backdrop-blur-sm shadow-sm rounded-2xl",muted:"bg-soft-gray/30 rounded-2xl shadow-none"};function tn({title:e,subtitle:t,actions:n,padding:r="md",radius:a="2xl",shadow:i="none",bg:o="transparent",divider:l="none",variant:c="plain",bleedX:d=!1,loading:u=!1,loadingBehavior:h="overlay",skeleton:m,className:p="",as:f,children:g,...x}){const v=f||"section",y=s.useId(),b=["w-full relative",c?en[c]:"",Zs[o],Ks[a],Xs[i],Js[r],Qs[l],d?"-mx-4 sm:mx-0":"",p].filter(Boolean).join(" "),w=e||n||t,k=u&&"replace"===h?m??q.jsxs("div",{className:"animate-pulse",children:[w&&q.jsxs("div",{className:"mb-3",children:[q.jsx("div",{className:"h-4 w-1/3 bg-foreground/10 rounded"}),q.jsx("div",{className:"mt-2 h-3 w-1/2 bg-foreground/5 rounded"})]}),q.jsx("div",{className:"h-24 bg-foreground/5 rounded"})]}):g;return q.jsxs(v,{className:b,"aria-labelledby":e?y:void 0,"aria-busy":u||void 0,...x,children:[w&&q.jsxs("div",{className:"mb-3 flex items-start gap-3",children:[q.jsxs("div",{className:"min-w-0 flex-1",children:[e?q.jsx("h2",{id:y,className:"font-medium text-black truncate",children:e}):null,t?q.jsx("p",{className:"text-sm text-black mt-0.5 truncate",children:t}):null]}),n?q.jsx("div",{className:"shrink-0",children:n}):null]}),k,u&&"overlay"===h&&q.jsx("div",{className:"absolute inset-0 rounded-inherit bg-card/60 backdrop-blur-[2px] grid place-items-center pointer-events-none",children:q.jsxs("div",{className:"flex items-center gap-2 text-black",children:[q.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-warm-coral border-t-transparent rounded-full"}),q.jsx("span",{className:"text-sm",children:"Loading…"})]})})]})}const sn=e=>{switch(e){case"xss":return"var(--space-xss, 8px)";case"xs":return"var(--space-xs, 12px)";case"sm":return"var(--space-sm, 16px)";case"md":return"var(--space-md, 22px)";case"lg":return"var(--space-lg, 28px)";case"xl":return"var(--space-xl, 40px)";case"fluid":return"var(--space-fluid, 20px)"}};function nn({y:e,x:t,as:s,className:n="",...r}){const a=s||"div",i={...e?{height:sn(e)}:null,...t?{width:sn(t)}:null},o=["shrink-0",n].filter(Boolean).join(" ");return q.jsx(a,{"aria-hidden":!0,className:o,style:i,...r})}const rn=e=>{switch(e){case"xss":return"var(--space-xss, 8px)";case"xs":return"var(--space-xs, 12px)";case"sm":return"var(--space-sm, 16px)";case"md":return"var(--space-md, 22px)";case"lg":return"var(--space-lg, 28px)";case"xl":return"var(--space-xl, 40px)";case"fluid":return"var(--space-fluid, 20px)"}},an={start:"items-start",center:"items-center",end:"items-end",stretch:"items-stretch",baseline:"items-baseline"},on={start:"justify-start",center:"justify-center",end:"justify-end",between:"justify-between",around:"justify-around",evenly:"justify-evenly"};function ln({direction:e="y",gap:t="sm",gapMode:n="gap",wrap:r=!1,align:a="stretch",justify:i="start",as:o,className:l="",children:c,...d}){const u=o||"div",h=["flex","y"===e?"flex-col":"flex-row",r&&"flex-wrap",an[a],on[i],l].filter(Boolean).join(" ");if("gap"===n)return q.jsx(u,{className:h,style:{gap:rn(t)},...d,children:c});const m=s.Children.toArray(c),p=m.length<=1?m:m.flatMap((s,n)=>0===n?[s]:["y"===e?q.jsx(nn,{y:t},`s-${n}`):q.jsx(nn,{x:t},`s-${n}`),s]);return q.jsx(u,{className:h,...d,children:p})}const cn={accent:{text:"text-black",border:"border-warm-coral",bgSoft:"bg-warm-coral/14",bgHover:"hover:bg-warm-coral/12"},sage:{text:"text-black",border:"border-[var(--warm-sage)]",bgSoft:"bg-[var(--warm-sage)]/14",bgHover:"hover:bg-[var(--warm-sage)]/12"},brown:{text:"text-black",border:"border-black",bgSoft:"bg-black/10",bgHover:"hover:bg-black/8"}};function dn({value:e,onChange:t,options:s,size:n="sm",variant:r="direct",tone:a="accent",className:i}){const o="sm"===n?{pad:"px-3 py-1.5",text:"text-[13px]"}:{pad:"px-4 py-2",text:"text-sm"},l=cn[a];return q.jsx("div",{role:"tablist","aria-label":"Segmented toggle",className:Lt("inline-flex items-center rounded-lg border border-border bg-card/70 backdrop-blur-sm p-0.5 gap-1",i),children:s.map(s=>{const n=s.value===e,a=Lt(o.pad,o.text,"font-medium border",l.bgSoft,l.border,l.text),i=Lt(o.pad,o.text,"border border-transparent","text-black","hover:text-black",l.bgHover),c=Lt(o.pad,o.text,"font-medium text-black",l.border,"bg-primary"),d=Lt(o.pad,o.text,"text-black","hover:text-black"),u="direct"===r?n?a:i:n?c:d;return q.jsx("button",{role:"tab","aria-selected":n,className:Lt("relative isolate rounded-md transition-colors select-none focus:outline-none focus-visible:ring-2 focus-visible:ring-black/20",u),onClick:()=>t(s.value),children:s.label},String(s.value))})})}const un=5,hn=e=>{const t=(e??"").toString().trim();return t?/^(unknown|undefined|null|n\/a)$/i.test(t)?"":t:""};async function mn(e,t={}){const{concurrency:s=un,timer:n=Me}=t,r=n.start("routineLoader - load routine exercises");try{const t=n.start("routineLoader - fetch routine exercises"),r=await Je.getUserRoutineExercisesWithDetails(e);t.endWithLog();const a=n.start("routineLoader - fetch exercise meta"),i=new Map;await Promise.all(r.map(async e=>{const t=!!hn(e.exercise_name),s=!!hn(e.muscle_group);if(!t||!s)try{const t=await Je.getExercise(e.exercise_id);t&&i.set(e.exercise_id,t)}catch(n){re("Failed to fetch exercise meta",e.exercise_id,n)}})),a.endWithLog();const o=[];for(let e=0;e<r.length;e+=s)o.push(r.slice(e,e+s));const l=[];for(const e of o){const t=await Promise.all(e.map(e=>Je.getExerciseSetsForRoutine(e.routine_template_exercise_id).then(e=>e.sort((e,t)=>(e.set_order||0)-(t.set_order||0)).map(e=>({id:e.routine_template_exercise_set_id,set_order:e.set_order??0,reps:String(e.planned_reps??"0"),weight:String(e.planned_weight_kg??"0")}))).catch(t=>(re("Failed to fetch sets for",e.routine_template_exercise_id,t),[]))));e.forEach((e,s)=>{const n=hn(e.exercise_name),r=hn(e.muscle_group),a=n&&r?void 0:i.get(e.exercise_id),o=n||hn(null==a?void 0:a.name),c=r||hn(null==a?void 0:a.muscle_group);l.push({templateId:e.routine_template_exercise_id,exerciseId:e.exercise_id,name:o,muscle_group:c||void 0,sets:t[s]})})}return l}finally{r.endWithLog()}}const pn=e=>"number"==typeof e?`${e}px`:e,fn=(e,t)=>{if(void 0===e&&void 0===t)return;const s=void 0!==e?pn(e):void 0,n=void 0!==t?pn(t):void 0;if(!n||"0"===n||"0px"===n)return s;if(!s||"0"===s||"0px"===s)return n;return"string"==typeof s&&["auto","fit-content","max-content","min-content"].includes(s)?s:`calc(${s} + ${n})`};function gn({actions:e,onOpenChange:t,backdropWidth:n,backdropWidthOffset:r,backdropHeight:a,backdropHeightOffset:i,backdropFadeDuration:l=400}){const[c,d]=s.useState(!1),[u,h]=s.useState(!1),m=s.useRef(null),[p,f]=s.useState({width:0,height:0});s.useLayoutEffect(()=>{if(!c||!m.current)return;const e=()=>{const e=m.current;if(!e)return;const t=e.getBoundingClientRect();f({width:t.width,height:t.height})};let t=null;const s=()=>{null!==t&&cancelAnimationFrame(t),t=window.requestAnimationFrame(()=>{e(),t=null})};e();const n="undefined"!=typeof ResizeObserver?new ResizeObserver(()=>s()):null,r=m.current;n&&r&&n.observe(r);const a=()=>s();return window.addEventListener("resize",a),()=>{n&&r&&(n.unobserve(r),n.disconnect()),window.removeEventListener("resize",a),null!==t&&cancelAnimationFrame(t)}},[c]);const g=void 0===n?p.width>0?p.width:void 0:n,x=void 0===a?p.height>0?p.height:void 0:a,v=fn(g,r),y=fn(x,i);s.useEffect(()=>{let e;return c?h(!0):u&&(e=setTimeout(()=>h(!1),l)),()=>{e&&clearTimeout(e)}},[c,u,l]);return q.jsx("div",{className:"fixed right-4 bottom-20 z-40",children:q.jsxs("div",{className:"flex flex-col items-end "+(c?"gap-4":""),children:[q.jsxs("div",{ref:m,className:"relative",children:[u&&q.jsx("div",{className:"pointer-events-none absolute right-0 bottom-0 translate-x-6 rounded-[36px] bg-white/90 shadow-xl blur-lg transition-all ease-out -z-10 transform "+(c?"opacity-100 scale-100":"opacity-0 scale-95"),style:{width:v,height:y,transitionDuration:`${l}ms`}}),c&&q.jsx("div",{className:"flex flex-col items-end gap-4 z-10",children:e.map(e=>q.jsxs("button",{onClick:()=>{d(!1),null==t||t(!1),e.onPress()},className:"flex items-center gap-3",children:[q.jsx("span",{className:"uppercase whitespace-nowrap text-black text-xl font-bold tracking-wide",style:{textShadow:"0 2px 2px rgba(0,0,0,0.3)"},children:e.label}),e.icon&&q.jsx("span",{className:"w-12 h-12 rounded-full bg-primary text-black shadow flex items-center justify-center",children:e.icon})]},e.label))})]}),q.jsx("button",{onClick:()=>{d(e=>{const s=!e;return null==t||t(s),s})},"aria-label":"Speed dial","aria-expanded":c,className:"\n            relative z-20 w-16 h-16 rounded-full bg-primary text-black\n            shadow-lg flex items-center justify-center\n            transition-transform\n          ",children:q.jsx(o,{className:"w-6 h-6 transition-transform "+(c?"rotate-45":"")})})]})})}function xn({children:e,variant:t="primary",size:s="md",className:n,...r}){return q.jsx("button",{className:zs({primary:"btn-tactile bg-primary hover:bg-primary-hover text-black",secondary:"btn-tactile bg-warm-cream hover:bg-warm-cream/90 text-black",sage:"btn-tactile bg-warm-sage hover:bg-warm-sage/90 text-black btn-tactile-sage",peach:"btn-tactile bg-warm-peach hover:bg-warm-peach/90 text-black",mint:"btn-tactile bg-warm-mint hover:bg-warm-mint/90 text-black",ghost:"bg-transparent hover:bg-transparent text-black shadow-none hover:shadow-none active:shadow-none rounded-none transition-none hover:translate-y-0 active:translate-y-0"}[t],{sm:"px-3 py-2 text-sm",md:"px-4 py-3",lg:"px-6 py-4 text-lg"}[s],n),...r,children:e})}function vn({as:e="div",leading:t,leadingClassName:s="w-12 h-12 rounded-xl bg-black/10 flex items-center justify-center",primary:n,primaryClassName:r="text-base font-semibold text-black",secondary:a,secondaryClassName:i="text-sm text-black",tertiary:o,tertiaryClassName:d="text-sm text-black",trailing:u,rightIcon:h,rightIconRotated:m=!1,onRightIconClick:p,className:f="",...g}){const x=!!a||!!o?"py-4":"py-3",v="button"===e?"w-full text-left focus:outline-none":"",y="button"===e?"button":"div";return q.jsxs(y,{className:`flex items-center gap-3 ${x} ${v} ${f}`,...g,children:[t&&q.jsx("div",{className:`shrink-0 ${s}`,children:t}),q.jsxs("div",{className:"flex-1 min-w-0",children:[q.jsx("div",{className:`${r} truncate`,children:n}),a&&q.jsx("div",{className:`${i} truncate`,children:a}),o&&q.jsx("div",{className:`${d} truncate`,children:o})]}),u,h&&q.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),null==p||p(e)},className:"ml-2 text-black",children:"kebab"===h?q.jsx(l,{size:18}):q.jsx(c,{size:18,className:m?"transform rotate-180":""})})]})}var yn=(e=>(e.Editable="editable",e.ReadOnly="readonly",e))(yn||{});var bn=(e=>(e.My="my",e.Sample="sample",e))(bn||{});const wn=[{bg:"bg-soft-gray",iconBg:"bg-warm-coral",emoji:"🏋️"},{bg:"bg-[var(--warm-cream)]",iconBg:"bg-black",emoji:"🏃"},{bg:"bg-soft-gray",iconBg:"bg-[var(--warm-sage)]",emoji:"🧘"},{bg:"bg-[var(--warm-cream)]",iconBg:"bg-warm-coral",emoji:"🤸"},{bg:"bg-soft-gray",iconBg:"bg-black",emoji:"🔥"}];function kn({routines:e,routinesError:t,isLoading:s,reloadRoutines:n,view:r,exerciseCounts:a,loadingCounts:i,canEdit:o,onSelectRoutine:l,openActions:c}){return q.jsx(tn,{variant:"plain",padding:"none",className:"space-y-3",loading:s,loadingBehavior:"replace",children:!s&&q.jsx(q.Fragment,{children:t?q.jsx(tn,{variant:"card",title:"Error Loading Routines",actions:q.jsx(xn,{onClick:n,variant:"secondary",className:"px-4 py-2 text-sm rounded-xl border-0 font-medium",children:"Try Again"}),children:q.jsxs("div",{className:"text-center py-4",children:[q.jsx("div",{className:"w-12 h-12 mx-auto mb-3 bg-destructive-light rounded-full flex items-center justify-center",children:q.jsx(d,{className:"w-5 h-5 text-black"})}),q.jsx("p",{className:"text-black text-sm",children:t})]})}):0===e.length?q.jsx(tn,{variant:"card",className:"text-center",children:q.jsx("p",{className:"text-black text-sm",children:r===bn.My?"Start by adding a new routine":"No sample routines found"})}):q.jsx("div",{className:"space-y-3",children:e.map((e,t)=>{var s;const n=wn[t%wn.length],d=(null==(s=e.muscle_group_summary)?void 0:s.trim())||"—",m=a[e.routine_template_id]??0,p=m>0?10*m:null,f=r===bn.My?yn.Editable:yn.ReadOnly;return q.jsx("button",{onClick:()=>l(e.routine_template_id,e.name,f),className:"w-full rounded-2xl border border-border card-modern shadow-xl hover:shadow-xl transition-all text-left",style:{border:"2px solid var(--border)"},children:q.jsx(vn,{leading:q.jsx("div",{className:`w-8 h-8 ${n.iconBg} rounded-lg grid place-items-center text-black text-lg`,children:q.jsx("span",{children:n.emoji})}),leadingClassName:`w-12 h-12 rounded-xl flex items-center justify-center ${n.bg}`,primary:e.name,secondary:d,tertiary:q.jsxs("div",{className:"mt-2 flex items-center gap-4 text-black",children:[q.jsxs("span",{className:"inline-flex items-center gap-1",children:[q.jsx(u,{size:14}),i?"—":null!==p?`${p} min`:"—"]}),q.jsxs("span",{className:"inline-flex items-center gap-1",children:[q.jsx(h,{size:14}),i?"—":`${m} exercise${1===m?"":"s"}`]})]}),primaryClassName:"font-medium text-black text-[clamp(16px,4.5vw,19px)]",secondaryClassName:"text-[clamp(11px,3.2vw,12px)] text-black",tertiaryClassName:"text-[clamp(11px,3.2vw,12px)]",className:"p-4",rightIcon:o?"kebab":void 0,onRightIconClick:t=>c(e,t)})},e.routine_template_id)})})})})}const En=(...e)=>e.filter(Boolean).join(" ");function Sn({open:e,onClose:t,header:s,footer:n,children:r,maxWidthClassName:a="max-w-md",className:i="",innerClassName:o="",zIndex:l=60,closeOnBackdrop:c=!0,fullWidth:d=!1}){if(!e)return null;Mt();const u="var(--app-kb-inset, var(--kb-inset, var(--keyboard-inset, 0px)))";return q.jsxs("div",{className:En("fixed inset-0",i),style:{zIndex:l},"aria-modal":"true",role:"dialog",onClick:c?t:void 0,children:[q.jsx("div",{className:"absolute inset-0 bg-overlay/30 backdrop-blur-[2px]"}),q.jsx("div",{className:"absolute inset-x-0 bottom-0",onClick:e=>e.stopPropagation(),children:q.jsx("div",{className:En("w-full",d?"px-0 max-w-none":En("mx-auto px-4",a)),children:q.jsxs("div",{className:En("bg-card rounded-t-2xl shadow-2xl border-t border-x border-border overflow-hidden",o),children:[q.jsx("div",{className:"flex justify-center py-2",children:q.jsx("div",{className:"h-1.5 w-10 rounded-full bg-border"})}),s?q.jsx("div",{className:"px-4 pb-2",children:s}):null,q.jsx("div",{className:"overflow-y-auto",style:{maxHeight:`calc(85svh - ${u})`,paddingBottom:n?u:`calc(var(--app-bottom-h, 0px) + env(safe-area-inset-bottom) + ${u})`},children:r}),n?q.jsx("div",{className:"px-4 pt-2",style:{paddingBottom:`calc(var(--app-bottom-h, 0px) + env(safe-area-inset-bottom) + ${u})`},children:n}):null]})})})]})}function jn({open:e,onClose:t,title:s,message:n,actions:r,cancelText:a="Cancel",zIndex:i=60,fullWidth:o=!0,children:l}){const c=s?q.jsx("div",{className:"text-center",children:"string"==typeof s?q.jsx("h3",{className:"font-medium text-black text-[clamp(14px,3.8vw,18px)]",children:s}):s}):void 0;return q.jsx(Sn,{open:e,onClose:t,header:c,footer:null!==a?q.jsx(xn,{variant:"secondary",className:"w-full py-3 rounded-xl border-0 font-medium",onClick:t,children:a}):null,zIndex:i,fullWidth:o,children:q.jsxs("div",{className:"p-4 space-y-4",children:[n&&q.jsx("p",{className:"text-sm text-black",children:n}),l,q.jsx("div",{className:"space-y-3",children:r.map((e,t)=>"button"===e.type?q.jsx(xn,{onClick:e.onClick,disabled:e.disabled,variant:"secondary"===e.variant?"secondary":"primary",className:zs("w-full rounded-xl border-0 font-medium","destructive"===e.variant&&"bg-destructive hover:bg-destructive/90 text-black"),children:q.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.icon,q.jsx("span",{children:e.label})]})},t):q.jsxs("button",{className:zs("flex w-full items-center gap-3 px-4 py-3 text-left hover:bg-gray-50","destructive"===e.variant&&"text-black hover:bg-destructive-light"),onClick:e.onClick,disabled:e.disabled,children:[e.icon,q.jsx("span",{children:e.label})]},t))})]})})}function Nn({routine:e,onClose:t,reloadRoutines:n}){const[r,a]=s.useState("main"),[i,o]=s.useState(""),[l,c]=s.useState(!1),[d,u]=s.useState(!1);if(s.useEffect(()=>{e&&(a("main"),o(e.name),c(!1),u(!1))},[e]),!e)return null;const h=async()=>{i.trim()&&(c(!0),await Je.renameRoutine(e.routine_template_id,i.trim()),await n(),ot.success("Routine renamed"),c(!1),t())};return q.jsxs(q.Fragment,{children:["main"===r&&q.jsx(jn,{open:!!e,onClose:t,title:e.name,actions:[{label:"Rename Routine",onClick:()=>a("rename"),type:"button"},{label:"Delete Routine",onClick:()=>a("delete"),type:"button",variant:"destructive"}]}),"rename"===r&&q.jsx(jn,{open:!!e,onClose:t,title:"Rename Routine",cancelText:null,actions:[{label:l?"Saving…":"Save",onClick:h,type:"button",disabled:!i.trim()||l},{label:"Cancel",onClick:()=>a("main"),type:"button",variant:"secondary",disabled:l}],children:q.jsxs("div",{className:"space-y-3",children:[q.jsx("label",{className:"text-sm text-black",children:"New name"}),q.jsx("input",{autoFocus:!0,value:i,onChange:e=>o(e.target.value),className:"w-full rounded-lg border border-border px-3 py-2 outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",placeholder:"Enter routine name",onKeyDown:async e=>{"Enter"!==e.key||l||await h()}})]})}),"delete"===r&&q.jsx(jn,{open:!!e,onClose:t,title:`Delete ${e.name}?`,cancelText:null,message:"This will remove it from your list",actions:[{label:d?"Deleting…":"Delete",onClick:async()=>{u(!0),await Je.deleteRoutine(e.routine_template_id),await n(),ot.success("Routine deleted"),u(!1),t()},type:"button",variant:"destructive",disabled:d},{label:"Cancel",onClick:()=>a("main"),type:"button",variant:"secondary",disabled:d}]})]})}function Cn({onCreateRoutine:e,onEditMeasurements:t,onSelectRoutine:n,onOverlayChange:r,bottomBar:a}){const{userToken:i}=xt(),[o,l]=s.useState(bn.My),[c,d]=s.useState([]),[u,h]=s.useState(!0),[f,g]=s.useState(null),[x,v]=s.useState({}),[y,b]=s.useState(!1),[w,k]=s.useState(null),[E,S]=s.useState(null),{steps:j,goal:N,isLoading:C}=St(),T=o===bn.My,A=async(e=o)=>{h(!0),g(null);try{const t=e===bn.My?await Je.getUserRoutines():await Je.getSampleRoutines();t.sort((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime()),d(Array.isArray(t)?t:[])}catch(t){ne(String(t)),g(t instanceof Error?t.message:"Failed to load routines")}finally{h(!1)}};s.useEffect(()=>{o!==bn.My||i?A(o):d([])},[o,i]),s.useEffect(()=>{(async()=>{if(i)try{const e=await Je.getMyProfile();S(e)}catch(e){ne("Failed to load profile for dashboard greeting",e)}})()},[i]);const _=()=>(null==E?void 0:E.first_name)&&""!==E.first_name.trim()?E.first_name.split(" ")[0]:(null==E?void 0:E.display_name)&&""!==E.display_name.trim()?E.display_name.split(" ")[0]:null;s.useEffect(()=>{let e=!1;return(async()=>{const t=Me.start("fetchExerciseCounts");if(0===c.length)return ie("🔍 DGB [WORKOUT_SCREEN] No routines, skipping"),v({}),void t.endWithLog();b(!0);try{const t=await Promise.all(c.map(async e=>{const t=Me.start(`fetchExerciseCounts - routine ${e.routine_template_id}`);ie("🔍 DGB [WORKOUT_SCREEN] Processing routine:",e.routine_template_id,"name:",e.name);const s=await mn(e.routine_template_id,{timer:Me});let n=!1;if(T){const t=e.muscle_group_summary;s.length>0&&(!t||""===t.trim())?(ae("🔍 DGB [WORKOUT_SCREEN] Routine needs recompute:",e.routine_template_id,"summary:",t,"active exercises:",s.length),n=!0):0===s.length&&ie("🔍 DGB [WORKOUT_SCREEN] Routine has 0 active exercises, skipping recompute:",e.routine_template_id,"summary:",t)}return t.endWithLog(),{id:e.routine_template_id,count:s.length,needsRecompute:n}})),s=t.map(({id:e,count:t})=>[e,t]),n=t.filter(e=>e.needsRecompute).map(e=>e.id);if(e||v(Object.fromEntries(s)),T&&n.length>0){const t=Me.start("fetchExerciseCounts - muscle summary recompute");ie("🔍 DGB [WORKOUT_SCREEN] Triggering muscle summary recompute for routines:",n),ie("🔍 DGB [WORKOUT_SCREEN] canEdit:",T,"needsRecompute count:",n.length);const s=await Promise.allSettled(n.map(e=>(ie("🔍 DGB [WORKOUT_SCREEN] Calling recomputeAndSaveRoutineMuscleSummary for routine ID:",e),Je.recomputeAndSaveRoutineMuscleSummary(e))));if(!e){ie("🔍 DGB [WORKOUT_SCREEN] Muscle summary recompute completed, results:",s);const e=s.filter(e=>"fulfilled"===e.status).length;ie("🔍 DGB [WORKOUT_SCREEN] Successful recomputes:",e,"out of",n.length),e>0&&(ie("🔍 DGB [WORKOUT_SCREEN] Muscle summary recompute completed successfully"),ie("🔍 DGB [WORKOUT_SCREEN] No need to trigger routine state update - let cache handle it"))}t.endWithLog()}}catch(s){ne("Failed to load exercise counts / recompute summaries",s)}finally{e||b(!1),t.endWithLog()}})(),()=>{e=!0}},[c,T]),s.useEffect(()=>()=>{w&&(null==r||r(!1))},[]);return q.jsxs($t,{header:q.jsx(Ys,{title:"My Routines",showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:a,bottomBarSticky:!0,contentClassName:"",headerInScrollArea:!0,children:[q.jsxs(ln,{gap:"fluid",children:[q.jsx(tn,{variant:"plain",padding:"none",className:"text-center",children:q.jsx("p",{className:"text-4xl md:text-5xl font-extrabold tracking-tight leading-tight text-transparent bg-clip-text bg-gradient-to-r from-rose-500 via-orange-400 to-amber-500 drop-shadow-sm",children:_()?`Welcome back, ${_()}!`:"Welcome back!"})}),q.jsx(nn,{y:"sm"}),q.jsx(tn,{variant:"plain",padding:"none",className:"text-center",children:q.jsx("p",{className:"text-sm text-black mt-1",children:o===bn.My?"Select a routine to start your workout":"Explore prebuilt routines to get started"})}),q.jsx(nn,{y:"sm"}),q.jsx(tn,{variant:"plain",padding:"none",children:q.jsx(At,{steps:C?null:j,goal:C?null:N,recoveryPercent:null,strain:null,onStepsClick:()=>{},onRecoveryClick:()=>{},onStrainClick:()=>{}})}),q.jsx(nn,{y:"xss"}),q.jsx(tn,{variant:"plain",padding:"none",className:"flex items-center justify-start px-4",children:q.jsx(dn,{value:o,onChange:l,options:[{value:bn.My,label:"My routines"},{value:bn.Sample,label:"Sample routines"}],size:"sm",className:"data-[checked=true]:bg-warm-coral/20 data-[checked=true]:text-black",variant:"filled",tone:"accent"})}),q.jsx(kn,{routines:c,routinesError:f,isLoading:u,reloadRoutines:()=>A(),view:o,exerciseCounts:x,loadingCounts:y,canEdit:T,onSelectRoutine:n,openActions:(e,t)=>{T&&(t.stopPropagation(),k(e),null==r||r(!0))}}),q.jsx(nn,{y:"lg"}),T&&w&&q.jsx(Nn,{routine:w,onClose:()=>{k(null),null==r||r(!1)},reloadRoutines:()=>A(bn.My)})]}),q.jsx(gn,{actions:[{label:"Create Routine",onPress:e,icon:q.jsx(m,{className:"w-6 h-6"})},{label:"Edit Measurement",onPress:t,icon:q.jsx(p,{className:"w-6 h-6"})}],backdropWidthOffset:"100px",backdropHeightOffset:"40px"})]})}function Tn({className:e,type:t,...s}){return q.jsx("input",{type:t,"data-slot":"input",className:zs("file:text-black placeholder:text-black selection:bg-primary selection:text-black border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}function An({onBack:e,onRoutineCreated:t}){const[n,r]=s.useState(""),[a,i]=s.useState(!1),{userToken:l}=xt();return q.jsx($t,{header:q.jsx(Ys,{title:"Create Routine",onBack:e,showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",padContent:!1,showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:null,bottomBarSticky:!0,contentClassName:"",children:q.jsxs(ln,{gap:"fluid",children:[q.jsx(nn,{y:"sm"}),q.jsx(tn,{variant:"card",padding:"md",className:"space-y-3",children:q.jsx(Tn,{value:n,onChange:e=>r(e.target.value),placeholder:"Routine Name",className:"bg-input-background border-border text-black placeholder:text-black h-12 md:h-12 text-base md:text-lg rounded-xl focus:border-warm-coral focus:ring-warm-coral/20",maxLength:50,autoFocus:!0,disabled:a})}),q.jsx(nn,{y:"sm"}),q.jsx(tn,{variant:"plain",padding:"none",children:q.jsx(xn,{onClick:async()=>{const e=n.trim();if(e)if(l)try{i(!0);const s=await Je.createUserRoutine(e);if(!s)throw new Error("Failed to create routine");t(e,s.routine_template_id)}catch(s){const e=s instanceof Error?s.message:"Failed to create routine";ot.error(e)}finally{i(!1)}else ot.error("Please sign in to create routines");else ot.error("Please enter a routine name")},disabled:!n.trim()||a,className:"w-full h-12 md:h-14 bg-primary hover:bg-primary-hover text-black font-medium text-sm md:text-base rounded-full disabled:opacity-50 disabled:cursor-not-allowed border-0",children:q.jsxs("div",{className:"flex items-center justify-center gap-2",children:[q.jsx(o,{size:20}),a?"CREATING...":"ADD ROUTINE"]})})})]})})}function _n({children:e,variant:t="primary",className:s,...n}){return q.jsx(xn,{variant:t,size:"sm",className:zs("px-6 md:px-8 py-3 font-medium border-0 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",s),...n,children:e})}function Rn({activeTab:e,onTabChange:t,children:s,className:n=""}){const r=[{id:"workouts",label:"Workouts",icon:m},{id:"progress",label:"Progress",icon:h},{id:"profile",label:"Profile",icon:f}];return s?q.jsx("nav",{"aria-label":"Bottom navigation",className:`w-full h-14 flex items-center justify-center bg-background ${n}`,children:q.jsx("div",{className:"flex w-full items-center justify-center gap-3",children:s})}):q.jsx("nav",{"aria-label":"Bottom navigation",className:`w-full h-14 flex items-center justify-center bg-background ${n}`,children:q.jsx("ul",{className:"w-full flex justify-around",children:r.map(s=>{const n=e===s.id;return q.jsx("li",{className:"flex-1",children:q.jsxs("button",{onClick:()=>t&&t(s.id),className:"w-full flex flex-col items-center gap-1 py-2 text-xs","aria-current":n?"page":void 0,children:[q.jsx("span",{children:q.jsx(s.icon,{size:20,className:n?"text-black fill-black":"text-gray-500 fill-gray-500"})}),q.jsx("span",{className:n?"font-medium text-black fill-black":"text-gray-500 fill-gray-500",children:s.label})]})},s.id)})})})}const Pn="Other",Mn=s.memo(function({value:e,onChange:t,placeholder:s}){return q.jsxs("div",{className:"relative",children:[q.jsx(g,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-black",size:20}),q.jsx(Tn,{value:e,onChange:e=>t(e.target.value),placeholder:s??"Search for an exercise...",className:"bg-input-background border-border text-black placeholder:text-black h-12 md:h-12 pl-10 pr-4 rounded-xl focus:border-warm-coral focus:ring-warm-coral/20"})]})}),Dn=s.memo(function({exercise:e,selected:t,onSelect:s}){const n=e.name.substring(0,2).toUpperCase(),r=(e.muscle_group||"").trim()||Pn;return q.jsx(vn,{as:"button",type:"button","aria-pressed":t,onClick:()=>s(e),leading:q.jsx("span",{className:"font-medium text-black",children:n}),leadingClassName:"w-8 h-8 rounded-xl bg-card/10 grid place-items-center",primary:e.name,secondary:r,primaryClassName:"font-medium text-black text-[clamp(16px,4.5vw,19px)]",secondaryClassName:"text-[clamp(11px,3.2vw,12px)] text-black",className:["w-full rounded-2xl border border-border card-modern shadow-xl hover:shadow-xl transition-all text-left px-4 py-0",t?"bg-warm-coral border-warm-coral":"hover:bg-warm-coral/10"].join(" "),style:{border:"2px solid var(--border)"}})});function In({groupedAZ:e,selectedExercises:t,onSelect:n,onLoadMore:r,hasMore:a,isLoadingMore:i}){const o=s.useMemo(()=>Object.keys(e).sort((e,t)=>e.localeCompare(t)),[e]),l=s.useMemo(()=>t.map(e=>e.exercise_id),[t]),c=s.useMemo(()=>o.reduce((t,s)=>t+e[s].length,0),[o,e]),d=s.useRef(null);if(s.useEffect(()=>{const e=d.current;if(!e)return;const t=new IntersectionObserver(e=>{e[0].isIntersecting&&a&&!i&&r()});return t.observe(e),()=>t.disconnect()},[r,a,i,c]),0===o.length)return null;let u=-1;return q.jsxs(q.Fragment,{children:[o.map(t=>q.jsxs("div",{children:[q.jsx("h2",{className:"text-xs md:text-sm text-black font-medium mb-3 px-2 tracking-wide",children:t}),q.jsx("div",{className:"space-y-2",children:e[t].map(e=>{u++;const t=u===c-5?d:void 0;return q.jsx("div",{ref:t,children:q.jsx(Dn,{exercise:e,selected:l.includes(e.exercise_id),onSelect:n})},e.exercise_id)})})]},t)),i&&q.jsx("div",{className:"text-center text-black py-4",children:"Loading..."})]})}function $n({routineId:e,routineName:t,onBack:n,onExerciseSelected:r,isFromExerciseSetup:a=!0}){const{userToken:i}=xt(),o=Dt(),l=s.useCallback(()=>{var e;o&&(null==(e=document.activeElement)||e.blur())},[o]),[c,d]=s.useState(""),[u,h]=s.useState("all"),[m,p]=s.useState("all"),[f,g]=s.useState([]),[x,v]=s.useState([]),[y,b]=s.useState(!0),[w,k]=s.useState(!1),[E,S]=s.useState(!0),[j,N]=s.useState(!1),[C,T]=s.useState(!1),[A,_]=s.useState(!1),R=s.useRef(0),[P,M]=s.useState([]),[D,I]=s.useState(!1),$=s.useRef("all");s.useEffect(()=>{const e=Me.start("AddExercisesToRoutineScreen render");return()=>{const t=e.end();ae(`[ADD_EXERCISES] Component render: ${t.duration.toFixed(2)}ms`)}},[]);const B=s.useCallback(async(e,t,s)=>{const n=e?0:R.current;try{e?(b(!0),S(!1),R.current=0):N(!0),T(!1);const r=Me.start("AddExercisesToRoutineScreen fetch exercises"),a=await Je.getExercises({limit:30,offset:30*n,muscleGroup:"all"===t||t===Pn?void 0:t,other:t===Pn,search:s.trim()||void 0}),i=r.end();ae(`[ADD_EXERCISES] Fetch exercises: ${i.duration.toFixed(2)}ms`),g(t=>e?a:[...t,...a]),S(30===a.length),R.current=n+1,p(t),T(!1)}catch(r){ne("[AddExercises] fetch error:",r),ot.error("Failed to load exercises"),e&&g([]),T(!0)}finally{e?b(!1):N(!1)}},[]);s.useEffect(()=>{let e=!0;return Je.getMuscleGroups().then(t=>{e&&M(t)}).catch(e=>ne("[AddExercises] failed to load muscle groups",e)).finally(()=>{e&&I(!0)}),()=>{e=!1}},[]),s.useEffect(()=>{$.current=u},[u]),s.useEffect(()=>{if(!D)return;const e=setTimeout(()=>B(!0,$.current,c),300);return()=>clearTimeout(e)},[D,c,B]),s.useEffect(()=>{let e;return y?e=setTimeout(()=>_(!0),1e3):_(!1),()=>clearTimeout(e)},[y]);const L=s.useMemo(()=>{const e=new Map;for(const t of f){const s=(t.muscle_group||"").trim()||Pn;(e.get(s)??e.set(s,[]).get(s)).push(t)}return e},[f]),O=s.useMemo(()=>{var e;const t=Me.start("AddExercisesToRoutineScreen filter exercises"),s="all"===m?f:L.get(m)??[],n=c.trim().toLowerCase(),r=n?s.filter(e=>e.name.toLowerCase().includes(n)):s,a={};for(const o of r){const t=((null==(e=o.name)?void 0:e[0])||"#").toUpperCase();(a[t]||(a[t]=[])).push(o)}const i=t.end();return ae(`[ADD_EXERCISES] Filter exercises (${r.length} results): ${i.duration.toFixed(2)}ms`),a},[f,L,m,c]),U=s.useMemo(()=>[{value:"all",label:"ALL"},...P.map(e=>({value:e,label:e}))],[P]);return q.jsx($t,{header:q.jsx(Ys,{title:"Select exercises",onBack:n,showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",padContent:!1,showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:q.jsx(Rn,{children:q.jsx(_n,{onClick:async()=>{if(0===x.length)return ot.error("Please select an exercise");if(!i)return ot.error("Please sign in to add exercises");k(!0);try{r(x)}catch(e){const t=e instanceof Error?e.message:"Please try again.";ot.error(`Failed to proceed: ${t}`)}finally{k(!1)}},disabled:0===x.length||w,className:"sm:w-auto",children:w?"ADDING...":x.length>0?`ADD (${x.length})`:"ADD"})}),bottomBarSticky:!0,contentClassName:"",onScroll:l,children:q.jsxs(ln,{gap:"fluid",children:[q.jsx(nn,{y:"xss"}),q.jsx(tn,{variant:"plain",padding:"none",children:D?q.jsx("div",{className:"overflow-x-auto no-scrollbar",children:q.jsx(dn,{value:u,onChange:e=>{h(e),B(!0,e,c)},options:U,size:"sm",variant:"filled",tone:"accent",className:"min-w-max"})}):q.jsx("div",{className:"py-2 flex justify-center",children:q.jsx("div",{className:"w-6 h-6 border-4 border-warm-coral border-t-transparent rounded-full animate-spin"})})}),q.jsx(tn,{variant:"plain",padding:"none",children:q.jsx(Mn,{value:c,onChange:d})}),q.jsx(nn,{y:"xss"}),q.jsx(tn,{variant:"plain",padding:"none",className:"space-y-6",children:C?q.jsx(tn,{variant:"card",className:"text-center",children:q.jsx("p",{className:"text-black",children:"Failed to load exercises"})}):q.jsxs(q.Fragment,{children:[q.jsx(In,{groupedAZ:O,selectedExercises:x,onSelect:e=>{v(t=>t.find(t=>t.exercise_id===e.exercise_id)?t.filter(t=>t.exercise_id!==e.exercise_id):[...t,e])},onLoadMore:()=>B(!1,m,c),hasMore:E,isLoadingMore:j}),y&&A&&q.jsx("div",{className:"py-6 flex justify-center",children:q.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-warm-coral border-t-transparent rounded-full"})})]})}),q.jsx(nn,{y:"xl"})]})})}const Bn=s.createContext({});function Ln(e){const t=s.useRef(null);return null===t.current&&(t.current=e()),t.current}const On="undefined"!=typeof window,Un=On?s.useLayoutEffect:s.useEffect,Fn=s.createContext(null);function Vn(e,t){-1===e.indexOf(t)&&e.push(t)}function Hn(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}const Wn=(e,t,s)=>s>t?t:s<e?e:s;const zn={},Gn=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function qn(e){return"object"==typeof e&&null!==e}const Yn=e=>/^0[^.\s]+$/u.test(e);function Jn(e){let t;return()=>(void 0===t&&(t=e()),t)}const Kn=e=>e,Xn=(e,t)=>s=>t(e(s)),Zn=(...e)=>e.reduce(Xn),Qn=(e,t,s)=>{const n=t-e;return 0===n?1:(s-e)/n};class er{constructor(){this.subscriptions=[]}add(e){return Vn(this.subscriptions,e),()=>Hn(this.subscriptions,e)}notify(e,t,s){const n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](e,t,s);else for(let r=0;r<n;r++){const n=this.subscriptions[r];n&&n(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const tr=e=>1e3*e,sr=e=>e/1e3;function nr(e,t){return t?e*(1e3/t):0}const rr=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e;function ar(e,t,s,n){if(e===t&&s===n)return Kn;const r=t=>function(e,t,s,n,r){let a,i,o=0;do{i=t+(s-t)/2,a=rr(i,n,r)-e,a>0?s=i:t=i}while(Math.abs(a)>1e-7&&++o<12);return i}(t,0,1,e,s);return e=>0===e||1===e?e:rr(r(e),t,n)}const ir=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,or=e=>t=>1-e(1-t),lr=ar(.33,1.53,.69,.99),cr=or(lr),dr=ir(cr),ur=e=>(e*=2)<1?.5*cr(e):.5*(2-Math.pow(2,-10*(e-1))),hr=e=>1-Math.sin(Math.acos(e)),mr=or(hr),pr=ir(hr),fr=ar(.42,0,1,1),gr=ar(0,0,.58,1),xr=ar(.42,0,.58,1),vr=e=>Array.isArray(e)&&"number"==typeof e[0],yr={linear:Kn,easeIn:fr,easeInOut:xr,easeOut:gr,circIn:hr,circInOut:pr,circOut:mr,backIn:cr,backInOut:dr,backOut:lr,anticipate:ur},br=e=>{if(vr(e)){e.length;const[t,s,n,r]=e;return ar(t,s,n,r)}return"string"==typeof e?yr[e]:e},wr=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function kr(e,t){let s=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>s=!0,i=wr.reduce((e,t)=>(e[t]=function(e){let t=new Set,s=new Set,n=!1,r=!1;const a=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function o(t){a.has(t)&&(l.schedule(t),e()),t(i)}const l={schedule:(e,r=!1,i=!1)=>{const o=i&&n?t:s;return r&&a.add(e),o.has(e)||o.add(e),e},cancel:e=>{s.delete(e),a.delete(e)},process:e=>{i=e,n?r=!0:(n=!0,[t,s]=[s,t],t.forEach(o),t.clear(),n=!1,r&&(r=!1,l.process(e)))}};return l}(a),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:m,postRender:p}=i,f=()=>{const a=zn.useManualTiming?r.timestamp:performance.now();s=!1,zn.useManualTiming||(r.delta=n?1e3/60:Math.max(Math.min(a-r.timestamp,40),1)),r.timestamp=a,r.isProcessing=!0,o.process(r),l.process(r),c.process(r),d.process(r),u.process(r),h.process(r),m.process(r),p.process(r),r.isProcessing=!1,s&&t&&(n=!1,e(f))};return{schedule:wr.reduce((t,a)=>{const o=i[a];return t[a]=(t,a=!1,i=!1)=>(s||(s=!0,n=!0,r.isProcessing||e(f)),o.schedule(t,a,i)),t},{}),cancel:e=>{for(let t=0;t<wr.length;t++)i[wr[t]].cancel(e)},state:r,steps:i}}const{schedule:Er,cancel:Sr,state:jr,steps:Nr}=kr("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Kn,!0);let Cr;function Tr(){Cr=void 0}const Ar={now:()=>(void 0===Cr&&Ar.set(jr.isProcessing||zn.useManualTiming?jr.timestamp:performance.now()),Cr),set:e=>{Cr=e,queueMicrotask(Tr)}},_r=e=>t=>"string"==typeof t&&t.startsWith(e),Rr=_r("--"),Pr=_r("var(--"),Mr=e=>!!Pr(e)&&Dr.test(e.split("/*")[0].trim()),Dr=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ir={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},$r={...Ir,transform:e=>Wn(0,1,e)},Br={...Ir,default:1},Lr=e=>Math.round(1e5*e)/1e5,Or=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const Ur=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Fr=(e,t)=>s=>Boolean("string"==typeof s&&Ur.test(s)&&s.startsWith(e)||t&&!function(e){return null==e}(s)&&Object.prototype.hasOwnProperty.call(s,t)),Vr=(e,t,s)=>n=>{if("string"!=typeof n)return n;const[r,a,i,o]=n.match(Or);return{[e]:parseFloat(r),[t]:parseFloat(a),[s]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},Hr={...Ir,transform:e=>Math.round((e=>Wn(0,255,e))(e))},Wr={test:Fr("rgb","red"),parse:Vr("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:n=1})=>"rgba("+Hr.transform(e)+", "+Hr.transform(t)+", "+Hr.transform(s)+", "+Lr($r.transform(n))+")"};const zr={test:Fr("#"),parse:function(e){let t="",s="",n="",r="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),n=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),n=e.substring(3,4),r=e.substring(4,5),t+=t,s+=s,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}},transform:Wr.transform},Gr=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),qr=Gr("deg"),Yr=Gr("%"),Jr=Gr("px"),Kr=Gr("vh"),Xr=Gr("vw"),Zr=(()=>({...Yr,parse:e=>Yr.parse(e)/100,transform:e=>Yr.transform(100*e)}))(),Qr={test:Fr("hsl","hue"),parse:Vr("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:n=1})=>"hsla("+Math.round(e)+", "+Yr.transform(Lr(t))+", "+Yr.transform(Lr(s))+", "+Lr($r.transform(n))+")"},ea={test:e=>Wr.test(e)||zr.test(e)||Qr.test(e),parse:e=>Wr.test(e)?Wr.parse(e):Qr.test(e)?Qr.parse(e):zr.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?Wr.transform(e):Qr.transform(e),getAnimatableNone:e=>{const t=ea.parse(e);return t.alpha=0,ea.transform(t)}},ta=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const sa="number",na="color",ra=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function aa(e){const t=e.toString(),s=[],n={color:[],number:[],var:[]},r=[];let a=0;const i=t.replace(ra,e=>(ea.test(e)?(n.color.push(a),r.push(na),s.push(ea.parse(e))):e.startsWith("var(")?(n.var.push(a),r.push("var"),s.push(e)):(n.number.push(a),r.push(sa),s.push(parseFloat(e))),++a,"${}")).split("${}");return{values:s,split:i,indexes:n,types:r}}function ia(e){return aa(e).values}function oa(e){const{split:t,types:s}=aa(e),n=t.length;return e=>{let r="";for(let a=0;a<n;a++)if(r+=t[a],void 0!==e[a]){const t=s[a];r+=t===sa?Lr(e[a]):t===na?ea.transform(e[a]):e[a]}return r}}const la=e=>"number"==typeof e?0:ea.test(e)?ea.getAnimatableNone(e):e;const ca={test:function(e){var t,s;return isNaN(e)&&"string"==typeof e&&((null==(t=e.match(Or))?void 0:t.length)||0)+((null==(s=e.match(ta))?void 0:s.length)||0)>0},parse:ia,createTransformer:oa,getAnimatableNone:function(e){const t=ia(e);return oa(e)(t.map(la))}};function da(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+6*(t-e)*s:s<.5?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function ua(e,t){return s=>s>0?t:e}const ha=(e,t,s)=>e+(t-e)*s,ma=(e,t,s)=>{const n=e*e,r=s*(t*t-n)+n;return r<0?0:Math.sqrt(r)},pa=[zr,Wr,Qr];function fa(e){const t=(s=e,pa.find(e=>e.test(s)));var s;if(!Boolean(t))return!1;let n=t.parse(e);return t===Qr&&(n=function({hue:e,saturation:t,lightness:s,alpha:n}){e/=360,s/=100;let r=0,a=0,i=0;if(t/=100){const n=s<.5?s*(1+t):s+t-s*t,o=2*s-n;r=da(o,n,e+1/3),a=da(o,n,e),i=da(o,n,e-1/3)}else r=a=i=s;return{red:Math.round(255*r),green:Math.round(255*a),blue:Math.round(255*i),alpha:n}}(n)),n}const ga=(e,t)=>{const s=fa(e),n=fa(t);if(!s||!n)return ua(e,t);const r={...s};return e=>(r.red=ma(s.red,n.red,e),r.green=ma(s.green,n.green,e),r.blue=ma(s.blue,n.blue,e),r.alpha=ha(s.alpha,n.alpha,e),Wr.transform(r))},xa=new Set(["none","hidden"]);function va(e,t){return s=>ha(e,t,s)}function ya(e){return"number"==typeof e?va:"string"==typeof e?Mr(e)?ua:ea.test(e)?ga:ka:Array.isArray(e)?ba:"object"==typeof e?ea.test(e)?ga:wa:ua}function ba(e,t){const s=[...e],n=s.length,r=e.map((e,s)=>ya(e)(e,t[s]));return e=>{for(let t=0;t<n;t++)s[t]=r[t](e);return s}}function wa(e,t){const s={...e,...t},n={};for(const r in s)void 0!==e[r]&&void 0!==t[r]&&(n[r]=ya(e[r])(e[r],t[r]));return e=>{for(const t in n)s[t]=n[t](e);return s}}const ka=(e,t)=>{const s=ca.createTransformer(t),n=aa(e),r=aa(t);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?xa.has(e)&&!r.values.length||xa.has(t)&&!n.values.length?function(e,t){return xa.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}(e,t):Zn(ba(function(e,t){const s=[],n={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const a=t.types[r],i=e.indexes[a][n[a]],o=e.values[i]??0;s[r]=o,n[a]++}return s}(n,r),r.values),s):ua(e,t)};function Ea(e,t,s){if("number"==typeof e&&"number"==typeof t&&"number"==typeof s)return ha(e,t,s);return ya(e)(e,t)}const Sa=e=>{const t=({timestamp:t})=>e(t);return{start:(e=!0)=>Er.update(t,e),stop:()=>Sr(t),now:()=>jr.isProcessing?jr.timestamp:Ar.now()}},ja=(e,t,s=10)=>{let n="";const r=Math.max(Math.round(t/s),2);for(let a=0;a<r;a++)n+=Math.round(1e4*e(a/(r-1)))/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Na=2e4;function Ca(e){let t=0;let s=e.next(t);for(;!s.done&&t<Na;)t+=50,s=e.next(t);return t>=Na?1/0:t}function Ta(e,t,s){const n=Math.max(t-5,0);return nr(s-e(n),t-n)}const Aa=100,_a=10,Ra=1,Pa=0,Ma=800,Da=.3,Ia=.3,$a={granular:.01,default:2},Ba={granular:.005,default:.5},La=.01,Oa=10,Ua=.05,Fa=1,Va=.001;function Ha({duration:e=Ma,bounce:t=Da,velocity:s=Pa,mass:n=Ra}){let r,a,i=1-t;i=Wn(Ua,Fa,i),e=Wn(La,Oa,sr(e)),i<1?(r=t=>{const n=t*i,r=n*e,a=n-s,o=za(t,i),l=Math.exp(-r);return Va-a/o*l},a=t=>{const n=t*i*e,a=n*s+s,o=Math.pow(i,2)*Math.pow(t,2)*e,l=Math.exp(-n),c=za(Math.pow(t,2),i);return(-r(t)+Va>0?-1:1)*((a-o)*l)/c}):(r=t=>Math.exp(-t*e)*((t-s)*e+1)-.001,a=t=>Math.exp(-t*e)*(e*e*(s-t)));const o=function(e,t,s){let n=s;for(let r=1;r<Wa;r++)n-=e(n)/t(n);return n}(r,a,5/e);if(e=tr(e),isNaN(o))return{stiffness:Aa,damping:_a,duration:e};{const t=Math.pow(o,2)*n;return{stiffness:t,damping:2*i*Math.sqrt(n*t),duration:e}}}const Wa=12;function za(e,t){return e*Math.sqrt(1-t*t)}const Ga=["duration","bounce"],qa=["stiffness","damping","mass"];function Ya(e,t){return t.some(t=>void 0!==e[t])}function Ja(e=Ia,t=Da){const s="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:r}=s;const a=s.keyframes[0],i=s.keyframes[s.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:m}=function(e){let t={velocity:Pa,stiffness:Aa,damping:_a,mass:Ra,isResolvedFromDuration:!1,...e};if(!Ya(e,qa)&&Ya(e,Ga))if(e.visualDuration){const s=e.visualDuration,n=2*Math.PI/(1.2*s),r=n*n,a=2*Wn(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:Ra,stiffness:r,damping:a}}else{const s=Ha(e);t={...t,...s,mass:Ra},t.isResolvedFromDuration=!0}return t}({...s,velocity:-sr(s.velocity||0)}),p=h||0,f=c/(2*Math.sqrt(l*d)),g=i-a,x=sr(Math.sqrt(l/d)),v=Math.abs(g)<5;let y;if(n||(n=v?$a.granular:$a.default),r||(r=v?Ba.granular:Ba.default),f<1){const e=za(x,f);y=t=>{const s=Math.exp(-f*x*t);return i-s*((p+f*x*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===f)y=e=>i-Math.exp(-x*e)*(g+(p+x*g)*e);else{const e=x*Math.sqrt(f*f-1);y=t=>{const s=Math.exp(-f*x*t),n=Math.min(e*t,300);return i-s*((p+f*x*g)*Math.sinh(n)+e*g*Math.cosh(n))/e}}const b={calculatedDuration:m&&u||null,next:e=>{const t=y(e);if(m)o.done=e>=u;else{let s=0===e?p:0;f<1&&(s=0===e?tr(p):Ta(y,e,t));const a=Math.abs(s)<=n,l=Math.abs(i-t)<=r;o.done=a&&l}return o.value=o.done?i:t,o},toString:()=>{const e=Math.min(Ca(b),Na),t=ja(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function Ka({keyframes:e,velocity:t=0,power:s=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:l,restDelta:c=.5,restSpeed:d}){const u=e[0],h={done:!1,value:u},m=e=>void 0===o?l:void 0===l||Math.abs(o-e)<Math.abs(l-e)?o:l;let p=s*t;const f=u+p,g=void 0===i?f:i(f);g!==f&&(p=g-u);const x=e=>-p*Math.exp(-e/n),v=e=>g+x(e),y=e=>{const t=x(e),s=v(e);h.done=Math.abs(t)<=c,h.value=h.done?g:s};let b,w;const k=e=>{var t;(t=h.value,void 0!==o&&t<o||void 0!==l&&t>l)&&(b=e,w=Ja({keyframes:[h.value,m(h.value)],velocity:Ta(v,e,h.value),damping:r,stiffness:a,restDelta:c,restSpeed:d}))};return k(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==b||(t=!0,y(e),k(e)),void 0!==b&&e>=b?w.next(e-b):(!t&&y(e),h)}}}function Xa(e,t,{clamp:s=!0,ease:n,mixer:r}={}){const a=e.length;if(t.length,1===a)return()=>t[0];if(2===a&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,s){const n=[],r=s||zn.mix||Ea,a=e.length-1;for(let i=0;i<a;i++){let s=r(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||Kn:t;s=Zn(e,s)}n.push(s)}return n}(t,n,r),l=o.length,c=s=>{if(i&&s<e[0])return t[0];let n=0;if(l>1)for(;n<e.length-2&&!(s<e[n+1]);n++);const r=Qn(e[n],e[n+1],s);return o[n](r)};return s?t=>c(Wn(e[0],e[a-1],t)):c}function Za(e){const t=[0];return function(e,t){const s=e[e.length-1];for(let n=1;n<=t;n++){const r=Qn(0,t,n);e.push(ha(s,1,r))}}(t,e.length-1),t}function Qa({duration:e=300,keyframes:t,times:s,ease:n="easeInOut"}){const r=(e=>Array.isArray(e)&&"number"!=typeof e[0])(n)?n.map(br):br(n),a={done:!1,value:t[0]},i=function(e,t){return e.map(e=>e*t)}(s&&s.length===t.length?s:Za(t),e),o=Xa(i,t,{ease:Array.isArray(r)?r:(l=t,c=r,l.map(()=>c||xr).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(a.value=o(t),a.done=t>=e,a)}}Ja.applyToOptions=e=>{const t=function(e,t=100,s){const n=s({...e,keyframes:[0,t]}),r=Math.min(Ca(n),Na);return{type:"keyframes",ease:e=>n.next(r*e).value/t,duration:sr(r)}}(e,100,Ja);return e.ease=t.ease,e.duration=tr(t.duration),e.type="keyframes",e};const ei=e=>null!==e;function ti(e,{repeat:t,repeatType:s="loop"},n,r=1){const a=e.filter(ei),i=r<0||t&&"loop"!==s&&t%2==1?0:a.length-1;return i&&void 0!==n?n:a[i]}const si={decay:Ka,inertia:Ka,tween:Qa,keyframes:Qa,spring:Ja};function ni(e){"string"==typeof e.type&&(e.type=si[e.type])}class ri{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const ai=e=>e/100;class ii extends ri{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:s}=this.options;s&&s.updatedAt!==Ar.now()&&this.tick(Ar.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null==(t=(e=this.options).onStop)||t.call(e))},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;ni(e);const{type:t=Qa,repeat:s=0,repeatDelay:n=0,repeatType:r,velocity:a=0}=e;let{keyframes:i}=e;const o=t||Qa;o!==Qa&&"number"!=typeof i[0]&&(this.mixKeyframes=Zn(ai,Ea(i[0],i[1])),i=[0,100]);const l=o({...e,keyframes:i});"mirror"===r&&(this.mirroredGenerator=o({...e,keyframes:[...i].reverse(),velocity:-a})),null===l.calculatedDuration&&(l.calculatedDuration=Ca(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+n,this.totalDuration=this.resolvedDuration*(s+1)-n,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:s,totalDuration:n,mixKeyframes:r,mirroredGenerator:a,resolvedDuration:i,calculatedDuration:o}=this;if(null===this.startTime)return s.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:h,type:m,onUpdate:p,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-n/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?g<0:g>n;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=n);let v=this.currentTime,y=s;if(d){const e=Math.min(this.currentTime,n)/i;let t=Math.floor(e),s=e%1;!s&&e>=1&&(s=1),1===s&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(s=1-s,h&&(s-=h/i)):"mirror"===u&&(y=a)),v=Wn(0,1,s)*i}const b=x?{done:!1,value:c[0]}:y.next(v);r&&(b.value=r(b.value));let{done:w}=b;x||null===o||(w=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const k=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return k&&m!==Ka&&(b.value=ti(c,this.options,f,this.speed)),p&&p(b.value),k&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return sr(this.calculatedDuration)}get time(){return sr(this.currentTime)}set time(e){var t;e=tr(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null==(t=this.driver)||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ar.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=sr(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:s=Sa,startTime:n}=this.options;this.driver||(this.driver=s(e=>this.tick(e))),null==(t=(e=this.options).onPlay)||t.call(e);const r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ar.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null==(t=(e=this.options).onComplete)||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null==(t=(e=this.options).onCancel)||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null==(t=this.driver)||t.stop(),e.observe(this)}}const oi=e=>180*e/Math.PI,li=e=>{const t=oi(Math.atan2(e[1],e[0]));return di(t)},ci={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:li,rotateZ:li,skewX:e=>oi(Math.atan(e[1])),skewY:e=>oi(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},di=e=>((e%=360)<0&&(e+=360),e),ui=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),hi=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),mi={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ui,scaleY:hi,scale:e=>(ui(e)+hi(e))/2,rotateX:e=>di(oi(Math.atan2(e[6],e[5]))),rotateY:e=>di(oi(Math.atan2(-e[2],e[0]))),rotateZ:li,rotate:li,skewX:e=>oi(Math.atan(e[4])),skewY:e=>oi(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function pi(e){return e.includes("scale")?1:0}function fi(e,t){if(!e||"none"===e)return pi(t);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,r;if(s)n=mi,r=s;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=ci,r=t}if(!r)return pi(t);const a=n[t],i=r[1].split(",").map(gi);return"function"==typeof a?a(i):i[a]}function gi(e){return parseFloat(e.trim())}const xi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vi=(()=>new Set(xi))(),yi=e=>e===Ir||e===Jr,bi=new Set(["x","y","z"]),wi=xi.filter(e=>!bi.has(e));const ki={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>fi(t,"x"),y:(e,{transform:t})=>fi(t,"y")};ki.translateX=ki.x,ki.translateY=ki.y;const Ei=new Set;let Si=!1,ji=!1,Ni=!1;function Ci(){if(ji){const e=Array.from(Ei).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),s=new Map;t.forEach(e=>{const t=function(e){const t=[];return wi.forEach(s=>{const n=e.getValue(s);void 0!==n&&(t.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),t}(e);t.length&&(s.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=s.get(e);t&&t.forEach(([t,s])=>{var n;null==(n=e.getValue(t))||n.set(s)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}ji=!1,Si=!1,Ei.forEach(e=>e.complete(Ni)),Ei.clear()}function Ti(){Ei.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ji=!0)})}class Ai{constructor(e,t,s,n,r,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=n,this.element=r,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Ei.add(this),Si||(Si=!0,Er.read(Ti),Er.resolveKeyframes(Ci))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:n}=this;if(null===e[0]){const r=null==n?void 0:n.get(),a=e[e.length-1];if(void 0!==r)e[0]=r;else if(s&&t){const n=s.readValue(t,a);null!=n&&(e[0]=n)}void 0===e[0]&&(e[0]=a),n&&void 0===r&&n.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ei.delete(this)}cancel(){"scheduled"===this.state&&(Ei.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const _i=Jn(()=>void 0!==window.ScrollTimeline),Ri={};function Pi(e,t){const s=Jn(e);return()=>Ri[t]??s()}const Mi=Pi(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),Di=([e,t,s,n])=>`cubic-bezier(${e}, ${t}, ${s}, ${n})`,Ii={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Di([0,.65,.55,1]),circOut:Di([.55,0,1,.45]),backIn:Di([.31,.01,.66,-.59]),backOut:Di([.33,1.53,.69,.99])};function $i(e,t){return e?"function"==typeof e?Mi()?ja(e,t):"ease-out":vr(e)?Di(e):Array.isArray(e)?e.map(e=>$i(e,t)||Ii.easeOut):Ii[e]:void 0}function Bi(e,t,s,{delay:n=0,duration:r=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}={},c=void 0){const d={[t]:s};l&&(d.offset=l);const u=$i(o,r);Array.isArray(u)&&(d.easing=u);const h={delay:n,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:"reverse"===i?"alternate":"normal"};c&&(h.pseudoElement=c);return e.animate(d,h)}function Li(e){return"function"==typeof e&&"applyToOptions"in e}class Oi extends ri{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:s,keyframes:n,pseudoElement:r,allowFlatten:a=!1,finalKeyframe:i,onComplete:o}=e;this.isPseudoElement=Boolean(r),this.allowFlatten=a,this.options=e,e.type;const l=function({type:e,...t}){return Li(e)&&Mi()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=Bi(t,s,n,l,r),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const e=ti(n,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,s){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,s):e.style[t]=s}(t,s,e),this.animation.cancel()}null==o||o(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null==(t=(e=this.animation).finish)||t.call(e)}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||null==(t=(e=this.animation).commitStyles)||t.call(e)}get duration(){var e,t;const s=(null==(t=null==(e=this.animation.effect)?void 0:e.getComputedTiming)?void 0:t.call(e).duration)||0;return sr(Number(s))}get time(){return sr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=tr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var s;return this.allowFlatten&&(null==(s=this.animation.effect)||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&_i()?(this.animation.timeline=e,Kn):t(this)}}const Ui={anticipate:ur,backInOut:dr,circInOut:pr};function Fi(e){"string"==typeof e.ease&&e.ease in Ui&&(e.ease=Ui[e.ease])}class Vi extends Oi{constructor(e){Fi(e),ni(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:s,onComplete:n,element:r,...a}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const i=new ii({...a,autoplay:!1}),o=tr(this.finishedTime??this.time);t.setWithVelocity(i.sample(o-10).value,i.sample(o).value,10),i.stop()}}const Hi=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!ca.test(e)&&"0"!==e||e.startsWith("url(")));function Wi(e){e.duration=0,e.type}const zi=new Set(["opacity","clipPath","filter","transform"]),Gi=Jn(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class qi extends ri{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:a="loop",keyframes:i,name:o,motionValue:l,element:c,...d}){var u;super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null==(e=this.stopTimeline)||e.call(this)),null==(t=this.keyframeResolver)||t.cancel()},this.createdAt=Ar.now();const h={autoplay:e,delay:t,type:s,repeat:n,repeatDelay:r,repeatType:a,name:o,motionValue:l,element:c,...d},m=(null==c?void 0:c.KeyframeResolver)||Ai;this.keyframeResolver=new m(i,(e,t,s)=>this.onKeyframesResolved(e,t,h,!s),o,l,c),null==(u=this.keyframeResolver)||u.scheduleResolve()}onKeyframesResolved(e,t,s,n){this.keyframeResolver=void 0;const{name:r,type:a,velocity:i,delay:o,isHandoff:l,onUpdate:c}=s;this.resolvedAt=Ar.now(),function(e,t,s,n){const r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;const a=e[e.length-1],i=Hi(r,t),o=Hi(a,t);return!(!i||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}(e)||("spring"===s||Li(s))&&n)}(e,r,a,i)||(!zn.instantAnimations&&o||null==c||c(ti(e,s,t)),e[0]=e[e.length-1],Wi(s),s.repeat=0);const d={startTime:n?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...s,keyframes:e},u=!l&&function(e){var t;const{motionValue:s,name:n,repeatDelay:r,repeatType:a,damping:i,type:o}=e;if(!((null==(t=null==s?void 0:s.owner)?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=s.owner.getProps();return Gi()&&n&&zi.has(n)&&("transform"!==n||!c)&&!l&&!r&&"mirror"!==a&&0!==i&&"inertia"!==o}(d)?new Vi({...d,element:d.motionValue.owner.current}):new ii(d);u.finished.then(()=>this.notifyFinished()).catch(Kn),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||(null==(e=this.keyframeResolver)||e.resume(),Ni=!0,Ti(),Ci(),Ni=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null==(e=this.keyframeResolver)||e.cancel()}}const Yi=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ji(e,t,s=1){const[n,r]=function(e){const t=Yi.exec(e);if(!t)return[,];const[,s,n,r]=t;return[`--${s??n}`,r]}(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const e=a.trim();return Gn(e)?parseFloat(e):e}return Mr(r)?Ji(r,t,s+1):r}function Ki(e,t){return(null==e?void 0:e[t])??(null==e?void 0:e.default)??e}const Xi=new Set(["width","height","top","left","right","bottom",...xi]),Zi=e=>t=>t.test(e),Qi=[Ir,Jr,Yr,qr,Xr,Kr,{test:e=>"auto"===e,parse:e=>e}],eo=e=>Qi.find(Zi(e));function to(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||Yn(e))}const so=new Set(["brightness","contrast","saturate","opacity"]);function no(e){const[t,s]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[n]=s.match(Or)||[];if(!n)return e;const r=s.replace(n,"");let a=so.has(t)?1:0;return n!==s&&(a*=100),t+"("+a+r+")"}const ro=/\b([a-z-]*)\(.*?\)/gu,ao={...ca,getAnimatableNone:e=>{const t=e.match(ro);return t?t.map(no).join(" "):e}},io={...Ir,transform:Math.round},oo={borderWidth:Jr,borderTopWidth:Jr,borderRightWidth:Jr,borderBottomWidth:Jr,borderLeftWidth:Jr,borderRadius:Jr,radius:Jr,borderTopLeftRadius:Jr,borderTopRightRadius:Jr,borderBottomRightRadius:Jr,borderBottomLeftRadius:Jr,width:Jr,maxWidth:Jr,height:Jr,maxHeight:Jr,top:Jr,right:Jr,bottom:Jr,left:Jr,padding:Jr,paddingTop:Jr,paddingRight:Jr,paddingBottom:Jr,paddingLeft:Jr,margin:Jr,marginTop:Jr,marginRight:Jr,marginBottom:Jr,marginLeft:Jr,backgroundPositionX:Jr,backgroundPositionY:Jr,...{rotate:qr,rotateX:qr,rotateY:qr,rotateZ:qr,scale:Br,scaleX:Br,scaleY:Br,scaleZ:Br,skew:qr,skewX:qr,skewY:qr,distance:Jr,translateX:Jr,translateY:Jr,translateZ:Jr,x:Jr,y:Jr,z:Jr,perspective:Jr,transformPerspective:Jr,opacity:$r,originX:Zr,originY:Zr,originZ:Jr},zIndex:io,fillOpacity:$r,strokeOpacity:$r,numOctaves:io},lo={...oo,color:ea,backgroundColor:ea,outlineColor:ea,fill:ea,stroke:ea,borderColor:ea,borderTopColor:ea,borderRightColor:ea,borderBottomColor:ea,borderLeftColor:ea,filter:ao,WebkitFilter:ao},co=e=>lo[e];function uo(e,t){let s=co(e);return s!==ao&&(s=ca),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const ho=new Set(["auto","none","0"]);class mo extends Ai{constructor(e,t,s,n,r){super(e,t,s,n,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let s=e[o];if("string"==typeof s&&(s=s.trim(),Mr(s))){const n=Ji(s,t.current);void 0!==n&&(e[o]=n),o===e.length-1&&(this.finalKeyframe=s)}}if(this.resolveNoneKeyframes(),!Xi.has(s)||2!==e.length)return;const[n,r]=e,a=eo(n),i=eo(r);if(a!==i)if(yi(a)&&yi(i))for(let o=0;o<e.length;o++){const t=e[o];"string"==typeof t&&(e[o]=parseFloat(t))}else ki[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let n=0;n<e.length;n++)(null===e[n]||to(e[n]))&&s.push(n);s.length&&function(e,t,s){let n,r=0;for(;r<e.length&&!n;){const t=e[r];"string"==typeof t&&!ho.has(t)&&aa(t).values.length&&(n=e[r]),r++}if(n&&s)for(const a of t)e[a]=uo(s,n)}(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;"height"===s&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ki[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const n=t[t.length-1];void 0!==n&&e.getValue(s,n).jump(n,!1)}measureEndState(){var e;const{element:t,name:s,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const r=t.getValue(s);r&&r.jump(this.measuredOrigin,!1);const a=n.length-1,i=n[a];n[a]=ki[s](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),(null==(e=this.removedTransforms)?void 0:e.length)&&this.removedTransforms.forEach(([e,s])=>{t.getValue(e).set(s)}),this.resolveNoneKeyframes()}}const po=(e,t)=>t&&"number"==typeof e?t.transform(e):e;function fo(e){return qn(e)&&"offsetHeight"in e}class go{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{var t;const s=Ar.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(null==(t=this.events.change)||t.notify(this.current),this.dependents))for(const n of this.dependents)n.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=Ar.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new er);const s=this.events[e].add(t);return"change"===e?()=>{s(),Er.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null==(e=this.events.change)||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ar.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return nr(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null==(e=this.dependents)||e.clear(),null==(t=this.events.destroy)||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xo(e,t){return new go(e,t)}const{schedule:vo}=kr(queueMicrotask,!1),yo={x:!1,y:!1};function bo(){return yo.x||yo.y}function wo(e,t){const s=function(e,t,s){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document;const n=(null==s?void 0:s[e])??t.querySelectorAll(e);return n?Array.from(n):[]}return Array.from(e)}(e),n=new AbortController;return[s,{passive:!0,...t,signal:n.signal},()=>n.abort()]}function ko(e){return!("touch"===e.pointerType||bo())}const Eo=(e,t)=>!!t&&(e===t||Eo(e,t.parentElement)),So=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,jo=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const No=new WeakSet;function Co(e){return t=>{"Enter"===t.key&&e(t)}}function To(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function Ao(e){return So(e)&&!bo()}function _o(e,t,s={}){const[n,r,a]=wo(e,s),i=e=>{const n=e.currentTarget;if(!Ao(e))return;No.add(n);const a=t(n,e),i=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),No.has(n)&&No.delete(n),Ao(e)&&"function"==typeof a&&a(e,{success:t})},o=e=>{i(e,n===window||n===document||s.useGlobalTarget||Eo(n,e.target))},l=e=>{i(e,!1)};window.addEventListener("pointerup",o,r),window.addEventListener("pointercancel",l,r)};return n.forEach(e=>{var t;(s.useGlobalTarget?window:e).addEventListener("pointerdown",i,r),fo(e)&&(e.addEventListener("focus",e=>((e,t)=>{const s=e.currentTarget;if(!s)return;const n=Co(()=>{if(No.has(s))return;To(s,"down");const e=Co(()=>{To(s,"up")});s.addEventListener("keyup",e,t),s.addEventListener("blur",()=>To(s,"cancel"),t)});s.addEventListener("keydown",n,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),t)})(e,r)),t=e,jo.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),a}function Ro(e){return qn(e)&&"ownerSVGElement"in e}const Po=e=>Boolean(e&&e.getVelocity),Mo=[...Qi,ea,ca],Do=s.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Io extends s.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,s=fo(e)&&e.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=s-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function $o({children:e,isPresent:t,anchorX:n,root:r}){const a=s.useId(),i=s.useRef(null),o=s.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=s.useContext(Do);return s.useInsertionEffect(()=>{const{width:e,height:s,top:c,left:d,right:u}=o.current;if(t||!i.current||!e||!s)return;const h="left"===n?`left: ${d}`:`right: ${u}`;i.current.dataset.motionPopId=a;const m=document.createElement("style");l&&(m.nonce=l);const p=r??document.head;return p.appendChild(m),m.sheet&&m.sheet.insertRule(`\n          [data-motion-pop-id="${a}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${s}px !important;\n            ${h}px !important;\n            top: ${c}px !important;\n          }\n        `),()=>{p.contains(m)&&p.removeChild(m)}},[t]),q.jsx(Io,{isPresent:t,childRef:i,sizeRef:o,children:s.cloneElement(e,{ref:i})})}const Bo=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:o,anchorX:l,root:c})=>{const d=Ln(Lo),u=s.useId();let h=!0,m=s.useMemo(()=>(h=!1,{id:u,initial:t,isPresent:n,custom:a,onExitComplete:e=>{d.set(e,!0);for(const t of d.values())if(!t)return;r&&r()},register:e=>(d.set(e,!1),()=>d.delete(e))}),[n,d,r]);return i&&h&&(m={...m}),s.useMemo(()=>{d.forEach((e,t)=>d.set(t,!1))},[n]),s.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),"popLayout"===o&&(e=q.jsx($o,{isPresent:n,anchorX:l,root:c,children:e})),q.jsx(Fn.Provider,{value:m,children:e})};function Lo(){return new Map}function Oo(e=!0){const t=s.useContext(Fn);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,i=s.useId();s.useEffect(()=>{if(e)return a(i)},[e]);const o=s.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const Uo=e=>e.key||"";function Fo(e){const t=[];return s.Children.forEach(e,e=>{s.isValidElement(e)&&t.push(e)}),t}const Vo=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[d,u]=Oo(o),h=s.useMemo(()=>Fo(e),[e]),m=o&&!d?[]:h.map(Uo),p=s.useRef(!0),f=s.useRef(h),g=Ln(()=>new Map),[x,v]=s.useState(h),[y,b]=s.useState(h);Un(()=>{p.current=!1,f.current=h;for(let e=0;e<y.length;e++){const t=Uo(y[e]);m.includes(t)?g.delete(t):!0!==g.get(t)&&g.set(t,!1)}},[y,m.length,m.join("-")]);const w=[];if(h!==x){let e=[...h];for(let t=0;t<y.length;t++){const s=y[t],n=Uo(s);m.includes(n)||(e.splice(t,0,s),w.push(s))}return"wait"===i&&w.length&&(e=w),b(Fo(e)),v(h),null}const{forceRender:k}=s.useContext(Bn);return q.jsx(q.Fragment,{children:y.map(e=>{const s=Uo(e),x=!(o&&!d)&&(h===y||m.includes(s));return q.jsx(Bo,{isPresent:x,initial:!(p.current&&!n)&&void 0,custom:t,presenceAffectsLayout:a,mode:i,root:c,onExitComplete:x?void 0:()=>{if(!g.has(s))return;g.set(s,!0);let e=!0;g.forEach(t=>{t||(e=!1)}),e&&(null==k||k(),b(f.current),o&&(null==u||u()),r&&r())},anchorX:l,children:e},s)})})},Ho=s.createContext({strict:!1}),Wo={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zo={};for(const zp in Wo)zo[zp]={isEnabled:e=>Wo[zp].some(t=>!!e[t])};const Go=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qo(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Go.has(e)}let Yo=e=>!qo(e);try{"function"==typeof(Jo=require("@emotion/is-prop-valid").default)&&(Yo=e=>e.startsWith("on")?!qo(e):Jo(e))}catch{}var Jo;const Ko=s.createContext({});function Xo(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function Zo(e){return"string"==typeof e||Array.isArray(e)}const Qo=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],el=["initial",...Qo];function tl(e){return Xo(e.animate)||el.some(t=>Zo(e[t]))}function sl(e){return Boolean(tl(e)||e.variants)}function nl(e){const{initial:t,animate:n}=function(e,t){if(tl(e)){const{initial:t,animate:s}=e;return{initial:!1===t||Zo(t)?t:void 0,animate:Zo(s)?s:void 0}}return!1!==e.inherit?t:{}}(e,s.useContext(Ko));return s.useMemo(()=>({initial:t,animate:n}),[rl(t),rl(n)])}function rl(e){return Array.isArray(e)?e.join(" "):e}const al={};function il(e,{layout:t,layoutId:s}){return vi.has(e)||e.startsWith("origin")||(t||void 0!==s)&&(!!al[e]||"opacity"===e)}const ol={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ll=xi.length;function cl(e,t,s){const{style:n,vars:r,transformOrigin:a}=e;let i=!1,o=!1;for(const l in t){const e=t[l];if(vi.has(l))i=!0;else if(Rr(l))r[l]=e;else{const t=po(e,oo[l]);l.startsWith("origin")?(o=!0,a[l]=t):n[l]=t}}if(t.transform||(i||s?n.transform=function(e,t,s){let n="",r=!0;for(let a=0;a<ll;a++){const i=xi[a],o=e[i];if(void 0===o)continue;let l=!0;if(l="number"==typeof o?o===(i.startsWith("scale")?1:0):0===parseFloat(o),!l||s){const e=po(o,oo[i]);l||(r=!1,n+=`${ol[i]||i}(${e}) `),s&&(t[i]=e)}}return n=n.trim(),s?n=s(t,r?"":n):r&&(n="none"),n}(t,e.transform,s):n.transform&&(n.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:s=0}=a;n.transformOrigin=`${e} ${t} ${s}`}}const dl=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ul(e,t,s){for(const n in t)Po(t[n])||il(n,s)||(e[n]=t[n])}function hl(e,t){const n={};return ul(n,e.style||{},e),Object.assign(n,function({transformTemplate:e},t){return s.useMemo(()=>{const s={style:{},transform:{},transformOrigin:{},vars:{}};return cl(s,t,e),Object.assign({},s.vars,s.style)},[t])}(e,t)),n}function ml(e,t){const s={},n=hl(e,t);return e.drag&&!1!==e.dragListener&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=n,s}const pl={offset:"stroke-dashoffset",array:"stroke-dasharray"},fl={offset:"strokeDashoffset",array:"strokeDasharray"};function gl(e,{attrX:t,attrY:s,attrScale:n,pathLength:r,pathSpacing:a=1,pathOffset:i=0,...o},l,c,d){if(cl(e,o,c),l)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:u,style:h}=e;u.transform&&(h.transform=u.transform,delete u.transform),(h.transform||u.transformOrigin)&&(h.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),h.transform&&(h.transformBox=(null==d?void 0:d.transformBox)??"fill-box",delete u.transformBox),void 0!==t&&(u.x=t),void 0!==s&&(u.y=s),void 0!==n&&(u.scale=n),void 0!==r&&function(e,t,s=1,n=0,r=!0){e.pathLength=1;const a=r?pl:fl;e[a.offset]=Jr.transform(-n);const i=Jr.transform(t),o=Jr.transform(s);e[a.array]=`${i} ${o}`}(u,r,a,i,!1)}const xl=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),vl=e=>"string"==typeof e&&"svg"===e.toLowerCase();function yl(e,t,n,r){const a=s.useMemo(()=>{const s={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return gl(s,t,vl(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const t={};ul(t,e.style,e),a.style={...t,...a.style}}return a}const bl=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function wl(e){return"string"==typeof e&&!e.includes("-")&&!!(bl.indexOf(e)>-1||/[A-Z]/u.test(e))}function kl(e,t,n,{latestValues:r},a,i=!1){const o=(wl(e)?yl:ml)(t,r,a,e),l=function(e,t,s){const n={};for(const r in e)"values"===r&&"object"==typeof e.values||(Yo(r)||!0===s&&qo(r)||!t&&!qo(r)||e.draggable&&r.startsWith("onDrag"))&&(n[r]=e[r]);return n}(t,"string"==typeof e,i),c=e!==s.Fragment?{...l,...o,ref:n}:{},{children:d}=t,u=s.useMemo(()=>Po(d)?d.get():d,[d]);return s.createElement(e,{...c,children:u})}function El(e){const t=[{},{}];return null==e||e.values.forEach((e,s)=>{t[0][s]=e.get(),t[1][s]=e.getVelocity()}),t}function Sl(e,t,s,n){if("function"==typeof t){const[r,a]=El(n);t=t(void 0!==s?s:e.custom,r,a)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[r,a]=El(n);t=t(void 0!==s?s:e.custom,r,a)}return t}function jl(e){return Po(e)?e.get():e}function Nl(e,t,s,n){const r={},a=n(e,{});for(const h in a)r[h]=jl(a[h]);let{initial:i,animate:o}=e;const l=tl(e),c=sl(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let d=!!s&&!1===s.initial;d=d||!1===i;const u=d?o:i;if(u&&"boolean"!=typeof u&&!Xo(u)){const t=Array.isArray(u)?u:[u];for(let s=0;s<t.length;s++){const n=Sl(e,t[s]);if(n){const{transitionEnd:e,transition:t,...s}=n;for(const n in s){let e=s[n];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(r[n]=e)}for(const n in e)r[n]=e[n]}}}return r}const Cl=e=>(t,n)=>{const r=s.useContext(Ko),a=s.useContext(Fn),i=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},s,n,r){return{latestValues:Nl(s,n,r,e),renderState:t()}}(e,t,r,a);return n?i():Ln(i)};function Tl(e,t,s){var n;const{style:r}=e,a={};for(const i in r)(Po(r[i])||t.style&&Po(t.style[i])||il(i,e)||void 0!==(null==(n=null==s?void 0:s.getValue(i))?void 0:n.liveStyle))&&(a[i]=r[i]);return a}const Al=Cl({scrapeMotionValuesFromProps:Tl,createRenderState:dl});function _l(e,t,s){const n=Tl(e,t,s);for(const r in e)if(Po(e[r])||Po(t[r])){n[-1!==xi.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}const Rl=Cl({scrapeMotionValuesFromProps:_l,createRenderState:xl}),Pl=Symbol.for("motionComponentSymbol");function Ml(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Dl(e,t,n){return s.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),n&&("function"==typeof n?n(s):Ml(n)&&(n.current=s))},[t])}const Il=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$l="data-"+Il("framerAppearId"),Bl=s.createContext({});function Ll(e,t,n,r,a){var i,o;const{visualElement:l}=s.useContext(Ko),c=s.useContext(Ho),d=s.useContext(Fn),u=s.useContext(Do).reducedMotion,h=s.useRef(null);r=r||c.renderer,!h.current&&r&&(h.current=r(e,{visualState:t,parent:l,props:n,presenceContext:d,blockInitialAnimation:!!d&&!1===d.initial,reducedMotionConfig:u}));const m=h.current,p=s.useContext(Bl);!m||m.projection||!a||"html"!==m.type&&"svg"!==m.type||function(e,t,s,n){const{layoutId:r,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:Ol(e.parent)),e.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:Boolean(i)||o&&Ml(o),visualElement:e,animationType:"string"==typeof a?a:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:l,layoutRoot:c})}(h.current,n,a,p);const f=s.useRef(!1);s.useInsertionEffect(()=>{m&&f.current&&m.update(n,d)});const g=n[$l],x=s.useRef(Boolean(g)&&!(null==(i=window.MotionHandoffIsComplete)?void 0:i.call(window,g))&&(null==(o=window.MotionHasOptimisedAnimation)?void 0:o.call(window,g)));return Un(()=>{m&&(f.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),x.current&&m.animationState&&m.animationState.animateChanges())}),s.useEffect(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var e;null==(e=window.MotionHandoffMarkAsComplete)||e.call(window,g)}),x.current=!1),m.enteringChildren=void 0)}),m}function Ol(e){if(e)return!1!==e.options.allowProjection?e.projection:Ol(e.parent)}function Ul(e,{forwardMotionProps:t=!1}={},n,r){n&&function(e){for(const t in e)zo[t]={...zo[t],...e[t]}}(n);const a=wl(e)?Rl:Al;function i(n,i){let o;const l={...s.useContext(Do),...n,layoutId:Fl(n)},{isStatic:c}=l,d=nl(n),u=a(n,c);if(!c&&On){s.useContext(Ho).strict;const t=function(e){const{drag:t,layout:s}=zo;if(!t&&!s)return{};const n={...t,...s};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==s?void 0:s.isEnabled(e))?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}(l);o=t.MeasureLayout,d.visualElement=Ll(e,u,l,r,t.ProjectionNode)}return q.jsxs(Ko.Provider,{value:d,children:[o&&d.visualElement?q.jsx(o,{visualElement:d.visualElement,...l}):null,kl(e,n,Dl(u,d.visualElement,i),u,c,t)]})}i.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;const o=s.forwardRef(i);return o[Pl]=e,o}function Fl({layoutId:e}){const t=s.useContext(Bn).id;return t&&void 0!==e?t+"-"+e:e}function Vl(e,t){if("undefined"==typeof Proxy)return Ul;const s=new Map,n=(s,n)=>Ul(s,n,e,t);return new Proxy((e,t)=>n(e,t),{get:(r,a)=>"create"===a?n:(s.has(a)||s.set(a,Ul(a,void 0,e,t)),s.get(a))})}function Hl({top:e,left:t,right:s,bottom:n}){return{x:{min:t,max:s},y:{min:e,max:n}}}function Wl(e){return void 0===e||1===e}function zl({scale:e,scaleX:t,scaleY:s}){return!Wl(e)||!Wl(t)||!Wl(s)}function Gl(e){return zl(e)||ql(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function ql(e){return Yl(e.x)||Yl(e.y)}function Yl(e){return e&&"0%"!==e}function Jl(e,t,s){return s+t*(e-s)}function Kl(e,t,s,n,r){return void 0!==r&&(e=Jl(e,r,n)),Jl(e,s,n)+t}function Xl(e,t=0,s=1,n,r){e.min=Kl(e.min,t,s,n,r),e.max=Kl(e.max,t,s,n,r)}function Zl(e,{x:t,y:s}){Xl(e.x,t.translate,t.scale,t.originPoint),Xl(e.y,s.translate,s.scale,s.originPoint)}const Ql=.999999999999,ec=1.0000000000001;function tc(e,t){e.min=e.min+t,e.max=e.max+t}function sc(e,t,s,n,r=.5){Xl(e,t,s,ha(e.min,e.max,r),n)}function nc(e,t){sc(e.x,t.x,t.scaleX,t.scale,t.originX),sc(e.y,t.y,t.scaleY,t.scale,t.originY)}function rc(e,t){return Hl(function(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}const ac=()=>({x:{min:0,max:0},y:{min:0,max:0}}),ic={current:null},oc={current:!1};const lc=new WeakMap;const cc=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dc{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:n,blockInitialAnimation:r,visualState:a},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ai,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Ar.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,Er.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=a;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=i,this.blockInitialAnimation=Boolean(r),this.isControllingVariants=tl(t),this.isVariantNode=sl(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const u in d){const e=d[u];void 0!==o[u]&&Po(e)&&e.set(o[u])}}mount(e){var t;this.current=e,lc.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),oc.current||function(){if(oc.current=!0,On)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ic.current=e.matches;e.addEventListener("change",t),t()}else ic.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||ic.current),null==(t=this.parent)||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Sr(this.notifyUpdate),Sr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null==(e=this.parent)||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=vi.has(e);s&&this.onBindTransform&&this.onBindTransform();const n=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Er.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{n(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in zo){const t=zo[e];if(!t)continue;const{isEnabled:s,Feature:n}=t;if(!this.features[e]&&n&&s(this.props)&&(this.features[e]=new n(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<cc.length;s++){const t=cc[s];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const n=e["on"+t];n&&(this.propEventSubscriptions[t]=this.on(t,n))}this.prevMotionValues=function(e,t,s){for(const n in t){const r=t[n],a=s[n];if(Po(r))e.addValue(n,r);else if(Po(a))e.addValue(n,xo(r,{owner:e}));else if(a!==r)if(e.hasValue(n)){const t=e.getValue(n);!0===t.liveStyle?t.jump(r):t.hasAnimated||t.set(r)}else{const t=e.getStaticValue(n);e.addValue(n,xo(void 0!==t?t:r,{owner:e}))}}for(const n in s)void 0===t[n]&&e.removeValue(n);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return void 0===s&&void 0!==t&&(s=xo(null===t?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){let s=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var n;return null!=s&&("string"==typeof s&&(Gn(s)||Yn(s))?s=parseFloat(s):(n=s,!Mo.find(Zi(n))&&ca.test(t)&&(s=uo(e,t))),this.setBaseTarget(e,Po(s)?s.get():s)),Po(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:s}=this.props;let n;if("string"==typeof s||"object"==typeof s){const r=Sl(this.props,s,null==(t=this.presenceContext)?void 0:t.custom);r&&(n=r[e])}if(s&&void 0!==n)return n;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||Po(r)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new er),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){vo.render(this.render)}}class uc extends dc{constructor(){super(...arguments),this.KeyframeResolver=mo}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Po(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function hc(e,{style:t,vars:s},n,r){const a=e.style;let i;for(i in t)a[i]=t[i];for(i in null==r||r.applyProjectionStyles(a,n),s)a.setProperty(i,s[i])}class mc extends uc{constructor(){super(...arguments),this.type="html",this.renderInstance=hc}readValueFromInstance(e,t){var s,n;if(vi.has(t))return(null==(s=this.projection)?void 0:s.isProjecting)?pi(t):((e,t)=>{const{transform:s="none"}=getComputedStyle(e);return fi(s,t)})(e,t);{const s=(n=e,window.getComputedStyle(n)),r=(Rr(t)?s.getPropertyValue(t):s[t])||0;return"string"==typeof r?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return rc(e,t)}build(e,t,s){cl(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return Tl(e,t,s)}}const pc=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class fc extends uc{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ac}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(vi.has(t)){const e=co(t);return e&&e.default||0}return t=pc.has(t)?t:Il(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return _l(e,t,s)}build(e,t,s){gl(e,t,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,t,s,n){!function(e,t,s,n){hc(e,t,void 0,n);for(const r in t.attrs)e.setAttribute(pc.has(r)?r:Il(r),t.attrs[r])}(e,t,0,n)}mount(e){this.isSVGTag=vl(e.tagName),super.mount(e)}}const gc=(e,t)=>wl(e)?new fc(t):new mc(t,{allowProjection:e!==s.Fragment});function xc(e,t,s){const n=e.getProps();return Sl(n,t,void 0!==s?s:n.custom,e)}const vc=e=>Array.isArray(e);function yc(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,xo(s))}function bc(e){return vc(e)?e[e.length-1]||0:e}function wc(e,t){const s=e.getValue("willChange");if(n=s,Boolean(Po(n)&&n.add))return s.add(t);if(!s&&zn.WillChange){const s=new zn.WillChange("auto");e.addValue("willChange",s),s.add(t)}var n}function kc(e){return e.props[$l]}const Ec=e=>null!==e;const Sc={type:"spring",stiffness:500,damping:25,restSpeed:10},jc={type:"keyframes",duration:.8},Nc={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Cc=(e,{keyframes:t})=>t.length>2?jc:vi.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:Sc:Nc;const Tc=(e,t,s,n={},r,a)=>i=>{const o=Ki(n,e)||{},l=o.delay||n.delay||0;let{elapsed:c=0}=n;c-=tr(l);const d={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:r};(function({when:e,delay:t,delayChildren:s,staggerChildren:n,staggerDirection:r,repeat:a,repeatType:i,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length})(o)||Object.assign(d,Cc(e,d)),d.duration&&(d.duration=tr(d.duration)),d.repeatDelay&&(d.repeatDelay=tr(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(Wi(d),0===d.delay&&(u=!0)),(zn.instantAnimations||zn.skipAnimations)&&(u=!0,Wi(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,u&&!a&&void 0!==t.get()){const e=function(e,{repeat:t,repeatType:s="loop"}){const n=e.filter(Ec);return n[t&&"loop"!==s&&t%2==1?0:n.length-1]}(d.keyframes,o);if(void 0!==e)return void Er.update(()=>{d.onUpdate(e),d.onComplete()})}return o.isSync?new ii(d):new qi(d)};function Ac({protectedKeys:e,needsAnimating:t},s){const n=e.hasOwnProperty(s)&&!0!==t[s];return t[s]=!1,n}function _c(e,t,{delay:s=0,transitionOverride:n,type:r}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...o}=t;n&&(a=n);const l=[],c=r&&e.animationState&&e.animationState.getState()[r];for(const d in o){const t=e.getValue(d,e.latestValues[d]??null),n=o[d];if(void 0===n||c&&Ac(c,d))continue;const r={delay:s,...Ki(a||{},d)},i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(n)&&n===i&&!r.velocity)continue;let u=!1;if(window.MotionHandoffAnimation){const t=kc(e);if(t){const e=window.MotionHandoffAnimation(t,d,Er);null!==e&&(r.startTime=e,u=!0)}}wc(e,d),t.start(Tc(d,t,n,e.shouldReduceMotion&&Xi.has(d)?{type:!1}:r,e,u));const h=t.animation;h&&l.push(h)}return i&&Promise.all(l).then(()=>{Er.update(()=>{i&&function(e,t){const s=xc(e,t);let{transitionEnd:n={},transition:r={},...a}=s||{};a={...a,...n};for(const i in a)yc(e,i,bc(a[i]))}(e,i)})}),l}function Rc(e,t,s,n=0,r=1){const a=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),i=e.size,o=(i-1)*n;return"function"==typeof s?s(a,i):1===r?a*n:o-a*n}function Pc(e,t,s={}){var n;const r=xc(e,t,"exit"===s.type?null==(n=e.presenceContext)?void 0:n.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(a=s.transitionOverride);const i=r?()=>Promise.all(_c(e,r,s)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(n=0)=>{const{delayChildren:r=0,staggerChildren:i,staggerDirection:o}=a;return function(e,t,s=0,n=0,r=0,a=1,i){const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(Pc(l,t,{...i,delay:s+("function"==typeof n?0:n)+Rc(e.variantChildren,l,n,r,a)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,n,r,i,o,s)}:()=>Promise.resolve(),{when:l}=a;if(l){const[e,t]="beforeChildren"===l?[i,o]:[o,i];return e().then(()=>t())}return Promise.all([i(),o(s.delay)])}function Mc(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let n=0;n<s;n++)if(t[n]!==e[n])return!1;return!0}const Dc=el.length;function Ic(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Ic(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let s=0;s<Dc;s++){const n=el[s],r=e.props[n];(Zo(r)||!1===r)&&(t[n]=r)}return t}const $c=[...Qo].reverse(),Bc=Qo.length;function Lc(e){return t=>Promise.all(t.map(({animation:t,options:s})=>function(e,t,s={}){let n;if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map(t=>Pc(e,t,s));n=Promise.all(r)}else if("string"==typeof t)n=Pc(e,t,s);else{const r="function"==typeof t?xc(e,t,s.custom):t;n=Promise.all(_c(e,r,s))}return n.then(()=>{e.notify("AnimationComplete",t)})}(e,t,s)))}function Oc(e){let t=Lc(e),s=Vc(),n=!0;const r=t=>(s,n)=>{var r;const a=xc(e,n,"exit"===t?null==(r=e.presenceContext)?void 0:r.custom:void 0);if(a){const{transition:e,transitionEnd:t,...n}=a;s={...s,...n,...t}}return s};function a(a){const{props:i}=e,o=Ic(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<Bc;t++){const h=$c[t],m=s[h],p=void 0!==i[h]?i[h]:o[h],f=Zo(p),g=h===a?m.isActive:null;!1===g&&(u=t);let x=p===o[h]&&p!==i[h]&&f;if(x&&n&&e.manuallyAnimateOnMount&&(x=!1),m.protectedKeys={...d},!m.isActive&&null===g||!p&&!m.prevProp||Xo(p)||"boolean"==typeof p)continue;const v=Uc(m.prevProp,p);let y=v||h===a&&m.isActive&&!x&&f||t>u&&f,b=!1;const w=Array.isArray(p)?p:[p];let k=w.reduce(r(h),{});!1===g&&(k={});const{prevResolvedValues:E={}}=m,S={...E,...k},j=t=>{y=!0,c.has(t)&&(b=!0,c.delete(t)),m.needsAnimating[t]=!0;const s=e.getValue(t);s&&(s.liveStyle=!1)};for(const e in S){const t=k[e],s=E[e];if(d.hasOwnProperty(e))continue;let n=!1;n=vc(t)&&vc(s)?!Mc(t,s):t!==s,n?null!=t?j(e):c.add(e):void 0!==t&&c.has(e)?j(e):m.protectedKeys[e]=!0}m.prevProp=p,m.prevResolvedValues=k,m.isActive&&(d={...d,...k}),n&&e.blockInitialAnimation&&(y=!1);const N=x&&v;y&&(!N||b)&&l.push(...w.map(t=>{const s={type:h};if("string"==typeof t&&n&&!N&&e.manuallyAnimateOnMount&&e.parent){const{parent:n}=e,r=xc(n,t);if(n.enteringChildren&&r){const{delayChildren:t}=r.transition||{};s.delay=Rc(n.enteringChildren,e,t)}}return{animation:t,options:s}}))}if(c.size){const t={};if("boolean"!=typeof i.initial){const s=xc(e,Array.isArray(i.initial)?i.initial[0]:i.initial);s&&s.transition&&(t.transition=s.transition)}c.forEach(s=>{const n=e.getBaseTarget(s),r=e.getValue(s);r&&(r.liveStyle=!0),t[s]=n??null}),l.push({animation:t})}let h=Boolean(l.length);return!n||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(h=!1),n=!1,h?t(l):Promise.resolve()}return{animateChanges:a,setActive:function(t,n){var r;if(s[t].isActive===n)return Promise.resolve();null==(r=e.variantChildren)||r.forEach(e=>{var s;return null==(s=e.animationState)?void 0:s.setActive(t,n)}),s[t].isActive=n;const i=a(t);for(const e in s)s[e].protectedKeys={};return i},setAnimateFunction:function(s){t=s(e)},getState:()=>s,reset:()=>{s=Vc(),n=!0}}}function Uc(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!Mc(t,e)}function Fc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Vc(){return{animate:Fc(!0),whileInView:Fc(),whileHover:Fc(),whileTap:Fc(),whileDrag:Fc(),whileFocus:Fc(),exit:Fc()}}class Hc{constructor(e){this.isMounted=!1,this.node=e}update(){}}let Wc=0;const zc={animation:{Feature:class extends Hc{constructor(e){super(e),e.animationState||(e.animationState=Oc(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Xo(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}}},exit:{Feature:class extends Hc{constructor(){super(...arguments),this.id=Wc++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const n=this.node.animationState.setActive("exit",!e);t&&!e&&n.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function Gc(e,t,s,n={passive:!0}){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s)}function qc(e){return{point:{x:e.pageX,y:e.pageY}}}function Yc(e,t,s,n){return Gc(e,t,(e=>t=>So(t)&&e(t,qc(t)))(s),n)}function Jc(e){return e.max-e.min}function Kc(e,t,s,n=.5){e.origin=n,e.originPoint=ha(t.min,t.max,e.origin),e.scale=Jc(s)/Jc(t),e.translate=ha(s.min,s.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Xc(e,t,s,n){Kc(e.x,t.x,s.x,n?n.originX:void 0),Kc(e.y,t.y,s.y,n?n.originY:void 0)}function Zc(e,t,s){e.min=s.min+t.min,e.max=e.min+Jc(t)}function Qc(e,t,s){e.min=t.min-s.min,e.max=e.min+Jc(t)}function ed(e,t,s){Qc(e.x,t.x,s.x),Qc(e.y,t.y,s.y)}function td(e){return[e("x"),e("y")]}const sd=({current:e})=>e?e.ownerDocument.defaultView:null,nd=(e,t)=>Math.abs(e-t);class rd{constructor(e,t,{transformPagePoint:s,contextWindow:n=window,dragSnapToOrigin:r=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=od(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,s=function(e,t){const s=nd(e.x,t.x),n=nd(e.y,t.y);return Math.sqrt(s**2+n**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!s)return;const{point:n}=e,{timestamp:r}=jr;this.history.push({...n,timestamp:r});const{onStart:a,onMove:i}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=ad(t,this.transformPagePoint),Er.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:s,onSessionEnd:n,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=od("pointercancel"===e.type?this.lastMoveEventInfo:ad(t,this.transformPagePoint),this.history);this.startEvent&&s&&s(e,a),n&&n(e,a)},!So(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=s,this.distanceThreshold=a,this.contextWindow=n||window;const i=ad(qc(e),this.transformPagePoint),{point:o}=i,{timestamp:l}=jr;this.history=[{...o,timestamp:l}];const{onSessionStart:c}=t;c&&c(e,od(i,this.history)),this.removeListeners=Zn(Yc(this.contextWindow,"pointermove",this.handlePointerMove),Yc(this.contextWindow,"pointerup",this.handlePointerUp),Yc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Sr(this.updatePoint)}}function ad(e,t){return t?{point:t(e.point)}:e}function id(e,t){return{x:e.x-t.x,y:e.y-t.y}}function od({point:e},t){return{point:e,delta:id(e,cd(t)),offset:id(e,ld(t)),velocity:dd(t,.1)}}function ld(e){return e[0]}function cd(e){return e[e.length-1]}function dd(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,n=null;const r=cd(e);for(;s>=0&&(n=e[s],!(r.timestamp-n.timestamp>tr(t)));)s--;if(!n)return{x:0,y:0};const a=sr(r.timestamp-n.timestamp);if(0===a)return{x:0,y:0};const i={x:(r.x-n.x)/a,y:(r.y-n.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function ud(e,t,s){return{min:void 0!==t?e.min+t:void 0,max:void 0!==s?e.max+s-(e.max-e.min):void 0}}function hd(e,t){let s=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,n]=[n,s]),{min:s,max:n}}const md=.35;function pd(e,t,s){return{min:fd(e,t),max:fd(e,s)}}function fd(e,t){return"number"==typeof e?e:e[t]||0}const gd=new WeakMap;class xd{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:s}={}){const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new rd(e,{onSessionStart:e=>{const{dragSnapToOrigin:s}=this.getProps();s?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(qc(e).point)},onStart:(e,t)=>{const{drag:s,dragPropagation:n,onDragStart:r}=this.getProps();if(s&&!n&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(a=s)||"y"===a?yo[a]?null:(yo[a]=!0,()=>{yo[a]=!1}):yo.x||yo.y?null:(yo.x=yo.y=!0,()=>{yo.x=yo.y=!1}),!this.openDragLock))return;var a;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),td(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Yr.test(t)){const{projection:s}=this.visualElement;if(s&&s.layout){const n=s.layout.layoutBox[e];if(n){t=Jc(n)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),r&&Er.postRender(()=>r(e,t)),wc(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:s,dragDirectionLock:n,onDirectionLock:r,onDrag:a}=this.getProps();if(!s&&!this.openDragLock)return;const{offset:i}=t;if(n&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let s=null;Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x");return s}(i),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>td(e=>{var t;return"paused"===this.getAnimationState(e)&&(null==(t=this.getAxisMotionValue(e).animation)?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,distanceThreshold:s,contextWindow:sd(this.visualElement)})}stop(e,t){const s=e||this.latestPointerEvent,n=t||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!n||!s)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&Er.postRender(()=>i(s,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:n}=this.getProps();if(!s||!vd(e,n,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(a=function(e,{min:t,max:s},n){return void 0!==t&&e<t?e=n?ha(t,e,n.min):Math.max(e,t):void 0!==s&&e>s&&(e=n?ha(s,e,n.max):Math.min(e,s)),e}(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:s}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(e=this.visualElement.projection)?void 0:e.layout,r=this.constraints;t&&Ml(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!n)&&function(e,{top:t,left:s,bottom:n,right:r}){return{x:ud(e.x,s,r),y:ud(e.y,t,n)}}(n.layoutBox,t),this.elastic=function(e=md){return!1===e?e=0:!0===e&&(e=md),{x:pd(e,"left","right"),y:pd(e,"top","bottom")}}(s),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&td(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const s={};return void 0!==t.min&&(s.min=t.min-e.min),void 0!==t.max&&(s.max=t.max-e.min),s}(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ml(e))return!1;const s=e.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const r=function(e,t,s){const n=rc(e,s),{scroll:r}=t;return r&&(tc(n.x,r.offset.x),tc(n.y,r.offset.y)),n}(s,n.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:hd(e.x,t.x),y:hd(e.y,t.y)}}(n.layout.layoutBox,r);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=Hl(e))}return a}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:n,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=td(i=>{if(!vd(i,t,this.currentDirection))return;let l=o&&o[i]||{};a&&(l={min:0,max:0});const c=n?200:1e6,d=n?40:1e7,u={type:"inertia",velocity:s?e[i]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...r,...l};return this.startAxisValueAnimation(i,u)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return wc(this.visualElement,e),s.start(Tc(e,s,0,t,this.visualElement,!1))}stopAnimation(){td(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){td(e=>{var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.pause()})}getAnimationState(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),n=s[t];return n||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){td(t=>{const{drag:s}=this.getProps();if(!vd(t,s,this.currentDirection))return;const{projection:n}=this.visualElement,r=this.getAxisMotionValue(t);if(n&&n.layout){const{min:s,max:a}=n.layout.layoutBox[t];r.set(e[t]-ha(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!Ml(t)||!s||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};td(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const s=t.get();n[e]=function(e,t){let s=.5;const n=Jc(e),r=Jc(t);return r>n?s=Qn(t.min,t.max-n,e.min):n>r&&(s=Qn(e.min,e.max-r,t.min)),Wn(0,1,s)}({min:s,max:s},this.constraints[e])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),td(t=>{if(!vd(t,e,null))return;const s=this.getAxisMotionValue(t),{min:r,max:a}=this.constraints[t];s.set(ha(r,a,n[t]))})}addListeners(){if(!this.visualElement.current)return;gd.set(this.visualElement,this);const e=Yc(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:s=!0}=this.getProps();t&&s&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Ml(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,n=s.addEventListener("measure",t);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Er.read(t);const r=Gc(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(td(t=>{const s=this.getAxisMotionValue(t);s&&(this.originPoint[t]+=e[t].translate,s.set(s.get()+e[t].translate))}),this.visualElement.render())});return()=>{r(),e(),n(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:n=!1,dragConstraints:r=!1,dragElastic:a=md,dragMomentum:i=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:n,dragConstraints:r,dragElastic:a,dragMomentum:i}}}function vd(e,t,s){return!(!0!==t&&t!==e||null!==s&&s!==e)}const yd=e=>(t,s)=>{e&&Er.postRender(()=>e(t,s))};const bd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function wd(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const kd={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!Jr.test(e))return e;e=parseFloat(e)}return`${wd(e,t.target.x)}% ${wd(e,t.target.y)}%`}},Ed={correct:(e,{treeScale:t,projectionDelta:s})=>{const n=e,r=ca.parse(e);if(r.length>5)return n;const a=ca.createTransformer(e),i="number"!=typeof r[0]?1:0,o=s.x.scale*t.x,l=s.y.scale*t.y;r[0+i]/=o,r[1+i]/=l;const c=ha(o,l,.5);return"number"==typeof r[2+i]&&(r[2+i]/=c),"number"==typeof r[3+i]&&(r[3+i]/=c),a(r)}};let Sd=!1;class jd extends s.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:n}=this.props,{projection:r}=e;!function(e){for(const t in e)al[t]=e[t],Rr(t)&&(al[t].isCSSVariable=!0)}(Cd),r&&(t.group&&t.group.add(r),s&&s.register&&n&&s.register(r),Sd&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),bd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:n,isPresent:r}=this.props,{projection:a}=s;return a?(a.isPresent=r,Sd=!0,n||e.layoutDependency!==t||void 0===t||e.isPresent!==r?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||Er.postRender(()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),vo.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:n}=e;Sd=!0,n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),s&&s.deregister&&s.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Nd(e){const[t,n]=Oo(),r=s.useContext(Bn);return q.jsx(jd,{...e,layoutGroup:r,switchLayoutGroup:s.useContext(Bl),isPresent:t,safeToRemove:n})}const Cd={borderRadius:{...kd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kd,borderTopRightRadius:kd,borderBottomLeftRadius:kd,borderBottomRightRadius:kd,boxShadow:Ed};const Td=(e,t)=>e.depth-t.depth;class Ad{constructor(){this.children=[],this.isDirty=!1}add(e){Vn(this.children,e),this.isDirty=!0}remove(e){Hn(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Td),this.isDirty=!1,this.children.forEach(e)}}const _d=["TopLeft","TopRight","BottomLeft","BottomRight"],Rd=_d.length,Pd=e=>"string"==typeof e?parseFloat(e):e,Md=e=>"number"==typeof e||Jr.test(e);function Dd(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Id=Bd(0,.5,mr),$d=Bd(.5,.95,Kn);function Bd(e,t,s){return n=>n<e?0:n>t?1:s(Qn(e,t,n))}function Ld(e,t){e.min=t.min,e.max=t.max}function Od(e,t){Ld(e.x,t.x),Ld(e.y,t.y)}function Ud(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Fd(e,t,s,n,r){return e=Jl(e-=t,1/s,n),void 0!==r&&(e=Jl(e,1/r,n)),e}function Vd(e,t,[s,n,r],a,i){!function(e,t=0,s=1,n=.5,r,a=e,i=e){Yr.test(t)&&(t=parseFloat(t),t=ha(i.min,i.max,t/100)-i.min);if("number"!=typeof t)return;let o=ha(a.min,a.max,n);e===a&&(o-=t),e.min=Fd(e.min,t,s,o,r),e.max=Fd(e.max,t,s,o,r)}(e,t[s],t[n],t[r],t.scale,a,i)}const Hd=["x","scaleX","originX"],Wd=["y","scaleY","originY"];function zd(e,t,s,n){Vd(e.x,t,Hd,s?s.x:void 0,n?n.x:void 0),Vd(e.y,t,Wd,s?s.y:void 0,n?n.y:void 0)}function Gd(e){return 0===e.translate&&1===e.scale}function qd(e){return Gd(e.x)&&Gd(e.y)}function Yd(e,t){return e.min===t.min&&e.max===t.max}function Jd(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Kd(e,t){return Jd(e.x,t.x)&&Jd(e.y,t.y)}function Xd(e){return Jc(e.x)/Jc(e.y)}function Zd(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Qd{constructor(){this.members=[]}add(e){Vn(this.members,e),e.scheduleRender()}remove(e){if(Hn(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let s;for(let n=t;n>=0;n--){const e=this.members[n];if(!1!==e.isPresent){s=e;break}}return!!s&&(this.promote(s),!0)}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;!1===n&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const eu=["","X","Y","Z"];let tu=0;function su(e,t,s,n){const{latestValues:r}=t;r[e]&&(s[e]=r[e],t.setStaticValue(e,0),n&&(n[e]=0))}function nu(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=kc(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:t,layoutId:n}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",Er,!(t||n))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&nu(n)}function ru({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(e={},s=(null==t?void 0:t())){this.id=tu++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ou),this.nodes.forEach(pu),this.nodes.forEach(fu),this.nodes.forEach(lu)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ad)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new er),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const s=this.eventHandlers.get(e);s&&s.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;var s;this.isSVG=Ro(t)&&!(Ro(s=t)&&"svg"===s.tagName),this.instance=t;const{layoutId:n,layout:r,visualElement:a}=this.options;if(a&&!a.current&&a.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||n)&&(this.isLayoutDirty=!0),e){let s,n=0;const r=()=>this.root.updateBlockedByResize=!1;Er.read(()=>{n=window.innerWidth}),e(t,()=>{const e=window.innerWidth;e!==n&&(n=e,this.root.updateBlockedByResize=!0,s&&s(),s=function(e,t){const s=Ar.now(),n=({timestamp:r})=>{const a=r-s;a>=t&&(Sr(n),e(a-t))};return Er.setup(n,!0),()=>Sr(n)}(r,250),bd.hasAnimatedSinceResize&&(bd.hasAnimatedSinceResize=!1,this.nodes.forEach(mu)))})}n&&this.root.registerSharedNode(n,this),!1!==this.options.animate&&a&&(n||r)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:s,layout:n})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const r=this.options.transition||a.getDefaultTransition()||wu,{onLayoutAnimationStart:i,onLayoutAnimationComplete:o}=a.getProps(),l=!this.targetLayout||!Kd(this.targetLayout,n),c=!t&&s;if(this.options.layoutRoot||this.resumeFrom||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const t={...Ki(r,"layout"),onPlay:i,onComplete:o};(a.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,c)}else t||mu(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Sr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(gu),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&nu(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:s}=this.options;if(void 0===t&&!s)return;const n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(du);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(uu);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(hu),this.nodes.forEach(au),this.nodes.forEach(iu)):this.nodes.forEach(uu),this.clearAllSnapshots();const e=Ar.now();jr.delta=Wn(0,1e3/60,e-jr.timestamp),jr.timestamp=e,jr.isProcessing=!0,Nr.update.process(jr),Nr.preRender.process(jr),Nr.render.process(jr),jr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,vo.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(cu),this.sharedNodes.forEach(xu)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Er.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Er.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||Jc(this.snapshot.measuredBox.x)||Jc(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let s=0;s<this.path.length;s++){this.path[s].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=n(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!r)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!qd(this.projectionDelta),s=this.getTransformTemplate(),n=s?s(this.latestValues,""):void 0,a=n!==this.prevTransformTemplateValue;e&&this.instance&&(t||Gl(this.latestValues)||a)&&(r(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let s=this.removeElementScroll(t);var n;return e&&(s=this.removeTransform(s)),Su((n=s).x),Su(n.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:s,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const s=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(Nu))){const{scroll:e}=this.root;e&&(tc(s.x,e.offset.x),tc(s.y,e.offset.y))}return s}removeElementScroll(e){var t;const s={x:{min:0,max:0},y:{min:0,max:0}};if(Od(s,e),null==(t=this.scroll)?void 0:t.wasRoot)return s;for(let n=0;n<this.path.length;n++){const t=this.path[n],{scroll:r,options:a}=t;t!==this.root&&r&&a.layoutScroll&&(r.wasRoot&&Od(s,e),tc(s.x,r.offset.x),tc(s.y,r.offset.y))}return s}applyTransform(e,t=!1){const s={x:{min:0,max:0},y:{min:0,max:0}};Od(s,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&nc(s,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Gl(e.latestValues)&&nc(s,e.latestValues)}return Gl(this.latestValues)&&nc(s,this.latestValues),s}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Od(t,e);for(let s=0;s<this.path.length;s++){const e=this.path[s];if(!e.instance)continue;if(!Gl(e.latestValues))continue;zl(e.latestValues)&&e.updateSnapshot();const n=ac();Od(n,e.measurePageBox()),zd(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,n)}return Gl(this.latestValues)&&zd(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==s;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(t=this.parent)?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:a}=this.options;if(this.layout&&(r||a)){if(this.resolvedRelativeTargetAt=jr.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},ed(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Od(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var i,o,l;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,o=this.relativeTarget,l=this.relativeParent.target,Zc(i.x,o.x,l.x),Zc(i.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Od(this.target,this.layout.layoutBox),Zl(this.target,this.targetDelta)):Od(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},ed(this.relativeTargetOrigin,this.target,e.target),Od(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!zl(this.parent.latestValues)&&!ql(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),s=Boolean(this.resumingFrom)||this!==t;let n=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(n=!1),s&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===jr.timestamp&&(n=!1),n)return;const{layout:r,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!a)return;Od(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,s,n=!1){const r=s.length;if(!r)return;let a,i;t.x=t.y=1;for(let o=0;o<r;o++){a=s[o],i=a.projectionDelta;const{visualElement:r}=a.options;r&&r.props.style&&"contents"===r.props.style.display||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&nc(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Zl(e,i)),n&&Gl(a.latestValues)&&nc(e,a.latestValues))}t.x<ec&&t.x>Ql&&(t.x=1),t.y<ec&&t.y>Ql&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,s),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(Ud(this.prevProjectionDelta.x,this.projectionDelta.x),Ud(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Xc(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===i&&this.treeScale.y===o&&Zd(this.projectionDelta.x,this.prevProjectionDelta.x)&&Zd(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null==(t=this.options.visualElement)||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const s=this.snapshot,n=s?s.latestValues:{},r={...this.latestValues},a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(s?s.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(bu));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const s=t/1e3;var l,h,m,p,f,g;vu(a.x,e.x,s),vu(a.y,e.y,s),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ed(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),m=this.relativeTarget,p=this.relativeTargetOrigin,f=i,g=s,yu(m.x,p.x,f.x,g),yu(m.y,p.y,f.y,g),u&&(l=this.relativeTarget,h=u,Yd(l.x,h.x)&&Yd(l.y,h.y))&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),Od(u,this.relativeTarget)),o&&(this.animationValues=r,function(e,t,s,n,r,a){r?(e.opacity=ha(0,s.opacity??1,Id(n)),e.opacityExit=ha(t.opacity??1,0,$d(n))):a&&(e.opacity=ha(t.opacity??1,s.opacity??1,n));for(let i=0;i<Rd;i++){const r=`border${_d[i]}Radius`;let a=Dd(t,r),o=Dd(s,r);void 0===a&&void 0===o||(a||(a=0),o||(o=0),0===a||0===o||Md(a)===Md(o)?(e[r]=Math.max(ha(Pd(a),Pd(o),n),0),(Yr.test(o)||Yr.test(a))&&(e[r]+="%")):e[r]=o)}(t.rotate||s.rotate)&&(e.rotate=ha(t.rotate||0,s.rotate||0,n))}(r,n,this.latestValues,s,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=s},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,s,n;this.notifyListeners("animationStart"),null==(t=this.currentAnimation)||t.stop(),null==(n=null==(s=this.resumingFrom)?void 0:s.currentAnimation)||n.stop(),this.pendingAnimation&&(Sr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Er.update(()=>{bd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=xo(0)),this.currentAnimation=function(e,t,s){const n=Po(e)?e:xo(e);return n.start(Tc("",n,t,s)),n.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:s,layout:n,latestValues:r}=e;if(t&&s&&n){if(this!==e&&this.layout&&n&&ju(this.options.animationType,this.layout.layoutBox,n.layoutBox)){s=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Jc(this.layout.layoutBox.x);s.x.min=e.target.x.min,s.x.max=s.x.min+t;const n=Jc(this.layout.layoutBox.y);s.y.min=e.target.y.min,s.y.max=s.y.min+n}Od(t,s),nc(t,r),Xc(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Qd);this.sharedNodes.get(e).add(t);const s=t.options.initialPromotionConfig;t.promote({transition:s?s.transition:void 0,preserveFollowOpacity:s&&s.shouldPreserveFollowOpacity?s.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null==(e=this.getStack())?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null==(e=this.getStack())?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:s}={}){const n=this.getStack();n&&n.promote(this,s),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:s}=e;if((s.z||s.rotate||s.rotateX||s.rotateY||s.rotateZ||s.skewX||s.skewY)&&(t=!0),!t)return;const n={};s.z&&su("z",e,n,this.animationValues);for(let r=0;r<eu.length;r++)su(`rotate${eu[r]}`,e,n,this.animationValues),su(`skew${eu[r]}`,e,n,this.animationValues);e.render();for(const r in n)e.setStaticValue(r,n[r]),this.animationValues&&(this.animationValues[r]=n[r]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const s=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=jl(null==t?void 0:t.pointerEvents)||"",void(e.transform=s?s(this.latestValues,""):"none");const n=this.getLead();if(!this.projectionDelta||!this.layout||!n.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=jl(null==t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!Gl(this.latestValues)&&(e.transform=s?s({},""):"none",this.hasProjected=!1));e.visibility="";const r=n.animationValues||n.latestValues;this.applyTransformsToTarget();let a=function(e,t,s){let n="";const r=e.x.translate/t.x,a=e.y.translate/t.y,i=(null==s?void 0:s.z)||0;if((r||a||i)&&(n=`translate3d(${r}px, ${a}px, ${i}px) `),1===t.x&&1===t.y||(n+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:e,rotate:t,rotateX:r,rotateY:a,skewX:i,skewY:o}=s;e&&(n=`perspective(${e}px) ${n}`),t&&(n+=`rotate(${t}deg) `),r&&(n+=`rotateX(${r}deg) `),a&&(n+=`rotateY(${a}deg) `),i&&(n+=`skewX(${i}deg) `),o&&(n+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(n+=`scale(${o}, ${l})`),n||"none"}(this.projectionDeltaWithTransform,this.treeScale,r);s&&(a=s(r,a)),e.transform=a;const{x:i,y:o}=this.projectionDelta;e.transformOrigin=`${100*i.origin}% ${100*o.origin}% 0`,n.animationValues?e.opacity=n===this?r.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:r.opacityExit:e.opacity=n===this?void 0!==r.opacity?r.opacity:"":void 0!==r.opacityExit?r.opacityExit:0;for(const l in al){if(void 0===r[l])continue;const{correct:t,applyTo:s,isCSSVariable:i}=al[l],o="none"===a?r[l]:t(r[l],n);if(s){const t=s.length;for(let n=0;n<t;n++)e[s[n]]=o}else i?this.options.visualElement.renderState.vars[l]=o:e[l]=o}this.options.layoutId&&(e.pointerEvents=n===this?jl(null==t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach(du),this.root.sharedNodes.clear()}}}function au(e){e.updateLayout()}function iu(e){var t;const s=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=e.layout,{animationType:r}=e.options,a=s.source!==e.layout.source;"size"===r?td(e=>{const n=a?s.measuredBox[e]:s.layoutBox[e],r=Jc(n);n.min=t[e].min,n.max=n.min+r}):ju(r,s.layoutBox,t)&&td(n=>{const r=a?s.measuredBox[n]:s.layoutBox[n],i=Jc(t[n]);r.max=r.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Xc(i,t,s.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?Xc(o,e.applyTransform(n,!0),s.measuredBox):Xc(o,t,s.layoutBox);const l=!qd(i);let c=!1;if(!e.resumeFrom){const n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){const{snapshot:r,layout:a}=n;if(r&&a){const i={x:{min:0,max:0},y:{min:0,max:0}};ed(i,s.layoutBox,r.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};ed(o,t,a.layoutBox),Kd(i,o)||(c=!0),n.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:s,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function ou(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function lu(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function cu(e){e.clearSnapshot()}function du(e){e.clearMeasurements()}function uu(e){e.isLayoutDirty=!1}function hu(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function mu(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function pu(e){e.resolveTargetDelta()}function fu(e){e.calcProjection()}function gu(e){e.resetSkewAndRotation()}function xu(e){e.removeLeadSnapshot()}function vu(e,t,s){e.translate=ha(t.translate,0,s),e.scale=ha(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function yu(e,t,s,n){e.min=ha(t.min,s.min,n),e.max=ha(t.max,s.max,n)}function bu(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const wu={duration:.45,ease:[.4,0,.1,1]},ku=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Eu=ku("applewebkit/")&&!ku("chrome/")?Math.round:Kn;function Su(e){e.min=Eu(e.min),e.max=Eu(e.max)}function ju(e,t,s){return"position"===e||"preserve-aspect"===e&&(n=Xd(t),r=Xd(s),a=.2,!(Math.abs(n-r)<=a));var n,r,a}function Nu(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}const Cu=ru({attachResizeListener:(e,t)=>Gc(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Tu={current:void 0},Au=ru({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Tu.current){const e=new Cu({});e.mount(window),e.setOptions({layoutScroll:!0}),Tu.current=e}return Tu.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),_u={pan:{Feature:class extends Hc{constructor(){super(...arguments),this.removePointerDownListener=Kn}onPointerDown(e){this.session=new rd(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sd(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:n}=this.node.getProps();return{onSessionStart:yd(e),onStart:yd(t),onMove:s,onEnd:(e,t)=>{delete this.session,n&&Er.postRender(()=>n(e,t))}}}mount(){this.removePointerDownListener=Yc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Hc{constructor(e){super(e),this.removeGroupControls=Kn,this.removeListeners=Kn,this.controls=new xd(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Kn}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Au,MeasureLayout:Nd}};function Ru(e,t,s){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover","Start"===s);const r=n["onHover"+s];r&&Er.postRender(()=>r(t,qc(t)))}function Pu(e,t,s){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap","Start"===s);const r=n["onTap"+("End"===s?"":s)];r&&Er.postRender(()=>r(t,qc(t)))}const Mu=new WeakMap,Du=new WeakMap,Iu=e=>{const t=Mu.get(e.target);t&&t(e)},$u=e=>{e.forEach(Iu)};function Bu(e,t,s){const n=function({root:e,...t}){const s=e||document;Du.has(s)||Du.set(s,{});const n=Du.get(s),r=JSON.stringify(t);return n[r]||(n[r]=new IntersectionObserver($u,{root:e,...t})),n[r]}(t);return Mu.set(e,s),n.observe(e),()=>{Mu.delete(e),n.unobserve(e)}}const Lu={some:0,all:1};const Ou=Vl({...zc,...{inView:{Feature:class extends Hc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:n="some",once:r}=e,a={root:t?t.current:void 0,rootMargin:s,threshold:"number"==typeof n?n:Lu[n]};return Bu(this.node.current,a,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:s,onViewportLeave:n}=this.node.getProps(),a=t?s:n;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Hc{mount(){const{current:e}=this.node;e&&(this.unmount=_o(e,(e,t)=>(Pu(this.node,t,"Start"),(e,{success:t})=>Pu(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Hc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zn(Gc(this.node.current,"focus",()=>this.onFocus()),Gc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Hc{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,s={}){const[n,r,a]=wo(e,s),i=e=>{if(!ko(e))return;const{target:s}=e,n=t(s,e);if("function"!=typeof n||!s)return;const a=e=>{ko(e)&&(n(e),s.removeEventListener("pointerleave",a))};s.addEventListener("pointerleave",a,r)};return n.forEach(e=>{e.addEventListener("pointerenter",i,r)}),a}(e,(e,t)=>(Ru(this.node,t,"Start"),e=>Ru(this.node,e,"End"))))}unmount(){}}}},..._u,...{layout:{ProjectionNode:Au,MeasureLayout:Nd}}},gc),Uu={glass:"rounded-2xl border overflow-hidden backdrop-blur-md bg-card/4 border-border shadow-xl shadow-black/40",solid:"rounded-2xl border overflow-hidden bg-card/80 border-border shadow-sm",plain:"rounded-2xl overflow-hidden"},Fu={sm:"px-3 py-2.5",md:"px-4 py-3",lg:"px-5 py-4"};function Vu({expanded:e,onToggle:t,title:n,subtitle:r,leading:a,trailing:i,children:o,variant:l="glass",className:d="",headerClassName:u="",bodyClassName:h="",size:m="md",disableChevron:p=!1,disabled:f=!1,transition:g={duration:.3},style:x}){const v=s.useId();return q.jsxs(Ou.div,{layout:!0,initial:!1,transition:g,style:x,className:[Uu[l],e?"ring-1 ring-border":"",d].join(" "),children:[q.jsxs("button",{type:"button",onClick:f?void 0:t,"aria-expanded":e,"aria-controls":v,className:["w-full flex items-center gap-3 text-left select-none",Fu[m],u,f?"opacity-60 cursor-default":"hover:bg-card/3"].join(" "),children:[a&&q.jsx("div",{className:"w-12 h-12 rounded-xl overflow-hidden bg-card/10 flex items-center justify-center shrink-0",children:a}),q.jsxs("div",{className:"min-w-0 flex-1",children:[q.jsx("div",{className:["truncate font-semibold","glass"===l?"text-black opacity-95":"text-black"].join(" "),children:n}),r&&q.jsx("div",{className:["truncate text-sm","glass"===l?"text-black opacity-60":"text-black"].join(" "),children:r})]}),i,!p&&q.jsx(Ou.div,{animate:{rotate:e?180:0},transition:{type:"spring",stiffness:300,damping:24,...g},className:["ml-1","glass"===l?"text-black opacity-70":"text-black"].join(" "),children:q.jsx(c,{size:18})})]}),q.jsx(Vo,{initial:!1,children:e&&q.jsx(Ou.div,{id:v,layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:g,className:["pt-1 pb-4 px-4",h,"glass"===l?"text-black opacity-90":"text-black"].join(" "),children:o},"body")})]})}function Hu({className:e,step:t,min:s,mode:n,inputMode:r,pattern:a,onFocus:i,...o}){const l=n??"decimal",c=r??l,d=a??("numeric"===l?"[0-9]*":"[0-9]*[.,]?[0-9]*");return q.jsx(Tn,{type:"number",inputMode:c,pattern:d,step:t,min:s,className:zs(e),onFocus:e=>{e.target.select(),null==i||i(e)},...o})}const Wu=({mode:e="edit",items:t,weightUnitLabel:n="kg",onChange:r,onRemove:a,onAdd:i,onToggleDone:l,onDeleteExercise:c,deleteTitle:d="Remove this exercise from the routine",deleteDisabled:u=!1,onFocusScroll:h,disabled:m=!1,className:p=""})=>{const f=m||"view"===e,g=f||u;return s.useEffect(()=>{},[e,m,f,t.length,a,r,i,c,h,p]),q.jsxs("div",{className:p,children:[q.jsxs("div",{className:"grid grid-cols-4 gap-3 md:gap-4 text-[10px] md:text-xs text-black uppercase tracking-wider mb-2",children:[q.jsx("span",{children:"Set"}),q.jsx("span",{className:"text-center",children:"Reps"}),q.jsxs("span",{className:"text-center",children:["Weight (",n,")"]}),q.jsx("span",{})]}),q.jsx("div",{className:"space-y-3",children:t.map((s,n)=>{const i="edit"===e&&!f&&!!a&&(s.removable??!0)&&t.length>1;return q.jsxs("div",{className:"grid grid-cols-4 gap-3 md:gap-4 items-center py-2 px-3 rounded-lg border border-border/20 "+(s.done?"bg-success-light":"bg-soft-gray/30"),children:[q.jsx("span",{className:"text-sm font-medium text-black",children:n+1}),q.jsx(Hu,{mode:"numeric",step:1,min:0,value:s.reps??"0",onFocus:h,onChange:e=>null==r?void 0:r(s.key,"reps",e.target.value),disabled:f,className:"bg-input-background border-border text-black text-center h-10 md:h-8 rounded-md focus:border-warm-sage/20 text-sm "+(f?"opacity-50 cursor-not-allowed":"")}),q.jsx(Hu,{mode:"decimal",step:.5,min:0,value:s.weight??"0",onFocus:h,onChange:e=>null==r?void 0:r(s.key,"weight",e.target.value),disabled:f,className:"bg-input-background border-border text-black text-center h-10 md:h-8 rounded-md focus:border-warm-sage/20 text-sm "+(f?"opacity-50 cursor-not-allowed":"")}),"workout"===e?q.jsx("div",{className:"flex justify-end",children:q.jsx("input",{type:"checkbox",checked:!!s.done,onChange:e=>null==l?void 0:l(s.key,e.target.checked),className:"w-5 h-5 ml-auto rounded-full border-2 border-border text-black accent-success checked:border-success"})}):i?q.jsx(xn,{type:"button",variant:"ghost",size:"sm",onClick:()=>null==a?void 0:a(s.key),className:"p-1 h-auto ml-auto",title:"Remove this set",children:q.jsx(x,{size:14})}):q.jsx("div",{className:"w-6 h-6 ml-auto"})]},s.key)})}),(i||c)&&q.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[i?q.jsxs(xn,{onClick:i,variant:"primary",className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium",disabled:g,title:g?f?"Editing disabled":"Adding sets is disabled":"Add a set",children:[q.jsx(o,{size:16}),q.jsx("span",{className:"text-xs md:text-sm font-medium uppercase tracking-wider",children:"Add Set"})]}):q.jsx("div",{}),c&&q.jsx(xn,{variant:"secondary",size:"sm",onClick:c,disabled:u||f,className:"p-2 h-auto rounded-lg font-medium "+(u||f?"opacity-50 cursor-not-allowed":"bg-destructive-light text-black hover:bg-destructive"),title:d,children:q.jsx(v,{size:16})})]})]})},zu=({items:e,weightUnitLabel:t,onChange:s,onRemove:n,onAdd:r,onToggleDone:a,onDeleteExercise:i,deleteDisabled:o,disabled:l=!1,onFocusScroll:c,className:d="",note:u,onCancel:h,onPrimary:m,primaryLabel:p="Save",primaryDisabled:f=!1,mode:g="edit"})=>q.jsxs("div",{className:["rounded-2xl bg-card/70 border border-border p-3 md:p-4",d].join(" "),children:[u&&q.jsx("p",{className:"text-xs md:text-sm text-black mb-3 italic bg-[var(--warm-cream)]/60 p-3 rounded-lg",children:u}),q.jsx(Wu,{mode:g,items:e,weightUnitLabel:t,onDeleteExercise:"workout"===g?void 0:i,deleteDisabled:o,onChange:s,onRemove:"workout"===g?void 0:n,onAdd:r,onToggleDone:a,onFocusScroll:c,disabled:l}),"workout"!==g&&h&&q.jsx("div",{className:"mt-4 flex justify-end items-center gap-2",children:q.jsx(xn,{variant:"secondary",size:"sm",onClick:h,disabled:l,className:"p-3 h-auto bg-card/70 border-destructive-light text-black hover:bg-destructive-light btn-tactile rounded-xl font-medium "+(l?"opacity-50 cursor-not-allowed":""),title:"Cancel",children:q.jsx(v,{size:18})})}),"workout"!==g&&m&&q.jsx("div",{className:"mt-6",children:q.jsx(xn,{onClick:m,disabled:f||l,className:"w-full h-12 md:h-14 bg-primary text-black font-medium rounded-full hover:bg-primary-hover btn-tactile "+(f||l?"opacity-50 cursor-not-allowed":""),children:p})})]});
/*! Capacitor: https://capacitorjs.com/ - MIT License */
var Gu,qu;(qu=Gu||(Gu={})).Unimplemented="UNIMPLEMENTED",qu.Unavailable="UNAVAILABLE";class Yu extends Error{constructor(e,t,s){super(e),this.message=e,this.code=t,this.data=s}}const Ju=e=>{const t=e.CapacitorCustomPlatform||null,s=e.Capacitor||{},n=s.Plugins=s.Plugins||{},r=()=>null!==t?t.name:(e=>{var t,s;return(null==e?void 0:e.androidBridge)?"android":(null===(s=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===s?void 0:s.bridge)?"ios":"web"})(e),a=e=>{var t;return null===(t=s.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},i=new Map;return s.convertFileSrc||(s.convertFileSrc=e=>e),s.getPlatform=r,s.handleError=t=>e.console.error(t),s.isNativePlatform=()=>"web"!==r(),s.isPluginAvailable=e=>{const t=i.get(e);return!!(null==t?void 0:t.platforms.has(r()))||!!a(e)},s.registerPlugin=(e,o={})=>{const l=i.get(e);if(l)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),l.proxy;const c=r(),d=a(e);let u;const h=n=>{let r;const a=(...a)=>{const i=(async()=>(!u&&c in o?u=u="function"==typeof o[c]?await o[c]():o[c]:null!==t&&!u&&"web"in o&&(u=u="function"==typeof o.web?await o.web():o.web),u))().then(t=>{const i=((t,n)=>{var r,a;if(!d){if(t)return null===(a=t[n])||void 0===a?void 0:a.bind(t);throw new Yu(`"${e}" plugin is not implemented on ${c}`,Gu.Unimplemented)}{const a=null==d?void 0:d.methods.find(e=>n===e.name);if(a)return"promise"===a.rtype?t=>s.nativePromise(e,n.toString(),t):(t,r)=>s.nativeCallback(e,n.toString(),t,r);if(t)return null===(r=t[n])||void 0===r?void 0:r.bind(t)}})(t,n);if(i){const e=i(...a);return r=null==e?void 0:e.remove,e}throw new Yu(`"${e}.${n}()" is not implemented on ${c}`,Gu.Unimplemented)});return"addListener"===n&&(i.remove=async()=>r()),i};return a.toString=()=>`${n.toString()}() { [capacitor code] }`,Object.defineProperty(a,"name",{value:n,writable:!1,configurable:!1}),a},m=h("addListener"),p=h("removeListener"),f=(e,t)=>{const s=m({eventName:e},t),n=async()=>{const n=await s;p({eventName:e,callbackId:n},t)},r=new Promise(e=>s.then(()=>e({remove:n})));return r.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await n()},r},g=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return d?f:m;case"removeListener":return p;default:return h(t)}}});return n[e]=g,i.set(e,{name:e,proxy:g,platforms:new Set([...Object.keys(o),...d?[c]:[]])}),g},s.Exception=Yu,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s},Ku=(e=>e.Capacitor=Ju(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:{}),Xu=Ku.registerPlugin;class Zu{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(t);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n),s&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,s){const n=this.listeners[e];if(n)n.forEach(e=>e(t));else if(s){let s=this.retainedEventArguments[e];s||(s=[]),s.push(t),this.retainedEventArguments[e]=s}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new Ku.Exception(e,Gu.Unimplemented)}unavailable(e="not available"){return new Ku.Exception(e,Gu.Unavailable)}async removeListener(e,t){const s=this.listeners[e];if(!s)return;const n=s.indexOf(t);this.listeners[e].splice(n,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const Qu=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),eh=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class th extends Zu{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[s,n]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=eh(s).trim(),n=eh(n).trim(),t[s]=n}),t}async setCookie(e){try{const t=Qu(e.key),s=Qu(e.value),n=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),a=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${s||""}${n}; path=${r}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Xu("CapacitorCookies",{web:()=>new th});const sh=(e,t={})=>{const s=Object.assign({method:e.method||"GET",headers:e.headers},t),n=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((s,n,r)=>(s[n]=e[t[r]],s),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)s.body=e.data;else if(n.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[s,n]of Object.entries(e.data||{}))t.set(s,n);s.body=t.toString()}else if(n.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,s)=>{t.append(s,e)});else for(const s of Object.keys(e.data))t.append(s,e.data[s]);s.body=t;const n=new Headers(s.headers);n.delete("content-type"),s.headers=n}else(n.includes("application/json")||"object"==typeof e.data)&&(s.body=JSON.stringify(e.data));return s};class nh extends Zu{async request(e){const t=sh(e,e.webFetchExtra),s=((e,t=!0)=>e?Object.entries(e).reduce((e,s)=>{const[n,r]=s;let a,i;return Array.isArray(r)?(i="",r.forEach(e=>{a=t?encodeURIComponent(e):e,i+=`${n}=${a}&`}),i.slice(0,-1)):(a=t?encodeURIComponent(r):r,i=`${n}=${a}`),`${e}&${i}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),n=s?`${e.url}?${s}`:e.url,r=await fetch(n,t),a=r.headers.get("content-type")||"";let i,o,{responseType:l="text"}=r.ok?e:{};switch(a.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":o=await r.blob(),i=await(async e=>new Promise((t,s)=>{const n=new FileReader;n.onload=()=>{const e=n.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},n.onerror=e=>s(e),n.readAsDataURL(e)}))(o);break;case"json":i=await r.json();break;default:i=await r.text()}const c={};return r.headers.forEach((e,t)=>{c[t]=e}),{data:i,headers:c,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Xu("CapacitorHttp",{web:()=>new nh});const rh=Object.freeze(Object.defineProperty({__proto__:null,Capacitor:Ku,CapacitorException:Yu,get ExceptionCode(){return Gu},WebPlugin:Zu,buildRequestInit:sh,registerPlugin:Xu},Symbol.toStringTag,{value:"Module"})),ah=Xu("App",{web:()=>Re(()=>import("./web-fYH-l6rB.js"),__vite__mapDeps([6,1,2])).then(e=>new e.AppWeb)}),ih=Object.freeze(Object.defineProperty({__proto__:null,App:ah},Symbol.toStringTag,{value:"Module"})),oh=[];let lh=null;function ch(e){lh!==e&&(lh=e,ae(`[APP-STATE] App state changed - isActive: ${e}, total savers: ${oh.length}`),e?(ae(`[APP-STATE] App becoming active - restoring state for ${oh.length} savers`),oh.forEach(({key:e,restore:t})=>{const s=ce.get(`appstate:${e}`,Number.MAX_SAFE_INTEGER);if(null!==s)try{ae(`[APP-STATE] Restoring state for key: ${e}`,s),t(s),ae(`[APP-STATE] Successfully restored state for key: ${e}`)}catch(n){ae(`[APP-STATE] Failed to restore state for key: ${e}`,n)}finally{ce.remove(`appstate:${e}`),ae(`[APP-STATE] Removed cached state for key: ${e}`)}else ae(`[APP-STATE] No cached state found for key: ${e}`)}),ae("[APP-STATE] Completed restoring all states")):(ae(`[APP-STATE] App becoming inactive - saving state for ${oh.length} savers`),oh.forEach(({key:e,save:t})=>{try{ae(`[APP-STATE] Saving state for key: ${e}`);const s=t();ce.set(`appstate:${e}`,s),ae(`[APP-STATE] Successfully saved state for key: ${e}`,s)}catch(s){ae(`[APP-STATE] Failed to save state for key: ${e}`,s)}}),ae("[APP-STATE] Completed saving all states")))}function dh(e,t,n){const r=s.useRef(t);s.useEffect(()=>{r.current=t},[t,e]),s.useEffect(()=>{ae(`[APP-STATE] useAppStateSaver - setting up state saver for key: ${e}`);const t=`appstate:${e}`,s=ce.get(t,Number.MAX_SAFE_INTEGER);if(null!==s)try{ae(`[APP-STATE] Restoring cached state for key: ${e} on mount`,s),n(s),ae(`[APP-STATE] Successfully restored cached state for key: ${e} on mount`)}catch(a){ae(`[APP-STATE] Failed to restore cached state for key: ${e} on mount`,a)}finally{ce.remove(t),ae(`[APP-STATE] Removed cached state for key: ${e} on mount`)}else ae(`[APP-STATE] No cached state found for key: ${e} on mount`);return function(e,t,s){return ae(`[APP-STATE] Registering state saver for key: ${e}`),oh.push({key:e,save:t,restore:s}),ae(`[APP-STATE] Total savers registered: ${oh.length}`),()=>{const n=oh.findIndex(n=>n.key===e&&n.save===t&&n.restore===s);n>=0?(oh.splice(n,1),ae(`[APP-STATE] Unregistered state saver for key: ${e}. Remaining savers: ${oh.length}`)):ae(`[APP-STATE] State saver not found for unregistration: ${e}`)}}(e,()=>r.current,n)},[e,n])}ae("[APP-STATE] Setting up app state change listeners"),ah.addListener("appStateChange",({isActive:e})=>{ae(`[APP-STATE] Capacitor app state change event - isActive: ${e}`),ch(e)}),"undefined"!=typeof document?(ae("[APP-STATE] Setting up document visibility change listener"),document.addEventListener("visibilitychange",()=>{const e="visible"===document.visibilityState;ae(`[APP-STATE] Document visibility change event - isVisible: ${e}`),ch(e)})):ae("[APP-STATE] Document not available - skipping visibility change listener");const uh="cm",hh="kg",mh=2.2046226218,ph=(e,t)=>{if(!Number.isFinite(e))return"";if(t<=0)return Math.round(e).toString();const s=((e,t)=>{const s=10**t;return Math.round(e*s)/s})(e,t);return Number(s.toFixed(t)).toString()},fh=(e,t)=>{if(!e)return!0;const s=e.trim();if(!s)return!0;if("."===s||"-."===s||"+."===s)return t>=0;return new RegExp(`^[-+]?\\d*(?:\\.\\d{0,${t}})?$`).test(s)},gh=e=>fh(e,2),xh=e=>fh(e,2),vh=e=>"m"===e||"cm"===e?e:uh,yh=e=>"lb"===e||"lbs"===e?"lb":hh,bh=(e,t)=>"m"===vh(t)?100*e:e,wh=(e,t)=>"lb"===yh(t)?e/mh:e,kh=(e,t,s=("m"===t?2:1))=>{if(null==e||!Number.isFinite(e))return"";const n=((e,t)=>"m"===vh(t)?e/100:e)(e,t);return ph(n,s)},Eh=(e,t,s=2)=>{if(null==e||!Number.isFinite(e))return"";const n=((e,t)=>"lb"===yh(t)?e*mh:e)(e,t);return ph(n,s)},Sh=(e,t)=>{const s=e.trim();if(!s)return;const n=Number(s);return Number.isFinite(n)?bh(n,t):void 0},jh=e=>vh(e),Nh=e=>"lb"===yh(e)?"lbs":"kg",Ch=(e,t)=>{const s=(new Date).toISOString();t?ie(`📝 JNL [${s}] ${e}`,t):ie(`📝 JNL [${s}] ${e}`)},Th=(e,t)=>{Ch(`=== JOURNAL STATE AFTER ${t} ===`),Ch(`Exercise Actions (${e.ex.length}):`,e.ex),Ch(`Set Actions (${e.sets.length}):`,e.sets),Ch(`Total Actions: ${e.ex.length+e.sets.length}`),Ch("=== END JOURNAL STATE ===")};function Ah(e,t,s,n,r,a){const i={t:"SET_ADD",exId:t,setId:s,set_order:n,reps:r,weight:a};Ch("Recording SET_ADD action:",i),e.sets.push(i),Th(e,"SET_ADD")}function _h(e,t,s,n,r){const a={t:"SET_UPDATE",exId:t,setId:s,reps:n,weight:r};Ch("Recording SET_UPDATE action:",a),e.sets.push(a),Th(e,"SET_UPDATE")}function Rh(e,t,s,n){const r={t:"SET_REORDER",exId:t,setId:s,set_order:n};Ch("Recording SET_REORDER action:",r),e.sets.push(r),Th(e,"SET_REORDER")}const Ph=(e,t)=>{const s=(new Date).toISOString();t?ie(`📝 JNL [${s}] ${e}`,t):ie(`📝 JNL [${s}] ${e}`)};function Mh(e){var t,s,n,r,a,i,o,l;Ph("Starting collapseJournal with journal:",e),Ph(`Exercise actions: ${e.ex.length}, Set actions: ${e.sets.length}`);const c=new Map,d=new Map;Ph("=== FOLDING EXERCISE ACTIONS ===");for(const m of e.ex){Ph("Processing exercise action:",m);const e=c.get(m.exId)??{};"EX_ADD"===m.t&&(e.added={exerciseId:m.exerciseId,name:m.name,order:m.order},Ph("Added exercise to fold:",e.added)),"EX_DELETE"===m.t&&(e.deleted=!0,Ph("Marked exercise as deleted in fold:",e)),"EX_REORDER"===m.t&&(e.finalOrder=m.order,Ph("Updated final order in fold:",e)),"EX_UPDATE_META"===m.t&&(e.meta={...e.meta,...m},Ph("Updated meta in fold:",e.meta)),c.set(m.exId,e),Ph(`Updated exercise action map for exId ${m.exId}:`,e)}const u=(e,t)=>`${e}:${t}`;for(const m of e.sets){const e=u(m.exId,m.setId),t=d.get(e)??{};switch(m.t){case"SET_ADD":t.added={reps:m.reps,weight:m.weight,set_order:m.set_order},t.touched=!0;break;case"SET_UPDATE":t.final={...t.final,...void 0!==m.reps?{reps:m.reps}:{},...void 0!==m.weight?{weight:m.weight}:{}},t.touched=!0;break;case"SET_DELETE":t.deleted=!0,t.touched=!0;break;case"SET_REORDER":t.final={...t.final,set_order:m.set_order},t.touched=!0}d.set(e,t)}const h={deleteExercises:[],deleteSets:[],updateSets:[],orderSets:[],createExercises:[],createSetsByExercise:{}};for(const[m,p]of c.entries())p.added&&p.deleted||(p.deleted&&m>0?h.deleteExercises.push(m):p.added&&h.createExercises.push({tempExId:m,exerciseId:p.added.exerciseId,order:p.finalOrder??p.added.order??1,name:p.added.name}));for(const[m,p]of d.entries()){const[e,d]=m.split(":"),u=Number(e),f=Number(d),g=c.get(u);if(!(null==g?void 0:g.deleted)&&(!p.added||!p.deleted))if(p.deleted&&f>0)h.deleteSets.push(f);else{if(p.added&&f<0){h.createSetsByExercise[u]||(h.createSetsByExercise[u]=[]);const e=parseInt(((null==(t=p.final)?void 0:t.reps)??p.added.reps)||"0",10)||0,r=parseFloat(((null==(s=p.final)?void 0:s.weight)??p.added.weight)||"0")||0,a=((null==(n=p.final)?void 0:n.set_order)??p.added.set_order??0)||0;(e>0||r>0)&&h.createSetsByExercise[u].push({setId:f,reps:e,weight:r,set_order:a});continue}if(f>0&&p.touched&&!p.deleted){if(void 0!==(null==(r=p.final)?void 0:r.reps)||void 0!==(null==(a=p.final)?void 0:a.weight)){const e=parseInt(((null==(i=p.final)?void 0:i.reps)??"0")||"0",10)||0,t=parseFloat(((null==(o=p.final)?void 0:o.weight)??"0")||"0")||0;h.updateSets.push({id:f,reps:e,weight:t})}void 0!==(null==(l=p.final)?void 0:l.set_order)&&h.orderSets.push({id:f,set_order:p.final.set_order})}}}for(const[m,p]of Object.entries(h.createSetsByExercise))p.length||delete h.createSetsByExercise[m];return h.createExercises=h.createExercises.filter(e=>{const t=h.createSetsByExercise[e.tempExId];return!(!t||0===t.length)||(delete h.createSetsByExercise[e.tempExId],!1)}),h}function Dh(e){return 0===e.ex.length&&0===e.sets.length}const Ih=(e,t)=>{const s=(new Date).toISOString();t?ie(`🔍 DGB [${s}] ${e}`,t):ie(`🔍 DGB [${s}] ${e}`)};async function $h(e,t,s,n=hh){Ih("Starting runJournal with plan:",e),Ih(`Routine ID: ${t}, Exercise Map:`,s);const r=yh(n),a=e=>Number.isFinite(e)?wh(e,r):0;e.deleteExercises.length&&(Ih(`Deleting ${e.deleteExercises.length} exercises:`,e.deleteExercises),await Promise.all(e.deleteExercises.map(e=>Je.deleteRoutineExercise(e)))),e.deleteSets.length&&(Ih(`Deleting ${e.deleteSets.length} sets:`,e.deleteSets),await Promise.all(e.deleteSets.map(e=>Je.deleteExerciseSet(e)))),e.updateSets.length&&(Ih(`Updating ${e.updateSets.length} sets:`,e.updateSets),await Promise.all(e.updateSets.map(e=>Je.updateExerciseSet(e.id,e.reps,a(e.weight))))),e.orderSets.length&&(Ih(`Reordering ${e.orderSets.length} sets:`,e.orderSets),await Promise.all(e.orderSets.map(e=>Je.updateExerciseSetOrder(e.id,e.set_order)))),Ih(`Creating ${e.createExercises.length} new exercises:`,e.createExercises);const i=new Map;for(const o of e.createExercises){const s=e.createSetsByExercise[o.tempExId];if(!s||0===s.length){Ih(`Skipping exercise ${o.tempExId} - no set payloads`);continue}Ih("Creating exercise:",o);const n=await Je.addExerciseToRoutine(t,o.exerciseId,o.order);n&&(i.set(o.tempExId,n.routine_template_exercise_id),Ih(`Exercise created with template ID: ${n.routine_template_exercise_id}`))}Ih("Creating sets for exercises:",Object.keys(e.createSetsByExercise));for(const[o,l]of Object.entries(e.createSetsByExercise)){const e=Number(o);Ih(`Processing sets for exercise ID: ${e}, rows:`,l);const t=s[e],n=i.get(e)??(null==t?void 0:t.templateId),r=null==t?void 0:t.exerciseId;if(Ih(`Template ID: ${n}, Exercise ID: ${r}`),!n||!r){Ih(`Skipping exercise ${e} - missing templateId or exerciseId`);continue}const c=l.map(e=>({reps:e.reps,weight:a(e.weight),set_order:e.set_order||0})).filter(e=>e.reps>0||e.weight>0);Ih(`Filtered payload for exercise ${e}:`,c),c.length&&(Ih(`Adding ${c.length} sets to routine`),await Je.addExerciseSetsToRoutine(n,r,c))}Ih(`Recomputing muscle summary for routine ${t}`),await Je.recomputeAndSaveRoutineMuscleSummary(t),Ih("Journal execution completed successfully")}const Bh=()=>{const e=-Math.floor(1e9*Math.random())-1;return(e=>{const t=(new Date).toISOString();ie(`📝 JNL [${t}] ${e}`)})(`Generated temp ID: ${e}`),e};function Lh({routineId:e,routineName:t,selectedExercisesForSetup:n,setSelectedExercisesForSetup:r,onBack:a,onSave:i,onAddMoreExercises:o,isEditingExistingRoutine:l=!1,onShowExerciseSelector:c,access:d=yn.Editable,initialMode:u="plan",onModeChange:h}){const{userToken:m}=xt(),[p,f]=s.useState(hh),[g,x]=s.useState(!1),v=s.useRef(hh),[y,b]=s.useState([]),[w,k]=s.useState(!0),[E,S]=s.useState(!1),[j,N]=s.useState(!1),[C,T]=s.useState(!1),[A,_]=s.useState({}),[R,P]=s.useState(u),M="workout"===R,D=s.useRef({ex:[],sets:[]}),I=s.useRef([]),$=s.useRef([]),B=s.useRef(null),L=s.useRef(null),[O,U]=s.useState(0);s.useEffect(()=>{let e=!1;return(async()=>{if(m)try{const t=await Je.getMyProfile();if(e)return;const s=yh(null==t?void 0:t.weight_unit);f(s),v.current=s}catch(t){e||ne("Failed to load weight unit preference",t)}finally{e||x(!0)}else e||(f(hh),v.current=hh,x(!0))})(),()=>{e=!0}},[m]);const F=s.useMemo(()=>Nh(p).toUpperCase(),[p]),V=s.useCallback(e=>{const t="number"==typeof e?e:null!=e&&""!==e?Number(e):0;if(!Number.isFinite(t))return"0";const s=Eh(t,p);return""!==s?s:"0"},[p]);s.useEffect(()=>{if(!g)return;const e=v.current;e!==p&&(b(t=>t.map(t=>({...t,sets:t.sets.map(t=>{const s=Number(t.weight);if(!Number.isFinite(s))return{...t,weight:"0"};const n=wh(s,e),r=Eh(n,p);return{...t,weight:""!==r?r:"0"}})}))),v.current=p)},[p,g]);const H=s.useCallback(e=>{b(e.exercises??[]),P(e.screenMode??u),r(e.selectedExercisesForSetup??[]),U(e.elapsedSeconds??0),D.current=e.journal??{ex:[],sets:[]},I.current=e.savedSnapshot??[],$.current=e.preWorkoutExercises??[]},[u,r]);dh("exercise-setup",{exercises:y,screenMode:R,selectedExercisesForSetup:n,elapsedSeconds:O,journal:D.current,savedSnapshot:I.current,preWorkoutExercises:$.current},H);const W=e=>[Math.floor(e/3600),Math.floor(e%3600/60),e%60].map(e=>e.toString().padStart(2,"0")).join(":");s.useEffect(()=>(M?B.current=setInterval(()=>{null!=L.current&&U(Math.floor((Date.now()-L.current)/1e3))},1e3):(B.current&&(clearInterval(B.current),B.current=null),L.current=null,U(0)),()=>{B.current&&(clearInterval(B.current),B.current=null)}),[M]);const z=e=>{const t=(e??"").toString().trim();return t?/^(unknown|undefined|null|n\/a)$/i.test(t)?"":t:""},G=e=>e.map(e=>({id:e.id,exerciseId:e.exerciseId,sets:e.sets.slice().sort((e,t)=>e.set_order-t.set_order).map(e=>({id:e.id,set_order:e.set_order,reps:e.reps,weight:e.weight}))})).sort((e,t)=>e.id-t.id);s.useEffect(()=>{if(!m||!g)return;if(y.length>0)return void k(!1);let t=!1;return(async()=>{const s=Me.start("ExerciseSetup - load saved exercises");k(!0);try{const s=await mn(e,{concurrency:un,timer:Me});if(t)return;const n=s.map(e=>({id:e.templateId,templateId:e.templateId,exerciseId:e.exerciseId,name:e.name,muscle_group:e.muscle_group,loaded:!0,expanded:!1,completed:!1,sets:e.sets.map(e=>({...e,weight:V(e.weight)}))}));b(n),I.current=G(n)}catch(n){ne(String(n)),ot.error("Failed to load exercises")}finally{t||k(!1),s.endWithLog()}})(),()=>{t=!0}},[e,m,g,V]),s.useEffect(()=>{w||0!==n.length&&(async()=>{const e=Me.start("ExerciseSetup - add selected exercises");for(const t of n)await X(t);r([]),requestAnimationFrame(()=>window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})),e.endWithLog()})()},[n,w]);const Y=e=>{b(t=>{const s=t.map(e=>({...e,sets:e.sets.map(e=>({...e}))}));return e(s),s})},J=e=>{const t=e.sets.length>0&&e.sets.every(e=>e.done);e.completed=t,e.expanded=!t},K=async e=>{if(e.loaded||!e.templateId)return;const t=Me.start(`ExerciseSetup - ensureSetsLoaded for exercise ${e.id}`);_(t=>({...t,[String(e.id)]:!0}));try{const t=(await Je.getExerciseSetsForRoutine(e.templateId)).sort((e,t)=>(e.set_order||0)-(t.set_order||0)).map(e=>({id:e.routine_template_exercise_set_id,set_order:e.set_order??0,reps:String(e.planned_reps??"0"),weight:V(e.planned_weight_kg)}));Y(s=>{const n=s.findIndex(t=>t.id===e.id);n>=0&&(s[n].sets=t,s[n].loaded=!0)})}catch(s){ne(String(s)),ot.error("Failed to load sets")}finally{_(t=>{const s={...t};return delete s[String(e.id)],s}),t.endWithLog()}},X=async e=>{var t,s;const n=Me.start("ExerciseSetup - addNewExercise"),r=Bh(),a=Bh();let i=(null==(t=e.name)?void 0:t.trim())||"",o=(null==(s=e.muscle_group||"")?void 0:s.toString().trim())||"";if(!i||!o){const t=Me.start("ExerciseSetup - fetchExerciseMeta in addNewExercise"),s=await(async e=>{try{const t=await Je.getExercise(e);return(Array.isArray(t)?t[0]:t)??null}catch(t){return ne(" [EXERCISE_SETUP] fetchExerciseMeta error:",t),null}})(e.exercise_id);s&&(i||(i=z(s.name)||i),o||(o=z(s.muscle_group)||o)),t.endWithLog()}b(t=>[...t,{id:r,exerciseId:e.exercise_id,name:i,muscle_group:o||void 0,loaded:!0,expanded:!0,completed:!1,sets:[{id:a,set_order:1,reps:"0",weight:"0",...M?{done:!1}:{}}]}]),function(e,t,s,n,r){const a={t:"EX_ADD",exId:t,exerciseId:s,name:n,order:r};Ch("Recording EX_ADD action:",a),e.ex.push(a),Th(e,"EX_ADD")}(D.current,r,e.exercise_id,i),Ah(D.current,r,a,1,"0","0"),n.endWithLog()},Z=async e=>{if(d===yn.ReadOnly)return;const t=y.find(t=>t.id===e);t&&(!t.loaded&&t.templateId&&await K(t),Y(t=>{const s=t.findIndex(t=>t.id===e);if(s<0)return;const n=t[s],r=n.sets.reduce((e,t)=>Math.max(e,t.set_order||0),0)+1;const a=n.sets.length>0?n.sets.slice().sort((e,t)=>e.set_order-t.set_order)[n.sets.length-1]:void 0,i=Bh(),o=a?a.reps:"0",l=a?a.weight:"0";n.sets.push({id:i,set_order:r,reps:o,weight:l,...M?{done:!1}:{}}),Ah(D.current,e,i,r,o,l),J(n)}))},Q=(e,t)=>{if("number"==typeof t){const s=e.sets.find(e=>e.id===t);if(s)return s.id;const n=e.sets.find(e=>e.set_order===t);return n?n.id:null}if("string"==typeof t){const s=Number(t);if(!Number.isNaN(s)){const t=e.sets.find(e=>e.id===s);if(t)return t.id;const n=e.sets.find(e=>e.set_order===s);return n?n.id:null}}return null},ee=(e,t)=>{d!==yn.ReadOnly&&Y(s=>{const n=s.findIndex(t=>t.id===e);if(n<0)return;const r=s[n],a=Q(r,t);if(null==a)return;const i=r.sets.slice();r.sets=r.sets.filter(e=>e.id!==a),function(e,t,s){const n={t:"SET_DELETE",exId:t,setId:s};Ch("Recording SET_DELETE action:",n),e.sets.push(n),Th(e,"SET_DELETE")}(D.current,e,a);let o=1;for(const t of r.sets){const s=i.find(e=>e.id===t.id);t.set_order=o++,t.id>0&&s&&s.set_order!==t.set_order&&Rh(D.current,e,t.id,t.set_order)}J(r)})},te=e=>{d!==yn.ReadOnly&&(b(t=>t.filter(t=>t.id!==e)),function(e,t){const s={t:"EX_DELETE",exId:t};Ch("Recording EX_DELETE action:",s),e.ex.push(s),Th(e,"EX_DELETE")}(D.current,e))},se=e=>{P(e),null==h||h(e)},re=()=>{L.current=Date.now(),U(0),$.current=JSON.parse(JSON.stringify(y)),D.current={ex:[],sets:[]},b(e=>e.map(e=>({...e,sets:e.sets.map(e=>({...e,done:!1})),completed:!1,expanded:!1}))),se("workout"),ae(" [EXERCISE_SETUP] Workout started for id: "+e)},ie=async()=>{k(!0);try{const t=(await mn(e,{concurrency:un,timer:Me})).map(e=>({id:e.templateId,templateId:e.templateId,exerciseId:e.exerciseId,name:e.name,muscle_group:e.muscle_group,loaded:!0,expanded:!1,completed:!1,sets:e.sets.map(e=>({...e,weight:V(e.weight)}))}));b(t),I.current=G(t)}catch(t){ne(String(t)),ot.error("Failed to refresh")}finally{k(!1)}},oe=async()=>{if(!m)return void ot.error("Please sign in to save changes");const t=D.current;if(Dh(t))return void ot.message("No changes to save");const s={};for(const e of y)s[e.id]={templateId:e.templateId,exerciseId:e.exerciseId};const n=Mh(t);S(!0);try{await $h(n,e,s,p),D.current={ex:[],sets:[]},await ie(),ot.success("All changes saved!"),null==i||i()}catch(r){ne(String(r)),ot.error("Failed to save changes")}finally{S(!1)}},le=s.useMemo(()=>Me.timeSync("ExerciseSetup - check unsaved",()=>JSON.stringify(G(y))!==JSON.stringify(I.current)),[y]),ce=y,de=s.useMemo(()=>y.filter(e=>e.completed).length,[y]),ue=s.useMemo(()=>y.some(e=>e.sets.some(e=>!e.done)),[y]),he=()=>{const e=Me.start("ExerciseSetup - handleBack");if("plan"===R&&le){if(!window.confirm("You have unsaved changes. Leave without saving?"))return void e.endWithLog()}a(),e.endWithLog()},me=e=>{const t=!!A[String(e.id)],s=e.name.substring(0,2).toUpperCase(),n=e.loaded?e.sets.slice().sort((e,t)=>e.set_order-t.set_order).map(t=>({key:t.id,order:t.set_order,reps:t.reps,weight:t.weight,removable:e.sets.length>1,done:t.done})):[],r=(()=>{const t=z(e.muscle_group);if(e.loaded){const e=n.length,s=1===e?"1 Set":`${e} Sets`;return t?`${t} • ${s}`:s}return t||""})();return q.jsx("div",{className:"scroll-mt-24",children:q.jsx(Vu,{variant:"plain",size:"md",expanded:e.expanded,onToggle:()=>(async e=>{const t=y.find(t=>t.id===e);t&&(!t.loaded&&t.templateId&&await K(t),Y(t=>{const s=t.findIndex(t=>t.id===e);s>=0&&(t[s].expanded=!t[s].expanded)}))})(e.id),title:e.name,subtitle:r,leading:q.jsx("span",{className:"text-sm md:text-base font-medium text-black",children:s}),trailing:M?q.jsx("input",{type:"checkbox",checked:e.completed,onClick:e=>e.stopPropagation(),onChange:t=>{(async(e,t)=>{const s=y.find(t=>t.id===e);s&&(!s.loaded&&s.templateId&&await K(s),Y(s=>{const n=s.find(t=>t.id===e);n&&(n.sets.forEach(e=>e.done=t),J(n))}))})(e.id,t.target.checked)},className:"w-5 h-5 rounded-full border-2 border-border text-black accent-success checked:border-success"}):void 0,disableChevron:M,className:"w-full rounded-2xl border border-border card-modern shadow-xl hover:shadow-xl transition-all text-left "+(e.completed&&!e.expanded?"bg-success-light":"bg-card/80"),style:{border:"2px solid var(--border)"},bodyClassName:"pt-2",children:t||!e.loaded?q.jsxs("div",{className:"flex items-center justify-center py-4",children:[q.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-warm-coral border-t-transparent rounded-full"}),q.jsx("span",{className:"ml-2 text-sm text-black",children:"Loading sets..."})]}):q.jsx(zu,{name:e.name,initials:s,items:n,weightUnitLabel:F,mode:M?"workout":"edit",onChange:(t,s,n)=>((e,t,s,n)=>{d!==yn.ReadOnly&&Y(r=>{const a=r.findIndex(t=>t.id===e);if(a<0)return;const i=r[a],o=Q(i,t);if(null==o)return;const l=i.sets.findIndex(e=>e.id===o);if(l<0)return;const c=i.sets[l];if("weight"===s&&!gh(n))return;const d={...c,[s]:n};i.sets[l]=d,"reps"===s?_h(D.current,e,o,n,void 0):_h(D.current,e,o,void 0,n)})})(e.id,t,s,n),onRemove:M?void 0:t=>ee(e.id,t),onAdd:()=>Z(e.id),onDeleteExercise:M?void 0:()=>te(e.id),onToggleDone:M?(t,s)=>((e,t,s)=>{Y(n=>{const r=n.find(t=>t.id===e);if(!r)return;const a=Q(r,t);if(null==a)return;const i=r.sets.find(e=>e.id===a);i&&(i.done=s),J(r)})})(e.id,t,s):void 0,deleteDisabled:d===yn.ReadOnly,disabled:d===yn.ReadOnly,onFocusScroll:e=>{const t=e.currentTarget;setTimeout(()=>{t&&t.scrollIntoView&&t.scrollIntoView({block:"center",behavior:"smooth"})},60)},className:"mb-2"})})},e.id)};return q.jsxs(q.Fragment,{children:[q.jsx($t,{header:q.jsx(Ys,{title:t||"Routine",subtitle:M?W(O):void 0,subtitleClassName:"text-base font-bold text-black",onBack:M?void 0:he,...d!==yn.Editable||M?{}:{onAdd:()=>{l&&c?c():o()}},showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",padContent:!1,contentBottomPaddingClassName:le||M?"pb-24":"",bottomBar:"plan"===R?le?q.jsx(Rn,{children:q.jsx(_n,{onClick:oe,disabled:E||d===yn.ReadOnly,children:E?"SAVING...":"SAVE ALL"})}):0===ce.length?null:q.jsx(Rn,{children:q.jsx(_n,{onClick:re,children:"START WORKOUT"})}):q.jsx(Rn,{children:q.jsx(_n,{onClick:()=>T(!0),disabled:j,children:j?"SAVING...":"END WORKOUT"})}),showHeaderBorder:!1,showBottomBarBorder:!1,contentClassName:"",children:q.jsxs(ln,{gap:"fluid",children:[q.jsx(nn,{y:"sm"}),q.jsx(tn,{variant:"plain",padding:"none",children:q.jsxs("div",{className:"mt-2 mb-6",children:[M?de>0&&q.jsxs("h3",{className:"text-xs md:text-sm text-black uppercase tracking-wider mb-3",children:[de," COMPLETED"]}):q.jsxs("h3",{className:"text-xs md:text-sm text-black uppercase tracking-wider mb-3",children:["EXERCISES IN ROUTINE (",ce.length,")"]}),w?q.jsx("div",{className:"space-y-3",children:[1,2].map(e=>q.jsx(vn,{leading:q.jsx("div",{}),leadingClassName:"w-10 h-10 md:w-12 md:h-12 bg-muted rounded-lg",primary:q.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),secondary:q.jsx("div",{className:"h-3 bg-muted rounded w-1/2"}),className:"px-3 md:px-4 bg-card/50 rounded-xl animate-pulse"},e))}):0===ce.length?q.jsx("div",{className:"text-center py-4",children:q.jsx("p",{className:"text-black",children:"Ready to add exercises to this routine"})}):q.jsx("div",{className:"space-y-3",children:ce.map(e=>me(e))})]})})]})}),q.jsx(jn,{open:C,onClose:()=>T(!1),title:"Finish Workout?",message:ue?"There are valid sets in this workout that have not been marked as complete.":void 0,actions:[{label:j?"Saving…":"Finish Workout",onClick:async()=>{T(!1),await(async()=>{if(m){N(!0);try{ae(" [EXERCISE_SETUP] Workout ended for id: "+e);let t={id:"123",template_id:e,started_at:(new Date).toISOString(),ended_at:(new Date).toISOString()};for(let e=0;e<y.length;e++){const s=y[e];let n={id:"123",workout_id:t.id,exercise_id:s.exerciseId,order_index:e+1};ae(" [EXERCISE_SETUP] Workout exercise added for id: "+s.exerciseId);for(const e of s.sets)ae(" [EXERCISE_SETUP] Workout set added for id: "+n.id+" Set order: "+e.set_order+" Reps: "+(Number(e.reps)||0)+" Weight: "+(Number(e.weight)||0)+" Done: "+(e.done?"DONE":"NOT DONE"))}ae(" [EXERCISE_SETUP] Workout ended for id: "+t.id);const s=null!=L.current?Math.floor((Date.now()-L.current)/1e3):O;ae(" [EXERCISE_SETUP] Workout duration: "+W(s));const n=D.current,r={};for(const e of y)r[e.id]={templateId:e.templateId,exerciseId:e.exerciseId};const a=Mh(n);Dh(n)||await $h(a,e,r,p),D.current={ex:[],sets:[]},await ie(),ot.success("Workout saved!"),se("plan")}catch(t){ne(String(t)),ot.error("Failed to save workout")}finally{N(!1)}}else ot.error("Please sign in to save workout")})()},type:"button",disabled:j},{label:"Cancel Workout",onClick:async()=>{T(!1),await(async()=>{D.current={ex:[],sets:[]},b(JSON.parse(JSON.stringify($.current))),se("plan")})()},type:"button",variant:"destructive",disabled:j}]})]})}function Oh({label:e,icon:t,unit:n="cm",entries:r,onEntryChange:a}){var i,l;const[c,d]=s.useState(!1),u=s.useMemo(()=>"m"===n?.01:.5,[n]),h="m"===n?2:1,m=h,p=e=>{const t=parseFloat(e);return isNaN(t)?0:t},f=e=>{var t;const s=(null==(t=r[0])?void 0:t.value)??"0";a(0,(p(s)+e).toFixed(h))},g=null!=r[1]?p((null==(i=r[0])?void 0:i.value)??"0")-p(r[1].value):null,x=null!=g?`${g>=0?"+":""}${ph(g,m)}${n}`:void 0;return q.jsx(Vu,{variant:"plain",size:"md",expanded:c,onToggle:()=>d(e=>!e),className:"w-full rounded-2xl border border-border card-modern shadow-xl hover:shadow-xl transition-all text-left",style:{border:"2px solid var(--border)"},title:q.jsx("div",{className:"min-w-0 flex-[0_0_50%]",children:q.jsx("div",{className:"truncate",children:e})}),subtitle:x&&q.jsx("span",{className:"text-sm text-black",children:x}),leading:q.jsx("span",{className:"text-xl",children:t}),trailing:q.jsx("div",{className:"flex-[0_0_40%] shrink-0 mr-[10%]",onClick:e=>e.stopPropagation(),children:q.jsxs("div",{className:"grid grid-cols-[28px_minmax(3.5rem,1fr)_28px] items-center gap-2",children:[q.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),f(-u)},className:"w-7 h-7 rounded-full bg-soft-gray flex items-center justify-center text-black",children:q.jsx(y,{size:14})}),q.jsx(Hu,{step:u,min:0,mode:"decimal",value:(null==(l=r[0])?void 0:l.value)??"",onChange:e=>{e.stopPropagation();const{value:t}=e.target;xh(t)&&a(0,t)},placeholder:n,className:"h-7 text-center px-1 w-full"}),q.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),f(u)},className:"w-7 h-7 rounded-full bg-soft-gray flex items-center justify-center text-black",children:q.jsx(o,{size:14})})]})}),children:r.length>0&&q.jsx("div",{className:"space-y-3",onClick:e=>e.stopPropagation(),children:r.slice(0,4).map((e,t)=>q.jsxs("div",{className:"flex items-center justify-between gap-2",children:[q.jsx("span",{className:"text-sm text-black",children:e.date}),q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx(Hu,{step:u,min:0,mode:"decimal",value:e.value,onChange:e=>{const{value:s}=e.target;xh(s)&&a(t,s)},className:"h-7 text-center px-1 w-[6.5rem] sm:w-[7.5rem]"}),q.jsx("span",{className:"text-sm text-black",children:n})]})]},t))})})}const Uh=[{key:"chest_cm",label:"Chest",icon:"🫁"},{key:"right_arm_cm",label:"Right Arm",icon:"💪"},{key:"left_arm_cm",label:"Left Arm",icon:"💪"},{key:"waist_cm",label:"Waist",icon:"📏"},{key:"hip_cm",label:"Hip",icon:"🩳"},{key:"glutes_cm",label:"Glutes",icon:"🍑"},{key:"left_quad_cm",label:"Left Quad",icon:"🦵"},{key:"right_quad_cm",label:"Right Quad",icon:"🦵"},{key:"left_calf_cm",label:"Left Calf",icon:"🦵"},{key:"right_calf_cm",label:"Right Calf",icon:"🦵"}],Fh=uh;function Vh({onBack:e}){const[t,n]=s.useState([]),[r,a]=s.useState(!0),i=s.useRef([]),o=s.useRef([]),l=s.useCallback(async()=>{const e=await Je.getBodyMeasurements(4),t=(new Date).toISOString().split("T")[0],s=e.some(e=>e.measured_on===t);let r=e;if(!s){const s=e[0],n={measured_on:t};Uh.forEach(e=>{n[e.key]=s&&null!=s[e.key]?kh(Number(s[e.key]),Fh):""}),r=[n,...e]}r=r.sort((e,t)=>new Date(t.measured_on).getTime()-new Date(e.measured_on).getTime()).slice(0,4);const l=r.map(e=>{const t={measured_on:e.measured_on};return Uh.forEach(s=>{t[s.key]=null!=e[s.key]?kh(Number(e[s.key]),Fh):""}),t});o.current=JSON.parse(JSON.stringify(l)),i.current=[],n(l),a(s)},[]);s.useEffect(()=>{let e=!1;return(async()=>{try{if(e)return;await l()}catch(t){ne("Failed to load measurements",t)}})(),()=>{e=!0}},[l]);const c=s.useMemo(()=>!r||JSON.stringify(t)!==JSON.stringify(o.current),[t,r]);return q.jsx($t,{header:q.jsx(Ys,{title:"Body Measurements",onBack:e,showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",padContent:!1,showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:q.jsx(Rn,{children:q.jsx(_n,{onClick:async()=>{const s=function(e){const t={};for(const s of e)t[s.date]||(t[s.date]={}),t[s.date][s.key]=s.value;return t}(i.current);if(!r){const e=t[0],n={};Uh.forEach(t=>{e[t.key]&&(n[t.key]=e[t.key])}),s[e.measured_on]={...s[e.measured_on]??{},...n}}for(const[e,t]of Object.entries(s)){const s={measured_on:e};for(const[e,n]of Object.entries(t)){const t=Sh(n,Fh);void 0===t||isNaN(t)||(s[e]=t)}Object.keys(s).length>1&&await Je.upsertBodyMeasurement(s)}i.current=[],await l(),ot.success("Measurements saved"),e()},disabled:!c,children:"SAVE CHANGES"})}),bottomBarSticky:!0,contentClassName:"",children:q.jsxs(ln,{gap:"fluid",children:[q.jsx(tn,{variant:"card",className:"flex items-center gap-3",children:q.jsxs("div",{className:"min-w-0",children:[q.jsx("div",{className:"text-base font-semibold text-black truncate",children:"Track Your Progress"}),q.jsx("div",{className:"text-sm text-black truncate",children:"Record measurements to see changes over time"})]})}),q.jsx(nn,{y:"sm"}),Uh.map(e=>q.jsx("div",{className:"space-y-2",children:q.jsx(Oh,{label:e.label,icon:e.icon,unit:jh(Fh),entries:t.map(t=>({date:t.measured_on,value:t[e.key]||""})),onEntryChange:(t,s)=>n(n=>{const r=[...n],a=r[t].measured_on,o=""===s?"":String(parseFloat(s));return r[t]={...r[t],[e.key]:o},function(e,t,s,n){e.push({t:"UPDATE",date:t,key:s,value:n})}(i.current,a,e.key,o),r})})},e.key)),q.jsx(nn,{y:"sm"})]})})}function Hh({className:e,...t}){return q.jsx("div",{"data-slot":"card",className:zs("bg-card text-black flex flex-col gap-6 rounded-xl border",e),...t})}function Wh({className:e,...t}){return q.jsx("div",{"data-slot":"card-header",className:zs("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function zh({className:e,...t}){return q.jsx("div",{"data-slot":"card-content",className:zs("px-6 [&:last-child]:pb-6",e),...t})}function Gh(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>s.createContext(e));return function(n){const r=(null==n?void 0:n[e])||t;return s.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){const a=s.createContext(r),i=n.length;n=[...n,r];const o=t=>{var n;const{scope:r,children:o,...l}=t,c=(null==(n=null==r?void 0:r[e])?void 0:n[i])||a,d=s.useMemo(()=>l,Object.values(l));return q.jsx(c.Provider,{value:d,children:o})};return o.displayName=t+"Provider",[o,function(n,o){var l;const c=(null==(l=null==o?void 0:o[e])?void 0:l[i])||a,d=s.useContext(c);if(d)return d;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},qh(r,...t)]}function qh(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:s,scopeName:n})=>({...t,...s(e)[`__scope${n}`]}),{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}function Yh(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function Jh(e){const t=Xh(e),n=s.forwardRef((e,n)=>{const{children:r,...a}=e,i=s.Children.toArray(r),o=i.find(Qh);if(o){const e=o.props.children,r=i.map(t=>t===o?s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null:t);return q.jsx(t,{...a,ref:n,children:s.isValidElement(e)?s.cloneElement(e,void 0,r):null})}return q.jsx(t,{...a,ref:n,children:r})});return n.displayName=`${e}.Slot`,n}var Kh=Jh("Slot");function Xh(e){const t=s.forwardRef((e,t)=>{const{children:n,...r}=e;if(s.isValidElement(n)){const e=function(e){var t,s;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,r=n&&"isReactWarning"in n&&n.isReactWarning;if(r)return e.ref;if(n=null==(s=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:s.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(n),a=function(e,t){const s={...t};for(const n in t){const r=e[n],a=t[n];/^on[A-Z]/.test(n)?r&&a?s[n]=(...e)=>{const t=a(...e);return r(...e),t}:r&&(s[n]=r):"style"===n?s[n]={...r,...a}:"className"===n&&(s[n]=[r,a].filter(Boolean).join(" "))}return{...e,...s}}(r,n.props);return n.type!==s.Fragment&&(a.ref=t?function(...e){return t=>{let s=!1;const n=e.map(e=>{const n=Yh(e,t);return s||"function"!=typeof n||(s=!0),n});if(s)return()=>{for(let t=0;t<n.length;t++){const s=n[t];"function"==typeof s?s():Yh(e[t],null)}}}}(t,e):e),s.cloneElement(n,a)}return s.Children.count(n)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Zh=Symbol("radix.slottable");function Qh(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Zh}var em=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=Jh(`Primitive.${t}`),r=s.forwardRef((e,s)=>{const{asChild:r,...a}=e,i=r?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),q.jsx(i,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),tm="Progress",sm=100,[nm,rm]=Gh(tm),[am,im]=nm(tm),om=s.forwardRef((e,t)=>{const{__scopeProgress:s,value:n=null,max:r,getValueLabel:a=dm,...i}=e;!r&&0!==r||mm(r)||console.error(`Invalid prop \`max\` of value \`${`${r}`}\` supplied to \`${"Progress"}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`);const o=mm(r)?r:sm;null===n||pm(n,o)||console.error(function(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}(`${n}`,"Progress"));const l=pm(n,o)?n:null,c=hm(l)?a(l,o):void 0;return q.jsx(am,{scope:s,value:l,max:o,children:q.jsx(em.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":hm(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":um(l,o),"data-value":l??void 0,"data-max":o,...i,ref:t})})});om.displayName=tm;var lm="ProgressIndicator",cm=s.forwardRef((e,t)=>{const{__scopeProgress:s,...n}=e,r=im(lm,s);return q.jsx(em.div,{"data-state":um(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...n,ref:t})});function dm(e,t){return`${Math.round(e/t*100)}%`}function um(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function hm(e){return"number"==typeof e}function mm(e){return hm(e)&&!isNaN(e)&&e>0}function pm(e,t){return hm(e)&&!isNaN(e)&&e<=t&&e>=0}cm.displayName=lm;var fm=om,gm=cm;function xm({className:e,value:t,...s}){return q.jsx(fm,{"data-slot":"progress",className:zs("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...s,children:q.jsx(gm,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}const vm=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,ym=Lt,bm=(wm="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",km={variants:{variant:{default:"border-transparent bg-primary text-black [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-black [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-black [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-black [a&]:hover:bg-accent [a&]:hover:text-black"}},defaultVariants:{variant:"default"}},e=>{var t;if(null==(null==km?void 0:km.variants))return ym(wm,null==e?void 0:e.class,null==e?void 0:e.className);const{variants:s,defaultVariants:n}=km,r=Object.keys(s).map(t=>{const r=null==e?void 0:e[t],a=null==n?void 0:n[t];if(null===r)return null;const i=vm(r)||vm(a);return s[t][i]}),a=e&&Object.entries(e).reduce((e,t)=>{let[s,n]=t;return void 0===n||(e[s]=n),e},{}),i=null==km||null===(t=km.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:s,className:r,...i}=t;return Object.entries(i).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...n,...a}[t]):{...n,...a}[t]===s})?[...e,s,r]:e},[]);return ym(wm,r,i,null==e?void 0:e.class,null==e?void 0:e.className)});var wm,km;function Em({className:e,variant:t,asChild:s=!1,...n}){const r=s?Kh:"span";return q.jsx(r,{"data-slot":"badge",className:zs(bm({variant:t}),e),...n})}async function Sm(){var e;try{const{Capacitor:s}=await Re(async()=>{const{Capacitor:e}=await Promise.resolve().then(()=>rh);return{Capacitor:e}},void 0);if("ios"!==s.getPlatform())return{count:0,totalMinutes:0,lastUpdated:Date.now()};const{start:n,end:r}=function(){const e=new Date;return{start:new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),end:e}}();try{const{Health:s}=await Re(async()=>{const{Health:e}=await import("./index-n-wgxVyt.js");return{Health:e}},__vite__mapDeps([3,1,2])),a=await s.isHealthAvailable();if(!(null==a?void 0:a.available))return{count:0,totalMinutes:0,lastUpdated:Date.now()};await s.requestHealthPermissions({permissions:["READ_WORKOUTS"]});let i=[];try{const t=await(null==(e=s.querySamples)?void 0:e.call(s,{startDate:n.toISOString(),endDate:r.toISOString(),dataType:"workouts"}));Array.isArray(null==t?void 0:t.samples)&&(i=t.samples)}catch(t){ie("[workouts] querySamples not available or failed, will try aggregated:",t)}if(!i.length)try{const e=await s.queryAggregated({startDate:n.toISOString(),endDate:r.toISOString(),dataType:"workouts",bucket:"day"}),t=Array.isArray(null==e?void 0:e.aggregatedData)?e.aggregatedData:[];return{count:t.reduce((e,t)=>e+(Number((null==t?void 0:t.count)??(null==t?void 0:t.value))||0),0),totalMinutes:0,lastUpdated:Date.now()}}catch(t){re("[workouts] Aggregated read failed:",t)}let o=0,l=0;const c=e=>"number"==typeof e?e:Date.parse(String(e));for(const e of i){const t=c((null==e?void 0:e.startDate)??(null==e?void 0:e.startTime)),s=c((null==e?void 0:e.endDate)??(null==e?void 0:e.endTime));if(!t||!s)continue;l+=Math.max(0,(s-t)/6e4),o+=1}return{count:o,totalMinutes:Math.round(l),lastUpdated:Date.now()}}catch(t){return re("[workouts] iOS Health read failed:",t),{count:0,totalMinutes:0,lastUpdated:Date.now()}}}catch(s){return re("[workouts] readTodayWorkoutsNative fallback to 0:",s),{count:0,totalMinutes:0,lastUpdated:Date.now()}}}const jm=async()=>{try{const{Capacitor:e}=await Re(async()=>{const{Capacitor:e}=await Promise.resolve().then(()=>rh);return{Capacitor:e}},void 0);return e.getPlatform()}catch{return"web"}};async function Nm(e,t){if("ios"!==await jm())return{};try{const{Health:s}=await Re(async()=>{const{Health:e}=await import("./index-n-wgxVyt.js");return{Health:e}},__vite__mapDeps([3,1,2])),n=await s.isHealthAvailable();if(!(null==n?void 0:n.available))return{};const r=await s.queryAggregated({startDate:e.toISOString(),endDate:t.toISOString(),dataType:"steps",bucket:"day"}),a=Array.isArray(null==r?void 0:r.aggregatedData)?r.aggregatedData:[],i={};return a.forEach(e=>{const t=new Date(e.startDate),s=`${t.getMonth()+1}/${t.getDate()}`;i[s]={steps:Math.round(Number(null==e?void 0:e.value)||0)}}),i}catch(s){return re("[healthAgg] fetchStepsByDay failed:",s),{}}}async function Cm(e,t){var s;if("ios"!==await jm())return{};try{const{Health:r}=await Re(async()=>{const{Health:e}=await import("./index-n-wgxVyt.js");return{Health:e}},__vite__mapDeps([3,1,2])),a=await r.isHealthAvailable();if(!(null==a?void 0:a.available))return{};await r.requestHealthPermissions({permissions:["READ_WORKOUTS"]});let i=[];try{const n=await(null==(s=r.querySamples)?void 0:s.call(r,{startDate:e.toISOString(),endDate:t.toISOString(),dataType:"workouts"}));Array.isArray(null==n?void 0:n.samples)&&(i=n.samples)}catch(n){ie("[healthAgg] workouts querySamples failed, fallback to aggregated:",n)}const o={},l=e=>"number"==typeof e?e:Date.parse(String(e));if(i.length){for(const e of i){const t=new Date(l((null==e?void 0:e.startDate)??(null==e?void 0:e.startTime))),s=new Date(l((null==e?void 0:e.endDate)??(null==e?void 0:e.endTime))),n=`${t.getMonth()+1}/${t.getDate()}`,r=Math.max(0,(s.getTime()-t.getTime())/6e4);o[n]=o[n]||{count:0,minutes:0},o[n].count+=1,o[n].minutes+=r}for(const e of Object.keys(o))o[e].minutes=Math.round(o[e].minutes);return o}try{const s=await r.queryAggregated({startDate:e.toISOString(),endDate:t.toISOString(),dataType:"workouts",bucket:"day"});return(Array.isArray(null==s?void 0:s.aggregatedData)?s.aggregatedData:[]).forEach(e=>{const t=new Date(e.startDate),s=`${t.getMonth()+1}/${t.getDate()}`,n=Number((null==e?void 0:e.count)??(null==e?void 0:e.value))||0;o[s]={count:n,minutes:0}}),o}catch(n){return re("[healthAgg] workouts aggregated fallback failed:",n),{}}}catch(n){return re("[healthAgg] fetchWorkoutsByDay failed:",n),{}}}function Tm(e){const t=new Date(e),s=t.getDay();return t.setDate(t.getDate()-s),t.setHours(0,0,0,0),t}function Am(e){const t=Tm(e),s=new Date(t);return s.setDate(t.getDate()+6),s.setHours(23,59,59,999),s}const _m={day:{steps:{current:7750,target:1e4,progress:77.5,remaining:2250,achieved:!1},routines:{current:3,target:1,progress:100,remaining:0,achieved:!0},calories:{current:320,target:400,progress:80,remaining:80}},week:{steps:{current:54320,target:7e4,progress:77.6,remaining:15680,achieved:!1,dailyBreakdown:[{day:"Mon",steps:8200,target:1e4,achieved:!1},{day:"Tue",steps:9100,target:1e4,achieved:!1},{day:"Wed",steps:7800,target:1e4,achieved:!1},{day:"Thu",steps:8900,target:1e4,achieved:!1},{day:"Fri",steps:7600,target:1e4,achieved:!1},{day:"Sat",steps:11200,target:1e4,achieved:!0},{day:"Sun",steps:1520,target:1e4,achieved:!1}]},routines:{current:4,target:5,progress:80,remaining:1,achieved:!1,dailyBreakdown:[{day:"Mon",timeSpent:45,target:30,achieved:!0},{day:"Tue",timeSpent:60,target:30,achieved:!0},{day:"Wed",timeSpent:25,target:30,achieved:!1},{day:"Thu",timeSpent:40,target:30,achieved:!0},{day:"Fri",timeSpent:35,target:30,achieved:!0},{day:"Sat",timeSpent:50,target:30,achieved:!0},{day:"Sun",timeSpent:0,target:30,achieved:!1}]}},month:{steps:{current:190351,target:3e5,progress:63.5,remaining:109649,achieved:!1,weeklyBreakdown:[{week:"W1",steps:68e3,target:7e4,achieved:!1},{week:"W2",steps:72e3,target:7e4,achieved:!0},{week:"W3",steps:65e3,target:7e4,achieved:!1},{week:"W4",steps:55351,target:7e4,achieved:!1}]},routines:{current:16,target:20,progress:80,remaining:4,achieved:!1,types:[{name:"Walking",count:121,icon:b,color:"text-black",target:150},{name:"Running",count:62,icon:w,color:"text-black",target:80},{name:"Cycling",count:33,icon:w,color:"text-black",target:40},{name:"Strength",count:45,icon:m,color:"text-black",target:50}],weeklyBreakdown:[{week:"W1",timeSpent:180,target:150,achieved:!0},{week:"W2",timeSpent:210,target:150,achieved:!0},{week:"W3",timeSpent:140,target:150,achieved:!1},{week:"W4",timeSpent:165,target:150,achieved:!0}]}},year:{steps:{current:215e4,target:365e4,progress:58.9,remaining:15e5,achieved:!1},routines:{current:180,target:240,progress:75,remaining:60,achieved:!1}}},Rm=[{month:"Jan",steps:28e4,stepsTarget:3e5,stepsAchieved:!1,routines:18,routinesTarget:20,routinesAchieved:!1},{month:"Feb",steps:31e4,stepsTarget:3e5,stepsAchieved:!0,routines:22,routinesTarget:20,routinesAchieved:!0},{month:"Mar",steps:295e3,stepsTarget:3e5,stepsAchieved:!1,routines:19,routinesTarget:20,routinesAchieved:!1},{month:"Apr",steps:32e4,stepsTarget:3e5,stepsAchieved:!0,routines:21,routinesTarget:20,routinesAchieved:!0},{month:"May",steps:305e3,stepsTarget:3e5,stepsAchieved:!0,routines:20,routinesTarget:20,routinesAchieved:!0},{month:"Jun",steps:29e4,stepsTarget:3e5,stepsAchieved:!1,routines:18,routinesTarget:20,routinesAchieved:!1},{month:"Jul",steps:315e3,stepsTarget:3e5,stepsAchieved:!0,routines:23,routinesTarget:20,routinesAchieved:!0},{month:"Aug",steps:3e5,stepsTarget:3e5,stepsAchieved:!0,routines:20,routinesTarget:20,routinesAchieved:!0},{month:"Sep",steps:285e3,stepsTarget:3e5,stepsAchieved:!1,routines:17,routinesTarget:20,routinesAchieved:!1},{month:"Oct",steps:325e3,stepsTarget:3e5,stepsAchieved:!0,routines:24,routinesTarget:20,routinesAchieved:!0},{month:"Nov",steps:31e4,stepsTarget:3e5,stepsAchieved:!0,routines:21,routinesTarget:20,routinesAchieved:!0},{month:"Dec",steps:295e3,stepsTarget:3e5,stepsAchieved:!1,routines:19,routinesTarget:20,routinesAchieved:!1}],Pm=(()=>{const e={},t=(new Date).getFullYear();for(let s=0;s<12;s++){const n=new Date(t,s+1,0).getDate();for(let t=1;t<=n;t++){e[`${s+1}/${t}`]={steps:Math.random()>.3,routines:Math.random()>.4}}}return e})();function Mm({bottomBar:e}){const[t,n]=s.useState([]),[r,a]=s.useState({thisWeekCount:0,totalMinutes:0,monthlyCount:16,monthlyTarget:20}),[i,o]=s.useState(!1),[l,c]=s.useState("month"),[d,u]=s.useState((new Date).getMonth()),[h,p]=s.useState((new Date).getFullYear()),{userToken:f}=xt(),[g,x]=s.useState(null),{steps:v,goal:y,isLoading:w,forceRefreshStepData:N}=St(),{count:C,totalMinutes:T,isLoading:A,refresh:_}=function(){const[e,t]=s.useState({count:0,totalMinutes:0,lastUpdated:0}),[n,r]=s.useState(!1),a=s.useRef(0),i=s.useCallback(()=>Date.now()-a.current>=6e5,[]),o=s.useCallback(async()=>{r(!0),a.current=Date.now();try{const e=await Sm();t(e)}catch(e){ne("❌ [workouts] Error during read:",e),t({count:0,totalMinutes:0,lastUpdated:Date.now()})}finally{r(!1)}},[]);return s.useEffect(()=>{o();const e=setInterval(()=>{i()&&o()},6e4);return()=>clearInterval(e)},[o,i]),{count:e.count,totalMinutes:e.totalMinutes,isLoading:n,refresh:o}}();s.useEffect(()=>{(async()=>{if(f)try{const e=await Je.getMyProfile();x(e)}catch(e){ne("Failed to fetch profile for Progress screen:",e)}})()},[f]),s.useEffect(()=>{(async()=>{o(!0);try{const e=[];n(e);const t=new Date,s=new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay()),r=e.filter(e=>new Date(e.started_at)>=s),i=e.reduce((e,t)=>e+(t.duration_minutes||0),0);a({thisWeekCount:r.length,totalMinutes:i,monthlyCount:Math.min(e.length,20),monthlyTarget:20})}catch(e){ne("Failed to fetch progress data:",e)}finally{o(!1)}})(),N().catch(()=>{}),_().catch(()=>{})},[]);const[R,P]=s.useState({}),[M,D]=s.useState(Rm),[I,$]=s.useState(Pm);s.useEffect(()=>{(async()=>{var e,t,s;try{if("day"===l){const e=v??0,t=y||1e4,s={current:e,target:t,progress:Math.min(100,Math.max(0,e/Math.max(1,t)*100)),remaining:Math.max(0,t-e),achieved:e>=t},n=C,r=1,a={current:n,target:r,progress:Math.min(100,Math.max(0,n/Math.max(1,r)*100)),remaining:Math.max(0,r-n),achieved:n>=r};return void P(e=>({...e,day:{steps:s,routines:a}}))}if("week"===l){const e=new Date,t=Tm(e),s=Am(e),n=await Nm(t,s),r=await Cm(t,s),a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=Array.from({length:7},(e,s)=>{var r;const i=new Date(t);i.setDate(t.getDate()+s);const o=`${i.getMonth()+1}/${i.getDate()}`,l=(null==(r=n[o])?void 0:r.steps)||0;return{day:a[i.getDay()],steps:l,target:y,achieved:l>=y}}),o=i.reduce((e,t)=>e+t.steps,0),l=7*y,c={current:o,target:l,progress:Math.min(100,Math.max(0,o/Math.max(1,l)*100)),remaining:Math.max(0,l-o),achieved:o>=l,dailyBreakdown:i},d=Array.from({length:7},(e,s)=>{var n;const i=new Date(t);i.setDate(t.getDate()+s);const o=`${i.getMonth()+1}/${i.getDate()}`,l=Math.round((null==(n=r[o])?void 0:n.minutes)||0);return{day:a[i.getDay()],timeSpent:l,target:30,achieved:l>=30}}),u=Object.values(r).reduce((e,t)=>e+((null==t?void 0:t.count)||0),0),h=5,m={current:u,target:h,progress:Math.min(100,Math.max(0,u/Math.max(1,h)*100)),remaining:Math.max(0,h-u),achieved:u>=h,dailyBreakdown:d};return void P(e=>({...e,week:{steps:c,routines:m}}))}if("month"===l){const e=new Date,t=(s=e,new Date(s.getFullYear(),s.getMonth(),1,0,0,0,0)),n=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59,999)}(e),r=await Nm(t,n),a=await Cm(t,n),i=[];let o=Tm(t);for(;o<=n;){const e=Am(o),s=o<t?t:o,r=e>n?n:e,a=Math.floor((new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime()-new Date(s.getFullYear(),s.getMonth(),s.getDate()).getTime())/864e5)+1;i.push({start:s,end:r,label:`W${i.length+1}`,days:a}),o=new Date(o.getFullYear(),o.getMonth(),o.getDate()+7)}const l=i.map(e=>{var t;let s=0;for(let a=new Date(e.start);a<=e.end;a=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1)){const e=`${a.getMonth()+1}/${a.getDate()}`;s+=(null==(t=r[e])?void 0:t.steps)||0}const n=y*e.days;return{week:e.label,steps:s,target:n,achieved:s>=n}}),c=i.map(e=>{var t;let s=0;for(let r=new Date(e.start);r<=e.end;r=new Date(r.getFullYear(),r.getMonth(),r.getDate()+1)){const e=`${r.getMonth()+1}/${r.getDate()}`;s+=Math.round((null==(t=a[e])?void 0:t.minutes)||0)}const n=Math.round(e.days/7*150);return{week:e.label,timeSpent:s,target:n,achieved:s>=n}}),d=l.reduce((e,t)=>e+t.steps,0),u=Array.from({length:n.getDate()},(e,t)=>0).reduce(e=>e,0)+y*n.getDate(),h={current:d,target:u,progress:Math.min(100,Math.max(0,d/Math.max(1,u)*100)),remaining:Math.max(0,u-d),achieved:d>=u,weeklyBreakdown:l},m=Object.values(a).reduce((e,t)=>e+((null==t?void 0:t.count)||0),0),p=5*i.length,f={current:m,target:p,progress:Math.min(100,Math.max(0,m/Math.max(1,p)*100)),remaining:Math.max(0,p-m),achieved:m>=p,weeklyBreakdown:c};return void P(e=>({...e,month:{steps:h,routines:f}}))}if("year"===l){const s=h,n=new Date(s,0,1,0,0,0,0),r=new Date(s,11,31,23,59,59,999),a=await Nm(n,r),i=await Cm(n,r),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((e,t)=>{var n,r;const o=new Date(s,t+1,0).getDate();let l=0,c=0;for(let s=1;s<=o;s++){const e=`${t+1}/${s}`;l+=(null==(n=a[e])?void 0:n.steps)||0,c+=(null==(r=i[e])?void 0:r.count)||0}const d=y*o,u=5*Math.ceil(o/7);return{month:e,steps:l,stepsTarget:d,stepsAchieved:l>=d,routines:c,routinesTarget:u,routinesAchieved:c>=u}});D(o);const l={};for(let h=0;h<12;h++){const n=new Date(s,h+1,0).getDate();for(let s=1;s<=n;s++){const n=`${h+1}/${s}`;l[n]={steps:((null==(e=a[n])?void 0:e.steps)||0)>0,routines:((null==(t=i[n])?void 0:t.count)||0)>0}}}$(l);const c=o.reduce((e,t)=>e+t.steps,0),d=o.reduce((e,t)=>e+t.stepsTarget,0),u={current:c,target:d,progress:Math.min(100,Math.max(0,c/Math.max(1,d)*100)),remaining:Math.max(0,d-c),achieved:c>=d},m=o.reduce((e,t)=>e+t.routines,0),p=o.reduce((e,t)=>e+t.routinesTarget,0),f={current:m,target:p,progress:Math.min(100,Math.max(0,m/Math.max(1,p)*100)),remaining:Math.max(0,p-m),achieved:m>=p};return void P(e=>({...e,year:{steps:u,routines:f}}))}}catch(n){ne("Failed computing health aggregates for period",l,n)}})()},[l,h,y]);const B=R[l]||_m[l],L=()=>{switch(l){case"day":return"Today";case"week":return"This Week";case"month":default:return"This Month";case"year":return"This Year"}},O=e=>{"prev"===e?0===d?(u(11),p(h-1)):u(d-1):11===d?(u(0),p(h+1)):u(d+1)},U=()=>"month"===l&&B.routines.types?q.jsxs("div",{className:"space-y-3",children:[q.jsx("h3",{className:"text-sm font-semibold text-black",children:"Routine Types"}),q.jsx("div",{className:"space-y-2",children:B.routines.types.map((e,t)=>q.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/60 rounded-xl hover:bg-white/80 transition-all duration-200 border border-white/20",children:[q.jsxs("div",{className:"flex items-center gap-3",children:[q.jsx("div",{className:`w-10 h-10 ${e.color} bg-current/10 rounded-full flex items-center justify-center`,children:q.jsx(e.icon,{size:18})}),q.jsx("span",{className:"font-semibold text-black",children:e.name})]}),q.jsxs("div",{className:"flex items-center gap-3",children:[q.jsxs("span",{className:"text-sm font-medium text-black",children:[e.count," times"]}),q.jsx(j,{size:16,className:"text-black"})]})]},t))})]}):null;return q.jsx($t,{header:q.jsx(Ys,{title:"Progress",showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold"}),maxContent:"responsive",showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:e,bottomBarSticky:!0,contentClassName:"",headerInScrollArea:!0,children:q.jsxs(ln,{gap:"fluid",children:[q.jsx(tn,{variant:"plain",padding:"none",children:q.jsx("div",{className:"px-1",children:q.jsx("h2",{className:"text-2xl font-bold text-black",children:(()=>{var e,t;const s=(null==g?void 0:g.first_name)&&""!==g.first_name.trim()?g.first_name.split(" ")[0]:(null==g?void 0:g.display_name)&&""!==g.display_name.trim()?g.display_name.split(" ")[0]:null,n=(((null==(e=null==B?void 0:B.steps)?void 0:e.progress)??0)+((null==(t=null==B?void 0:B.routines)?void 0:t.progress)??0))/2,r=s??"there";return n>=90?`On fire, ${r}! Keep pushing 🔥`:n>=75?`Great momentum, ${r}! Almost there 💪`:n>=50?`Nice work, ${r}! Keep it going 👏`:n>=25?`You got this, ${r}! Small steps add up 🚶`:`New day, ${r}. Let's get moving 💫`})()})})}),q.jsx(tn,{variant:"plain",padding:"none",children:q.jsx("div",{className:"flex bg-white/60 rounded-2xl p-1 border border-white/20",children:["day","week","month","year"].map(e=>q.jsx("button",{onClick:()=>c(e),className:"flex-1 py-3 px-4 rounded-xl text-sm font-semibold transition-all duration-200 "+(l===e?"bg-warm-sage text-black shadow-md":"text-black hover:text-black hover:bg-white/40"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),"month"===l&&q.jsx(tn,{variant:"plain",padding:"none",children:q.jsxs(Hh,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:[q.jsx(Wh,{children:q.jsxs("div",{className:"flex items-center gap-4",children:[q.jsx("div",{className:"w-12 h-12 bg-warm-peach/20 rounded-full flex items-center justify-center",children:q.jsx(k,{size:24,className:"text-black"})}),q.jsx("h2",{className:"font-bold text-black text-xl",children:"Weekly Targets"})]})}),q.jsx(zh,{className:"space-y-6",children:"month"===l&&B.steps.weeklyBreakdown&&B.routines.weeklyBreakdown?q.jsxs("div",{className:"space-y-6",children:[q.jsxs("div",{className:"space-y-4",children:[q.jsx("h3",{className:"text-sm font-semibold text-black",children:"Weekly Steps Targets"}),q.jsx("div",{className:"flex gap-3",children:B.steps.weeklyBreakdown.map((e,t)=>q.jsxs("div",{className:"flex-1 text-center",children:[q.jsx("div",{className:"text-xs font-medium text-black mb-2",children:e.week}),q.jsxs("div",{className:"relative",children:[q.jsx("div",{className:"w-full rounded-lg transition-all duration-300 "+(e.achieved?"bg-warm-sage":"bg-warm-sage/20"),style:{height:`${Math.max(20,e.steps/Math.max(...B.steps.weeklyBreakdown.map(e=>e.steps))*80)}px`}}),e.achieved&&q.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-warm-sage rounded-full flex items-center justify-center",children:q.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),q.jsxs("div",{className:"text-xs font-medium text-black mt-2",children:[(e.steps/1e3).toFixed(0),"k"]})]},t))})]}),q.jsxs("div",{className:"space-y-4",children:[q.jsx("h3",{className:"text-sm font-semibold text-black",children:"Weekly Routine Targets"}),q.jsx("div",{className:"flex gap-3",children:B.routines.weeklyBreakdown.map((e,t)=>q.jsxs("div",{className:"flex-1 text-center",children:[q.jsx("div",{className:"text-xs font-medium text-black mb-2",children:e.week}),q.jsxs("div",{className:"relative",children:[q.jsx("div",{className:"w-full rounded-lg transition-all duration-300 "+(e.achieved?"bg-warm-coral":"bg-warm-coral/20"),style:{height:`${Math.max(20,e.timeSpent/Math.max(...B.routines.weeklyBreakdown.map(e=>e.timeSpent))*80)}px`}}),e.achieved&&q.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-warm-coral rounded-full flex items-center justify-center",children:q.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),q.jsxs("div",{className:"text-xs font-medium text-black mt-2",children:[e.timeSpent,"m"]})]},t))})]})]}):null})]})}),"month"!==l&&"year"!==l&&q.jsx(tn,{variant:"plain",padding:"none",children:q.jsxs(Hh,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:[q.jsx(Wh,{className:"pb-6",children:q.jsxs("div",{className:"flex items-center justify-between",children:[q.jsxs("div",{className:"flex items-center gap-4",children:[q.jsx("div",{className:"w-12 h-12 bg-warm-sage/20 rounded-full flex items-center justify-center",children:q.jsx(b,{size:24,className:"text-black"})}),q.jsxs("div",{children:[q.jsxs("h2",{className:"font-bold text-black text-xl",children:[L()," Steps"]}),q.jsxs("p",{className:"text-sm text-black",children:["Goal: ",("day"===l?y:B.steps.target).toLocaleString()]})]})]}),"day"===l?q.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(!w&&v>=y?"bg-warm-sage":"bg-warm-sage/20"),children:!w&&v>=y?q.jsx(E,{size:20,className:"text-black"}):q.jsx("div",{className:"w-4 h-4 border-2 border-warm-sage rounded-sm"})}):q.jsxs(Em,{className:(B.steps.achieved?"bg-warm-sage":"bg-warm-sage/20")+" text-black border-warm-sage/30 px-3 py-1 text-sm font-semibold",children:[B.steps.progress.toFixed(0),"%"]})]})}),q.jsxs(zh,{className:"space-y-6",children:[q.jsxs("div",{className:"space-y-3",children:[q.jsxs("div",{className:"flex justify-between items-center",children:[q.jsx("span",{className:"text-4xl font-bold text-black",children:("day"===l?v:B.steps.current).toLocaleString()}),q.jsx("span",{className:"text-sm font-medium text-black",children:"day"===l?w?"Loading…":v<y?`${(y-v).toLocaleString()} remaining`:"Goal achieved! 🎉":B.steps.remaining>0?`${B.steps.remaining.toLocaleString()} remaining`:"Goal achieved! 🎉"})]}),q.jsx(xm,{value:"day"===l?Math.min(100,Math.max(0,v/Math.max(1,y)*100)):B.steps.progress,className:"h-4 bg-warm-sage/20 rounded-full",style:{"--progress-color":"hsl(var(--warm-sage))"}})]}),"week"===l&&B.steps.dailyBreakdown?q.jsxs("div",{className:"space-y-4",children:[q.jsx("h3",{className:"text-sm font-semibold text-black",children:"Daily Breakdown"}),q.jsx("div",{className:"flex gap-3",children:B.steps.dailyBreakdown.map((e,t)=>q.jsxs("div",{className:"flex-1 text-center",children:[q.jsx("div",{className:"text-xs font-medium text-black mb-2",children:e.day}),q.jsxs("div",{className:"relative",children:[q.jsx("div",{className:"w-full rounded-lg transition-all duration-300 "+(e.achieved?"bg-warm-sage":"bg-warm-sage/20"),style:{height:`${Math.max(20,e.steps/Math.max(...B.steps.dailyBreakdown.map(e=>e.steps))*80)}px`}}),e.achieved&&q.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-warm-sage rounded-full flex items-center justify-center",children:q.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),q.jsxs("div",{className:"text-xs font-medium text-black mt-2",children:[(e.steps/1e3).toFixed(0),"k"]})]},t))})]}):"month"===l&&B.steps.weeklyBreakdown?q.jsxs("div",{className:"space-y-4",children:[q.jsx("h3",{className:"text-sm font-semibold text-black",children:"Weekly Breakdown"}),q.jsx("div",{className:"flex gap-3",children:B.steps.weeklyBreakdown.map((e,t)=>q.jsxs("div",{className:"flex-1 text-center",children:[q.jsx("div",{className:"text-xs font-medium text-black mb-2",children:e.week}),q.jsxs("div",{className:"relative",children:[q.jsx("div",{className:"w-full rounded-lg transition-all duration-300 "+(e.achieved?"bg-warm-sage":"bg-warm-sage/20"),style:{height:`${Math.max(20,e.steps/Math.max(...B.steps.weeklyBreakdown.map(e=>e.steps))*80)}px`}}),e.achieved&&q.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-warm-sage rounded-full flex items-center justify-center",children:q.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),q.jsxs("div",{className:"text-xs font-medium text-black mt-2",children:[(e.steps/1e3).toFixed(0),"k"]})]},t))})]}):null]})]})}),"month"!==l&&"year"!==l&&q.jsx(tn,{variant:"plain",padding:"none",children:q.jsxs(Hh,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:[q.jsx(Wh,{className:"pb-6",children:q.jsxs("div",{className:"flex items-center justify-between",children:[q.jsxs("div",{className:"flex items-center gap-4",children:[q.jsx("div",{className:"w-12 h-12 bg-warm-coral/20 rounded-full flex items-center justify-center",children:q.jsx(m,{size:24,className:"text-black"})}),q.jsxs("div",{children:[q.jsxs("h2",{className:"font-bold text-black text-xl",children:[L()," Workouts"]}),q.jsxs("p",{className:"text-sm text-black",children:["Goal: ","day"===l?1:B.routines.target," ","day"===l?"workout":"routines"]})]})]}),"day"===l?q.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(!A&&C>=1?"bg-warm-coral":"bg-warm-coral/20"),children:!A&&C>=1?q.jsx(E,{size:20,className:"text-black"}):q.jsx("div",{className:"w-4 h-4 border-2 border-warm-coral rounded-sm"})}):q.jsxs(Em,{className:(B.routines.achieved?"bg-warm-coral":"bg-warm-coral/20")+" text-black border-warm-coral/30 px-3 py-1 text-sm font-semibold",children:[B.routines.progress.toFixed(0),"%"]})]})}),q.jsxs(zh,{className:"space-y-6",children:["day"!==l&&q.jsxs("div",{className:"space-y-3",children:[q.jsxs("div",{className:"flex justify-between items-center",children:[q.jsx("span",{className:"text-4xl font-bold text-black",children:B.routines.current}),q.jsx("span",{className:"text-sm font-medium text-black",children:B.routines.remaining>0?`${B.routines.remaining} more to go`:"Target exceeded! 🚀"})]}),q.jsx(xm,{value:B.routines.progress,className:"h-4 bg-warm-coral/20 rounded-full",style:{"--progress-color":"hsl(var(--warm-coral))"}})]}),"day"===l?q.jsxs("div",{className:"space-y-3",children:[q.jsx("h3",{className:"text-sm font-semibold text-black",children:"Today's Workouts"}),q.jsx("div",{className:"p-4 bg-white/60 rounded-xl border border-white/20 flex items-center justify-between",children:q.jsxs("div",{className:"flex items-center gap-3",children:[q.jsx("div",{className:"w-10 h-10 bg-warm-coral/20 rounded-full flex items-center justify-center",children:q.jsx(m,{size:18,className:"text-black"})}),q.jsxs("div",{children:[q.jsx("span",{className:"font-semibold text-black",children:A?"Loading…":`${C} workout${1===C?"":"s"}`}),q.jsx("div",{className:"text-xs text-black",children:A?"":`${T} min total`})]})]})})]}):null,"week"===l&&B.routines.dailyBreakdown?q.jsxs("div",{className:"space-y-4",children:[q.jsx("h3",{className:"text-sm font-semibold text-black",children:"Daily Routine Time"}),q.jsx("div",{className:"flex gap-3",children:B.routines.dailyBreakdown.map((e,t)=>q.jsxs("div",{className:"flex-1 text-center",children:[q.jsx("div",{className:"text-xs font-medium text-black mb-2",children:e.day}),q.jsxs("div",{className:"relative",children:[q.jsx("div",{className:"w-full rounded-lg transition-all duration-300 "+(e.achieved?"bg-warm-coral":"bg-warm-coral/20"),style:{height:`${Math.max(20,e.timeSpent/Math.max(...B.routines.dailyBreakdown.map(e=>e.timeSpent))*80)}px`}}),e.achieved&&q.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-warm-coral rounded-full flex items-center justify-center",children:q.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),q.jsxs("div",{className:"text-xs font-medium text-black mt-2",children:[e.timeSpent,"m"]})]},t))})]}):null,U()]})]})}),"month"===l&&B.routines.types&&B.routines.types.length>0&&q.jsx(tn,{variant:"plain",padding:"none",children:q.jsxs(Hh,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:[q.jsx(Wh,{children:q.jsxs("div",{className:"flex items-center gap-4",children:[q.jsx("div",{className:"w-12 h-12 bg-warm-coral/20 rounded-full flex items-center justify-center",children:q.jsx(m,{size:24,className:"text-black"})}),q.jsx("h2",{className:"font-bold text-black text-xl",children:"Routine Types"})]})}),q.jsx(zh,{className:"space-y-6",children:U()})]})}),"year"===l&&q.jsx(tn,{variant:"plain",padding:"none",children:q.jsxs(Hh,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:[q.jsx(Wh,{children:q.jsxs("div",{className:"flex items-center gap-4",children:[q.jsx("div",{className:"w-12 h-12 bg-warm-peach/20 rounded-full flex items-center justify-center",children:q.jsx(k,{size:24,className:"text-black"})}),q.jsx("h2",{className:"font-bold text-black text-xl",children:"Monthly Breakdown"})]})}),q.jsx(zh,{className:"space-y-6",children:"year"===l?q.jsxs("div",{className:"space-y-6",children:[q.jsxs("div",{className:"space-y-4",children:[q.jsx("h3",{className:"text-sm font-semibold text-black",children:"Monthly Steps Targets"}),q.jsx("div",{className:"overflow-x-auto",children:q.jsx("div",{className:"flex gap-2 min-w-max",children:(M||Rm).map((e,t)=>q.jsxs("div",{className:"w-16 text-center",children:[q.jsx("div",{className:"text-xs font-medium text-black mb-2",children:e.month}),q.jsxs("div",{className:"relative",children:[q.jsx("div",{className:"w-full rounded-lg transition-all duration-300 "+(e.stepsAchieved?"bg-warm-sage":"bg-warm-sage/20"),style:{height:`${Math.max(20,e.steps/Math.max(...(M||Rm).map(e=>e.steps))*80)}px`}}),e.stepsAchieved&&q.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-warm-sage rounded-full flex items-center justify-center",children:q.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),q.jsxs("div",{className:"text-xs font-medium text-black mt-2",children:[(e.steps/1e3).toFixed(0),"k"]})]},t))})})]}),q.jsxs("div",{className:"space-y-4",children:[q.jsx("h3",{className:"text-sm font-semibold text-black",children:"Monthly Routine Targets"}),q.jsx("div",{className:"overflow-x-auto",children:q.jsx("div",{className:"flex gap-2 min-w-max",children:(M||Rm).map((e,t)=>q.jsxs("div",{className:"w-16 text-center",children:[q.jsx("div",{className:"text-xs font-medium text-black mb-2",children:e.month}),q.jsxs("div",{className:"relative",children:[q.jsx("div",{className:"w-full rounded-lg transition-all duration-300 "+(e.routinesAchieved?"bg-warm-coral":"bg-warm-coral/20"),style:{height:`${Math.max(20,e.routines/Math.max(...(M||Rm).map(e=>e.routines))*80)}px`}}),e.routinesAchieved&&q.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-warm-coral rounded-full flex items-center justify-center",children:q.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),q.jsx("div",{className:"text-xs font-medium text-black mt-2",children:e.routines})]},t))})})]})]}):null})]})}),"year"===l&&q.jsx(tn,{variant:"plain",padding:"none",children:q.jsxs(Hh,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:[q.jsx(Wh,{children:q.jsxs("div",{className:"flex items-center gap-4",children:[q.jsx("div",{className:"w-12 h-12 bg-warm-mint/20 rounded-full flex items-center justify-center",children:q.jsx(S,{size:24,className:"text-black"})}),q.jsx("h2",{className:"font-bold text-black text-xl",children:"Activity Calendar"})]})}),q.jsx(zh,{className:"space-y-6",children:(()=>{if("year"===l){const t=new Date(h,d+1,0).getDate(),s=new Date(h,d,1).getDay();return q.jsxs("div",{className:"space-y-4",children:[q.jsxs("div",{className:"flex items-center justify-between",children:[q.jsx("h3",{className:"text-sm font-semibold text-black",children:"Activity Calendar"}),q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("button",{onClick:()=>O("prev"),className:"p-1 rounded-full hover:bg-white/20 transition-colors",children:q.jsx(j,{size:16,className:"text-black rotate-180"})}),q.jsxs("span",{className:"text-sm font-medium text-black min-w-[80px] text-center",children:[(e=d,["January","February","March","April","May","June","July","August","September","October","November","December"][e])," ",h]}),q.jsx("button",{onClick:()=>O("next"),className:"p-1 rounded-full hover:bg-white/20 transition-colors",children:q.jsx(j,{size:16,className:"text-black"})})]})]}),q.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>q.jsx("div",{className:"text-xs font-medium text-black text-center p-1",children:e},e)),Array.from({length:s},(e,t)=>q.jsx("div",{className:"w-8 h-8"},`empty-${t}`)),Array.from({length:t},(e,t)=>{const s=t+1,n=(I||Pm)[`${d+1}/${s}`];if(!n)return q.jsx("div",{className:"w-8 h-8"},s);const r=n.steps,a=n.routines;return q.jsxs("div",{className:"relative w-8 h-8 flex items-center justify-center",children:[q.jsx("span",{className:"text-xs text-black",children:s}),r&&q.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-warm-sage rounded-full"}),a&&q.jsx("div",{className:"absolute bottom-0 right-1/2 transform translate-x-1/2 w-2 h-2 bg-warm-coral rounded-full"})]},s)})]}),q.jsxs("div",{className:"flex items-center gap-4 text-xs text-black justify-center",children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("div",{className:"w-2 h-2 bg-warm-sage rounded-full"}),q.jsx("span",{children:"Steps"})]}),q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("div",{className:"w-2 h-2 bg-warm-coral rounded-full"}),q.jsx("span",{children:"Routines"})]})]})]})}var e;return null})()})]})})]})})}var Dm=(null==globalThis?void 0:globalThis.document)?s.useLayoutEffect:()=>{},Im={exports:{}},$m={},Bm=s;var Lm="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Om=Bm.useState,Um=Bm.useEffect,Fm=Bm.useLayoutEffect,Vm=Bm.useDebugValue;function Hm(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Lm(e,s)}catch(n){return!0}}var Wm="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),n=Om({inst:{value:s,getSnapshot:t}}),r=n[0].inst,a=n[1];return Fm(function(){r.value=s,r.getSnapshot=t,Hm(r)&&a({inst:r})},[e,s,t]),Um(function(){return Hm(r)&&a({inst:r}),e(function(){Hm(r)&&a({inst:r})})},[e]),Vm(s),s};$m.useSyncExternalStore=void 0!==Bm.useSyncExternalStore?Bm.useSyncExternalStore:Wm,Im.exports=$m;var zm=Im.exports;function Gm(){return()=>{}}var qm="Avatar",[Ym,Jm]=Gh(qm),[Km,Xm]=Ym(qm),Zm=s.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,i]=s.useState("idle");return q.jsx(Km,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:q.jsx(em.span,{...r,ref:t})})});Zm.displayName=qm;var Qm="AvatarImage";s.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...i}=e,o=Xm(Qm,n),l=function(e,{referrerPolicy:t,crossOrigin:n}){const r=zm.useSyncExternalStore(Gm,()=>!0,()=>!1),a=s.useRef(null),i=r?(a.current||(a.current=new window.Image),a.current):null,[o,l]=s.useState(()=>sp(i,e));return Dm(()=>{l(sp(i,e))},[i,e]),Dm(()=>{const e=e=>()=>{l(e)};if(!i)return;const s=e("loaded"),r=e("error");return i.addEventListener("load",s),i.addEventListener("error",r),t&&(i.referrerPolicy=t),"string"==typeof n&&(i.crossOrigin=n),()=>{i.removeEventListener("load",s),i.removeEventListener("error",r)}},[i,n,t]),o}(r,i),c=function(e){const t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...e)=>{var s;return null==(s=t.current)?void 0:s.call(t,...e)},[])}(e=>{a(e),o.onImageLoadingStatusChange(e)});return Dm(()=>{"idle"!==l&&c(l)},[l,c]),"loaded"===l?q.jsx(em.img,{...i,ref:t,src:r}):null}).displayName=Qm;var ep="AvatarFallback",tp=s.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,i=Xm(ep,n),[o,l]=s.useState(void 0===r);return s.useEffect(()=>{if(void 0!==r){const e=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(e)}},[r]),o&&"loaded"!==i.imageLoadingStatus?q.jsx(em.span,{...a,ref:t}):null});function sp(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}tp.displayName=ep;var np=Zm,rp=tp;function ap({className:e,...t}){return q.jsx(np,{"data-slot":"avatar",className:zs("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...t})}function ip({className:e,...t}){return q.jsx(rp,{"data-slot":"avatar-fallback",className:zs("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}function op({bottomBar:e,onNavigateToMyAccount:t,onNavigateToDeviceSettings:n}){const{userToken:r,signOut:a}=xt(),[i,o]=s.useState(null),[l,c]=s.useState(!1),[d,u]=s.useState(!1),h=[{title:"Account & Settings",items:[{label:"My Account",description:"Profile details and connected services",icon:f,onPress:t},{label:"Device Settings",description:"Manage Health Connect and devices",icon:N,onPress:n},{label:"Notifications",description:"Choose reminders that keep you on track",icon:C},{label:"Privacy Settings",description:"Control data sharing and visibility",icon:T}]},{title:"Support",items:[{label:"Help & Support",description:"Get help or ask a question",icon:A},{label:"Tutorials",description:"Quick tips to learn the app",icon:_},{label:"About",description:"Our mission and release notes",icon:R},{label:"Getting Started",description:"Guided setup for new members",icon:P}]}];s.useEffect(()=>{(async()=>{if(r){c(!0);try{const e=await Je.getMyProfile();o(e)}catch(e){ne("Failed to fetch profile:",e),e instanceof Error&&"UNAUTHORIZED"===e.message?ot.error("Session expired. Please sign in."):ot.error("Failed to load profile data.")}finally{c(!1)}}})()},[r]);const m=()=>(null==i?void 0:i.display_name)?i.display_name:(null==i?void 0:i.first_name)&&(null==i?void 0:i.last_name)?`${i.first_name} ${i.last_name}`:(null==i?void 0:i.first_name)?i.first_name:"User";return q.jsx($t,{header:q.jsx(Ys,{title:"Profile",showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold text-black"}),maxContent:"responsive",showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:e,bottomBarSticky:!0,headerInScrollArea:!0,children:q.jsxs(ln,{gap:"fluid",children:[q.jsx(tn,{variant:"plain",padding:"none",children:q.jsx(Hh,{className:"border border-border bg-card/80 backdrop-blur-sm shadow-sm",children:q.jsxs(zh,{className:"p-6 text-center",children:[q.jsx(ap,{className:"w-20 h-20 mx-auto mb-4 bg-primary text-black shadow-lg shadow-primary/30",children:q.jsx(ip,{className:"bg-primary text-black text-lg font-semibold",children:(()=>{const e=m(),t=e.split(" ");return t.length>=2?`${t[0][0]}${t[1][0]}`.toUpperCase():e.slice(0,2).toUpperCase()})()})}),l?q.jsx("div",{className:"text-sm text-black/60",children:"Loading profile..."}):q.jsxs(q.Fragment,{children:[q.jsx("h1",{className:"text-[clamp(20px,5vw,26px)] font-semibold text-black mb-1",children:m()}),q.jsx("p",{className:"text-sm text-black/60",children:"Keep your profile up to date to personalize your plan."})]})]})})}),h.map(e=>q.jsx(tn,{variant:"plain",padding:"none",children:q.jsxs("div",{className:"rounded-3xl border border-border bg-card/80 backdrop-blur-sm p-5 shadow-sm",children:[q.jsx("p",{className:"text-md font-bold uppercase tracking-[0.12em] text-black mb-4",children:e.title}),q.jsx("div",{className:"space-y-3",children:e.items.map(e=>{const t=e.icon;return q.jsx(zh,{className:"px-0 pt-1 pb-1",children:q.jsx("button",{type:"button",onClick:e.onPress,disabled:!e.onPress,className:"w-full rounded-2xl px-4 py-3 text-left transition hover:bg-black/5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-black/40 disabled:cursor-default disabled:opacity-60",children:q.jsxs("div",{className:"flex items-start gap-3",children:[q.jsx(t,{size:18,className:"mt-1 text-black"}),q.jsxs("div",{className:"flex-1 leading-none",children:[q.jsx("p",{className:"text-sm uppercase font-medium text-black leading-tight",children:e.label}),e.description&&q.jsx("p",{className:"text-xs text-black/60 leading-tight m-0",children:e.description})]}),q.jsx(j,{size:18,className:"text-black/30 self-center"})]})})},e.label)})})]})},e.title)),q.jsx(tn,{variant:"plain",padding:"none",children:q.jsxs("div",{className:"space-y-4",children:[q.jsxs(xn,{variant:"secondary",className:"w-full flex items-center justify-center gap-2 rounded-2xl border-0 font-medium text-black",onClick:async()=>{if(!d){u(!0);try{await Je.signOut(),a(),ot.success("Signed out successfully")}catch(e){ne("Sign out failed:",e),a(),ot.success("Signed out successfully")}finally{u(!1)}}},disabled:d,children:[d?q.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-current border-t-transparent rounded-full"}):q.jsx(M,{size:16}),d?"Signing Out...":"Logout"]}),q.jsx("div",{className:"text-center text-xs text-black/50",children:"App Version: 1.0.0 (Build 1234)"})]})})]})})}var lp=s.forwardRef((e,t)=>q.jsx(em.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));lp.displayName="Label";var cp=lp;function dp({className:e,...t}){return q.jsx(cp,{"data-slot":"label",className:zs("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const up="prefer_not_to_say",hp={cm:jh("cm").toUpperCase(),m:jh("m").toUpperCase()},mp={kg:Nh("kg").toUpperCase(),lb:Nh("lb").toUpperCase()},pp=e=>Object.entries(e).map(([e,t])=>({value:e,label:t})),fp=pp(hp),gp=pp(mp),xp=()=>({displayName:"",firstName:"",lastName:"",height:"",weight:"",lengthUnit:uh,weightUnit:hh,gender:up}),vp=[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"non_binary",label:"Non-binary"},{value:"prefer_not_to_say",label:"Prefer not to say"}];function yp({onBack:e}){const t="my-account-form",[n,r]=s.useState(()=>xp()),[a,i]=s.useState(()=>xp()),[o,l]=s.useState(!1),[c,d]=s.useState(!1);s.useEffect(()=>{(async()=>{l(!0);try{const e=await Je.getMyProfile();if(e){const t=kp(e);r(t),i({...t})}else{const e=xp();r(e),i({...e})}}catch(e){ne("Failed to load account profile:",e),ot.error("Unable to load your profile right now.")}finally{l(!1)}})()},[]);const u=s.useMemo(()=>{const e=n.displayName.trim();if(e)return e;return[n.firstName.trim(),n.lastName.trim()].filter(Boolean).join(" ")||"User"},[n.displayName,n.firstName,n.lastName]);s.useMemo(()=>{const e=u;if(!e)return"US";const t=e.split(" ").filter(Boolean);return t.length>=2?`${t[0][0]}${t[1][0]}`.toUpperCase():e.slice(0,2).toUpperCase()},[u]);const h=s.useMemo(()=>JSON.stringify(n)!==JSON.stringify(a),[n,a]),m=e=>t=>{const{value:s}=t.target;r(t=>"weight"!==e||gh(s)?{...t,[e]:s}:t)},p="m"===n.lengthUnit?.01:.1;return q.jsx($t,{header:q.jsx(Ys,{title:"My Account",onBack:e,showBorder:!1,denseSmall:!0,titleClassName:"text-[17px] font-bold text-black"}),maxContent:"responsive",showHeaderBorder:!1,showBottomBarBorder:!1,bottomBar:q.jsx(Rn,{children:q.jsx(_n,{type:"submit",form:t,disabled:!h||c||o,className:"min-w-[160px]",children:c?q.jsxs("div",{className:"flex items-center justify-center gap-2",children:[q.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-current border-t-transparent rounded-full"}),"Saving..."]}):"Save Changes"})}),bottomBarSticky:!0,headerInScrollArea:!1,children:q.jsx("form",{id:t,onSubmit:async e=>{if(e.preventDefault(),c||!h)return;const t=n.displayName.trim(),s=n.firstName.trim(),a=n.lastName.trim();if(!t)return void ot.error("Display name is required.");const o=Sp(n.height),l=Sp(n.weight);if(void 0!==o&&o<=0)return void ot.error("Height must be a positive number.");if(void 0!==l&&l<=0)return void ot.error("Weight must be a positive number.");const u=void 0!==o?bh(o,n.lengthUnit):void 0,m=void 0!==l?wh(l,n.weightUnit):void 0;d(!0);try{const e=await Je.upsertProfile({firstName:s,lastName:a,displayName:t,heightCm:u,weightKg:m,lengthUnit:n.lengthUnit,weightUnit:n.weightUnit,gender:n.gender}),o=e?kp(e):{displayName:t,firstName:s,lastName:a,height:n.height,weight:n.weight,lengthUnit:n.lengthUnit,weightUnit:n.weightUnit,gender:n.gender};r(o),i({...o}),ae("[MyAccount] Saved profile preferences",{lengthUnit:o.lengthUnit,weightUnit:o.weightUnit,gender:o.gender}),ot.success("Profile updated successfully.")}catch(p){ne("Failed to update profile:",p),ot.error("Could not save your changes. Please try again.")}finally{d(!1)}},className:"h-full",children:q.jsxs(ln,{gap:"fluid",children:[q.jsx(tn,{variant:"plain",padding:"none",children:q.jsxs("div",{className:"rounded-3xl border border-border bg-card/80 backdrop-blur-sm p-6 shadow-sm space-y-6",children:[q.jsxs("div",{children:[q.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-black/60",children:"Personal Information"}),q.jsx("h2",{className:"mt-2 text-lg font-semibold text-black",children:"How should we address you?"}),q.jsx("p",{className:"text-sm text-black/60 mt-1",children:"Update the details you'd like to share with the community."})]}),q.jsxs("div",{className:"space-y-4",children:[q.jsx(wp,{label:"Display Name",value:n.displayName,onChange:m("displayName"),placeholder:"eg. Alex Johnson",required:!0,disabled:o||c}),q.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[q.jsx(wp,{label:"First Name",value:n.firstName,onChange:m("firstName"),placeholder:"First name",disabled:o||c}),q.jsx(wp,{label:"Last Name",value:n.lastName,onChange:m("lastName"),placeholder:"Last name",disabled:o||c})]}),q.jsx(bp,{value:n.gender,onChange:e=>{o||c||r(t=>t.gender===e?t:{...t,gender:e})},disabled:o||c})]})]})}),q.jsx(tn,{variant:"plain",padding:"none",children:q.jsxs("div",{className:"rounded-3xl border border-border bg-card/80 backdrop-blur-sm p-6 shadow-sm space-y-6",children:[q.jsxs("div",{children:[q.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-black/60",children:"Physical Information"}),q.jsx("h2",{className:"mt-2 text-lg font-semibold text-black",children:"Fitness stats help tailor your plan"}),q.jsx("p",{className:"text-sm text-black/60 mt-1",children:"Share optional stats to improve workout recommendations."})]}),q.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[q.jsx(wp,{label:`Height (${jh(n.lengthUnit).toUpperCase()})`,value:n.height,onChange:m("height"),placeholder:"m"===n.lengthUnit?"eg. 1.75":"eg. 175",type:"number",inputMode:"decimal",min:0,step:p,disabled:o||c}),q.jsx(wp,{label:`Weight (${Nh(n.weightUnit).toUpperCase()})`,value:n.weight,onChange:m("weight"),placeholder:"lb"===n.weightUnit?"eg. 154":"eg. 70",type:"number",inputMode:"decimal",min:0,step:.01,disabled:o||c})]})]})}),q.jsx(tn,{variant:"plain",padding:"none",children:q.jsxs("div",{className:"rounded-3xl border border-border bg-card/80 backdrop-blur-sm p-6 shadow-sm space-y-6",children:[q.jsxs("div",{children:[q.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-black/60",children:"Unit Preferences"}),q.jsx("h2",{className:"mt-2 text-lg font-semibold text-black",children:"Choose how measurements are displayed"}),q.jsx("p",{className:"text-sm text-black/60 mt-1",children:"Select your preferred units for length and weight."})]}),q.jsxs("div",{className:"space-y-1",children:[q.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[q.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.14em] text-black",children:"Length Units"}),q.jsx(dn,{value:n.lengthUnit,onChange:e=>{o||c||r(t=>{if(t.lengthUnit===e)return t;ae(`[MyAccount] Length unit set to ${e.toUpperCase()}`);const s=Sp(t.height),n=void 0!==s?bh(s,t.lengthUnit):void 0,r=void 0!==n?kh(n,e):"";return{...t,lengthUnit:e,height:r}})},options:fp,size:"md",variant:"filled",tone:"accent"})]}),q.jsx("div",{className:"h-px bg-border/80"}),q.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[q.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.14em] text-black",children:"Weight Units"}),q.jsx(dn,{value:n.weightUnit,onChange:e=>{o||c||r(t=>{if(t.weightUnit===e)return t;ae(`[MyAccount] Weight unit set to ${e.toUpperCase()}`);const s=Sp(t.weight),n=void 0!==s?wh(s,t.weightUnit):void 0,r=void 0!==n?Eh(n,e):"";return{...t,weightUnit:e,weight:r}})},options:gp,size:"md",variant:"filled",tone:"accent"})]})]})]})})]})})})}function bp({value:e,onChange:t,disabled:s}){return q.jsxs("div",{className:"space-y-2",children:[q.jsx(dp,{className:"text-xs font-semibold uppercase tracking-[0.18em] text-black/60",children:"Gender"}),q.jsxs("div",{className:"relative",children:[q.jsx("select",{className:"bg-input-background border border-border text-sm h-11 rounded-xl w-full px-4 pr-10 text-black transition-[color,box-shadow] focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none disabled:opacity-50 disabled:cursor-not-allowed appearance-none",value:e,onChange:e=>t(e.target.value),disabled:s,children:vp.map(e=>q.jsx("option",{value:e.value,className:"text-black",children:e.label},e.value))}),q.jsx("svg",{"aria-hidden":"true",viewBox:"0 0 20 20",className:"pointer-events-none absolute right-4 top-1/2 h-4 w-4 -translate-y-1/2 text-black/60",children:q.jsx("path",{fill:"currentColor",d:"M5.23 7.21a.75.75 0 0 1 1.06.02L10 11.204l3.71-3.973a.75.75 0 1 1 1.08 1.04l-4.24 4.54a.75.75 0 0 1-1.08 0l-4.25-4.54a.75.75 0 0 1 .02-1.06Z"})})]})]})}function wp({label:e,className:t,...s}){return q.jsxs("div",{className:"space-y-2",children:[q.jsx(dp,{className:"text-xs font-semibold uppercase tracking-[0.18em] text-black/60",children:e}),q.jsx(Tn,{className:`bg-input-background border-border text-sm h-11 rounded-xl ${t??""}`,...s})]})}function kp(e){var t,s,n;const r=vh(e.length_unit),a=yh(e.weight_unit);return{displayName:(null==(t=e.display_name)?void 0:t.trim())??"",firstName:(null==(s=e.first_name)?void 0:s.trim())??"",lastName:(null==(n=e.last_name)?void 0:n.trim())??"",height:void 0!==e.height_cm&&null!==e.height_cm?kh(e.height_cm,r):"",weight:void 0!==e.weight_kg&&null!==e.weight_kg?Eh(e.weight_kg,a):"",lengthUnit:r,weightUnit:a,gender:Ep(e.gender)}}function Ep(e){switch(e){case"male":case"female":case"non_binary":case"prefer_not_to_say":return e;default:return up}}function Sp(e){const t=e.trim();if(!t)return;const s=Number(t);return Number.isFinite(s)?s:void 0}function jp({onBack:e}){return q.jsx($t,{header:q.jsx(Ys,{title:"Device Settings",onBack:e,denseSmall:!0,titleClassName:"text-[17px] font-semibold text-black"}),showHeaderBorder:!1,showBottomBarBorder:!1,maxContent:"md",children:q.jsx(ln,{gap:"fluid",className:"py-6",children:q.jsx(tn,{variant:"plain",padding:"none",children:q.jsxs("div",{className:"relative overflow-hidden rounded-[32px] border border-white/20 bg-gradient-to-br from-[var(--warm-coral)] via-[#f69a7f] to-[#c86a4a] p-6 text-white shadow-[0px_24px_48px_-18px_rgba(224,122,95,0.75)] sm:p-10",children:[q.jsx("div",{className:"pointer-events-none absolute inset-x-10 -top-32 h-64 rounded-full bg-white/25 blur-3xl","aria-hidden":!0}),q.jsx("div",{className:"pointer-events-none absolute -bottom-24 -right-10 h-60 w-60 rounded-full bg-white/10 blur-3xl","aria-hidden":!0}),q.jsxs(ln,{gap:"xl",className:"relative text-white",children:[q.jsxs(ln,{gap:"xs",children:[q.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.4em] text-white/70",children:"WorkItOut"}),q.jsx("h1",{className:"text-[clamp(24px,5vw,32px)] font-semibold leading-tight text-white",children:"Keep WorkItOut in sync with Apple Health"}),q.jsx("p",{className:"max-w-2xl text-sm leading-relaxed text-white/80",children:"Connecting your Apple Health data — from sleep to steps — personalizes your WorkItOut experience and helps us build better guidance over time."})]}),q.jsxs("div",{className:"rounded-3xl border border-white/60 bg-white/80 p-6 text-sm leading-relaxed text-black/75 shadow-md backdrop-blur-sm sm:p-8",children:[q.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.32em] text-black/60",children:"Manage permissions"}),q.jsx("p",{className:"mt-3",children:"You can review permissions any time in Settings. To keep WorkItOut in sync:"}),q.jsxs("ol",{className:"mt-4 list-decimal space-y-2 pl-5",children:[q.jsxs("li",{children:["Open ",q.jsx("span",{className:"font-medium",children:"Settings"})," → ",q.jsx("span",{className:"font-medium",children:"Health"})," →"," ",q.jsx("span",{className:"font-medium",children:"Data Access & Devices"}),"."]}),q.jsxs("li",{children:["Choose ",q.jsx("span",{className:"font-medium",children:"WorkItOut"}),"."]}),q.jsx("li",{children:"Enable all categories you want to share with the app."})]}),q.jsx("p",{className:"mt-4 text-xs text-black/60",children:"You're in control and can change these choices at any time."})]})]})]})})})})}function Np({onAuthSuccess:e,onNavigateToSignUp:t,onNavigateToWelcome:n,bottomBar:r}){const[a,i]=s.useState(""),[o,l]=s.useState(""),[c,d]=s.useState(!1),[u,h]=s.useState(!1);return q.jsxs($t,{padHeader:!1,padBottomBar:!1,disableSafeArea:!0,backgroundImageSrc:"/Workout/Images/LandingPage.png",backgroundOverlayClassName:"bg-black/40",scrollAreaClassName:"flex flex-col",bottomBar:r,contentClassName:"",maxContent:"responsive",children:[q.jsx("button",{onClick:n,className:"text-blue-500 text-2xl p-4 self-start",children:"< Back"}),q.jsx("div",{className:"flex-1 flex items-center justify-center",children:q.jsxs(Hh,{className:"\n            w-full\n            bg-card/80 backdrop-blur-sm border-border\n            shadow-soft\n          ",children:[q.jsx(Wh,{className:"text-center pb-6",children:q.jsxs(ln,{gap:"md",children:[q.jsx("div",{className:"w-16 h-16 rounded-2xl gradient-primary flex items-center justify-center mx-auto",children:q.jsx(m,{size:32,className:"text-black"})}),q.jsxs("div",{children:[q.jsx("h1",{className:"text-2xl font-medium text-black",children:"Welcome Back"}),q.jsx("p",{className:"text-black",children:"Sign in to continue your fitness journey"})]})]})}),q.jsx(zh,{children:q.jsxs(ln,{gap:"lg",children:[q.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),a.trim()&&o.trim()){h(!0);try{const{access_token:t,refresh_token:s}=await Je.signIn(a,o);e(t,s),ot.success("Welcome back!")}catch(s){ne("Sign in failed:",s),s instanceof Error?s.message.includes("UNAUTHORIZED")||s.message.includes("Invalid")?ot.error("Invalid email or password. Please check your credentials."):s.message.includes("RATE_LIMIT")?ot.error("Too many attempts. Please try again in a few minutes."):ot.error(s.message||"Sign in failed. Please try again."):ot.error("Sign in failed. Please try again.")}finally{h(!1)}}else ot.error("Please enter both email and password")},className:"space-y-4",children:[q.jsxs("div",{className:"space-y-2",children:[q.jsx(dp,{htmlFor:"email",className:"text-black",children:"Email"}),q.jsx(Tn,{id:"email",type:"email",value:a,onChange:e=>i(e.target.value),placeholder:"Enter your email",className:"bg-input-background border-border",disabled:u,required:!0})]}),q.jsxs("div",{className:"space-y-2",children:[q.jsx(dp,{htmlFor:"password",className:"text-black",children:"Password"}),q.jsxs("div",{className:"relative",children:[q.jsx(Tn,{id:"password",type:c?"text":"password",value:o,onChange:e=>l(e.target.value),placeholder:"Enter your password",className:"bg-input-background border-border pr-10",disabled:u,required:!0}),q.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-black hover:text-black transition-colors",disabled:u,"aria-label":c?"Hide password":"Show password",children:c?q.jsx(D,{size:16}):q.jsx(I,{size:16})})]})]}),q.jsx(xn,{type:"submit",className:"w-full bg-gradient-to-r from-warm-coral to-warm-peach text-black rounded-xl border-0 font-medium",disabled:u,children:u?q.jsxs("div",{className:"flex items-center justify-center gap-2",children:[q.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-black border-t-transparent rounded-full"}),"Signing In..."]}):"Sign In"})]}),q.jsxs(ln,{gap:"md",className:"text-center",children:[q.jsx("button",{onClick:()=>ot.info("Password reset coming soon!"),className:"text-sm text-black hover:text-black transition-colors",disabled:u,children:"Forgot your password?"}),q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("div",{className:"flex-1 h-px bg-border"}),q.jsx("span",{className:"text-sm text-black",children:"or"}),q.jsx("div",{className:"flex-1 h-px bg-border"})]}),q.jsxs("div",{className:"text-sm text-black",children:["Don't have an account?"," ",q.jsx("button",{onClick:t,className:"text-black hover:text-black transition-colors font-medium",disabled:u,children:"Sign up"})]})]}),q.jsx(nn,{y:"xs"})]})})]})})]})}function Cp({onAuthSuccess:e,onNavigateToSignIn:t,onNavigateToWelcome:n,bottomBar:r}){const[a,i]=s.useState(""),[o,l]=s.useState(""),[c,d]=s.useState(""),[u,h]=s.useState(""),[m,p]=s.useState(""),[f,g]=s.useState(""),[x,v]=s.useState(""),[y,b]=s.useState(!1),w=y||!a||!o||!c||!f||!x;return q.jsxs($t,{padHeader:!1,padBottomBar:!1,disableSafeArea:!0,backgroundImageSrc:"/Workout/Images/LandingPage.png",backgroundOverlayClassName:"bg-black/40",scrollAreaClassName:"flex flex-col",maxContent:"responsive",bottomBar:r,contentClassName:"",children:[q.jsx("button",{onClick:n,className:"text-blue-500 text-2xl p-4 self-start",children:"< Back"}),q.jsx("div",{className:"flex-1 flex items-center justify-center",children:q.jsxs(Hh,{className:"\n            w-full max-w-md\n            bg-card/90 backdrop-blur-sm border-border\n            shadow-soft\n            max-h-[100svh] overflow-y-auto\n            pt-safe pb-safe kb-aware\n          ",children:[q.jsx(Wh,{className:"text-center",children:q.jsxs(ln,{gap:"xs",children:[q.jsx("h1",{className:"text-2xl font-medium text-black",children:"Create Account"}),q.jsx("p",{className:"text-black",children:"Join and start tracking your workouts"})]})}),q.jsx(zh,{children:q.jsxs(ln,{gap:"md",children:[q.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),a.trim()?o.trim()?c.trim()?f.trim()?x.trim()?x.length<6?(ot.error("Password must be at least 6 characters"),0):u&&(isNaN(Number(u))||Number(u)<=0)?(ot.error("Height must be a valid number"),0):!m||!(isNaN(Number(m))||Number(m)<=0)||(ot.error("Weight must be a valid number"),0):(ot.error("Password is required"),0):(ot.error("Email is required"),0):(ot.error("Display name is required"),0):(ot.error("Last name is required"),0):(ot.error("First name is required"),0)){b(!0);try{const t=await Je.signUp(f,x);let s,n;if(t.token&&t.refresh_token)s=t.token,n=t.refresh_token;else{if(!t.needsSignIn)throw new Error("No token received from sign up or sign in");{const e=await Je.signIn(f,x);s=e.access_token,n=e.refresh_token}}Je.setToken(s);const r=u?Number(u):void 0,i=m?Number(m):void 0;await Je.upsertProfile({firstName:a,lastName:o,displayName:c,heightCm:r,weightKg:i}),e(s,n),ot.success("Account created successfully!")}catch(s){s instanceof Error?"RATE_LIMIT"===s.message?ot.error("Too many requests. Please wait a few minutes and try again."):s.message.toLowerCase().includes("email")?ot.error("Invalid email address or email already exists"):s.message.toLowerCase().includes("password")?ot.error("Password must be at least 6 characters"):s.message.includes("429")?ot.error("Server is busy. Please wait a moment and try again."):ot.error(s.message||"Sign up failed"):ot.error("Sign up failed")}finally{b(!1)}}},className:"space-y-4",children:[q.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[q.jsx("div",{children:q.jsx("input",{type:"text",placeholder:"First Name",value:a,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:y,autoComplete:"given-name",required:!0})}),q.jsx("div",{children:q.jsx("input",{type:"text",placeholder:"Last Name",value:o,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:y,autoComplete:"family-name",required:!0})})]}),q.jsx("div",{children:q.jsx("input",{type:"text",placeholder:"Display Name",value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:y,autoComplete:"nickname",required:!0})}),q.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[q.jsx("div",{children:q.jsx("input",{type:"number",placeholder:"Height (cm)",value:u,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:y,min:"1"})}),q.jsx("div",{children:q.jsx("input",{type:"number",placeholder:"Weight (kg)",value:m,onChange:e=>p(t=>gh(e.target.value)?e.target.value:t),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:y,min:"1"})})]}),q.jsx("div",{children:q.jsx("input",{type:"email",placeholder:"Email",value:f,onChange:e=>g(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:y,autoComplete:"email",required:!0})}),q.jsx("div",{children:q.jsx("input",{type:"password",placeholder:"Password (min 6 characters)",value:x,onChange:e=>v(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-border bg-input-background text-black placeholder:text-black focus:outline-none focus:ring-2 focus:ring-warm-coral/30 focus:border-warm-coral",disabled:y,autoComplete:"new-password",required:!0})}),q.jsx(xn,{type:"submit",disabled:w,className:"w-full bg-gradient-to-r from-warm-coral to-warm-peach text-black rounded-xl border-0 font-medium disabled:opacity-60 disabled:cursor-not-allowed",children:y?q.jsxs("div",{className:"flex items-center justify-center gap-2",children:[q.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-black border-t-transparent rounded-full"}),"Creating Account..."]}):"Create Account"})]}),q.jsx(nn,{y:"xs"}),q.jsx("div",{className:"text-center",children:q.jsxs("div",{className:"text-sm text-black",children:["Already have an account?"," ",q.jsx("button",{onClick:t,className:"text-black hover:text-black transition-colors font-medium",disabled:y,children:"Sign in"})]})})]})})]})})]})}function Tp(e){return q.jsxs("svg",{viewBox:"0 0 24 24","aria-hidden":!0,focusable:"false",...e,children:[q.jsx("path",{d:"M12 6.528V3a1 1 0 0 1 1-1",stroke:"currentColor",strokeWidth:1.8,strokeLinecap:"round"}),q.jsx("path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",fill:"currentColor"})]})}function Ap(e){return q.jsxs("svg",{viewBox:"0 0 18 18","aria-hidden":!0,focusable:"false",...e,children:[q.jsx("path",{fill:"#4285F4",d:"M17.64 9.2045c0-.6395-.0573-1.2518-.1641-1.8386H9v3.4791h4.8436c-.2092 1.125-.8454 2.0795-1.799 2.7173v2.258h2.9087c1.7028-1.5691 2.6877-3.8818 2.6877-6.6158z"}),q.jsx("path",{fill:"#34A853",d:"M9 18c2.43 0 4.4668-.8064 5.9559-2.1932l-2.9087-2.258c-.8077.54-1.84.8614-3.0472.8614-2.3442 0-4.3274-1.5831-5.0368-3.7119H.9055v2.3327C2.3846 15.7959 5.4446 18 9 18z"}),q.jsx("path",{fill:"#FBBC05",d:"M3.9632 10.6983A5.4082 5.4082 0 0 1 3.683 9c0-.5894.1019-1.1591.2802-1.6983V4.969h-2.39C.582 6.0977 0 7.495 0 9s.582 2.9023 1.5732 4.031l2.39-2.3327z"}),q.jsx("path",{fill:"#EA4335",d:"M9 3.5795c1.3214 0 2.5104.454 3.4447 1.3478l2.583-2.583C13.4636.9268 11.427 0 9 0 5.4446 0 2.3846 2.2041.9055 5.2018l2.3777 2.3327C4.6726 5.1623 6.6558 3.5795 9 3.5795z"})]})}function _p({variant:e,onClick:t,disabled:s=!1}){const n={Apple:{label:"Sign in with Apple",className:"bg-black text-white hover:bg-neutral-900 focus-visible:ring-offset-black shadow-[0_12px_24px_rgba(0,0,0,0.35)]",icon:q.jsx(Tp,{className:"h-5 w-5"})},Google:{label:"Sign in with Google",className:"bg-white text-[#3C4043] border border-[#E0E0E0] hover:bg-white/90 hover:border-[#CACACA] focus-visible:ring-offset-white shadow-[0_12px_24px_rgba(32,33,36,0.18)]",icon:q.jsx(Ap,{className:"h-5 w-5"})}},{label:r,className:a,icon:i}=n[e];return q.jsxs("button",{type:"button",onClick:t,disabled:s,"aria-label":r,"aria-disabled":s,className:zs("w-full h-12 sm:h-14 rounded-2xl font-semibold flex items-center justify-center gap-3 transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-warm-peach focus-visible:ring-offset-2","active:translate-y-px disabled:cursor-not-allowed disabled:opacity-70",a),children:[q.jsx("span",{className:"flex items-center justify-center","aria-hidden":!0,children:i}),q.jsx("span",{children:r})]})}function Rp(){return q.jsxs("div",{className:"flex items-center gap-3 text-white/60 text-xs uppercase tracking-[0.3em]",children:[q.jsx("span",{className:"h-px flex-1 bg-white/20","aria-hidden":!0}),q.jsx("span",{children:"or"}),q.jsx("span",{className:"h-px flex-1 bg-white/20","aria-hidden":!0})]})}function Pp({onNavigateToSignUp:e,onNavigateToSignIn:t,onAuthSuccess:n,bottomBar:r}){const[a,i]=s.useState(null),o=async e=>{if(!a)try{i(e),await Je.signInWithOAuth(e)}catch(t){i(null);const e=t instanceof Error?t.message:"We couldn't start the sign-in flow. Please try again.";ot.error(e)}};return s.useEffect(()=>{const e=e=>{const t=e.detail;i(null),(null==t?void 0:t.token)&&t.refreshToken?(n(t.token,t.refreshToken),t.provider?ot.success(`Signed in with ${t.provider}`):ot.success("Welcome back!")):ot.error("We couldn't complete the sign-in. Please try again.")};return window.addEventListener("auth-success",e),()=>{window.removeEventListener("auth-success",e)}},[n]),q.jsx($t,{padHeader:!1,padBottomBar:!1,disableSafeArea:!0,backgroundImageSrc:"/Workout/Images/LandingPage.png",backgroundOverlayClassName:"bg-black/60",scrollAreaClassName:"flex flex-col",contentClassName:"flex-1 flex flex-col",bottomBar:r,maxContent:"responsive",children:q.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6 py-12 text-white",children:q.jsxs("div",{className:"w-full max-w-md flex flex-col items-center gap-10 sm:gap-12 text-center",children:[q.jsxs(ln,{align:"center",gap:"md",className:"text-balance",children:[q.jsx("div",{className:"w-16 h-16 rounded-2xl gradient-primary flex items-center justify-center shadow-glow",children:q.jsx(m,{className:"h-9 w-9 text-black","aria-hidden":!0})}),q.jsxs(ln,{align:"center",gap:"sm",className:"text-white",children:[q.jsx("h1",{className:"text-3xl sm:text-4xl font-semibold tracking-tight leading-tight",children:"Start your personalized workout plan."}),q.jsx("p",{className:"text-base sm:text-lg text-white/80",children:"Sign in to sync your workouts across devices and stay motivated every day."})]})]}),q.jsxs("div",{className:"w-full flex flex-col gap-4",children:[q.jsx(_p,{variant:"Apple",onClick:()=>o("Apple"),disabled:null!==a}),q.jsx(_p,{variant:"Google",onClick:()=>o("Google"),disabled:null!==a}),q.jsx(Rp,{}),q.jsx(xn,{type:"button",className:"w-full rounded-2xl border-0 font-semibold text-black",onClick:e,children:"Continue with email"}),q.jsxs("button",{type:"button",onClick:t,className:"text-sm text-white/80 hover:text-white transition-colors",children:["Already have an account? ",q.jsx("span",{className:"font-semibold text-white",children:"Sign in"})]})]}),q.jsxs("p",{className:"text-xs text-white/70 leading-relaxed",children:["By continuing, you agree to our"," ",q.jsx("a",{href:"/terms",className:"font-medium text-white hover:underline",children:"Terms"})," ","and"," ",q.jsx("a",{href:"/privacy",className:"font-medium text-white hover:underline",children:"Privacy Policy"}),"."]})]})})})}function Mp(e){switch(e){case"left":return{x:"-100%"};case"right":return{x:"100%"};case"up":return{y:"-100%"};case"down":return{y:"100%"};case"center":return{x:0,y:0};default:return{x:0}}}function Dp({show:e,enterFrom:t="right",exitTo:s=t,duration:n=.3,children:r}){return q.jsx(Vo,{mode:"wait",children:e&&q.jsx(Ou.div,{initial:Mp(t),animate:{x:0,y:0},exit:Mp(s),transition:{type:"tween",ease:"easeInOut",duration:n},style:{position:"absolute",inset:0},children:r},"slide")})}function Ip({currentView:e,currentRoutineId:t,currentRoutineName:s,routineAccess:n,exerciseSetupMode:r,setExerciseSetupMode:a,selectedExercisesForSetup:i,setSelectedExercisesForSetup:o,isAuthenticated:l,onAuthSuccess:c,onNavigateToSignUp:d,onNavigateToSignIn:u,onNavigateToWelcome:h,onCreateRoutine:m,onEditMeasurements:p,onRoutineCreated:f,onCloseCreateRoutine:g,onCloseEditMeasurements:x,onCompleteRoutineCreation:v,onExerciseSelected:y,onCloseExerciseSetup:b,onCloseAddExercises:w,onExerciseSetupComplete:k,onSelectRoutine:E,onCloseExerciseSetupToRoutines:S,bottomBar:j,onOverlayChange:N,onNavigateToMyAccount:C,onCloseMyAccount:T,onNavigateToDeviceSettings:A,onCloseDeviceSettings:_}){return ie(`🔍 [DBG] CURRENT SCREEN: ${e.toUpperCase()}`),l&&"signin"!==e&&"signup"!==e&&"welcome"!==e?q.jsxs("div",{className:"min-h-[100dvh] bg-gradient-to-br from-[var(--soft-gray)] via-[var(--background)] to-[var(--warm-cream)]/30",children:["workouts"===e&&q.jsx(Cn,{onCreateRoutine:m,onEditMeasurements:p,onSelectRoutine:E,onOverlayChange:N,bottomBar:j}),q.jsx(Dp,{show:"create-routine"===e,enterFrom:"down",exitTo:"down",children:q.jsx(An,{onBack:g,onRoutineCreated:f})}),q.jsx(Dp,{show:"edit-measurements"===e,enterFrom:"down",exitTo:"down",children:q.jsx(Vh,{onBack:x})}),q.jsx(Dp,{show:"add-exercises-to-routine"===e&&!!s,enterFrom:"center",exitTo:"center",children:q.jsx($n,{routineId:t||void 0,routineName:s,onBack:t?w:g,onExerciseSelected:e=>y(e),isFromExerciseSetup:!!t})}),q.jsx(Dp,{show:"exercise-setup"===e&&null!==t&&!!s,enterFrom:"left",exitTo:"left",children:q.jsx(Lh,{routineId:t,routineName:s,selectedExercisesForSetup:i,setSelectedExercisesForSetup:o,onBack:S,onSave:k,onAddMoreExercises:b,isEditingExistingRoutine:!0,onShowExerciseSelector:b,access:n,initialMode:r,onModeChange:a})}),"progress"===e&&q.jsx(Mm,{bottomBar:j}),"profile"===e&&q.jsx(op,{bottomBar:j,onNavigateToMyAccount:C,onNavigateToDeviceSettings:A}),q.jsx(Dp,{show:"profile-my-account"===e,enterFrom:"right",exitTo:"right",children:q.jsx(yp,{onBack:T})}),q.jsx(Dp,{show:"profile-device-settings"===e,enterFrom:"right",exitTo:"right",children:q.jsx(jp,{onBack:_})})]}):"signup"===e?q.jsx(Cp,{onAuthSuccess:c,onNavigateToSignIn:u,onNavigateToWelcome:h,bottomBar:j}):"signin"===e?q.jsx(Np,{onAuthSuccess:c,onNavigateToSignUp:d,onNavigateToWelcome:h,bottomBar:j}):q.jsx(Pp,{onNavigateToSignUp:d,onNavigateToSignIn:u,onAuthSuccess:c,bottomBar:j})}function $p(){const e=document.createElement("div");e.style.paddingBottom="env(safe-area-inset-bottom, 999px)",document.body.appendChild(e);const t="999px"!==window.getComputedStyle(e).paddingBottom;document.body.removeChild(e),document.documentElement.setAttribute("data-safe-area-supported",t.toString()),t||function(){const e=/iPhone/i.test(navigator.userAgent),t=!0===window.navigator.standalone,s=window.matchMedia("(display-mode: standalone)").matches;if(e&&(t||s)){let e="0px",t="0px";window.screen.height>=812&&(e="34px",t="44px"),document.documentElement.style.setProperty("--manual-safe-area-top",t),document.documentElement.style.setProperty("--manual-safe-area-bottom",e),document.documentElement.setAttribute("data-manual-safe-area","true")}}()}function Bp(){s.useEffect(()=>{!function(){let e=document.querySelector('meta[name="viewport"]');e||(e=document.createElement("meta"),e.setAttribute("name","viewport"),document.head.appendChild(e));const t="width=device-width, initial-scale=1.0, viewport-fit=cover";e.getAttribute("content")!==t&&e.setAttribute("content",t)}(),document.documentElement.style.setProperty("--safe-area-inset-top","env(safe-area-inset-top, 0px)"),document.documentElement.style.setProperty("--safe-area-inset-bottom","env(safe-area-inset-bottom, 0px)"),document.documentElement.style.setProperty("--safe-area-inset-left","env(safe-area-inset-left, 0px)"),document.documentElement.style.setProperty("--safe-area-inset-right","env(safe-area-inset-right, 0px)");const e=setTimeout($p,100);return()=>clearTimeout(e)},[])}const Lp=({...e})=>{const[t,n]=s.useState(()=>document.documentElement.classList.contains("dark")?"dark":"light");return s.useEffect(()=>{const e=()=>n(document.documentElement.classList.contains("dark")?"dark":"light");return window.addEventListener("themechange",e),()=>window.removeEventListener("themechange",e)},[]),q.jsx(ft,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function Op({className:e}){const[t,n]=s.useState(()=>"undefined"!=typeof window&&document.documentElement.classList.contains("dark"));return s.useEffect(()=>{const e=document.documentElement;t?e.classList.add("dark"):e.classList.remove("dark"),window.dispatchEvent(new CustomEvent("themechange",{detail:{isDark:t}}))},[t]),q.jsx("button",{"aria-label":"Toggle theme",onClick:()=>n(e=>!e),className:`p-2 rounded-md border transition-colors ${e??""}`,children:t?q.jsx($,{className:"h-4 w-4"}):q.jsx(B,{className:"h-4 w-4"})})}const Up=["welcome","signin","signup","create-routine","add-exercises-to-routine","exercise-setup","edit-measurements","profile-my-account","profile-device-settings"];class Fp extends s.Component{constructor(){super(...arguments),t(this,"state",{hasError:!1})}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){ne("[ErrorBoundary]",e,t)}render(){return this.state.hasError?this.props.fallback??q.jsx("div",{className:"p-4 text-black",children:"Something went wrong."}):this.props.children}}function Vp(){const{setUserToken:e}=xt();Bp();const{currentView:t,setCurrentView:n,activeTab:r,currentRoutineId:a,currentRoutineName:i,selectedExercisesForSetup:o,setSelectedExercisesForSetup:l,routineAccess:c,exerciseSetupMode:d,setExerciseSetupMode:u,handleAuthSuccess:h,navigateToSignUp:m,navigateToSignIn:p,navigateToWelcome:f,handleTabChange:g,showCreateRoutine:x,showEditMeasurements:v,handleRoutineCreated:y,closeCreateRoutine:b,closeEditMeasurements:w,completeRoutineCreation:k,handleExercisesSelected:E,closeExerciseSetup:S,closeAddExercises:j,handleExerciseSetupComplete:N,onRoutineSelection:C,closeExerciseSetupToRoutines:T,showProfileAccount:A,closeProfileAccount:_,showProfileDeviceSettings:R,closeProfileDeviceSettings:P}=function(){const[e,t]=s.useState("workouts"),[n,r]=s.useState("workouts"),[a,i]=s.useState(null),[o,l]=s.useState(""),[c,d]=s.useState(0),[u,h]=s.useState([]),[m,p]=s.useState("editable"),[f,g]=s.useState("plan"),x=e=>"UNAUTHORIZED"===e.message&&(ot.error("Session expired. Please sign in."),t("welcome"),!0);return{currentView:e,setCurrentView:t,activeTab:n,currentRoutineId:a,currentRoutineName:o,refreshTrigger:c,selectedExercisesForSetup:u,setSelectedExercisesForSetup:h,routineAccess:m,setRoutineAccess:p,exerciseSetupMode:f,setExerciseSetupMode:g,handleAuthSuccess:(e,s,n)=>{n(e,s),t("workouts"),r("workouts")},navigateToSignUp:()=>t("signup"),navigateToSignIn:()=>t("signin"),navigateToWelcome:()=>t("welcome"),handleTabChange:e=>{switch(r(e),e){case"workouts":t("workouts");break;case"progress":t("progress");break;case"profile":t("profile")}},showCreateRoutine:()=>t("create-routine"),showEditMeasurements:()=>t("edit-measurements"),handleRoutineCreated:(e,s)=>{l(e),s&&i(s),h([]),p("editable"),g("plan"),t("exercise-setup")},closeCreateRoutine:()=>t("workouts"),closeEditMeasurements:()=>t("workouts"),completeRoutineCreation:()=>{i(null),l(""),h([]),g("plan"),t("workouts"),d(e=>e+1)},handleExercisesSelected:e=>{h(e),t("exercise-setup")},closeExerciseSetup:()=>{t("add-exercises-to-routine")},closeAddExercises:()=>{t("exercise-setup")},handleExerciseSetupComplete:()=>{},onRoutineSelection:(e,s,n)=>{i(e),l(s),h([]),p(n||"editable"),g("plan"),t("exercise-setup")},closeExerciseSetupToRoutines:()=>{i(null),l(""),h([]),g("plan"),t("workouts")},handleUnauthorizedError:x,safeNavigate:async(e,s)=>{try{await e()}catch(n){ne("Navigation action failed:",n),n instanceof Error&&!x(n)&&(ot.error("Something went wrong. Please try again."),s&&t(s))}},showProfileAccount:()=>{r("profile"),t("profile-my-account")},closeProfileAccount:()=>{r("profile"),t("profile")},showProfileDeviceSettings:()=>{r("profile"),t("profile-device-settings")},closeProfileDeviceSettings:()=>{r("profile"),t("profile")}}}(),{isAuthenticated:M,authReady:D}=function({currentView:e,setCurrentView:t}){const{isAuthenticated:n,userToken:r,signOut:a}=xt(),[i,o]=s.useState(!1);return s.useEffect(()=>{Je.setToken(r)},[r]),s.useEffect(()=>{let e=!1;return(async()=>{try{await Promise.resolve()}finally{e||o(!0)}})(),()=>{e=!0}},[]),s.useEffect(()=>{i&&(n?"signin"!==e&&"signup"!==e&&"welcome"!==e||t("workouts"):"signin"!==e&&"signup"!==e&&"welcome"!==e&&t("welcome"))},[i,n,e,t]),s.useEffect(()=>{const e=e=>{"UNAUTHORIZED"===e.message&&(ot.error("Session expired. Please sign in."),a())},t=t=>{t.reason instanceof Error&&e(t.reason)};window.addEventListener("unhandledrejection",t);const s=window.fetch;return window.fetch=async(...t)=>{const n=await s(...t);if((401===n.status||403===n.status)&&r){const s=String(t[0]);(s.includes("/rest/v1/")||s.includes("/auth/v1/")||s.includes("/api/"))&&e(new Error("UNAUTHORIZED"))}return n},()=>{window.removeEventListener("unhandledrejection",t),window.fetch=s}},[a,r]),{isAuthenticated:n,authReady:i}}({currentView:t,setCurrentView:n}),I=!Up.includes(t),[$,B]=s.useState(!1),L=Dt(),O=M&&I&&!$&&!L?q.jsx(Rn,{activeTab:r,onTabChange:g}):null;return D?q.jsxs("div",{id:"app",className:"relative h-dvh flex flex-col overflow-hidden",children:[q.jsx(Op,{className:"absolute top-2 right-2"}),q.jsx("main",{className:"flex-1 min-h-0 overflow-hidden",children:q.jsx(Ip,{currentView:t,currentRoutineId:a,currentRoutineName:i,routineAccess:c,selectedExercisesForSetup:o,setSelectedExercisesForSetup:l,isAuthenticated:M,onAuthSuccess:(t,s)=>h(t,s,e),onNavigateToSignUp:m,onNavigateToSignIn:p,onNavigateToWelcome:f,onCreateRoutine:x,onEditMeasurements:v,onRoutineCreated:y,onCloseCreateRoutine:b,onCloseEditMeasurements:w,onCompleteRoutineCreation:k,onExerciseSelected:E,onCloseExerciseSetup:S,onCloseAddExercises:j,onExerciseSetupComplete:N,exerciseSetupMode:d,setExerciseSetupMode:u,onSelectRoutine:C,onCloseExerciseSetupToRoutines:T,bottomBar:O,onOverlayChange:B,onNavigateToMyAccount:A,onCloseMyAccount:_,onNavigateToDeviceSettings:R,onCloseDeviceSettings:P})})]}):q.jsx("div",{className:"h-dvh grid place-items-center",children:q.jsx("div",{className:"w-5 h-5 animate-spin border-2 border-current border-t-transparent rounded-full"})})}function Hp(){return q.jsxs(q.Fragment,{children:[q.jsx(Fp,{children:q.jsx(Vp,{})}),q.jsx(Lp,{})]})}function Wp(){return q.jsx(bt,{children:q.jsx(kt,{children:q.jsx(Hp,{})})})}"undefined"!=typeof localStorage&&null===localStorage.getItem("USE_HARD_DELETE")&&localStorage.setItem("USE_HARD_DELETE","true"),Y.createRoot(document.getElementById("root")).render(q.jsx(r.StrictMode,{children:q.jsx(Wp,{})}));export{Zu as W,Re as _,Xu as r};
